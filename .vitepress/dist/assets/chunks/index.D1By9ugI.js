function Mi(n){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(n)}var Go,Vi,Is,bo,ft,gi,Ce,Pn,ct,xo,Di,$i,bi,xi,_i,Ao,ei,Pr,Nh,cr,Li;(function(n){var e,t=function(){function w(){}return w.getVersion=function(){return x.ccall("csmGetVersion","number",[],[])},w.getLatestMocVersion=function(){return x.ccall("csmGetLatestMocVersion","number",[],[])},w.getMocVersion=function(E,C){return x.ccall("csmGetMocVersion","number",["number","number"],[E,C])},w.getSizeofModel=function(E){return x.ccall("csmGetSizeofModel","number",["number"],[E])},w.reviveMocInPlace=function(E,C){return x.ccall("csmReviveMocInPlace","number",["number","number"],[E,C])},w.initializeModelInPlace=function(E,C,L){return x.ccall("csmInitializeModelInPlace","number",["number","number","number"],[E,C,L])},w.hasMocConsistency=function(E,C){return x.ccall("csmHasMocConsistency","number",["number","number"],[E,C])},w.getParameterCount=function(E){return x.ccall("csmGetParameterCount","number",["number"],[E])},w.getParameterIds=function(E){return x.ccall("csmGetParameterIds","number",["number"],[E])},w.getParameterMinimumValues=function(E){return x.ccall("csmGetParameterMinimumValues","number",["number"],[E])},w.getParameterTypes=function(E){return x.ccall("csmGetParameterTypes","number",["number"],[E])},w.getParameterMaximumValues=function(E){return x.ccall("csmGetParameterMaximumValues","number",["number"],[E])},w.getParameterDefaultValues=function(E){return x.ccall("csmGetParameterDefaultValues","number",["number"],[E])},w.getParameterValues=function(E){return x.ccall("csmGetParameterValues","number",["number"],[E])},w.getParameterKeyCounts=function(E){return x.ccall("csmGetParameterKeyCounts","number",["number"],[E])},w.getParameterKeyValues=function(E){return x.ccall("csmGetParameterKeyValues","number",["number"],[E])},w.getPartCount=function(E){return x.ccall("csmGetPartCount","number",["number"],[E])},w.getPartIds=function(E){return x.ccall("csmGetPartIds","number",["number"],[E])},w.getPartOpacities=function(E){return x.ccall("csmGetPartOpacities","number",["number"],[E])},w.getPartParentPartIndices=function(E){return x.ccall("csmGetPartParentPartIndices","number",["number"],[E])},w.getDrawableCount=function(E){return x.ccall("csmGetDrawableCount","number",["number"],[E])},w.getDrawableIds=function(E){return x.ccall("csmGetDrawableIds","number",["number"],[E])},w.getDrawableConstantFlags=function(E){return x.ccall("csmGetDrawableConstantFlags","number",["number"],[E])},w.getDrawableDynamicFlags=function(E){return x.ccall("csmGetDrawableDynamicFlags","number",["number"],[E])},w.getDrawableTextureIndices=function(E){return x.ccall("csmGetDrawableTextureIndices","number",["number"],[E])},w.getDrawableDrawOrders=function(E){return x.ccall("csmGetDrawableDrawOrders","number",["number"],[E])},w.getDrawableRenderOrders=function(E){return x.ccall("csmGetDrawableRenderOrders","number",["number"],[E])},w.getDrawableOpacities=function(E){return x.ccall("csmGetDrawableOpacities","number",["number"],[E])},w.getDrawableMaskCounts=function(E){return x.ccall("csmGetDrawableMaskCounts","number",["number"],[E])},w.getDrawableMasks=function(E){return x.ccall("csmGetDrawableMasks","number",["number"],[E])},w.getDrawableVertexCounts=function(E){return x.ccall("csmGetDrawableVertexCounts","number",["number"],[E])},w.getDrawableVertexPositions=function(E){return x.ccall("csmGetDrawableVertexPositions","number",["number"],[E])},w.getDrawableVertexUvs=function(E){return x.ccall("csmGetDrawableVertexUvs","number",["number"],[E])},w.getDrawableIndexCounts=function(E){return x.ccall("csmGetDrawableIndexCounts","number",["number"],[E])},w.getDrawableIndices=function(E){return x.ccall("csmGetDrawableIndices","number",["number"],[E])},w.getDrawableMultiplyColors=function(E){return x.ccall("csmGetDrawableMultiplyColors","number",["number"],[E])},w.getDrawableScreenColors=function(E){return x.ccall("csmGetDrawableScreenColors","number",["number"],[E])},w.getDrawableParentPartIndices=function(E){return x.ccall("csmGetDrawableParentPartIndices","number",["number"],[E])},w.mallocMoc=function(E){return x.ccall("csmMallocMoc","number",["number"],[E])},w.mallocModelAndInitialize=function(E){return x.ccall("csmMallocModelAndInitialize","number",["number"],[E])},w.malloc=function(E){return x.ccall("csmMalloc","number",["number"],[E])},w.setLogFunction=function(E){x.ccall("csmSetLogFunction",null,["number"],[E])},w.updateModel=function(E){x.ccall("csmUpdateModel",null,["number"],[E])},w.readCanvasInfo=function(E,C,L,k){x.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[E,C,L,k])},w.resetDrawableDynamicFlags=function(E){x.ccall("csmResetDrawableDynamicFlags",null,["number"],[E])},w.free=function(E){x.ccall("csmFree",null,["number"],[E])},w.initializeAmountOfMemory=function(E){x.ccall("csmInitializeAmountOfMemory",null,["number"],[E])},w}(),i=(n.AlignofMoc=64,n.AlignofModel=16,n.MocVersion_Unknown=0,n.MocVersion_30=1,n.MocVersion_33=2,n.MocVersion_40=3,n.MocVersion_42=4,n.MocVersion_50=5,n.ParameterType_Normal=0,n.ParameterType_BlendShape=1,function(){function w(){}return w.csmGetVersion=function(){return t.getVersion()},w.csmGetLatestMocVersion=function(){return t.getLatestMocVersion()},w.csmGetMocVersion=function(E,C){return t.getMocVersion(E._ptr,C.byteLength)},w}()),s=(i=(n.Version=i,function(){function w(){}return w.csmSetLogFunction=function(E){w.logFunction=E,E=x.addFunction(w.wrapLogFunction,"vi"),t.setLogFunction(E)},w.csmGetLogFunction=function(){return w.logFunction},w.wrapLogFunction=function(E){E=x.UTF8ToString(E),w.logFunction(E)},w}()),i=(n.Logging=i,function(){function w(E){var C=t.mallocMoc(E.byteLength);C&&(new Uint8Array(x.HEAPU8.buffer,C,E.byteLength).set(new Uint8Array(E)),this._ptr=t.reviveMocInPlace(C,E.byteLength),this._ptr||t.free(C))}return w.prototype.hasMocConsistency=function(E){var C=t.mallocMoc(E.byteLength);if(C)return new Uint8Array(x.HEAPU8.buffer,C,E.byteLength).set(new Uint8Array(E)),E=t.hasMocConsistency(C,E.byteLength),t.free(C),E},w.fromArrayBuffer=function(E){return E&&(E=new w(E))._ptr?E:null},w.prototype._release=function(){t.free(this._ptr),this._ptr=0},w}()),i=(n.Moc=i,function(){function w(E){this._ptr=t.mallocModelAndInitialize(E._ptr),this._ptr&&(this.parameters=new o(this._ptr),this.parts=new h(this._ptr),this.drawables=new u(this._ptr),this.canvasinfo=new s(this._ptr))}return w.fromMoc=function(E){return(E=new w(E))._ptr?E:null},w.prototype.update=function(){t.updateModel(this._ptr)},w.prototype.release=function(){t.free(this._ptr),this._ptr=0},w}()),n.Model=i,function(w){var E,C,L,k,U,V,H;w&&(L=(E=new Float32Array(2)).length*E.BYTES_PER_ELEMENT,C=t.malloc(L),(C=new Uint8Array(x.HEAPU8.buffer,C,L)).set(new Uint8Array(E.buffer)),U=(L=new Float32Array(2)).length*L.BYTES_PER_ELEMENT,k=t.malloc(U),(k=new Uint8Array(x.HEAPU8.buffer,k,U)).set(new Uint8Array(L.buffer)),V=(U=new Float32Array(1)).length*U.BYTES_PER_ELEMENT,H=t.malloc(V),(H=new Uint8Array(x.HEAPU8.buffer,H,V)).set(new Uint8Array(U.buffer)),t.readCanvasInfo(w,C.byteOffset,k.byteOffset,H.byteOffset),E=new Float32Array(C.buffer,C.byteOffset,C.length),L=new Float32Array(k.buffer,k.byteOffset,k.length),U=new Float32Array(H.buffer,H.byteOffset,H.length),this.CanvasWidth=E[0],this.CanvasHeight=E[1],this.CanvasOriginX=L[0],this.CanvasOriginY=L[1],this.PixelsPerUnit=U[0],t.free(C.byteOffset),t.free(k.byteOffset),t.free(H.byteOffset))}),o=(n.CanvasInfo=s,function(w){this.count=t.getParameterCount(w),E=t.getParameterCount(w),this.ids=new Array(E);for(var E,C,L=new Uint32Array(x.HEAPU32.buffer,t.getParameterIds(w),E),k=0;k<L.length;k++)this.ids[k]=x.UTF8ToString(L[k]);E=t.getParameterCount(w),this.minimumValues=new Float32Array(x.HEAPF32.buffer,t.getParameterMinimumValues(w),E),E=t.getParameterCount(w),this.types=new Int32Array(x.HEAP32.buffer,t.getParameterTypes(w),E),E=t.getParameterCount(w),this.maximumValues=new Float32Array(x.HEAPF32.buffer,t.getParameterMaximumValues(w),E),E=t.getParameterCount(w),this.defaultValues=new Float32Array(x.HEAPF32.buffer,t.getParameterDefaultValues(w),E),E=t.getParameterCount(w),this.values=new Float32Array(x.HEAPF32.buffer,t.getParameterValues(w),E),E=t.getParameterCount(w),this.keyCounts=new Int32Array(x.HEAP32.buffer,t.getParameterKeyCounts(w),E),E=t.getParameterCount(w),C=new Int32Array(x.HEAP32.buffer,t.getParameterKeyCounts(w),E),this.keyValues=new Array(E);var U=new Uint32Array(x.HEAPU32.buffer,t.getParameterKeyValues(w),E);for(k=0;k<U.length;k++)this.keyValues[k]=new Float32Array(x.HEAPF32.buffer,U[k],C[k])}),h=(n.Parameters=o,function(w){this.count=t.getPartCount(w),E=t.getPartCount(w),this.ids=new Array(E);for(var E,C=new Uint32Array(x.HEAPU32.buffer,t.getPartIds(w),E),L=0;L<C.length;L++)this.ids[L]=x.UTF8ToString(C[L]);E=t.getPartCount(w),this.opacities=new Float32Array(x.HEAPF32.buffer,t.getPartOpacities(w),E),E=t.getPartCount(w),this.parentIndices=new Int32Array(x.HEAP32.buffer,t.getPartParentPartIndices(w),E)}),u=(n.Parts=h,function(){function w(E){this._modelPtr=E;for(var C,L=null,k=(this.count=t.getDrawableCount(E),C=t.getDrawableCount(E),this.ids=new Array(C),new Uint32Array(x.HEAPU32.buffer,t.getDrawableIds(E),C)),U=0;U<k.length;U++)this.ids[U]=x.UTF8ToString(k[U]);C=t.getDrawableCount(E),this.constantFlags=new Uint8Array(x.HEAPU8.buffer,t.getDrawableConstantFlags(E),C),C=t.getDrawableCount(E),this.dynamicFlags=new Uint8Array(x.HEAPU8.buffer,t.getDrawableDynamicFlags(E),C),C=t.getDrawableCount(E),this.textureIndices=new Int32Array(x.HEAP32.buffer,t.getDrawableTextureIndices(E),C),C=t.getDrawableCount(E),this.drawOrders=new Int32Array(x.HEAP32.buffer,t.getDrawableDrawOrders(E),C),C=t.getDrawableCount(E),this.renderOrders=new Int32Array(x.HEAP32.buffer,t.getDrawableRenderOrders(E),C),C=t.getDrawableCount(E),this.opacities=new Float32Array(x.HEAPF32.buffer,t.getDrawableOpacities(E),C),C=t.getDrawableCount(E),this.maskCounts=new Int32Array(x.HEAP32.buffer,t.getDrawableMaskCounts(E),C),C=t.getDrawableCount(E),this.vertexCounts=new Int32Array(x.HEAP32.buffer,t.getDrawableVertexCounts(E),C),C=t.getDrawableCount(E),this.indexCounts=new Int32Array(x.HEAP32.buffer,t.getDrawableIndexCounts(E),C),C=t.getDrawableCount(E),this.multiplyColors=new Float32Array(x.HEAPF32.buffer,t.getDrawableMultiplyColors(E),4*C),C=t.getDrawableCount(E),this.screenColors=new Float32Array(x.HEAPF32.buffer,t.getDrawableScreenColors(E),4*C),C=t.getDrawableCount(E),this.parentPartIndices=new Int32Array(x.HEAP32.buffer,t.getDrawableParentPartIndices(E),C),C=t.getDrawableCount(E),L=new Int32Array(x.HEAP32.buffer,t.getDrawableMaskCounts(E),C),this.masks=new Array(C);var V=new Uint32Array(x.HEAPU32.buffer,t.getDrawableMasks(E),C);for(U=0;U<V.length;U++)this.masks[U]=new Int32Array(x.HEAP32.buffer,V[U],L[U]);C=t.getDrawableCount(E),L=new Int32Array(x.HEAP32.buffer,t.getDrawableVertexCounts(E),C),this.vertexPositions=new Array(C);var H=new Uint32Array(x.HEAPU32.buffer,t.getDrawableVertexPositions(E),C);for(U=0;U<H.length;U++)this.vertexPositions[U]=new Float32Array(x.HEAPF32.buffer,H[U],2*L[U]);C=t.getDrawableCount(E),L=new Int32Array(x.HEAP32.buffer,t.getDrawableVertexCounts(E),C),this.vertexUvs=new Array(C);var Q=new Uint32Array(x.HEAPU32.buffer,t.getDrawableVertexUvs(E),C);for(U=0;U<Q.length;U++)this.vertexUvs[U]=new Float32Array(x.HEAPF32.buffer,Q[U],2*L[U]);C=t.getDrawableCount(E),L=new Int32Array(x.HEAP32.buffer,t.getDrawableIndexCounts(E),C),this.indices=new Array(C);var te=new Uint32Array(x.HEAPU32.buffer,t.getDrawableIndices(E),C);for(U=0;U<te.length;U++)this.indices[U]=new Uint16Array(x.HEAPU16.buffer,te[U],L[U])}return w.prototype.resetDynamicFlags=function(){t.resetDrawableDynamicFlags(this._modelPtr)},w}()),b=(i=(n.Drawables=u,function(){function w(){}return w.hasBlendAdditiveBit=function(E){return!(1&~E)},w.hasBlendMultiplicativeBit=function(E){return!(2&~E)},w.hasIsDoubleSidedBit=function(E){return!(4&~E)},w.hasIsInvertedMaskBit=function(E){return!(8&~E)},w.hasIsVisibleBit=function(E){return!(1&~E)},w.hasVisibilityDidChangeBit=function(E){return!(2&~E)},w.hasOpacityDidChangeBit=function(E){return!(4&~E)},w.hasDrawOrderDidChangeBit=function(E){return!(8&~E)},w.hasRenderOrderDidChangeBit=function(E){return!(16&~E)},w.hasVertexPositionsDidChangeBit=function(E){return!(32&~E)},w.hasBlendColorDidChangeBit=function(E){return!(64&~E)},w}()),i=(n.Utils=i,function(){function w(){}return w.initializeAmountOfMemory=function(E){16777216<E&&t.initializeAmountOfMemory(E)},w}()),n.Memory=i,e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(w){w=w||{};var E,C,L={};for(C in E=E||(w!==void 0?w:{}))E.hasOwnProperty(C)&&(L[C]=E[C]);var k,U,V,H,Q=(typeof window>"u"?"undefined":Mi(window))=="object",te=typeof importScripts=="function",ie=(typeof process>"u"?"undefined":Mi(process))=="object"&&Mi(process.versions)=="object"&&typeof process.versions.node=="string"&&!Q&&!te,ae=!Q&&!ie&&!te,ne="",le=(ie?(ne=__dirname+"/",V=function(ue,ge){var Se=Kt(ue);return Se||(k=k||require("fs"),ue=(U=U||require("path")).normalize(ue),Se=k.readFileSync(ue)),ge?Se:Se.toString()},H=function(ue){return _t((ue=(ue=V(ue,!0)).buffer?ue:new Uint8Array(ue)).buffer),ue},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ue){throw ue}),process.on("unhandledRejection",Ct),E.inspect=function(){return"[Emscripten Module object]"}):ae?(typeof read<"u"&&(V=function(ue){var ge=Kt(ue);return ge?Ht(ge):read(ue)}),H=function(ue){var ge;if(!(ge=Kt(ue))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(ue));_t(Mi(ge=read(ue,"binary"))=="object")}return ge},typeof print<"u"&&((console=typeof console>"u"?{}:console).log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(Q||te)&&(te?ne=self.location.href:document.currentScript&&(ne=document.currentScript.src),ne=(ne=e||ne).indexOf("blob:")!==0?ne.substr(0,ne.lastIndexOf("/")+1):"",V=function(ue){try{var ge=new XMLHttpRequest;return ge.open("GET",ue,!1),ge.send(null),ge.responseText}catch(Se){if(ue=Kt(ue))return Ht(ue);throw Se}},te)&&(H=function(ue){try{var ge=new XMLHttpRequest;return ge.open("GET",ue,!1),ge.responseType="arraybuffer",ge.send(null),new Uint8Array(ge.response)}catch(Se){if(ue=Kt(ue))return ue;throw Se}}),E.print||console.log.bind(console)),oe=E.printErr||console.warn.bind(console);for(C in L)L.hasOwnProperty(C)&&(E[C]=L[C]);function ye(){return{exports:function(ue,ge,Se){var we=new ArrayBuffer(8),Ve=new Int32Array(we),kt=new Float32Array(we),Tt=new Float64Array(we);function ut(a,_){Ve[a]=_}function Ut(){return Tt[0]}function Wt(a){Tt[0]=a}function He(a){kt[0]=a}function l(){return kt[0]}we=ge.buffer;var T,I,B,N,$,J,r,j,W,re,O,ee,z,p,de,be,Ie,Ye,fe,ze,lt,dt,q,Ae,bt=new Uint8Array(we);return(we=function(a,_){var M,g;if(typeof Buffer>"u")for(M=atob(_),g=0;g<M.length;g++)bt[a+g]=M.charCodeAt(g);else for(M=Buffer.from(_,"base64"),g=0;g<M.length;g++)bt[a+g]=M[g]})(1024,"QW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGludGVycG9sYXRpb24gZm9yIGJsZW5kIHNoYXBlcy4gQ29tYmluYXRpb25Db3VudCBpcyAlZC4ACgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbV11Sb3RhdGlvbkRlZm9ybWVyOiBOb3QgZm91bmQgdHJhbnNmb3JtZWQgRGlyZWN0aW9uLgoAW0NTTV0gW0VdVXBkYXRlRGVmb3JtZXJIaWVyYXJjaHkoKTogVW5rbm93biBEZWZvcm1lciBUeXBlLgoAJXMKACAgAE1PQzMAImFkZHJlc3MiIGlzIG51bGwuACUwMlggAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBGaWxlVHlwZSBpcyBpbnZhbGlkLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhpcyBtb2MzIHZlciBpcyBpbnZhbGlkIFt2ZXI6JWRdLgoAInNpemUiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgAibW9kZWwiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBIZWFkZXIgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IERhdGEgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgBbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gQ29ycnVwdGVkICBtb2MzIGZpbGUuCgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KACJtb2MiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAInNpemUiIGlzIGludmFsaWQATGl2ZTJEIEN1YmlzbSBTREsgQ29yZSBWZXJzaW9uICVkLiVkLiVkAGNzbUdldE1vY1ZlcnNpb24AY3NtSGFzTW9jQ29uc2lzdGVuY3kAY3NtUmV2aXZlTW9jSW5QbGFjZQBjc21SZWFkQ2FudmFzSW5mbwBjc21HZXRTaXplb2ZNb2RlbABjc21Jbml0aWFsaXplTW9kZWxJblBsYWNlAGNzbVVwZGF0ZU1vZGVsAGNzbUdldFBhcmFtZXRlckNvdW50AGNzbUdldFBhcmFtZXRlcklkcwBjc21HZXRQYXJhbWV0ZXJUeXBlcwBjc21HZXRQYXJhbWV0ZXJNaW5pbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlck1heGltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyRGVmYXVsdFZhbHVlcwBjc21HZXRQYXJhbWV0ZXJWYWx1ZXMAY3NtR2V0UGFydENvdW50AGNzbUdldFBhcnRJZHMAY3NtR2V0UGFydE9wYWNpdGllcwBjc21HZXRQYXJ0UGFyZW50UGFydEluZGljZXMAY3NtR2V0RHJhd2FibGVDb3VudABjc21HZXREcmF3YWJsZUlkcwBjc21HZXREcmF3YWJsZUNvbnN0YW50RmxhZ3MAY3NtR2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0RHJhd2FibGVUZXh0dXJlSW5kaWNlcwBjc21HZXREcmF3YWJsZURyYXdPcmRlcnMAY3NtR2V0RHJhd2FibGVSZW5kZXJPcmRlcnMAY3NtR2V0RHJhd2FibGVPcGFjaXRpZXMAY3NtR2V0RHJhd2FibGVNYXNrQ291bnRzAGNzbUdldERyYXdhYmxlTWFza3MAY3NtR2V0RHJhd2FibGVWZXJ0ZXhDb3VudHMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhQb3NpdGlvbnMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhVdnMAY3NtR2V0RHJhd2FibGVJbmRleENvdW50cwBjc21HZXREcmF3YWJsZUluZGljZXMAY3NtR2V0RHJhd2FibGVNdWx0aXBseUNvbG9ycwBjc21HZXREcmF3YWJsZVNjcmVlbkNvbG9ycwBjc21HZXREcmF3YWJsZVBhcmVudFBhcnRJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0UGFyYW1ldGVyS2V5Q291bnRzAGNzbUdldFBhcmFtZXRlcktleVZhbHVlcw=="),we(3228,"Cg=="),we(3267,"//////8="),we(3336,"LSsgICAwWDB4AChudWxsKQ=="),we(3360,"EQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),we(3392,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),we(3441,"Cw=="),we(3450,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),we(3499,"DA=="),we(3511,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),we(3557,"Dg=="),we(3569,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),we(3615,"EA=="),we(3627,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),we(3682,"EgAAABISEgAAAAAAAAk="),we(3731,"Cw=="),we(3743,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),we(3789,"DA=="),we(3801,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAuAAAAAKgaAAAAAAAAAwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),we(6675,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),we(6824,"BQ=="),we(6836,"DQ=="),we(6860,"DgAAAA8AAABYHAAAAAQ="),we(6884,"AQ=="),we(6899,"Cv////8="),we(7156,"gCA="),T={Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},I=ge.buffer,B=(we=ue).memory,N=Se,$=new T.Int8Array(I),J=new T.Int16Array(I),r=new T.Int32Array(I),j=new T.Uint8Array(I),W=new T.Uint16Array(I),re=new T.Uint32Array(I),O=new T.Float32Array(I),ee=new T.Float64Array(I),z=T.Math.imul,p=T.Math.fround,de=T.Math.abs,be=T.Math.clz32,Ie=T.Math.min,T.Math.max,Ye=T.Math.floor,T.Math.ceil,T.Math.sqrt,we.abort,T.NaN,fe=T.Infinity,ze=we.a,lt=we.b,dt=we.c,q=5251744,Ae=0,N[1]=function(a,_,M,g,f){a|=0,_|=0,M|=0,g|=0,f|=0;var S,c,d,v,y,A,P,R,D,F,G,X,Y,Z,K,se,ve,Pe,ke,We,vt,Dt,pt,Yt,xe=0,Ne=p(0),Je=p(0),mt=0,At=p(0),zt=p(0),qt=p(0),Ar=p(0),Tr=p(0),Er=p(0),wr=p(0),Sr=p(0),Ir=p(0),Fr=p(0),kr=p(0),Hr=p(0),Yr=p(0),ii=p(0),ni=p(0),fi=p(0),di=p(0),Ei=p(0),wi=p(0),kh=(p(0),p(0),p(0),p(0),p(0),p(0),p(0),p(0),p(0),0);if(q=Yt=q-32|0,1<=(0|f))for(S=r[16+(r[a+308>>2]+(_<<5)|0)>>2],xe=r[a+60>>2]+z(S,24)|0,_=(c=r[xe+8>>2])+-1|0,X=(y=r[xe+4>>2])+-1|0,Y=D=(S=r[r[a+152>>2]+(S<<2)>>2])+(c<<3)|0,Z=F=S+((R=z(y,d=c+1|0))<<3)|0,K=G=S+(c+R<<3)|0,pt=r[xe+12>>2],A=p(0|y),P=p(0|c),a=0;qt=O[4+(xe=(v=a<<3)+M|0)>>2],Je=p(qt*A),Ar=O[xe>>2],Ne=p(Ar*P),xe=qt>=p(1),Je=!(qt<p(0)^1)||xe|Ar>=p(1)|Ar<p(0)?(kh||(Ir=O[4+K>>2],se=O[S+4>>2],Tr=p(Ir-se),ve=O[4+Y>>2],Pe=O[4+Z>>2],Er=p(ve-Pe),Fr=p(p(Tr-Er)*p(.5)),ke=O[G>>2],We=O[S>>2],wr=p(ke-We),vt=O[D>>2],Dt=O[F>>2],Sr=p(vt-Dt),kr=p(p(wr-Sr)*p(.5)),Er=p(p(Er+Tr)*p(.5)),Sr=p(p(Sr+wr)*p(.5)),kh=1,Tr=p(p(p(p(p(se+ve)+Pe)+Ir)*p(.25))-p(Tr*p(.5))),wr=p(p(p(p(p(We+vt)+Dt)+ke)*p(.25))-p(wr*p(.5)))),qt<p(3)^1|Ar>p(-2)^1|Ar<p(3)^1|qt>p(-2)^1?(O[g+v>>2]=p(qt*kr)+p(p(Ar*Sr)+wr),Ne=p(qt*Fr),p(p(Ar*Er)+Tr)):(Ar<=p(0)?qt<=p(0)?(zt=p(p(qt+p(2))*p(.5)),At=p(p(Ar+p(2))*p(.5)),Ne=p(Fr+Fr),Ei=p(Tr-Ne),Je=p(kr+kr),wi=p(wr-Je),fi=p(Tr-p(Er+Er)),Hr=p(fi-Ne),di=p(wr-p(Sr+Sr)),Yr=p(di-Je),ii=O[S+4>>2],ni=O[S>>2]):xe?(Ne=p(Fr*p(3)),Je=p(Tr-p(Er+Er)),fi=p(Ne+Je),Hr=p(kr*p(3)),Yr=p(wr-p(Sr+Sr)),di=p(Hr+Yr),zt=p(p(qt+p(-1))*p(.5)),At=p(p(Ar+p(2))*p(.5)),ii=p(Ne+Tr),ni=p(Hr+wr),Hr=p(Fr+Je),Yr=p(kr+Yr),Ei=O[4+Z>>2],wi=O[F>>2]):(Ne=p(Tr-p(Er+Er)),xe=X,mt=p(de(Je))<p(2147483648)?~~Je:-2147483648,zt=p(0|(xe=(0|mt)==(0|y)?xe:mt)),At=p(zt/A),Hr=p(p(At*Fr)+Ne),Ir=p(At*kr),At=p(wr-p(Sr+Sr)),Yr=p(Ir+At),qt=p(p(0|(mt=xe+1|0))/A),fi=p(p(qt*Fr)+Ne),di=p(p(qt*kr)+At),At=p(p(Ar+p(2))*p(.5)),zt=p(Je-zt),xe=S+(z(xe,d)<<3)|0,Ei=O[xe+4>>2],wi=O[xe>>2],xe=S+(z(mt,d)<<3)|0,ii=O[xe+4>>2],ni=O[xe>>2]):Ar>=p(1)?qt<=p(0)?(zt=p(p(qt+p(2))*p(.5)),At=p(p(Ar+p(-1))*p(.5)),Ne=p(Fr+Fr),Hr=p(p(Er+Tr)-Ne),Je=p(kr+kr),Yr=p(p(Sr+wr)-Je),ii=p(p(Er*p(3))+Tr),Ei=p(ii-Ne),ni=p(p(Sr*p(3))+wr),wi=p(ni-Je),fi=O[4+Y>>2],di=O[D>>2]):xe?(Ne=p(Fr*p(3)),fi=p(Ne+p(Er+Tr)),Je=p(kr*p(3)),di=p(Je+p(Sr+wr)),Ir=Ne,Ne=p(p(Er*p(3))+Tr),ii=p(Ir+Ne),Ir=Je,Je=p(p(Sr*p(3))+wr),ni=p(Ir+Je),zt=p(p(qt+p(-1))*p(.5)),At=p(p(Ar+p(-1))*p(.5)),Ei=p(Fr+Ne),wi=p(kr+Je),Hr=O[4+K>>2],Yr=O[G>>2]):(Ne=p(p(Er*p(3))+Tr),xe=X,mt=p(de(Je))<p(2147483648)?~~Je:-2147483648,zt=p(0|(xe=(0|mt)==(0|y)?xe:mt)),At=p(zt/A),Ei=p(p(At*Fr)+Ne),Ir=p(At*kr),At=p(p(Sr*p(3))+wr),wi=p(Ir+At),qt=p(p(0|(mt=xe+1|0))/A),ii=p(p(qt*Fr)+Ne),ni=p(p(qt*kr)+At),At=p(p(Ar+p(-1))*p(.5)),zt=p(Je-zt),xe=S+(z(xe,d)+c<<3)|0,Hr=O[xe+4>>2],Yr=O[xe>>2],xe=S+(z(mt,d)+c<<3)|0,fi=O[xe+4>>2],di=O[xe>>2]):qt<=p(0)?(zt=p(p(qt+p(2))*p(.5)),xe=_,mt=p(de(Je=Ne))<p(2147483648)?~~Ne:-2147483648,Ne=p(0|(xe=(0|mt)==(0|c)?xe:mt)),At=p(Je-Ne),Ne=p(Ne/P),Je=p(Fr+Fr),Hr=p(p(p(Ne*Er)+Tr)-Je),Ir=p(p(Ne*Sr)+wr),Ne=p(kr+kr),Yr=p(Ir-Ne),qt=p(p(0|(mt=xe+1|0))/P),Ei=p(p(p(qt*Er)+Tr)-Je),wi=p(p(p(qt*Sr)+wr)-Ne),fi=O[4+(xe=S+(xe<<3)|0)>>2],di=O[xe>>2],ii=O[4+(xe=S+(mt<<3)|0)>>2],ni=O[xe>>2]):xe?(Ir=Je=p(Fr*p(3)),xe=_,mt=p(de(Ne))<p(2147483648)?~~Ne:-2147483648,At=p(0|(xe=(0|mt)==(0|c)?xe:mt)),zt=p(At/P),fi=p(Ir+p(p(zt*Er)+Tr)),Ar=p(kr*p(3)),di=p(Ar+p(p(zt*Sr)+wr)),Ir=Je,Je=p(p(0|(mt=xe+1|0))/P),ii=p(Ir+p(p(Je*Er)+Tr)),ni=p(Ar+p(p(Je*Sr)+wr)),zt=p(p(qt+p(-1))*p(.5)),At=p(Ne-At),Hr=O[4+(xe=S+(xe+R<<3)|0)>>2],Yr=O[xe>>2],Ei=O[4+(xe=S+(mt+R<<3)|0)>>2],wi=O[xe>>2]):(ee[16+Yt>>3]=qt,r[Yt>>2]=a,ee[8+Yt>>3]=Ar,Te(4,1107,Yt)),p(At+zt)<=p(1)?(O[g+v>>2]=p(Yr+p(p(wi-Yr)*At))+p(p(di-Yr)*zt),Ne=p(Hr+p(p(Ei-Hr)*At)),p(p(fi-Hr)*zt)):(Ne=p(p(1)-At),Je=p(p(1)-zt),O[g+v>>2]=p(ni+p(p(di-ni)*Ne))+p(p(wi-ni)*Je),Ne=p(ii+p(p(fi-ii)*Ne)),p(p(Ei-ii)*Je)))):(xe=p(de(Ir=Je))<p(2147483648)?~~Je:-2147483648,zt=p(Ir-p(0|xe)),mt=p(de(Je=Ne))<p(2147483648)?~~Ne:-2147483648,At=p(Je-p(0|mt)),xe=mt+z(xe,d)|0,pt?(Ne=p(p(1)-zt),Je=p(p(1)-At),mt=S+(xe<<3)|0,xe=S+(xe+d<<3)|0,O[g+v>>2]=p(p(p(Ne*p(Je*O[mt>>2]))+p(Ne*p(At*O[mt+8>>2])))+p(zt*p(Je*O[xe>>2])))+p(zt*p(At*O[xe+8>>2])),Ne=p(p(p(Ne*p(Je*O[mt+4>>2]))+p(Ne*p(At*O[mt+12>>2])))+p(zt*p(Je*O[xe+4>>2]))),p(zt*p(At*O[xe+12>>2]))):p(At+zt)<=p(1)?(Ne=p(p(p(1)-At)-zt),mt=S+(xe<<3)|0,xe=S+(xe+d<<3)|0,O[g+v>>2]=p(p(Ne*O[mt>>2])+p(At*O[mt+8>>2]))+p(zt*O[xe>>2]),Ne=p(p(Ne*O[mt+4>>2])+p(At*O[mt+12>>2])),p(zt*O[xe+4>>2])):(Ne=p(p(At+p(-1))+zt),mt=S+(xe+d<<3)|0,Je=p(p(1)-At),qt=p(p(1)-zt),xe=S+(xe<<3)|0,O[g+v>>2]=p(p(Ne*O[mt+8>>2])+p(Je*O[mt>>2]))+p(qt*O[xe+8>>2]),Ne=p(p(Ne*O[mt+12>>2])+p(Je*O[mt+4>>2])),p(qt*O[xe+12>>2]))),O[4+(g+v|0)>>2]=Ne+Je,(0|f)!=(0|(a=a+1|0)););q=32+Yt|0},N[2]=function(a,_){a|=0,_|=0;var M=0,g=0,f=0,S=0,c=0,d=p(0),v=0,y=0,A=(p(0),0),P=0;S=r[a+320>>2],M=r[a+316>>2],c=r[a+308>>2],(0|(g=r[8+(f=c+(_<<5)|0)>>2]))==-1?(r[(P=M)+(M=_<<2)>>2]=r[r[a+148>>2]+(r[f+16>>2]<<2)>>2],r[M+S>>2]=1065353216):(v=r[f+16>>2],y=r[r[a+152>>2]+(v<<2)>>2],N[r[24+(c+(g<<5)|0)>>2]](a,g,y,y,r[16+(r[a+60>>2]+z(v,24)|0)>>2]),d=O[r[a+148>>2]+(r[f+16>>2]<<2)>>2],f=r[f+8>>2]<<2,O[(g=_<<2)+M>>2]=d*O[f+M>>2],r[g+S>>2]=r[f+S>>2]),4<=j[r[a>>2]+4|0]&&(S=_<<2,M=r[a+308>>2]+(_<<5)|0,g=r[M+16>>2]<<2,f=r[a+328>>2],_=r[a+324>>2],(0|(c=r[M+8>>2]))==-1?(c=r[a+156>>2],r[(M=S<<2)+_>>2]=r[c+(g<<=2)>>2],r[(v=4|M)+_>>2]=r[(y=4|g)+c>>2],r[(A=8|M)+_>>2]=r[c+(P=8|g)>>2],r[_+((S|=3)<<2)>>2]=1065353216,a=r[a+160>>2],r[M+f>>2]=r[a+g>>2],r[f+v>>2]=r[a+y>>2],r[f+A>>2]=r[a+P>>2]):(g=(y=g<<2)+r[a+156>>2]|0,O[(M=(v=S<<2)+_|0)>>2]=O[g>>2]*O[(c=(A=c<<4)+_|0)>>2],O[M+4>>2]=O[g+4>>2]*O[c+4>>2],O[M+8>>2]=O[g+8>>2]*O[c+8>>2],r[_+((S|=3)<<2)>>2]=1065353216,a=y+r[a+160>>2]|0,P=O[a>>2],d=O[(M=f+A|0)>>2],O[(_=f+v|0)>>2]=p(P+d)-p(P*d),P=O[a+4>>2],d=O[M+4>>2],O[_+4>>2]=p(P+d)-p(P*d),P=O[a+8>>2],d=O[M+8>>2],O[_+8>>2]=p(P+d)-p(P*d)),r[f+(S<<2)>>2]=1065353216)},N[3]=function(a,_,M,g,f){a|=0,_|=0,M|=0,g|=0,f|=0;var S,c,d,v,y,A=0,P=(A=(p(0),p(0),p(0),p(0),p(0),p(0),p(0),p(0),(_=r[16+(r[a+308>>2]+(_<<5)|0)>>2])<<2),function(G){var X,Y,Z,K,se=p(0);q=Z=q-16|0,He(G);r:if((X=2147483647&(K=Ve[0]))>>>0<=1061752794)se=p(1),X>>>0<964689920||(se=Oe(+G));else if(X>>>0<=1081824209)Y=+G,se=1075235812<=X>>>0?p(-Oe(((0|K)<0?3.141592653589793:-3.141592653589793)+Y)):et((0|K)<=-1?1.5707963267948966+Y:1.5707963267948966-Y);else if(X>>>0<=1088565717)se=1085271520<=X>>>0?Oe(+G+((0|K)<0?6.283185307179586:-6.283185307179586)):et((0|K)<=-1?-4.71238898038469-+G:+G-4.71238898038469);else if(se=p(G-G),!(2139095040<=X>>>0))if((X=3&ri(G,8+Z|0))>>>0<=2){switch(X-1|0){default:se=Oe(ee[8+Z>>3]);break r;case 0:se=et(-ee[8+Z>>3]);break r;case 1:}se=p(-Oe(ee[8+Z>>3]))}else se=et(ee[8+Z>>3]);return q=16+Z|0,se}(F=p(p(p(O[4+(r[a+168>>2]+z(_,12)|0)>>2]+O[A+r[a+284>>2]>>2])*p(3.1415927410125732))/p(180)))),R=O[A+r[a+272>>2]>>2],D=r[A+r[a+292>>2]>>2],F=function(G){var X,Y,Z,K=0;q=Y=q-16|0,He(G);r:if((X=2147483647&(Z=Ve[0]))>>>0<=1061752794)X>>>0<964689920||(G=et(+G));else if(X>>>0<=1081824209)K=+G,G=X>>>0<=1075235811?(0|Z)<=-1?p(-Oe(K+1.5707963267948966)):Oe(K+-1.5707963267948966):et(-(((0|Z)<0?3.141592653589793:-3.141592653589793)+K));else if(X>>>0<=1088565717)K=+G,G=X>>>0<=1085271519?(0|Z)<=-1?Oe(K+4.71238898038469):p(-Oe(K+-4.71238898038469)):et(((0|Z)<0?6.283185307179586:-6.283185307179586)+K);else if(2139095040<=X>>>0)G=p(G-G);else if((X=3&ri(G,8+Y|0))>>>0<=2){switch(X-1|0){default:G=et(ee[8+Y>>3]);break r;case 0:G=Oe(ee[8+Y>>3]);break r;case 1:}G=et(-ee[8+Y>>3])}else G=p(-Oe(ee[8+Y>>3]));return q=16+Y|0,G}(F);if((_=0)<(0|f))for(P=p(R*P),c=p(D?-1:1),v=p(P*c),S=r[A+r[a+288>>2]>>2]?p(-1):p(1),y=p(p(R*F)*S),P=p(P*S),R=p(p(R*p(-F))*c),F=O[A+r[a+280>>2]>>2],c=O[A+r[a+276>>2]>>2];A=(a=_<<3)+g|0,S=O[(a=a+M|0)>>2],d=O[a+4>>2],O[A+4>>2]=F+p(p(y*S)+p(v*d)),O[A>>2]=c+p(p(P*S)+p(R*d)),(0|f)!=(0|(_=_+1|0)););},N[4]=function(a,_){a|=0,_|=0;var M,g,f,S,c,d,v=0,y=0,A=0,P=p(0),R=0,D=0,F=p(0),G=0,X=0,Y=0;if(p(0),p(0),p(0),p(0),q=d=q+-64|0,G=r[a+320>>2],X=r[a+316>>2],y=r[a+308>>2],(0|(R=r[8+(A=y+(_<<5)|0)>>2]))==-1)v=r[A+16>>2]<<2,r[(y=_<<2)+X>>2]=r[v+r[a+268>>2]>>2],r[y+G>>2]=r[v+r[a+272>>2]>>2];else{v=r[A+16>>2]<<2,Y=r[v+r[a+276>>2]>>2],r[24+d>>2]=Y,v=r[v+r[a+280>>2]>>2],r[28+d>>2]=v,r[16+d>>2]=0,g=r[12+(D=y+(R<<5)|0)>>2]==1?p(-10):p(-.10000000149011612),O[20+d>>2]=g,r[60+d>>2]=v,r[56+d>>2]=Y,N[r[D+24>>2]](a,R,56+d|0,48+d|0,1),P=p(1),y=9;r:{for(;;){if(v=y,F=p(P*p(0)),O[32+d>>2]=F+O[56+d>>2],M=p(g*P),O[36+d>>2]=M+O[60+d>>2],N[r[D+24>>2]](a,R,32+d|0,40+d|0,1),f=p(O[44+d>>2]-O[52+d>>2]),O[44+d>>2]=f,S=p(O[40+d>>2]-O[48+d>>2]),O[40+d>>2]=S,f!=p(0)||S!=p(0)){y=r[44+d>>2],r[8+d>>2]=r[40+d>>2],r[12+d>>2]=y;break r}if(O[32+d>>2]=O[56+d>>2]-F,O[36+d>>2]=O[60+d>>2]-M,N[r[D+24>>2]](a,R,32+d|0,40+d|0,1),F=p(O[40+d>>2]-O[48+d>>2]),O[40+d>>2]=F,M=p(O[44+d>>2]-O[52+d>>2]),(O[44+d>>2]=M)!=p(0)||F!=p(0)){O[12+d>>2]=-M,O[8+d>>2]=-F;break r}if(y=v+-1|0,P=p(P*p(.10000000149011612)),!v)break}Te(3,1311,0)}P=function(Z,K){var se=p(0);if((se=p(zi(O[4+Z>>2],O[Z>>2])-zi(O[4+K>>2],O[K>>2])))<p(-3.1415927410125732))for(;(se=p(se+p(6.2831854820251465)))<p(-3.1415927410125732););if(se>p(3.1415927410125732))for(;(se=p(se+p(-6.2831854820251465)))>p(3.1415927410125732););return se}(16+d|0,8+d|0),N[r[D+24>>2]](a,r[A+8>>2],24+d|0,24+d|0,1),y=r[A+16>>2]<<2,r[y+r[a+276>>2]>>2]=r[24+d>>2],r[y+r[a+280>>2]>>2]=r[28+d>>2],v=y+r[a+284>>2]|0,O[v>>2]=O[v>>2]+p(p(P*p(-180))/p(3.1415927410125732)),A=r[A+8>>2]<<2,O[(v=_<<2)+X>>2]=O[y+r[a+268>>2]>>2]*O[A+X>>2],y=y+r[a+272>>2]|0,P=p(O[y>>2]*O[A+G>>2]),O[v+G>>2]=P,O[y>>2]=P}4<=j[r[a>>2]+4|0]&&(v=_<<2,A=r[a+308>>2]+(_<<5)|0,R=r[A+16>>2]<<2,y=r[a+328>>2],_=r[a+324>>2],(0|(D=r[A+8>>2]))==-1?(D=r[a+296>>2],r[(A=v<<2)+_>>2]=r[D+(R<<=2)>>2],r[(G=4|A)+_>>2]=r[(X=4|R)+D>>2],r[(Y=8|A)+_>>2]=r[D+(c=8|R)>>2],r[_+((v|=3)<<2)>>2]=1065353216,a=r[a+300>>2],r[y+A>>2]=r[a+R>>2],r[y+G>>2]=r[a+X>>2],r[y+Y>>2]=r[a+c>>2]):(R=(X=R<<2)+r[a+296>>2]|0,O[(A=(G=v<<2)+_|0)>>2]=O[R>>2]*O[(D=(Y=D<<4)+_|0)>>2],O[A+4>>2]=O[R+4>>2]*O[D+4>>2],O[A+8>>2]=O[R+8>>2]*O[D+8>>2],r[_+((v|=3)<<2)>>2]=1065353216,a=X+r[a+300>>2]|0,P=O[a>>2],F=O[(A=y+Y|0)>>2],O[(_=y+G|0)>>2]=p(P+F)-p(P*F),P=O[a+4>>2],F=O[A+4>>2],O[_+4>>2]=p(P+F)-p(P*F),P=O[a+8>>2],F=O[A+8>>2],O[_+8>>2]=p(P+F)-p(P*F)),r[y+(v<<2)>>2]=1065353216),q=64+d|0},N[5]=function(a,_){return a|=0,_|=0,p(0),p(0),0|((a=O[a>>2])<(_=O[_>>2])?-1:_<a)},N[6]=function(a,_,M,g){a|=0,_|=0,M|=0,g|=0;var f=0,S=0,c=p(0),d=0,v=0,y=0,A=0,P=0;if(1<=(0|(d=r[a+8>>2])))for(y=r[a+12>>2],v=r[a+20>>2];O[(S=f<<2)+y>>2]=O[_+S>>2]*O[S+v>>2],(0|(f=f+1|0))<(0|d););if(!((0|(d=r[a>>2]))<1))if(y=r[a+4>>2],g)for(S=_=0;;){if(r[g>>2]){if((0|(f=r[(v=_<<2)+r[a+16>>2]>>2]))<1)c=p(0);else for(A=f+S|0,P=r[a+12>>2],c=p(0),f=S;c=p(c+O[P+(f<<2)>>2]),(0|(f=f+1|0))<(0|A););O[M+v>>2]=c}if(g=g+4|0,S=r[y+(_<<2)>>2]+S|0,!((0|(_=_+1|0))<(0|d)))break}else for(v=r[a+16>>2],_=g=0;;){if((0|(f=r[(S=g<<2)+v>>2]))<=0)c=p(0);else for(A=_+f|0,P=r[a+12>>2],c=p(0),f=_;c=p(c+O[P+(f<<2)>>2]),(0|(f=f+1|0))<(0|A););if(O[M+S>>2]=c,_=r[S+y>>2]+_|0,!((0|(g=g+1|0))<(0|d)))break}},N[7]=function(a,_,M,g){a|=0,_|=0,M|=0,g|=0;var f=0,S=p(0),c=0,d=0,v=0,y=0,A=0;if(1<=(0|(y=r[a+8>>2])))for(d=r[a+12>>2],v=r[a+20>>2];O[(c=f<<2)+d>>2]=O[_+c>>2]*O[c+v>>2],(0|(f=f+1|0))<(0|y););if(!((0|(f=r[a>>2]))<1))if(y=r[a+4>>2],g)for(c=_=0;;){if(r[g>>2]){if((0|(f=r[(d=_<<2)+r[a+16>>2]>>2]))<1)S=p(0);else for(v=f+c|0,A=r[a+12>>2],S=p(0),f=c;S=p(S+O[A+(f<<2)>>2]),(0|(f=f+1|0))<(0|v););f=M+d|0,S=p(S+p(.0010000000474974513)),d=p(de(S))<p(2147483648)?~~S:-2147483648,r[f>>2]=d,f=r[a>>2]}if(g=g+4|0,c=r[y+(_<<2)>>2]+c|0,!((0|(_=_+1|0))<(0|f)))break}else for(d=r[a+16>>2],_=g=0;;){if((0|(f=r[(c=g<<2)+d>>2]))<=0)S=p(0);else for(v=_+f|0,A=r[a+12>>2],S=p(0),f=_;S=p(S+O[A+(f<<2)>>2]),(0|(f=f+1|0))<(0|v););if(f=M+c|0,S=p(S+p(.0010000000474974513)),v=p(de(S))<p(2147483648)?~~S:-2147483648,r[f>>2]=v,_=r[c+y>>2]+_|0,!((0|(g=g+1|0))<r[a>>2]))break}},N[8]=function(a,_,M,g,f,S){a|=0,_|=0,M|=0,g|=0,f|=0,S|=0;var c,d,v=0,y=0,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=p(0),K=0,se=r[a>>2];if(!((0|se)<1))if(c=f<<2,d=r[a+4>>2],S)for(;;){if(r[S>>2]&&(A=r[(v=P<<2)+r[a+16>>2]>>2],F=r[M+v>>2],y=r[g+v>>2],(v=(0|(G=z(y,f)))<1)||it(F,0,z(y,c)),!(v|(0|A)<1)))for(X=A+D|0,Y=r[a+20>>2],v=D;;){for(Z=O[(y=v<<2)+Y>>2],K=r[_+y>>2],R=0;O[(y=(A=R<<2)+F|0)>>2]=O[y>>2]+p(Z*O[A+K>>2]),(0|G)!=(0|(R=R+1|0)););if(!((0|(v=v+1|0))<(0|X)))break}if(S=S+4|0,D=r[(P<<2)+d>>2]+D|0,!((0|(P=P+1|0))<(0|se)))break}else for(S=0;;){if(A=r[(P=S<<2)+r[a+16>>2]>>2],F=r[M+P>>2],y=r[g+P>>2],(v=(0|(G=z(y,f)))<1)||it(F,0,z(y,c)),!(v|(0|A)<=0))for(X=A+D|0,Y=r[a+20>>2],v=D;;){for(Z=O[(y=v<<2)+Y>>2],K=r[_+y>>2],R=0;O[(y=(A=R<<2)+F|0)>>2]=O[y>>2]+p(Z*O[A+K>>2]),(0|G)!=(0|(R=R+1|0)););if(!((0|(v=v+1|0))<(0|X)))break}if(D=r[P+d>>2]+D|0,!((0|(S=S+1|0))<(0|se)))break}},N[9]=function(a){var _,M,g,f=0,S=0,c=0,d=0;if(!(r[648+(a|=0)>>2]||(0|(f=r[a+332>>2]))<1))for(M=(S=r[a+336>>2])+z(f,20)|0,f=r[a+424>>2],d=r[a+444>>2];;){if(r[f>>2]&&!((0|(c=r[S+16>>2]))<(a=1)))for(c<<=1,g=r[d>>2];O[(_=(a<<2)+g|0)>>2]=-O[_>>2],(0|(a=a+2|0))<(0|c););if(d=d+4|0,f=f+4|0,!((S=S+20|0)>>>0<M>>>0))break}},N[10]=function(a,_,M){var g;return De(g=r[20+(a|=0)>>2],_|=0,_=(M|=0)>>>0<(_=r[a+16>>2]-g|0)>>>0?M:_),r[a+20>>2]=_+r[a+20>>2],0|M},N[11]=function(a,_,M,g,f,S){a|=0,_=+_,M|=0,g|=0,f|=0,S|=0;var c,d,v,y,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0;if(r[44+(q=v=q-560|0)>>2]=0,Wt(+_),A=0|Ve[1],d=4294967295<Ve[0]>>>0?0:1,y=(0|A)<-1||(0|A)<=-1&&d?(Wt(_=-_),A=0|Ve[1],Ve[0],ke=1,3840):2048&f?(ke=1,3843):(ke=1&f)?3846:3841,2146435072&~A)if(_=function vt(Dt,pt){var Yt,xe,Ne=0;if(Wt(+Dt),Ne=0|Ve[1],Yt=0|Ve[0],(0|(Ne=(xe=Ne)>>>20&2047))!=2047){if(!Ne)return Ne=pt,pt=Dt==0?0:(Dt=vt(18446744073709552e3*Dt,pt),r[pt>>2]+-64|0),r[Ne>>2]=pt,Dt;r[pt>>2]=Ne+-1022,ut(0,0|Yt),ut(1,-2146435073&xe|1071644672),Dt=+Ut()}return Dt}(_,44+v|0),(_+=_)!=0&&(r[44+v>>2]=r[44+v>>2]+-1),c=16+v|0,(0|(d=32|S))==97){if(se=(K=32&S)?9+y|0:y,!(11<g>>>0)&&(A=12-g|0)){for(ve=8;ve*=16,A=A+-1|0;);_=j[0|se]==45?-(ve+(-_-ve)):_+ve-ve}for((0|c)==(0|(A=$e((R=(A=r[44+v>>2])>>31)^A+R,0,c)))&&($[15+v|0]=48,A=15+v|0),F=2|ke,R=r[44+v>>2],$[0|(Z=A+-2|0)]=S+15,$[A+-1|0]=(0|R)<0?45:43,A=8&f,P=16+v|0;S=P,Y=K,R=de(_)<2147483648?~~_:-2147483648,$[0|P]=Y|j[R+3824|0],((P=S+1|0)-(16+v|0)|0)!=1|((_=16*(_-(0|R)))==0?!(A|0<(0|g)):0)||($[S+1|0]=46,P=S+2|0),_!=0;);Le(a,32,M,G=(S=!g|(0|g)<=((P-v|0)-18|0)?((c-(16+v|0)|0)-Z|0)+P|0:2+((g+c|0)-Z|0)|0)+F|0,f),gt(a,se,F),Le(a,48,M,G,65536^f),gt(a,16+v|0,g=P-(16+v|0)|0),Le(a,48,S-((A=g)+(g=c-Z|0)|0)|0,0,0),gt(a,Z,g)}else{for(A=(0|g)<0,_==0?D=r[44+v>>2]:(D=r[44+v>>2]+-28|0,r[44+v>>2]=D,_*=268435456),X=A?6:g,R=K=(0|D)<0?48+v|0:336+v|0;R=(g=R)+4|0,(_=1e9*(_-((r[g>>2]=A=_<4294967296&0<=_?~~_>>>0:0)>>>0)))!=0;);if((0|D)<1)A=R,P=K;else for(P=K;;){if(Z=(0|D)<29?D:29,!((A=R+-4|0)>>>0<P>>>0)){for(g=Z,Y=0;We=Y,Y=r[(se=A)>>2],F=31&g,F=32<=(63&g)>>>(G=0)?(D=Y<<F,0):(D=(1<<F)-1&Y>>>32-F,Y<<F),G=D+G|0,G=(Y=We+F|0)>>>0<F>>>0?G+1|0:G,We=se,se=hs(Y=us(F=Y,G,1e9),Ae,1e9),r[We>>2]=F-se,P>>>0<=(A=A+-4|0)>>>0;);(g=Y)&&(r[(P=P+-4|0)>>2]=g)}for(;P>>>0<(A=R)>>>0&&!r[(R=A+-4|0)>>2];);if(D=r[44+v>>2]-Z|0,R=A,!(0<(0|(r[44+v>>2]=D))))break}if((0|D)<=-1)for(Pe=1+((X+25|0)/9|0)|0,Z=(0|d)==102;;){if(Y=(0|D)<-9?9:0-D|0,A>>>0<=P>>>0)P=r[P>>2]?P:P+4|0;else{for(se=1e9>>>Y,F=~(-1<<Y),D=0,R=P;g=r[R>>2],r[R>>2]=(g>>>Y)+D,D=z(se,g&F),(R=R+4|0)>>>0<A>>>0;);P=r[P>>2]?P:P+4|0,D&&(r[A>>2]=D,A=A+4|0)}if(D=Y+r[44+v>>2]|0,A=(0|Pe)<A-(g=Z?K:P)>>2?g+(Pe<<2)|0:A,!((0|(r[44+v>>2]=D))<0))break}if(!(A>>>(R=0)<=P>>>0||(R=z(K-P>>2,9),(g=r[P>>2])>>>0<(D=10))))for(;R=R+1|0,(D=z(D,10))>>>0<=g>>>0;);if((0|(g=(X-((0|d)==102?0:R)|0)-((0|d)==103&!!(0|X))|0))<(z(A-K>>2,9)+-9|0)){if(G=(K+((g=(0|(F=g+9216|0))/9|0)<<2)|0)-4092|0,D=10,(0|(g=1+(F-z(g,9)|0)|0))<=8)for(;D=z(D,10),(0|(g=g+1|0))!=9;);if(Pe=G+4|0,((Z=(se=r[G>>2])-z(D,F=(se>>>0)/(D>>>0)|0)|0)||(0|Pe)!=(0|A))&&(ve=Z>>>0<(g=D>>>1)>>>0?.5:(0|A)==(0|Pe)&&(0|g)==(0|Z)?1:1.5,_=1&F?9007199254740994:9007199254740992,!ke|j[0|y]!=45||(ve=-ve,_=-_),r[G>>2]=g=se-Z|0,_+ve!=_)){if(1e9<=(r[G>>2]=g=g+D|0)>>>0)for(;(G=G+-4|(r[G>>2]=0))>>>0<P>>>0&&(r[(P=P+-4|0)>>2]=0),g=r[G>>2]+1|0,999999999<(r[G>>2]=g)>>>0;);if(R=z(K-P>>2,9),!((g=r[P>>2])>>>0<(D=10)))for(;R=R+1|0,(D=z(D,10))>>>0<=g>>>0;);}A=(g=G+4|0)>>>0<A>>>0?g:A}r:{for(;;){if((Z=A)>>>(se=0)<=P>>>0)break r;if(r[(A=Z+-4|0)>>2])break}se=1}if((0|d)!=103)F=8&f;else if(X=((g=(0|R)<(0|(A=X||1))&-5<(0|R))?-1^R:-1)+A|0,S=(g?-1:-2)+S|0,!(F=8&f)){if(A=9,se&&(F=r[Z+-4>>2])&&!((F>>>(A=0))%(g=10)))for(;A=A+1|0,!((F>>>0)%((g=z(g,10))>>>0)););g=z(Z-K>>2,9)+-9|0,X=(32|S)==102?((F=0)|X)<(0|(g=0<(0|(g=g-A|0))?g:0))?X:g:((F=0)|X)<(0|(g=0<(0|(g=(g+R|0)-A|0))?g:0))?X:g}if(G=!!(0|(D=X|F)),g=a,We=M,A=0<(0|R)?R:0,(0|(Y=32|S))!=102){if((c-(A=$e((A=R>>31)+R^A,0,c))|0)<=1)for(;$[0|(A=A+-1|0)]=48,(c-A|0)<2;);$[0|(Pe=A+-2|0)]=S,$[A+-1|0]=(0|R)<0?45:43,A=c-Pe|0}if(Le(g,32,We,G=1+(A+(G+(X+ke|0)|0)|0)|0,f),gt(a,y,ke),Le(a,48,M,G,65536^f),(0|Y)==102){for(g=16+v|8,R=16+v|9,P=S=K>>>0<P>>>0?K:P;;){if(A=$e(r[P>>2],0,R),(0|S)!=(0|P)){if(!(A>>>0<=16+v>>>0))for(;$[0|(A=A+-1|0)]=48,16+v>>>0<A>>>0;);}else(0|A)==(0|R)&&($[24+v|0]=48,A=g);if(gt(a,A,R-A|0),!((P=P+4|0)>>>0<=K>>>0))break}D&&gt(a,3875,1);r:if(!((0|X)<1|Z>>>0<=P>>>0))for(;;){if(16+v>>>0<(A=$e(r[P>>2],0,R))>>>0)for(;$[0|(A=A+-1|0)]=48,16+v>>>0<A>>>0;);if(gt(a,A,(0|X)<9?X:9),X=X+-9|0,Z>>>0<=(P=P+4|0)>>>0)break r;if(!(0<(0|X)))break}Le(a,48,X+9|0,9,0)}else{r:if(!((0|X)<0))for(S=se?Z:P+4|0,g=16+v|8,K=16+v|9,R=P;;){if((0|K)==(0|(A=$e(r[R>>2],0,K)))&&($[24+v|0]=48,A=g),(0|P)!=(0|R)){if(!(A>>>0<=16+v>>>0))for(;$[0|(A=A+-1|0)]=48,16+v>>>0<A>>>0;);}else gt(a,A,1),A=A+1|0,(0|X)<1&&!F||gt(a,3875,1);if(gt(a,Y=A,(0|(A=K-A|0))<(0|X)?A:X),X=X-A|0,S>>>0<=(R=R+4|0)>>>0)break r;if(!(-1<(0|X)))break}Le(a,48,X+18|0,18,0),gt(a,Pe,c-Pe|0)}}else Le(a,32,M,G=ke+3|0,-65537&f),gt(a,y,ke),g=S>>>5&1,gt(a,_!=_?g?3867:3871:g?3859:3863,3);return Le(a,32,M,G,8192^f),q=560+v|0,0|((0|G)<(0|M)?M:G)},N[12]=function(a,_){a|=0;var M=_|=0;_=r[_>>2]+15&-16,r[M>>2]=_+16,M=a,a=function(g,f,S,c){var d,v,y,A=0,P=0,R=0;return q=v=q-32|0,A=(y=A=2147483647&c)-1006698496|0,P=A=(d=P=R=S)>>>0<0?A+1|0:A,A=y-1140785152|0,(0|(A=R>>>0<0?A+1|0:A))==(0|P)&d>>>0<R>>>0|P>>>0<A>>>0?(A=c<<4|S>>>28,S=S<<4|f>>>28,(0|(R=f&=268435455))==134217728&1<=g>>>0|134217728<f>>>0?(A=A+1073741824|0,(g=S+1|0)>>>0<1&&(A=A+1|0),P=g):(A=A-(((P=S)>>>0<0)+-1073741824|0)|0,g|134217728^R||((g=P+(1&P)|0)>>>0<P>>>0&&(A=A+1|0),P=g))):(!R&(0|y)==2147418112?!(g|f):(0|y)==2147418112&R>>>0<0|y>>>0<2147418112)?(A=2146435072,((P=0)|y)==1140785151&4294967295<R>>>0|1140785151<y>>>0||(R=y>>>16)>>>(A=0)<15249||(function(D,F,G,X,Y,Z){var K,se,ve=0,Pe=0;64&Z?(F=31&(G=Z-64|0),F=32<=(63&G)>>>0?(G=0,Y>>>F):(G=Y>>>F,((1<<F)-1&Y)<<32-F|X>>>F),Y=X=0):Z&&(Pe=Y,ve=31&(se=64-Z|0),se=32<=(63&se)>>>0?(Pe=X<<ve,0):(Pe=(1<<ve)-1&X>>>32-ve|Pe<<ve,X<<ve),K=F,F=31&(ve=Z),F=32<=(63&ve)>>>0?(ve=0,G>>>F):(ve=G>>>F,((1<<F)-1&G)<<32-F|K>>>F),F|=se,G=ve|Pe,ve=X,X=31&Z,X=32<=(63&Z)>>>0?(Pe=0,Y>>>X):(Pe=Y>>>X,((1<<X)-1&Y)<<32-X|ve>>>X),Y=Pe),r[D>>2]=F,r[4+D>>2]=G,r[8+D>>2]=X,r[12+D>>2]=Y}(v,g,f,S,A=65535&c|65536,15361-R|0),function(D,F,G,X,Y,Z){var K,se,ve=0;64&Z?(X=F,F=31&(Y=Z+-64|0),32<=(63&Y)>>>0?(Y=X<<F,X=0):(Y=(1<<F)-1&X>>>32-F|G<<F,X<<=F),G=F=0):Z&&(se=X,X=31&(K=Z),se=32<=(63&Z)>>>0?(ve=se<<X,0):(ve=(1<<X)-1&se>>>32-X|Y<<X,se<<X),X=G,Y=31&(Z=64-Z|0),32<=(63&Z)>>>0?(Z=0,X>>>=Y):(Z=X>>>Y,X=((1<<Y)-1&X)<<32-Y|F>>>Y),X|=se,Y=Z|ve,Z=F,F=31&K,F=32<=(63&K)>>>0?(ve=Z<<F,0):(ve=(1<<F)-1&Z>>>32-F|G<<F,Z<<F),G=ve),r[D>>2]=F,r[4+D>>2]=G,r[8+D>>2]=X,r[12+D>>2]=Y}(16+v|0,g,f,S,A,R+-15233|0),S=r[4+v>>2],g=r[8+v>>2],A=r[12+v>>2]<<4|g>>>28,P=g<<4|S>>>28,(0|(S=g=268435455&S))==134217728&1<=(f=r[v>>2]|(r[16+v>>2]|r[24+v>>2])!=0|(r[20+v>>2]|r[28+v>>2])!=0)>>>0|134217728<g>>>0?((g=P+1|0)>>>0<1&&(A=A+1|0),P=g):f|134217728^S||((g=P+(1&P)|0)>>>0<P>>>0&&(A=A+1|0),P=g))):(P=S<<4|f>>>28,A=524287&(A=c<<4|S>>>28)|2146959360),q=32+v|0,ut(0,0|P),ut(1,-2147483648&c|A),+Ut()}(r[_>>2],r[_+4>>2],r[_+8>>2],r[_+12>>2]),ee[M>>3]=a},N[13]=function(a){return 0},N[14]=function(a,_,M){_|=0,M|=0;var g,f,S=0,c=0,d=0,v=0;for(q=f=q-32|0,S=r[28+(a|=0)>>2],r[16+f>>2]=S,d=r[a+20>>2],r[28+f>>2]=M,r[24+f>>2]=_,d=(r[20+f>>2]=_=d-S|0)+M|0,v=2,_=16+f|0;;){r:{if((c=(S=0)|dt(r[a+60>>2],0|_,0|v,12+f|0))&&(r[2086]=c,S=-1),(0|(S=S?r[12+f>>2]=-1:r[12+f>>2]))==(0|d))_=r[a+44>>2],r[a+28>>2]=_,r[a+20>>2]=_,r[a+16>>2]=_+r[a+48>>2],a=M;else{if(-1<(0|S))break r;r[a+28>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a>>2]=32|r[a>>2],((a=0)|v)!=2&&(a=M-r[_+4>>2]|0)}return q=32+f|0,0|a}c=r[_+4>>2],r[(_=(g=c>>>0<S>>>0)?_+8|0:_)>>2]=(c=S-(g?c:0)|0)+r[_>>2],r[_+4>>2]=r[_+4>>2]-c,d=d-S|0,v=v-g|0}},N[15]=function(a,_,M,g){return Ae=0},{d:function(){},e:function(){return 83886080},f:function(){return 5},g:function(a,_){return _|=0,q=_=q-16|0,a=(a|=0)?Gr(a)?(Te(4,2150,0),0):j[a+4|0]:(r[_+4>>2]=1444,r[_>>2]=2267,Te(4,1294,_),0),q=_+16|0,0|a},h:function(a,_){var M;return _|=0,q=M=q-48|0,a=(a|=0)?(a+63&-64)!=(0|a)?(r[36+M>>2]=1522,r[32+M>>2]=2284,Te(4,1294,32+M|0),0):(_+63&-64)==(0|_)&&_?function(g,f){var S,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0,vt=0,Dt=0;q=A=(S=d=q)-704&-64;r:if(f>>>0<=1343)Te(4,1235,0);else if(Gr(g))Te(4,1469,0);else if(d=j[0|(vt=g+4|0)]){if(!(6<=d>>>0)){(ve=(0|!j[g+5|0])==1)||(st(vt,1),he(g- -64|0,4,160)),it(A- -64|0,0,640),xt(g,A- -64|0),d=g+f|0,f=r[A+64>>2];e:{t:{i:{if(5<=(se=j[g+4|0])>>>0){if(f>>>0<g>>>0|d>>>0<f>>>0||(y=f+256|0)>>>0<g>>>0)break t;if(y>>>0<=d>>>0)break i;break t}if(f>>>0<g>>>0|d>>>0<f>>>0||(y=f+128|0)>>>0<g>>>0|d>>>0<y>>>0)break t}if(!((v=r[A+68>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<y>>>0||(v=v- -64|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(G=r[f>>2]))<0||(y=r[A+72>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=(c=y)+(y=G<<2)|0)>>>0<g>>>0|d>>>0<v>>>0||(R=r[A+76>>2])>>>0<g>>>0|d>>>0<R>>>0|R>>>0<v>>>0||(c=(G<<6)+R|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+80>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+84>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+88>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+92>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+96>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+100>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+4>>2]))<0||(y=r[A+104>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(P=(v=y)+(y=c<<2)|0)>>>0<g>>>0|d>>>0<P>>>0||(v=r[A+108>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<P>>>0||(c=v+(c<<6)|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+112>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+116>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+120>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+124>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+128>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+132>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+136>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+8>>2]))<0||(y=r[A+140>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=(X=c<<2)+y|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+144>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+X|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+148>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+X|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+156>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+X|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+160>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+X|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+164>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+X|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+12>>2]))<0||(y=r[A+172>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=(Y=c<<2)+y|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+176>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+Y|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+180>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+Y|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+188>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=y+Y|0)>>>0<g>>>0|d>>>0<c>>>0||(0|(v=r[f+16>>2]))<0||(y=r[A+192>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(P=(c=y)+(y=v<<2)|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+196>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+200>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+204>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+208>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+(v<<6)|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+212>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+216>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+220>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+228>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+232>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+236>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+240>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+244>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+y|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+248>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(c=c+v|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+252>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+256>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+260>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+264>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+268>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+272>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(0|(P=r[f+20>>2]))<0||(v=r[A+276>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(Z=(c=v)+(v=P<<2)|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+280>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(P=c+(P<<6)|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+284>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+288>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+292>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+296>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+300>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+308>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+312>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+v|0)>>>0<g>>>0|d>>>0<P>>>0||(0|(Z=r[f+24>>2]))<0||(c=r[A+336>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+(Z<<2)|0)>>>0<g>>>0|d>>>0<P>>>0||(0|(Z=r[f+28>>2]))<0||(c=r[A+340>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=(ke=Z<<2)+c|0)>>>0<g>>>0|d>>>0<P>>>0||(c=r[A+344>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(P=c+ke|0)>>>0<g>>>0|d>>>0<P>>>0||(0|(Z=r[f+32>>2]))<0||(c=r[A+356>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<P>>>0||(Z=(P=Z<<2)+c|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+360>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+364>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+368>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+372>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+376>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(c=r[A+380>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(Z=c+P|0)>>>0<g>>>0|d>>>0<Z>>>0||(0|(D=r[f+36>>2]))<0||(c=r[A+392>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<Z>>>0||(D=(Z=D<<2)+c|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+396>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+Z|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+400>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+Z|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+40>>2]))<0||(c=r[A+412>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+44>>2]))<0||(c=r[A+424>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+48>>2]))<0||(c=r[A+428>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=(F<<=2)+c|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+432>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+F|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+52>>2]))<0||(c=r[A+416>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=(F<<=2)+c|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+420>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+F|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+56>>2]))<0||(c=r[A+552>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+60>>2]))<0||(c=r[A+556>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+64>>2]))<0||(c=r[A+560>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<1)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+68>>2]))<0||(c=r[A+564>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+72>>2]))<0||(c=r[A+568>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(F=(D=c)+(c=F<<2)|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+572>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+576>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+580>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+584>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(D=c+D|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+76>>2]))<0||(c=r[A+588>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(F=(D=F<<2)+c|0)>>>0<g>>>0|d>>>0<F>>>0||(c=r[A+592>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(c=r[A+596>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<F>>>0||(D=c+D|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+80>>2]))<0||(c=r[A+600>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(K=(D=c)+(c=F<<2)|0)>>>0<g>>>0|d>>>0<K>>>0||(D=r[A+604>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<K>>>0||(F=D+(F<<6)|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+608>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+612>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+616>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+620>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+624>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+628>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(F=c+D|0)>>>0<g>>>0|d>>>0<F>>>0||(D=r[A+632>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<F>>>0||(D=c+D|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+84>>2]))<0||(c=r[A+636>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<2)|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+640>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+(F<<1)|0)>>>0<g>>>0|d>>>0<D>>>0||(0|(F=r[f+88>>2]))<0||(c=r[A+644>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(c=c+(F<<2)|0)>>>0<g>>>0|d>>>0<c>>>0)){if(!(se>>>0<2)&&((D=r[A+168>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<c>>>0||(c=D+X|0)>>>0<g>>>0|d>>>0<c>>>0||!(se>>>0<4)&&((D=r[A+324>>2])>>>0<g>>>0|d>>>0<D>>>0|D>>>0<c>>>0||(D=v+D|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+328>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+v|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+332>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(D=c+v|0)>>>0<g>>>0|d>>>0<D>>>0||(c=r[A+152>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<D>>>0||(X=c+X|0)>>>0<g>>>0|d>>>0<X>>>0||(c=r[A+184>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<X>>>0||(X=c+Y|0)>>>0<g>>>0|d>>>0<X>>>0||(c=r[A+224>>2])>>>0<g>>>0|d>>>0<c>>>0|c>>>0<X>>>0||(c=c+y|0)>>>0<g>>>0|d>>>0<c>>>0||(0|(X=r[f+92>>2]))<0||(y=r[A+648>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(X=(c=X<<2)+y|0)>>>0<g>>>0|d>>>0<X>>>0||(y=r[A+652>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<X>>>0||(X=c+y|0)>>>0<g>>>0|d>>>0<X>>>0||(y=r[A+656>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<X>>>0||(c=c+y|0)>>>0<g>>>0|d>>>0<c>>>0||(0|(X=r[f+96>>2]))<0||(y=r[A+660>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(X=(c=X<<2)+y|0)>>>0<g>>>0|d>>>0<X>>>0||(y=r[A+664>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<X>>>0||(X=c+y|0)>>>0<g>>>0|d>>>0<X>>>0||(y=r[A+668>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<X>>>0||(c=c+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+304>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+316>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+320>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+100>>2]))<0||(y=r[A+436>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+440>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+444>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+104>>2]))<0||(y=r[A+448>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=y)+(y=c<<2)|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+452>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+456>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+460>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(v=r[A+464>>2])>>>0<g>>>0|d>>>0<v>>>0|v>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+108>>2]))<0||(y=r[A+480>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+484>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+488>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+112>>2]))<0||(y=r[A+504>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+508>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+512>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+116>>2]))<0||(y=r[A+528>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+(c<<2)|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+120>>2]))<0||(y=r[A+532>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+536>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+540>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+124>>2]))<0||(y=r[A+544>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=(c<<=2)+y|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+548>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=c+y|0)>>>0<g>>>0|d>>>0<c>>>0)))break t;if(se>>>0<5||!((y=r[A+348>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=y+ke|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+352>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+ke|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+384>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+P|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+388>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+P|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+404>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+Z|0)>>>0<g>>>0|d>>>0<v>>>0||(y=r[A+408>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(v=y+Z|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+128>>2]))<0||(y=r[A+468>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+472>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+476>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+132>>2]))<0||(y=r[A+492>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+496>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+500>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(v=v+y|0)>>>0<g>>>0|d>>>0<v>>>0||(0|(c=r[f+136>>2]))<0||(y=r[A+516>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<v>>>0||(c=(v=c<<2)+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+520>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(c=v+y|0)>>>0<g>>>0|d>>>0<c>>>0||(y=r[A+524>>2])>>>0<g>>>0|d>>>0<y>>>0|y>>>0<c>>>0||(y=v+y|0)>>>0<g>>>0)&&y>>>0<=d>>>0)break e}}Te(4,1760,0),st(vt,1),he(g- -64|0,4,160);break r}ve||(Qr(g),$[g+5|0]=0,f=r[A+64>>2],G=r[f>>2],R=r[A+76>>2],se=j[g+4|0]);e:{if((g=0)<(0|G)){for(;;){if(63<Nt((g<<6)+R|0)>>>0)break e;if((0|G)==(0|(g=g+1|0)))break}if(c=f+48|0,(d=0)<(0|(g=r[f>>2]))){for(y=r[f+48>>2],v=r[A+80>>2];;){if((0|(R=r[v+(d<<2)>>2]))<0|(0|y)<=(0|R))break e;if((0|g)==(0|(d=d+1|0)))break}for(Z=f+24|0,y=r[f+24>>2],P=r[A+88>>2],G=r[A+84>>2],d=0;;){if((v=r[(R=d<<2)+P>>2])&&((0|v)<0|(0|y)<(0|v)||(0|(R=r[R+G>>2]))<0|(0|y)<=(0|R)||(v=v+R|0)>>>31|(0|y)<(0|v)))break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+92>>2];;){if(1<re[y+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+96>>2];;){if(1<re[y+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+100>>2];;){if((0|(v=r[y+(d<<2)>>2]))<-1|(0|g)<=(0|v))break e;if((0|g)==(0|(d=d+1|0)))break}}else Z=f+24|0}else Z=f+24|0,c=f+48|0;if((g=0)<(0|(d=r[f+4>>2]))){for(y=r[A+108>>2];;){if(63<Nt(y+(g<<6)|0)>>>0)break e;if((0|d)==(0|(g=g+1|0)))break}if(P=(y=r[f+48>>2])+-1|0,!(((d=0)|(g=r[f+4>>2]))<=0)){for(v=r[A+112>>2];;){if((0|(R=r[v+(d<<2)>>2]))<0|(0|y)<=(0|R))break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+116>>2];;){if(1<re[y+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+120>>2];;){if(1<re[y+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(y=r[f>>2],d=0,v=r[A+124>>2];;){if((0|(R=r[v+(d<<2)>>2]))<-1|(0|y)<=(0|R))break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+128>>2];;){if((0|(v=r[y+(d<<2)>>2]))<-1|(0|g)<=(0|v))break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,y=r[A+132>>2];;){if(1<re[y+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(v=f+8|0,R=f+12|0,G=r[A+136>>2],d=0;;){if(1<(Y=r[(X=d<<2)+y>>2])>>>0||(0|(X=r[G+X>>2]))<0|(0|X)>=r[(Y-1|0?v:R)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}}}else P=r[c>>2]+-1|0;if((g=0)<(0|(d=r[f+8>>2]))){for(y=r[A+140>>2];;){if((0|(v=r[y+(g<<2)>>2]))<0|(0|P)<(0|v))break e;if((0|d)==(0|(g=g+1|0)))break}for(ke=f+28|0,y=r[f+28>>2],G=r[A+148>>2],X=r[A+144>>2],g=0;;){if((v=r[(R=g<<2)+G>>2])&&((0|v)<0|(0|y)<(0|v)||(0|(R=r[R+X>>2]))<0|(0|y)<=(0|R)||(v=v+R|0)>>>31|(0|y)<(0|v)))break e;if((0|d)==(0|(g=g+1|0)))break}for(g=0,v=r[A+156>>2],R=r[A+164>>2],G=r[A+160>>2];;){if((0|(X=r[(y=g<<2)+G>>2]))<1||(0|(Y=r[y+R>>2]))<1||(0|(y=r[v+y>>2]))<1|(0|y)!=(0|z(Y+1|0,X+1|0)))break e;if((0|d)==(0|(g=g+1|0)))break}}else ke=f+28|0;if((g=0)<(0|(v=r[f+12>>2]))){for(d=r[A+172>>2];;){if((0|(y=r[d+(g<<2)>>2]))<0|(0|P)<(0|y))break e;if((0|v)==(0|(g=g+1|0)))break}for(D=f+32|0,d=r[f+32>>2],P=r[A+180>>2],G=r[A+176>>2],g=0;;){if((y=r[(R=g<<2)+P>>2])&&((0|y)<0|(0|d)<(0|y)||(0|(R=r[R+G>>2]))<0|(0|d)<=(0|R)||(y=y+R|0)>>>31|(0|d)<(0|y)))break e;if((0|v)==(0|(g=g+1|0)))break}}else D=f+32|0;y=f+16|0;t:{i:{if(!(((g=0)|(d=r[f+16>>2]))<=0)){for(v=r[A+208>>2];;){if(63<Nt(v+(g<<6)|0)>>>0)break e;if((0|d)==(0|(g=g+1|0)))break}if(!(((d=0)|(g=r[y>>2]))<=0)){for(v=r[c>>2],R=r[A+212>>2];;){if((0|(P=r[R+(d<<2)>>2]))<0|(0|v)<=(0|P))break e;if((0|g)==(0|(d=d+1|0)))break}for(vt=f+36|0,v=r[f+36>>2],G=r[A+220>>2],X=r[A+216>>2],d=0;;){if((R=r[(P=d<<2)+G>>2])&&((0|R)<0|(0|v)<(0|R)||(0|(P=r[P+X>>2]))<0|(0|v)<=(0|P)||(R=R+P|0)>>>31|(0|v)<(0|R)))break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,v=r[A+228>>2];;){if(1<re[v+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,v=r[A+232>>2];;){if(1<re[v+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(v=r[f>>2],d=0,R=r[A+236>>2];;){if((0|(P=r[R+(d<<2)>>2]))<-1|(0|v)<=(0|P))break e;if((0|g)==(0|(d=d+1|0)))break}for(v=r[f+4>>2],d=0,R=r[A+240>>2];;){if((0|(P=r[R+(d<<2)>>2]))<-1|(0|v)<=(0|P))break e;if((0|g)==(0|(d=d+1|0)))break}for(v=r[A+244>>2],d=0;;){if(r[v+(d<<2)>>2]<0)break e;if((0|g)==(0|(d=d+1|0)))break}break i}}R=f+68|0,vt=f+36|0;break t}for(v=r[A+252>>2],d=0;;){if(r[v+(d<<2)>>2]<0)break e;if((0|g)==(0|(d=d+1|0)))break}for(R=r[f+60>>2],d=0,P=r[A+256>>2];;){if((G=r[(G=d<<2)+P>>2]+(r[v+G>>2]<<1)|0)>>>31|(0|R)<(0|G))break e;if((0|g)==(0|(d=d+1|0)))break}for(v=r[f+64>>2],G=r[A+264>>2],X=r[A+260>>2],d=0;;){if((R=r[(P=d<<2)+G>>2])&&((0|R)<0|(0|v)<(0|R)||(0|(P=r[P+X>>2]))<0|(0|v)<=(0|P)||(R=R+P|0)>>>31|(0|v)<(0|R)))break e;if((0|g)==(0|(d=d+1|0)))break}for(R=f+68|0,v=r[f+68>>2],X=r[A+272>>2],Y=r[A+268>>2],d=0;;){if((P=r[(G=d<<2)+X>>2])&&((0|P)<0|(0|v)<(0|P)||(0|(G=r[G+Y>>2]))<0|(0|v)<=(0|G)||(P=P+G|0)>>>31|(0|v)<(0|P)))break e;if((0|g)==(0|(d=d+1|0)))break}}t:{i:{if(!(((g=0)|(d=r[f+20>>2]))<=0)){for(v=r[A+280>>2];;){if(63<Nt(v+(g<<6)|0)>>>0)break e;if((0|d)==(0|(g=g+1|0)))break}if(!(((g=0)|(d=r[f+20>>2]))<=0)){for(v=r[A+296>>2];;){if(1<re[v+(g<<2)>>2])break e;if((0|d)==(0|(g=g+1|0)))break}for(v=r[A+300>>2],g=0;;){if(r[v+(g<<2)>>2]<0)break e;if((0|d)==(0|(g=g+1|0)))break}break i}}g=r[f+52>>2];break t}for(g=r[f+52>>2],X=r[A+312>>2],Y=r[A+308>>2],P=0;;){if((v=r[(G=P<<2)+X>>2])&&((0|v)<0|(0|g)<(0|v)||(0|(G=r[G+Y>>2]))<0|(0|g)<=(0|G)||(v=v+G|0)>>>31|(0|g)<(0|v)))break e;if((0|d)==(0|(P=P+1|0)))break}}if(v=r[f+40>>2],(d=0)<(0|(P=r[f+8>>2])))for(G=r[A+344>>2],X=r[A+156>>2];;){if((Y=r[(Y=d<<2)+G>>2]+(r[X+Y>>2]<<1)|0)>>>31|(0|v)<(0|Y))break e;if((0|P)==(0|(d=d+1|0)))break}if((d=0)<(0|(P=r[D>>2]))){for(G=r[A+376>>2];;){if(1<re[G+(d<<2)>>2])break e;if((0|P)==(0|(d=d+1|0)))break}for(d=0,G=r[A+380>>2];;){if(1<re[G+(d<<2)>>2])break e;if((0|P)==(0|(d=d+1|0)))break}}if((d=0)<(0|(P=r[y>>2])))for(G=r[A+400>>2],X=r[A+252>>2];;){if((Y=r[(Y=d<<2)+G>>2]+(r[X+Y>>2]<<1)|0)>>>31|(0|v)<(0|Y))break e;if((0|P)==(0|(d=d+1|0)))break}if((d=0)<(0|(v=r[f+44>>2])))for(G=r[A+424>>2];;){if((0|(X=r[G+(d<<2)>>2]))<0|(0|g)<=(0|X))break e;if((0|v)==(0|(d=d+1|0)))break}if(1<=(0|(X=r[c>>2])))for(d=0,Y=r[A+432>>2],F=r[A+428>>2];;){if((c=r[(G=d<<2)+Y>>2])&&((0|c)<0|(0|v)<(0|c)||(0|(G=r[F+G>>2]))<0|(0|v)<=(0|G)||(c=c+G|0)>>>31|(0|v)<(0|c)))break e;if((0|X)==(0|(d=d+1|0)))break}if(1<=(0|g))for(v=r[f+56>>2],d=0,X=r[A+420>>2],Y=r[A+416>>2];;){if((c=r[(G=d<<2)+X>>2])&&((0|c)<0|(0|v)<(0|c)||(0|(G=r[G+Y>>2]))<0|(0|v)<=(0|G)||(c=c+G|0)>>>31|(0|v)<(0|c)))break e;if((0|(d=d+1|0))==(0|g))break}if((g=0)<(0|(d=r[R>>2])))for(v=r[A+564>>2];;){if((0|(R=r[v+(g<<2)>>2]))<-1|(0|P)<=(0|R))break e;if((0|d)==(0|(g=g+1|0)))break}if(g=r[f+76>>2],1<=(0|(R=r[f+72>>2])))for(d=0,P=r[A+572>>2],G=r[A+568>>2];;){if((v=r[(c=d<<2)+P>>2])&&((0|v)<0|(0|g)<(0|v)||(0|(c=r[c+G>>2]))<0|(0|g)<=(0|c)||(v=c+v|0)>>>31|(0|g)<(0|v)))break e;if((0|R)==(0|(d=d+1|0)))break}if((d=0)<(0|g)){for(v=r[A+588>>2];;){if(1<re[v+(d<<2)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(c=r[A+592>>2],d=0;;){if(1<(G=r[(P=d<<2)+v>>2])>>>0||(0|(P=r[c+P>>2]))<0|(0|P)>=r[(G-1|0?y:f)>>2])break e;if((0|g)==(0|(d=d+1|0)))break}for(d=0,v=r[A+596>>2];;){if((0|(c=r[v+(d<<2)>>2]))<-1|(0|R)<=(0|c))break e;if((0|g)==(0|(d=d+1|0)))break}}t:{if(!(((g=0)|(P=r[f+80>>2]))<=0)){for(d=r[A+604>>2];;){if(63<Nt(d+(g<<6)|0)>>>0)break e;if((0|P)==(0|(g=g+1|0)))break}if(!(((g=0)|(P=r[f+80>>2]))<=0)){for(d=r[f+48>>2],v=r[A+608>>2];;){if((0|(R=r[v+(g<<2)>>2]))<0|(0|d)<=(0|R))break e;if((0|P)==(0|(g=g+1|0)))break}for(X=r[f+88>>2],R=r[A+616>>2],c=r[A+612>>2],g=0;;){if((d=r[(v=g<<2)+R>>2])&&((0|d)<0|(0|X)<(0|d)||(0|(v=r[c+v>>2]))<0|(0|X)<=(0|v)||(d=d+v|0)>>>31|(0|X)<(0|d)))break e;if((0|P)==(0|(g=g+1|0)))break}for(y=r[y>>2],R=r[A+620>>2],g=0;;){if((0|(d=r[R+(g<<2)>>2]))<0|(0|y)<=(0|d))break e;if((0|P)==(0|(g=g+1|0)))break}for(c=r[A+624>>2],g=0;;){if((0|(d=r[c+(g<<2)>>2]))<0|(0|y)<=(0|d))break e;if((0|P)==(0|(g=g+1|0)))break}for(d=r[f+84>>2],G=r[A+632>>2],Y=r[A+628>>2],g=0;;){if((v=r[(F=g<<2)+G>>2])&&((0|v)<0|(0|d)<(0|v)||(0|(F=r[F+Y>>2]))<0|(0|d)<=(0|F)||(v=v+F|0)>>>31|(0|d)<(0|v)))break e;if((0|P)==(0|(g=g+1|0)))break}for(K=r[A+640>>2],d=r[A+252>>2],v=0;;){if(0<(0|(ve=r[(g=v<<2)+G>>2])))for(F=K+(r[g+Y>>2]<<1)|0,Dt=r[d+(r[g+c>>2]<<2)>>2],Pe=r[d+(r[g+R>>2]<<2)>>2],g=0;;){if((0|Dt)<=W[F+(2|(We=g<<1))>>1]|(0|Pe)<=W[F+We>>1])break e;if(!((0|(g=g+2|0))<(0|ve)))break}if((0|P)==(0|(v=v+1|0)))break}break t}}y=r[f+16>>2],X=r[f+88>>2]}if(!((255&se)>>>0<2)){if((g=0)<(0|(G=r[f+8>>2])))for(d=r[A+168>>2];;){if(1<re[d+(g<<2)>>2])break e;if((0|G)==(0|(g=g+1|0)))break}if(!((255&se)>>>0<4)){if(R=r[f+56>>2],1<=(0|(Y=r[f+20>>2])))for(c=r[A+332>>2],F=r[A+328>>2],g=0;;){if((d=r[(v=g<<2)+c>>2])&&((0|d)<0|(0|R)<(0|d)||(0|(v=r[v+F>>2]))<0|(0|R)<=(0|v)||(d=d+v|0)>>>31|(0|R)<(0|d)))break e;if((0|Y)==(0|(g=g+1|0)))break}if((0|(g=r[f+92>>2]))!=r[f+96>>2])break e;if(1<=(0|G))for(F=r[A+152>>2],d=0,K=r[A+148>>2];;){if((v=r[(c=d<<2)+K>>2])&&((0|v)<0|(0|g)<(0|v)||(0|(c=r[c+F>>2]))<0|(0|g)<=(0|c)||(v=c+v|0)>>>31|(0|g)<(0|v)))break e;if((0|G)==(0|(d=d+1|0)))break}if(1<=(0|(Dt=r[f+12>>2])))for(F=r[A+184>>2],d=0,K=r[A+180>>2];;){if((v=r[(c=d<<2)+K>>2])&&((0|v)<0|(0|g)<(0|v)||(0|(c=r[c+F>>2]))<0|(0|g)<=(0|c)||(v=c+v|0)>>>31|(0|g)<(0|v)))break e;if((0|Dt)==(0|(d=d+1|0)))break}if(1<=(0|y))for(F=r[A+224>>2],d=0,K=r[A+220>>2];;){if((v=r[(c=d<<2)+K>>2])&&((0|v)<0|(0|g)<(0|v)||(0|(c=r[c+F>>2]))<0|(0|g)<=(0|c)||(v=c+v|0)>>>31|(0|g)<(0|v)))break e;if((0|y)==(0|(d=d+1|0)))break}if((d=0)<(0|Y)){for(v=r[A+304>>2];;){if(1<re[v+(d<<2)>>2])break e;if((0|Y)==(0|(d=d+1|0)))break}for(v=r[f+100>>2],K=r[A+320>>2],ve=r[A+316>>2],d=0;;){if((c=r[(F=d<<2)+K>>2])&&((0|c)<0|(0|v)<(0|c)||(0|(F=r[F+ve>>2]))<0|(0|v)<=(0|F)||(c=c+F|0)>>>31|(0|v)<(0|c)))break e;if((0|Y)==(0|(d=d+1|0)))break}}else v=r[f+100>>2];if(1<=(0|v)){for(F=r[A+440>>2],d=0,ve=r[A+436>>2];;){if((c=r[(K=d<<2)+F>>2])&&((0|c)<0|(0|R)<(0|c)||(0|(K=r[K+ve>>2]))<0|(0|R)<=(0|K)||(c=c+K|0)>>>31|(0|R)<(0|c)))break e;if((0|v)==(0|(d=d+1|0)))break}for(R=r[A+444>>2],d=0;;){if((0|(K=r[(c=d<<2)+R>>2]))<0|(0|K)>=r[c+F>>2])break e;if((0|v)==(0|(d=d+1|0)))break}}if((R=0)<(0|(d=r[f+104>>2]))){for(c=r[A+448>>2];;){if((0|(F=r[c+(R<<2)>>2]))<0|(0|v)<=(0|F))break e;if((0|d)==(0|(R=R+1|0)))break}for(c=r[f+116>>2],K=r[A+464>>2],ve=r[A+460>>2],v=0;;){if((R=r[(F=v<<2)+K>>2])&&((0|R)<0|(0|c)<(0|R)||(0|(F=r[F+ve>>2]))<0|(0|c)<=(0|F)||(R=R+F|0)>>>31|(0|c)<(0|R)))break e;if((0|d)==(0|(v=v+1|0)))break}}else c=r[f+116>>2];if((v=0)<(0|(F=r[f+108>>2]))){for(R=r[A+480>>2];;){if((0|(K=r[R+(v<<2)>>2]))<0|(0|G)<=(0|K))break e;if((0|F)==(0|(v=v+1|0)))break}for(K=r[A+488>>2],Pe=r[A+484>>2],v=0;;){if((R=r[(G=v<<2)+K>>2])&&((0|R)<0|(0|d)<(0|R)||(0|(G=r[G+Pe>>2]))<0|(0|d)<=(0|G)||(R=R+G|0)>>>31|(0|d)<(0|R)))break e;if((0|F)==(0|(v=v+1|0)))break}for(K=r[ke>>2],v=r[A+456>>2],G=r[A+452>>2],R=0;;){if(We=r[Pe+(R<<2)>>2]<<2,(ve=r[We+v>>2])&&((0|ve)<0|(0|K)<(0|ve)||(0|(We=r[G+We>>2]))<0|(0|K)<=(0|We)||(0|(ve=ve+We|0))<0|(0|K)<(0|ve)))break e;if((0|F)==(0|(R=R+1|0)))break}}else v=r[A+456>>2],G=r[A+452>>2];if((R=0)<(0|(F=r[f+112>>2]))){for(K=r[A+504>>2];;){if((0|(ve=r[K+(R<<2)>>2]))<0|(0|y)<=(0|ve))break e;if((0|F)==(0|(R=R+1|0)))break}for(Pe=r[A+512>>2],ve=r[A+508>>2],y=0;;){if((R=r[(K=y<<2)+Pe>>2])&&((0|R)<0|(0|d)<(0|R)||(0|(K=r[K+ve>>2]))<0|(0|d)<=(0|K)||(R=R+K|0)>>>31|(0|d)<(0|R)))break e;if((0|F)==(0|(y=y+1|0)))break}for(R=r[vt>>2],y=0;;){if(Pe=r[ve+(y<<2)>>2]<<2,(K=r[Pe+v>>2])&&((0|K)<0|(0|R)<(0|K)||(0|(Pe=r[G+Pe>>2]))<0|(0|R)<=(0|Pe)||(0|(K=K+Pe|0))<0|(0|R)<(0|K)))break e;if((0|F)==(0|(y=y+1|0)))break}}if(R=r[f+120>>2],(y=0)<(0|c))for(F=r[A+528>>2];;){if((0|(K=r[F+(y<<2)>>2]))<0|(0|R)<=(0|K))break e;if((0|(y=y+1|0))==(0|c))break}if((y=0)<(0|R)){for(c=r[A+532>>2];;){if((0|(F=r[c+(y<<2)>>2]))<-1|(0|Y)<=(0|F))break e;if((0|R)==(0|(y=y+1|0)))break}for(c=r[f+124>>2],K=r[A+540>>2],ve=r[A+536>>2],y=0;;){if((Y=r[(F=y<<2)+K>>2])&&((0|Y)<0|(0|c)<(0|Y)||(0|(F=r[F+ve>>2]))<0|(0|c)<=(0|F)||(Y=F+Y|0)>>>31|(0|c)<(0|Y)))break e;if((0|R)==(0|(y=y+1|0)))break}}if(!((255&se)>>>0<5)){if((y=0)<(0|(se=r[ke>>2]))){for(R=r[A+348>>2];;){if((0|(c=r[R+(y<<2)>>2]))<0|(0|g)<(0|c))break e;if((0|se)==(0|(y=y+1|0)))break}for(R=r[A+352>>2],y=0;;){if((0|(c=r[R+(y<<2)>>2]))<0|(0|g)<(0|c))break e;if((0|se)==(0|(y=y+1|0)))break}}if((se=0)<(0|(y=r[D>>2]))){for(R=r[A+384>>2];;){if((0|(c=r[R+(se<<2)>>2]))<0|(0|g)<(0|c))break e;if((0|y)==(0|(se=se+1|0)))break}for(R=r[A+388>>2],se=0;;){if((0|(c=r[R+(se<<2)>>2]))<0|(0|g)<(0|c))break e;if((0|y)==(0|(se=se+1|0)))break}}if((se=0)<(0|(R=r[vt>>2]))){for(c=r[A+404>>2];;){if((0|(Y=r[c+(se<<2)>>2]))<0|(0|g)<(0|Y))break e;if((0|R)==(0|(se=se+1|0)))break}for(c=r[A+408>>2],se=0;;){if((0|(Y=r[c+(se<<2)>>2]))<0|(0|g)<(0|Y))break e;if((0|R)==(0|(se=se+1|0)))break}}if((g=0)<(0|(se=r[f+128>>2]))){for(R=r[f>>2],c=r[A+468>>2];;){if((0|(Y=r[c+(g<<2)>>2]))<0|(0|R)<=(0|Y))break e;if((0|se)==(0|(g=g+1|0)))break}for(ke=r[A+476>>2],Y=r[A+472>>2],g=0;;){if((R=r[(c=g<<2)+ke>>2])&&((0|R)<0|(0|d)<(0|R)||(0|(c=r[c+Y>>2]))<0|(0|d)<=(0|c)||(R=c+R|0)>>>31|(0|d)<(0|R)))break e;if((0|se)==(0|(g=g+1|0)))break}for(R=r[Z>>2],g=0;;){if(Z=r[Y+(g<<2)>>2]<<2,(c=r[Z+v>>2])&&((0|c)<0|(0|R)<(0|c)||(0|(Z=r[G+Z>>2]))<0|(0|R)<=(0|Z)||(0|(c=c+Z|0))<0|(0|R)<(0|c)))break e;if((0|se)==(0|(g=g+1|0)))break}}if((g=0)<(0|(se=r[f+132>>2]))){for(R=r[A+492>>2];;){if((0|(c=r[R+(g<<2)>>2]))<0|(0|Dt)<=(0|c))break e;if((0|se)==(0|(g=g+1|0)))break}for(Z=r[A+500>>2],c=r[A+496>>2],g=0;;){if((R=r[(Y=g<<2)+Z>>2])&&((0|R)<0|(0|d)<(0|R)||(0|(Y=r[c+Y>>2]))<0|(0|d)<=(0|Y)||(R=R+Y|0)>>>31|(0|d)<(0|R)))break e;if((0|se)==(0|(g=g+1|0)))break}for(g=0;;){if(Y=r[c+(g<<2)>>2]<<2,(R=r[Y+v>>2])&&((0|R)<0|(0|y)<(0|R)||(0|(Y=r[G+Y>>2]))<0|(0|y)<=(0|Y)||(0|(R=R+Y|0))<0|(0|y)<(0|R)))break e;if((0|se)==(0|(g=g+1|0)))break}}if(!(((g=0)|(f=r[f+136>>2]))<=0)){for(y=r[A+516>>2];;){if((0|(se=r[y+(g<<2)>>2]))<0|(0|P)<=(0|se))break e;if((0|f)==(0|(g=g+1|0)))break}for(R=r[A+524>>2],y=r[A+520>>2],g=0;;){if((A=r[(se=g<<2)+R>>2])&&((0|A)<0|(0|d)<(0|A)||(0|(se=r[y+se>>2]))<0|(0|d)<=(0|se)||(A=A+se|0)>>>31|(0|d)<(0|A)))break e;if((0|f)==(0|(g=g+1|0)))break}for(g=0;;){if(A=r[y+(g<<2)>>2]<<2,(d=r[A+v>>2])&&((0|d)<0|(0|X)<(0|d)||(0|(A=r[A+G>>2]))<0|(0|X)<=(0|A)||(0|(d=d+A|0))<0|(0|X)<(0|d)))break e;if((0|f)==(0|(g=g+1|0)))break}}}}}return q=S,1}return Te(4,1846,0),q=S,0}r[A+52>>2]=d,r[A+48>>2]=5,Te(4,1640,A+48|0)}else r[A+32>>2]=d,Te(4,1554,A+32|0);return q=S,0}(a,_):(r[20+M>>2]=1621,r[16+M>>2]=2284,Te(4,1294,16+M|0),0):(r[4+M>>2]=1444,r[M>>2]=2284,Te(4,1294,M),0),q=48+M|0,0|a},i:function(a){r[1805]=a|=0},j:function(a,_){var M;return _|=0,q=M=q-48|0,a=(a|=0)?(a+63&-64)!=(0|a)?(r[36+M>>2]=1522,r[32+M>>2]=2305,Te(4,1294,32+M|0),0):(_+63&-64)==(0|_)&&_?function(g){var f,S,c,d,v=0,y=0,A=0,P=0,R=0,D=0,F=0,G=0;r[24+(q=f=q-32|0)>>2]=0,r[16+f>>2]=5,r[20+f>>2]=0,is(16+(q=d=q-272|0)|0,2227,r[12+d>>2]=16+f|0),function(X){var Y;r[(q=Y=q-16|0)>>2]=X,function(Z,K){var se;r[12+(q=se=q-16|0)>>2]=K,rs(Z,1432,K,0,0),q=16+se|0}(r[970],Y),q=16+Y|0}(16+d|0),q=272+d|0;r:{if(Gr(g))Te(4,1932,0);else{if(!(6<=(A=j[g+4|0])>>>0)){if((0|!j[g+5|0])!=1?(st(g+4|0,1),he(g- -64|0,4,160),xt(g,g+704|($[g+5|0]=0)),Qr(g)):xt(g,g+704|0),j[7224]||(r[1807]=6,$[7224]=1,r[1808]=7,r[1809]=8,r[1810]=9),y=r[g+704>>2],1<=(0|(A=r[y+16>>2]))){for(G=(P=r[g+912>>2])+(A<<2)|0,R=r[g+908>>2];;){F=r[g+1204>>2]+(r[R>>2]<<2)|0;e:if(!(((y=0)|(v=(A=r[P>>2])+-1|0))<1))t:for(;;){for(;;){if(r[(D=F+(y<<2)|0)>>2]<=-1){if(function(X,Y,Z){var K=0,se=0;i:if((0|X)!=(0|Y)){if(!(X>>>0<Y+Z>>>0&&Y>>>0<(se=X+Z|0)>>>0))return De(X,Y,Z);if(K=3&(X^Y),X>>>0<Y>>>0){if(!K){if(3&X)for(;;){if(!Z)break i;if($[0|X]=j[0|Y],Y=Y+1|0,Z=Z+-1|0,!(3&(X=X+1|0)))break}if(!(Z>>>0<=3)){for(K=Z;r[X>>2]=r[Y>>2],Y=Y+4|0,X=X+4|0,3<(K=K+-4|0)>>>0;);Z&=3}}if(Z)for(;$[0|X]=j[0|Y],X=X+1|0,Y=Y+1|0,Z=Z+-1|0;);}else{if(!K){if(3&se)for(;;){if(!Z)break i;if($[0|(K=(Z=Z+-1|0)+X|0)]=j[Y+Z|0],!(3&K))break}if(!(Z>>>0<=3))for(;r[(Z=Z+-4|0)+X>>2]=r[Y+Z>>2],3<Z>>>0;);}if(Z)for(;$[(Z=Z+-1|0)+X|0]=j[Y+Z|0],Z;);}}}(D,D+4|0,(-1^y)+A<<2),(0|y)<(0|(v=(A=v)+-1|0)))continue t;break e}if(!((0|(y=y+1|0))<(0|v)))break}break}if(y=P,0<(0|A)&&(A=r[F+(v<<2)>>2]<0?v:A),r[y>>2]=A,R=R+4|0,!((P=P+4|0)>>>0<G>>>0))break}y=r[g+704>>2]}if(1<=r[y>>2])for(v=0;r[r[g+712>>2]+(v<<2)>>2]=r[g+716>>2]+(v<<6),y=r[g+704>>2],(0|(v=v+1|0))<r[y>>2];);if(1<=r[y+4>>2])for(v=0;r[r[g+744>>2]+(v<<2)>>2]=r[g+748>>2]+(v<<6),y=r[g+704>>2],(0|(v=v+1|0))<r[y+4>>2];);if(1<=r[y+16>>2])for(v=0;r[(A=v<<2)+r[g+832>>2]>>2]=r[g+848>>2]+(v<<6),r[A+r[g+836>>2]>>2]=r[g+1196>>2]+(r[A+r[g+896>>2]>>2]<<2),r[A+r[g+840>>2]>>2]=r[g+1200>>2]+(r[A+r[g+900>>2]>>2]<<1),r[A+r[g+844>>2]>>2]=r[g+1204>>2]+(r[A+r[g+908>>2]>>2]<<2),y=r[g+704>>2],(0|(v=v+1|0))<r[y+16>>2];);if(1<=r[y+20>>2])for(v=0;r[r[g+916>>2]+(v<<2)>>2]=r[g+920>>2]+(v<<6),y=r[g+704>>2],(0|(v=v+1|0))<r[y+20>>2];);if(1<=r[y+80>>2])for(v=0;r[r[g+1240>>2]+(v<<2)>>2]=r[g+1244>>2]+(v<<6),y=r[g+704>>2],(0|(v=v+1|0))<r[y+80>>2];);if(1&$[r[g+708>>2]+20|0]||(0|(P=r[y+16>>2]))<1)break r;for(v=r[g+904>>2],F=r[g+900>>2],D=r[g+1200>>2],R=0;;){if(0<(0|(G=r[(A=R<<2)+v>>2]+-1|0)))for(S=D+(r[A+F>>2]<<1)|0,y=0;c=W[(A=S+(y<<1)|0)>>1],J[A>>1]=W[A+4>>1],J[A+4>>1]=c,(0|(y=y+3|0))<(0|G););if((0|P)==(0|(R=R+1|0)))break}for(A=r[g+892>>2],R=r[g+896>>2],F=r[g+1196>>2],v=0;;){if(1<=(0|(D=r[(y=v<<2)+A>>2])))for(D=(y=F+(r[y+R>>2]<<2)|0)+(D<<3)|0,y=y+4|0;O[y>>2]=p(1)-O[y>>2],(y=y+8|0)>>>0<D>>>0;);if((0|P)==(0|(v=v+1|0)))break}break r}r[4+f>>2]=A,r[f>>2]=5,Te(4,2023,f)}g=0}return q=32+f|0,g}(a):(r[20+M>>2]=1621,r[16+M>>2]=2305,Te(4,1294,16+M|0),0):(r[4+M>>2]=1444,r[M>>2]=2305,Te(4,1294,M),0),q=48+M|0,0|a},k:function(a,_,M,g){var f;_|=0,M|=0,g|=0,q=f=q+-64|0,(a|=0)?_?M?g?(a=r[r[a>>2]+708>>2],r[_>>2]=r[a+12>>2],r[_+4>>2]=r[a+16>>2],r[M>>2]=r[a+4>>2],r[M+4>>2]=r[a+8>>2],r[g>>2]=r[a>>2]):(r[52+f>>2]=1995,r[48+f>>2]=2325,Te(4,1294,48+f|0)):(r[36+f>>2]=1903,r[32+f>>2]=2325,Te(4,1294,32+f|0)):(r[20+f>>2]=1819,r[16+f>>2]=2325,Te(4,1294,16+f|0)):(r[4+f>>2]=1740,r[f>>2]=2325,Te(4,1294,f)),q=64+f|0},l:rr,m:Or,n:function(a){var _;q=_=q-16|0,(a|=0)?li(a):(r[4+_>>2]=1740,r[_>>2]=2387,Te(4,1294,_)),q=16+_|0},o:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+540>>2]:(r[4+_>>2]=1740,r[_>>2]=2402,Te(4,1294,_),-1),q=16+_|0,0|a},p:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+916>>2]:(r[4+_>>2]=1740,r[_>>2]=2423,Te(4,1294,_),0),q=16+_|0,0|a},q:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+548>>2]:(r[4+_>>2]=1740,r[_>>2]=2442,Te(4,1294,_),0),q=16+_|0,0|a},r:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+928>>2]:(r[4+_>>2]=1740,r[_>>2]=2463,Te(4,1294,_),0),q=16+_|0,0|a},s:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+924>>2]:(r[4+_>>2]=1740,r[_>>2]=2492,Te(4,1294,_),0),q=16+_|0,0|a},t:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+932>>2]:(r[4+_>>2]=1740,r[_>>2]=2521,Te(4,1294,_),0),q=16+_|0,0|a},u:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+552>>2]:(r[4+_>>2]=1740,r[_>>2]=2550,Te(4,1294,_),0),q=16+_|0,0|a},v:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+4>>2]:(r[4+_>>2]=1740,r[_>>2]=2572,Te(4,1294,_),-1),q=16+_|0,0|a},w:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+712>>2]:(r[4+_>>2]=1740,r[_>>2]=2588,Te(4,1294,_),0),q=16+_|0,0|a},x:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+52>>2]:(r[4+_>>2]=1740,r[_>>2]=2602,Te(4,1294,_),0),q=16+_|0,0|a},y:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+740>>2]:(r[4+_>>2]=1740,r[_>>2]=2622,Te(4,1294,_),0),q=16+_|0,0|a},z:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+332>>2]:(r[4+_>>2]=1740,r[_>>2]=2650,Te(4,1294,_),-1),q=16+_|0,0|a},A:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+832>>2]:(r[4+_>>2]=1740,r[_>>2]=2670,Te(4,1294,_),0),q=16+_|0,0|a},B:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+888>>2]:(r[4+_>>2]=1740,r[_>>2]=2688,Te(4,1294,_),0),q=16+_|0,0|a},C:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+432>>2]:(r[4+_>>2]=1740,r[_>>2]=2716,Te(4,1294,_),0),q=16+_|0,0|a},D:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+884>>2]:(r[4+_>>2]=1740,r[_>>2]=2743,Te(4,1294,_),0),q=16+_|0,0|a},E:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+440>>2]:(r[4+_>>2]=1740,r[_>>2]=2772,Te(4,1294,_),0),q=16+_|0,0|a},F:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+436>>2]:(r[4+_>>2]=1740,r[_>>2]=2797,Te(4,1294,_),0),q=16+_|0,0|a},G:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+448>>2]:(r[4+_>>2]=1740,r[_>>2]=2824,Te(4,1294,_),0),q=16+_|0,0|a},H:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+912>>2]:(r[4+_>>2]=1740,r[_>>2]=2848,Te(4,1294,_),0),q=16+_|0,0|a},I:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+844>>2]:(r[4+_>>2]=1740,r[_>>2]=2873,Te(4,1294,_),0),q=16+_|0,0|a},J:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+892>>2]:(r[4+_>>2]=1740,r[_>>2]=2893,Te(4,1294,_),0),q=16+_|0,0|a},K:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+444>>2]:(r[4+_>>2]=1740,r[_>>2]=2920,Te(4,1294,_),0),q=16+_|0,0|a},L:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+836>>2]:(r[4+_>>2]=1740,r[_>>2]=2950,Te(4,1294,_),0),q=16+_|0,0|a},M:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+904>>2]:(r[4+_>>2]=1740,r[_>>2]=2974,Te(4,1294,_),0),q=16+_|0,0|a},N:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+840>>2]:(r[4+_>>2]=1740,r[_>>2]=3e3,Te(4,1294,_),0),q=16+_|0,0|a},O:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+452>>2]:(r[4+_>>2]=1740,r[_>>2]=3022,Te(4,1294,_),0),q=16+_|0,0|a},P:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+456>>2]:(r[4+_>>2]=1740,r[_>>2]=3051,Te(4,1294,_),0),q=16+_|0,0|a},Q:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[r[a>>2]+876>>2]:(r[4+_>>2]=1740,r[_>>2]=3078,Te(4,1294,_),0),q=16+_|0,0|a},R:function(a){var _;q=_=q-16|0,(a|=0)?r[a+428>>2]=1:(r[4+_>>2]=1740,r[_>>2]=3110,Te(4,1294,_)),q=16+_|0},S:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+640>>2]:(r[4+_>>2]=1740,r[_>>2]=3139,Te(4,1294,_),0),q=16+_|0,0|a},T:function(a){var _;return q=_=q-16|0,a=(a|=0)?r[a+636>>2]:(r[4+_>>2]=1740,r[_>>2]=3164,Te(4,1294,_),0),q=16+_|0,0|a},U:function(a){var _;return Xt(12+(q=_=q-16|0)|0,64,a|=0),q=16+_|0,r[12+_>>2]},V:function(a){var _,M,g=0;return q=M=q-16|0,!(a|=0)||Xt(12+M|0,16,_=rr(a))||(g=Or(a,r[12+M>>2],_))||(It(r[12+M>>2]),g=0),q=16+M|0,0|g},W:function(a){return 0|ur(a|=0)},X:function(a){It(a|=0)},Y:function(a){var _;Xt(12+(q=_=q-16|0)|0,64,a|=0),It(r[12+_>>2]),q=16+_|0},Z:function(){return 0|q},_:function(a){return 0|(q=q-(0|a)&-16)},$:function(a){q=0|a},aa:function(a){return 0|(a=0|(a|=0),(M=0|ls())<(a=M+(a|=0)|0)&&a<65536&&(a=new ArrayBuffer(z(a,65536)),(_=new T.Int8Array(a)).set($),$=_,$=new T.Int8Array(a),J=new T.Int16Array(a),r=new T.Int32Array(a),j=new T.Uint8Array(a),W=new T.Uint16Array(a),re=new T.Uint32Array(a),O=new T.Float32Array(a),ee=new T.Float64Array(a),I=a,B.buffer=a),M);var _,M},ba:function(a,_){N[a|=0](_|=0)}};function he(a,_,M){var g,f,S=0;if(M)for(;;){if(M=M+-1|0,a>>>0<(S=(g=a+_|0)-1|0)>>>0)for(;f=j[0|a],$[0|a]=j[0|S],$[0|S]=f,(a=a+1|0)>>>0<(S=S+-1|0)>>>0;);if(a=g,!M)break}}function Te(a,_,M){var g;q=g=q-272|0,re[1804]>a>>>0||(a=r[1805])&&(is(16+g|0,_,r[12+g>>2]=M),N[a](16+g|0)),q=272+g|0}function gt(a,_,M){32&j[0|a]||function(g,f,S){var c=0,d=0,v=0;r:{if(!(c=r[S+16>>2])){if(function(y){var A;return A=j[y+74|0],$[y+74|0]=A+-1|A,8&(A=r[y>>2])?(r[y>>2]=32|A,1):(r[y+4>>2]=0,r[y+8>>2]=0,A=r[y+44>>2],r[y+28>>2]=A,r[y+20>>2]=A,r[y+16>>2]=A+r[y+48>>2],0)}(S))break r;c=r[S+16>>2]}if(c-(v=r[S+20>>2])>>>0<f>>>0)return N[r[S+36>>2]](S,g,f);e:if(!($[S+75|0]<0)){for(c=f;;){if(!(d=c))break e;if(j[(c=d+-1|0)+g|0]==10)break}if(N[r[S+36>>2]](S,g,d)>>>0<d>>>0)break r;f=f-d|0,g=g+d|0,v=r[S+20>>2]}De(v,g,f),r[S+20>>2]=r[S+20>>2]+f}}(_,M,a)}function Le(a,_,M,g,f){var S,c,d;if(q=d=q-256|0,!(73728&f|(0|M)<=(0|g))){if(it(d,_,(S=(f=M-g|0)>>>0<256)?f:256),_=a,c=d,!S){for(M=M-g|0;gt(a,d,256),255<(f=f+-256|0)>>>0;);f=255&M}gt(_,c,f)}q=256+d|0}function De(a,_,M){var g,f=0;if(8192<=M>>>0)ze(0|a,0|_,0|M);else{if(g=a+M|0,3&(a^_))if(g>>>0<4)M=a;else if((f=g-4|0)>>>0<a>>>0)M=a;else for(M=a;$[0|M]=j[0|_],$[M+1|0]=j[_+1|0],$[M+2|0]=j[_+2|0],$[M+3|0]=j[_+3|0],_=_+4|0,(M=M+4|0)>>>0<=f>>>0;);else{r:if((0|M)<1)M=a;else if(3&a)for(M=a;;){if($[0|M]=j[0|_],_=_+1|0,g>>>0<=(M=M+1|0)>>>0)break r;if(!(3&M))break}else M=a;if(!((a=-4&g)>>>0<64||(f=a+-64|0)>>>0<M>>>0))for(;r[M>>2]=r[_>>2],r[M+4>>2]=r[_+4>>2],r[M+8>>2]=r[_+8>>2],r[M+12>>2]=r[_+12>>2],r[M+16>>2]=r[_+16>>2],r[M+20>>2]=r[_+20>>2],r[M+24>>2]=r[_+24>>2],r[M+28>>2]=r[_+28>>2],r[M+32>>2]=r[_+32>>2],r[M+36>>2]=r[_+36>>2],r[M+40>>2]=r[_+40>>2],r[M+44>>2]=r[_+44>>2],r[M+48>>2]=r[_+48>>2],r[M+52>>2]=r[_+52>>2],r[M+56>>2]=r[_+56>>2],r[M+60>>2]=r[_+60>>2],_=_- -64|0,(M=M- -64|0)>>>0<=f>>>0;);if(!(a>>>0<=M>>>0))for(;r[M>>2]=r[_>>2],_=_+4|0,(M=M+4|0)>>>0<a>>>0;);}if(M>>>0<g>>>0)for(;$[0|M]=j[0|_],_=_+1|0,(0|g)!=(0|(M=M+1|0)););}}function et(a){var _,M;return p((_=a*a)*_*(M=_*a)*(2718311493989822e-21*_-.00019839334836096632)+(M*(.008333329385889463*_-.16666666641626524)+a))}function Oe(a){var _;return p(-.499999997251031*(a*=a)+1+.04166662332373906*(_=a*a)+a*_*(2439044879627741e-20*a-.001388676377460993))}function it(a,_,M){var g,f,S,c;if(M&&($[(g=a+M|0)-1|0]=_,$[0|a]=_,!(M>>>0<3||($[g-2|0]=_,$[a+1|0]=_,$[g-3|0]=_,$[a+2|0]=_,M>>>0<7)||($[g-4|0]=_,$[a+3|0]=_,M>>>0<9)||(f=(g=0-a&3)+a|0,_=z(255&_,16843009),r[f>>2]=_,r[(g=(M=M-g&-4)+f|0)-4>>2]=_,M>>>0<9)||(r[8+f>>2]=_,r[4+f>>2]=_,r[g-8>>2]=_,r[g-12>>2]=_,M>>>0<25)||(r[24+f>>2]=_,r[20+f>>2]=_,r[16+f>>2]=_,r[12+f>>2]=_,r[g-16>>2]=_,r[g-20>>2]=_,r[g-24>>2]=_,r[g-28>>2]=_,(M=M-(c=4&f|24)|0)>>>0<32))))for(S=g=_,_=f+c|0;r[_+24>>2]=S,r[_+28>>2]=g,r[_+16>>2]=S,r[_+20>>2]=g,r[_+8>>2]=S,r[_+12>>2]=g,r[_>>2]=S,r[_+4>>2]=g,_=_+32|0,31<(M=M+-32|0)>>>0;);return a}function st(a,_){var M;if(a>>>0<(_=(a+_|0)-1|0)>>>0)for(;M=j[0|a],$[0|a]=j[0|_],$[0|_]=M,(a=a+1|0)>>>0<(_=_+-1|0)>>>0;);}function Qe(a){var _,M=ls();return(a=(_=r[2216])+a|0)>>>0<=M<<16>>>0||lt(0|a)?(r[2216]=a,_):(r[2086]=48,-1)}function nt(a,_,M,g,f,S,c){var d,v,y,A,P,R,D,F,G,X,Y=0,Z=p(0),K=p(0),se=p(0);if(p(0),p(0),p(0),p(0),q=X=q-16|0,1<=(0|a))for(R=z(a,12)+_|0;;){if(1<=(0|(v=r[_+4>>2])))for(D=(a=r[_+8>>2])+z(v,48)|0,v=(d=r[_>>2]<<4)+c|0,y=(8|d)+c|0,d=(4|d)+c|0;(Y=r[a+8>>2])&&((F=Y+-1|0)>>>0<=1?(G=(r[a+4>>2]<<2)+M|0,Y=r[G+(r[a+12>>2]<<2)>>2]<<2,Z=O[Y+S>>2],P=O[f+Y>>2],K=O[g+Y>>2],F-1?(se=K,K=O[a+20>>2],O[v>>2]=O[v>>2]+p(O[a+44>>2]*p(se*K)),O[d>>2]=O[d>>2]+p(p(P*K)*O[a+44>>2]),O[y>>2]=O[y>>2]+p(p(Z*K)*O[a+44>>2])):(Y=r[(r[a+16>>2]<<2)+G>>2]<<2,F=O[Y+S>>2],G=O[f+Y>>2],se=K,K=O[a+20>>2],A=O[a+24>>2],O[v>>2]=O[v>>2]+p(O[a+44>>2]*p(p(se*K)+p(O[g+Y>>2]*A))),O[d>>2]=O[d>>2]+p(p(p(P*K)+p(G*A))*O[a+44>>2]),O[y>>2]=O[y>>2]+p(p(p(Z*K)+p(F*A))*O[a+44>>2]))):(r[X>>2]=Y,Te(4,1024,X))),(a=a+48|0)>>>0<D>>>0;);if(a=(r[_>>2]<<4)+c|0,Z=O[a>>2],O[a>>2]=Z<p(0)?p(0):p(Ie(Z,p(1))),Z=O[a+4>>2],O[a+4>>2]=Z<p(0)?p(0):p(Ie(Z,p(1))),Z=O[a+8>>2],O[a+8>>2]=Z<p(0)?p(0):p(Ie(Z,p(1))),!((_=_+12|0)>>>0<R>>>0))break}q=16+X|0}function $e(a,_,M){var g,f,S=0;if((0|_)==1&a>>>0<0|_>>>0<1)S=a;else for(;g=hs(S=us(a,_,10),f=Ae,10),$[0|(M=M+-1|0)]=a-g|48,g=(0|_)==9&4294967295<a>>>0|9<_>>>0,a=S,_=f,g;);if(S)for(;$[0|(M=M+-1|0)]=S-z(a=(S>>>0)/10|0,10)|48,_=9<S>>>0,S=a,_;);return M}function Fe(a){return a+-48>>>0<10}function Nt(a){var _;return(_=ns(a,64))?_-a|0:64}function Gt(a,_){var M=0;return 1024<=(0|_)?(a*=898846567431158e293,_=(0|(M=_+-1023|0))<1024?M:(a*=898846567431158e293,((0|_)<3069?_:3069)+-2046|0)):-1023<(0|_)||(a*=22250738585072014e-324,_=-1023<(0|(M=_+1022|0))?M:(a*=22250738585072014e-324,(-3066<(0|_)?_:-3066)+2044|0)),ut(0,0),ut(1,_+1023<<20),a*+Ut()}function at(a,_){var M=0,g=a,f=_>>>0<=31?(M=r[a+4>>2],r[a>>2]):(M=r[a>>2],r[a+4>>2]=M,_=_+-32|(r[a>>2]=0),0);r[g>>2]=f<<_,r[a+4>>2]=M<<_|f>>>32-_}function Pt(a,_,M,g,f){var S,c=0,d=0,v=0;q=S=q-240|0,c=r[_>>2],r[232+S>>2]=c,_=r[_+4>>2],r[S>>2]=a,d=1;r:{e:{t:{if(((r[236+S>>2]=_)||(0|c)!=1)&&(c=a-r[(M<<2)+f>>2]|0,!((0|N[5](c,a))<1))){for(v=!g;;){i:{if(_=c,!(!v|(0|M)<2)&&(g=r[((M<<2)+f|0)-8>>2],-1<(0|N[5](c=a+-4|0,_))||-1<(0|N[5](c-g|0,_))))break i;if(r[(d<<2)+S>>2]=_,d=d+1|0,Lt(232+S|0,a=as(232+S|0)),M=a+M|0,!r[236+S>>2]&&r[232+S>>2]==1)break e;if(v=1,c=(a=_)-r[(M<<2)+f>>2]|(g=0),0<(0|N[5](c,r[S>>2])))continue;break t}break}_=a;break e}_=a}if(g)break r}os(S,d),jr(_,M,f)}q=240+S|0}function Lt(a,_){var M=0,g=a,f=_>>>0<=31?(M=r[a>>2],r[a+4>>2]):(M=r[a+4>>2],r[a+4>>2]=0,r[a>>2]=M,_=_+-32|0,0);r[g+4>>2]=f>>>_,r[a>>2]=f<<32-_|M>>>_}function xt(a,_){var M=j[a+4|0];r[_>>2]=r[a+64>>2]+a,r[_+4>>2]=r[a+68>>2]+a,r[_+8>>2]=r[a+72>>2]+a,r[_+12>>2]=r[a+76>>2]+a,r[_+16>>2]=r[a+80>>2]+a,r[_+20>>2]=r[a+84>>2]+a,r[_+24>>2]=r[a+88>>2]+a,r[_+28>>2]=r[a+92>>2]+a,r[_+32>>2]=r[a+96>>2]+a,r[_+36>>2]=r[a+100>>2]+a,r[_+40>>2]=r[a+104>>2]+a,r[_+44>>2]=r[a+108>>2]+a,r[_+48>>2]=r[a+112>>2]+a,r[_+52>>2]=r[a+116>>2]+a,r[_+56>>2]=r[a+120>>2]+a,r[_+60>>2]=r[a+124>>2]+a,r[_- -64>>2]=r[a+128>>2]+a,r[_+68>>2]=r[a+132>>2]+a,r[_+72>>2]=r[a+136>>2]+a,r[_+76>>2]=r[a+140>>2]+a,r[_+80>>2]=r[a+144>>2]+a,r[_+84>>2]=r[a+148>>2]+a,r[_+92>>2]=r[a+152>>2]+a,r[_+96>>2]=r[a+156>>2]+a,r[_+100>>2]=r[a+160>>2]+a,r[_+108>>2]=r[a+164>>2]+a,r[_+112>>2]=r[a+168>>2]+a,r[_+116>>2]=r[a+172>>2]+a,r[_+124>>2]=r[a+176>>2]+a,r[_+128>>2]=r[a+180>>2]+a,r[_+132>>2]=r[a+184>>2]+a,r[_+136>>2]=r[a+188>>2]+a,r[_+140>>2]=r[a+192>>2]+a,r[_+144>>2]=r[a+196>>2]+a,r[_+148>>2]=r[a+200>>2]+a,r[_+152>>2]=r[a+204>>2]+a,r[_+156>>2]=r[a+208>>2]+a,r[_+164>>2]=r[a+212>>2]+a,r[_+168>>2]=r[a+216>>2]+a,r[_+172>>2]=r[a+220>>2]+a,r[_+176>>2]=r[a+224>>2]+a,r[_+180>>2]=r[a+228>>2]+a,r[_+184>>2]=r[a+232>>2]+a,r[_+188>>2]=r[a+236>>2]+a,r[_+192>>2]=r[a+240>>2]+a,r[_+196>>2]=r[a+244>>2]+a,r[_+200>>2]=r[a+248>>2]+a,r[_+204>>2]=r[a+252>>2]+a,r[_+208>>2]=r[a+256>>2]+a,r[_+212>>2]=r[a+260>>2]+a,r[_+216>>2]=r[a+264>>2]+a,r[_+220>>2]=r[a+268>>2]+a,r[_+224>>2]=r[a+272>>2]+a,r[_+228>>2]=r[a+276>>2]+a,r[_+232>>2]=r[a+280>>2]+a,r[_+236>>2]=r[a+284>>2]+a,r[_+244>>2]=r[a+288>>2]+a,r[_+248>>2]=r[a+292>>2]+a,r[_+272>>2]=r[a+296>>2]+a,r[_+276>>2]=r[a+300>>2]+a,r[_+280>>2]=r[a+304>>2]+a,r[_+292>>2]=r[a+308>>2]+a,r[_+296>>2]=r[a+312>>2]+a,r[_+300>>2]=r[a+316>>2]+a,r[_+304>>2]=r[a+320>>2]+a,r[_+308>>2]=r[a+324>>2]+a,r[_+312>>2]=r[a+328>>2]+a,r[_+316>>2]=r[a+332>>2]+a,r[_+328>>2]=r[a+336>>2]+a,r[_+332>>2]=r[a+340>>2]+a,r[_+336>>2]=r[a+344>>2]+a,r[_+348>>2]=r[a+348>>2]+a,r[_+360>>2]=r[a+352>>2]+a,r[_+364>>2]=r[a+356>>2]+a,r[_+368>>2]=r[a+360>>2]+a,r[_+352>>2]=r[a+364>>2]+a,r[_+356>>2]=r[a+368>>2]+a,r[_+488>>2]=r[a+372>>2]+a,r[_+492>>2]=r[a+376>>2]+a,r[_+496>>2]=r[a+380>>2]+a,r[_+500>>2]=r[a+384>>2]+a,r[_+504>>2]=r[a+388>>2]+a,r[_+508>>2]=r[a+392>>2]+a,r[_+512>>2]=r[a+396>>2]+a,r[_+516>>2]=r[a+400>>2]+a,r[_+520>>2]=r[a+404>>2]+a,r[_+524>>2]=r[a+408>>2]+a,r[_+528>>2]=r[a+412>>2]+a,r[_+532>>2]=r[a+416>>2]+a,r[_+536>>2]=r[a+420>>2]+a,r[_+540>>2]=r[a+424>>2]+a,r[_+544>>2]=r[a+428>>2]+a,r[_+548>>2]=r[a+432>>2]+a,r[_+552>>2]=r[a+436>>2]+a,r[_+556>>2]=r[a+440>>2]+a,r[_+560>>2]=r[a+444>>2]+a,r[_+564>>2]=r[a+448>>2]+a,r[_+568>>2]=r[a+452>>2]+a,r[_+572>>2]=r[a+456>>2]+a,r[_+576>>2]=r[a+460>>2]+a,r[_+580>>2]=r[a+464>>2]+a,M>>>0<2||(r[_+104>>2]=r[a+468>>2]+a,M>>>0<4)||(r[_+260>>2]=r[a+472>>2]+a,r[_+264>>2]=r[a+476>>2]+a,r[_+268>>2]=r[a+480>>2]+a,r[_+88>>2]=r[a+484>>2]+a,r[_+120>>2]=r[a+488>>2]+a,r[_+160>>2]=r[a+492>>2]+a,r[_+584>>2]=r[a+496>>2]+a,r[_+588>>2]=r[a+500>>2]+a,r[_+592>>2]=r[a+504>>2]+a,r[_+596>>2]=r[a+508>>2]+a,r[_+600>>2]=r[a+512>>2]+a,r[_+604>>2]=r[a+516>>2]+a,r[_+240>>2]=r[a+520>>2]+a,r[_+252>>2]=r[a+524>>2]+a,r[_+256>>2]=r[a+528>>2]+a,r[_+372>>2]=r[a+532>>2]+a,r[_+376>>2]=r[a+536>>2]+a,r[_+380>>2]=r[a+540>>2]+a,r[_+384>>2]=r[a+544>>2]+a,r[_+388>>2]=r[a+548>>2]+a,r[_+392>>2]=r[a+552>>2]+a,r[_+396>>2]=r[a+556>>2]+a,r[_+400>>2]=r[a+560>>2]+a,r[_+416>>2]=r[a+564>>2]+a,r[_+420>>2]=r[a+568>>2]+a,r[_+424>>2]=r[a+572>>2]+a,r[_+440>>2]=r[a+576>>2]+a,r[_+444>>2]=r[a+580>>2]+a,r[_+448>>2]=r[a+584>>2]+a,r[_+464>>2]=r[a+588>>2]+a,r[_+468>>2]=r[a+592>>2]+a,r[_+472>>2]=r[a+596>>2]+a,r[_+476>>2]=r[a+600>>2]+a,r[_+480>>2]=r[a+604>>2]+a,r[_+484>>2]=r[a+608>>2]+a,(0|M)!=4&&(r[_+284>>2]=r[a+612>>2]+a,r[_+288>>2]=r[a+616>>2]+a,r[_+320>>2]=r[a+620>>2]+a,r[_+324>>2]=r[a+624>>2]+a,r[_+340>>2]=r[a+628>>2]+a,r[_+344>>2]=r[a+632>>2]+a,r[_+404>>2]=r[a+636>>2]+a,r[_+408>>2]=r[a+640>>2]+a,r[_+412>>2]=r[a+644>>2]+a,r[_+428>>2]=r[a+648>>2]+a,r[_+432>>2]=r[a+652>>2]+a,r[_+436>>2]=r[a+656>>2]+a,r[_+452>>2]=r[a+660>>2]+a,r[_+456>>2]=r[a+664>>2]+a,r[_+460>>2]=r[a+668>>2]+a))}function Xt(a,_,M){var g=0;r:{if((0|_)==8)_=ur(M);else{if(g=28,3&_|(0|function(f){for(var S=0,c=0;c=S,f;)f&=f-1,S=S+1|0;return c}(_>>>2))!=1||(g=48,-64-_>>>0<M>>>0))break r;_=function(f,S){var c,d,v=0,y=0,A=0;if((y=f>>>0>(v=16)?f:16)+-1&y)for(;v=(f=v)<<1,f>>>0<y>>>0;);else f=y;return-64-f>>>0<=S>>>0?(r[2086]=48,0):(v=ur(12+((y=S>>>0<11?16:S+11&-8)+f|0)|0))?(S=v+-8|0,v&f+-1?(A=(-8&(d=r[(c=v+-4|0)>>2]))-(v=(f=15<(v=((f+v|0)-1&0-f)-8|0)-S>>>0?v:f+v|0)-S|0)|0,3&d?(r[f+4>>2]=A|1&r[f+4>>2]|2,r[4+(A=f+A|0)>>2]=1|r[4+A>>2],r[c>>2]=v|1&r[c>>2]|2,r[f+4>>2]=1|r[f+4>>2],Ti(S,v)):(S=r[S>>2],r[f+4>>2]=A,r[f>>2]=S+v)):f=S,3&(S=r[f+4>>2])&&((v=-8&S)>>>0<=y+16>>>0||(r[f+4>>2]=y|1&S|2,r[4+(S=f+y|0)>>2]=3|(y=v-y|0),r[4+(v=f+v|0)>>2]=1|r[v+4>>2],Ti(S,y))),f+8|0):0}(16<_>>>0?_:16,M)}if(!_)return 1;r[a>>2]=_,g=0}return g}function It(a){var _,M=0,g=0,f=0,S=0,c=0,d=0,v=0;r:if(a){_=(f=a+-8|0)+(a=-8&(g=r[a+-4>>2]))|0;e:if(!(1&g)){if(!(3&g)||(f=f-(g=r[f>>2])|0)>>>0<re[2091])break r;if(a=a+g|0,r[2092]!=(0|f))if(g>>>0<=255)S=r[f+8>>2],g>>>=3,(0|(M=r[f+12>>2]))==(0|S)?(v=r[2087]&Lr(g),r[2087]=v):(r[S+12>>2]=M,r[M+8>>2]=S);else{if(d=r[f+24>>2],(0|f)!=(0|(g=r[f+12>>2])))M=r[f+8>>2],r[M+12>>2]=g,r[g+8>>2]=M;else if(M=(M=r[(S=f+20|0)>>2])||r[(S=f+16|0)>>2]){for(;c=S,(M=r[(S=(g=M)+20|0)>>2])||(S=g+16|0,M=r[g+16>>2]););r[c>>2]=0}else g=0;if(d){S=r[f+28>>2];t:{if(r[(M=8652+(S<<2)|0)>>2]==(0|f)){if(r[M>>2]=g)break t;v=r[2088]&Lr(S),r[2088]=v;break e}if(!(r[d+(r[d+16>>2]==(0|f)?16:20)>>2]=g))break e}r[g+24>>2]=d,(M=r[f+16>>2])&&(r[g+16>>2]=M,r[M+24>>2]=g),(M=r[f+20>>2])&&(r[g+20>>2]=M,r[M+24>>2]=g)}}else if(!(3&~(g=r[4+_>>2])))return r[2089]=a,r[4+_>>2]=-2&g,r[f+4>>2]=1|a,r[a+f>>2]=a}if(!(_>>>0<=f>>>0)&&1&(g=r[4+_>>2])){e:{if(!(2&g)){if(r[2093]==(0|_)){if(r[2093]=f,a=r[2090]+a|0,r[2090]=a,r[f+4>>2]=1|a,r[2092]!=(0|f))break r;return r[2089]=0,r[2092]=0}if(r[2092]==(0|_))return r[2092]=f,a=r[2089]+a|0,r[2089]=a,r[f+4>>2]=1|a,r[a+f>>2]=a;a=(-8&g)+a|0;t:if(g>>>0<=255)g>>>=3,(0|(M=r[8+_>>2]))==(0|(S=r[12+_>>2]))?(v=r[2087]&Lr(g),r[2087]=v):(r[M+12>>2]=S,r[S+8>>2]=M);else{if(d=r[24+_>>2],(0|_)!=(0|(g=r[12+_>>2])))M=r[8+_>>2],r[M+12>>2]=g,r[g+8>>2]=M;else if(M=(M=r[(S=20+_|0)>>2])||r[(S=16+_|0)>>2]){for(;c=S,(M=r[(S=(g=M)+20|0)>>2])||(S=g+16|0,M=r[g+16>>2]););r[c>>2]=0}else g=0;if(d){S=r[28+_>>2];i:{if(r[(M=8652+(S<<2)|0)>>2]==(0|_)){if(r[M>>2]=g)break i;v=r[2088]&Lr(S),r[2088]=v;break t}if(!(r[d+(r[d+16>>2]==(0|_)?16:20)>>2]=g))break t}r[g+24>>2]=d,(M=r[16+_>>2])&&(r[g+16>>2]=M,r[M+24>>2]=g),(M=r[20+_>>2])&&(r[g+20>>2]=M,r[M+24>>2]=g)}}if(r[f+4>>2]=1|a,r[a+f>>2]=a,r[2092]!=(0|f))break e;return r[2089]=a}r[4+_>>2]=-2&g,r[f+4>>2]=1|a,r[a+f>>2]=a}if(a>>>0<=255)return g=8388+((a>>>=3)<<3)|0,a=(M=r[2087])&(a=1<<a)?r[g+8>>2]:(r[2087]=a|M,g),r[g+8>>2]=f,r[a+12>>2]=f,r[f+12>>2]=g,r[f+8>>2]=a;r[f+16>>2]=0,M=r[f+20>>2]=0,(S=a>>>8)&&(M=31,16777215<a>>>0||(M=S,M=28+((M=((M=(M<<=S=S+1048320>>>16&8)<<(d=M+520192>>>16&4))<<(c=M+245760>>>16&2)>>>15)-(c|S|d)|0)<<1|a>>>M+21&1)|0)),c=8652+((r[(g=f)+28>>2]=M)<<2)|0;e:if((S=r[2088])&(g=1<<M)){S=a<<((0|M)==31?0:25-(M>>>1)|0),g=r[c>>2];t:{for(;;){if((-8&r[(M=g)+4>>2])==(0|a))break t;if(g=S>>>29,S<<=1,!(g=r[16+(c=M+(4&g)|0)>>2]))break}r[c+16>>2]=f,r[f+12>>2]=f,r[f+24>>2]=M,r[f+8>>2]=f;break e}a=r[M+8>>2],r[a+12>>2]=f,r[M+8>>2]=f,r[f+24>>2]=0,r[f+12>>2]=M,r[f+8>>2]=a}else r[2088]=g|S,r[c>>2]=f,r[f+12>>2]=f,r[f+24>>2]=c,r[f+8>>2]=f;if(a=r[2095]+-1|0,!(r[2095]=a)){for(f=8804;f=(a=r[f>>2])+8|0,a;);r[2095]=-1}}}}function ur(a){var _,M=0,g=0,f=0,S=0,c=0,d=0,v=0,y=0,A=0,P=0,R=0;q=_=q-16|0;r:{e:{t:{i:{n:{o:{s:{c:{f:{u:{a:{if(a>>>0<=244){if(3&(M=(c=r[2087])>>>(a=(d=a>>>0<11?16:a+11&-8)>>>3))){a=(M=r[8396+(S=(g=a+(1&~M)|0)<<3)>>2])+8|0,(0|(f=r[M+8>>2]))==(0|(S=S+8388|0))?(R=Lr(g)&c,r[2087]=R):(r[f+12>>2]=S,r[S+8>>2]=f),r[M+4>>2]=3|(g<<=3),r[4+(M=M+g|0)>>2]=1|r[M+4>>2];break r}if(d>>>0<=(y=r[2089])>>>0)break a;if(M){g=M=(a=(0-(a=(0-(g=2<<a)|g)&M<<a)&a)-1|0)>>>12&16,M=r[8396+(f=(g=((g=(g|=M=(a>>>=M)>>>5&8)|(M=(a>>>=M)>>>2&4)|(M=(a>>>=M)>>>1&2))|(M=(a>>>=M)>>>1&1))+(a>>>M)|0)<<3)>>2],(0|(a=r[M+8>>2]))==(0|(f=f+8388|0))?(c=Lr(g)&c,r[2087]=c):(r[a+12>>2]=f,r[f+8>>2]=a),a=M+8|0,r[M+4>>2]=3|d,r[4+(v=M+d|0)>>2]=1|(S=(g<<=3)-d|0),r[M+g>>2]=S,y&&(M=8388+((g=y>>>3)<<3)|0,f=r[2092],g=(g=1<<g)&c?r[M+8>>2]:(r[2087]=g|c,M),r[M+8>>2]=f,r[g+12>>2]=f,r[f+12>>2]=M,r[f+8>>2]=g),r[2092]=v,r[2089]=S;break r}if(!(P=r[2088]))break a;for(g=M=(a=(P&0-P)-1|0)>>>12&16,M=r[8652+(((g=(g|=M=(a>>>=M)>>>5&8)|(M=(a>>>=M)>>>2&4)|(M=(a>>>=M)>>>1&2))|(M=(a>>>=M)>>>1&1))+(a>>>M)<<2)>>2],f=(-8&r[M+4>>2])-d|0,g=M;a=(a=r[g+16>>2])||r[g+20>>2];)f=(g=(S=(-8&r[a+4>>2])-d|0)>>>0<f>>>0)?S:f,M=g?a:M,g=a;if(A=r[M+24>>2],(0|(S=r[M+12>>2]))!=(0|M)){a=r[M+8>>2],r[a+12>>2]=S,r[S+8>>2]=a;break e}if(!(a=r[(g=M+20|0)>>2])){if(!(a=r[M+16>>2]))break u;g=M+16|0}for(;v=g,(a=r[(g=(S=a)+20|0)>>2])||(g=S+16|0,a=r[S+16>>2]););r[v>>2]=0;break e}if(d=-1,!(4294967231<a>>>0)&&(d=-8&(M=a+11|0),y=r[2088])){g=0-d|0,c=0,(M>>>=8)&&(c=31,16777215<d>>>0||(c=28+((a=((c=(M<<=f=M+1048320>>>16&8)<<(a=M+520192>>>16&4))<<(M=c+245760>>>16&2)>>>15)-(M|a|f)|0)<<1|d>>>a+21&1)|0));d:{p:{if(f=r[8652+(c<<2)>>2])for(M=d<<((0|c)==31?0:25-(c>>>1)|0),a=0;;){if(!(g>>>0<=(v=(-8&r[f+4>>2])-d|0)>>>0||(S=f,g=v))){g=0,a=f;break p}if(v=r[f+20>>2],f=r[16+((M>>>29&4)+f|0)>>2],a=v&&(0|v)!=(0|f)?v:a,M<<=!!(0|f),!f)break}else a=0;if(!(a|S)){if(!(a=(0-(a=2<<c)|a)&y))break a;f=M=(a=(a&0-a)-1|0)>>>12&16,a=r[8652+(((f=(f|=M=(a>>>=M)>>>5&8)|(M=(a>>>=M)>>>2&4)|(M=(a>>>=M)>>>1&2))|(M=(a>>>=M)>>>1&1))+(a>>>M)<<2)>>2]}if(!a)break d}for(;g=(M=(f=(-8&r[a+4>>2])-d|0)>>>0<g>>>0)?f:g,S=M?a:S,a=(M=r[a+16>>2])||r[a+20>>2];);}if(!(!S|g>>>0>=r[2089]-d>>>0)){if(v=r[S+24>>2],(0|S)!=(0|(M=r[S+12>>2]))){a=r[S+8>>2],r[a+12>>2]=M,r[M+8>>2]=a;break t}if(!(a=r[(f=S+20|0)>>2])){if(!(a=r[S+16>>2]))break f;f=S+16|0}for(;c=f,(a=r[(f=(M=a)+20|0)>>2])||(f=M+16|0,a=r[M+16>>2]););r[c>>2]=0;break t}}}if(d>>>0<=(M=r[2089])>>>0){a=r[2092],16<=(g=M-d|0)>>>0?(r[2089]=g,r[2092]=f=a+d|0,r[f+4>>2]=1|g,r[a+M>>2]=g,r[a+4>>2]=3|d):(r[2092]=0,r[2089]=0,r[a+4>>2]=3|M,r[4+(M=a+M|0)>>2]=1|r[M+4>>2]),a=a+8|0;break r}if(d>>>0<(f=r[2090])>>>0){r[2090]=M=f-d|0,a=r[2093],r[2093]=g=a+d|0,r[g+4>>2]=1|M,r[a+4>>2]=3|d,a=a+8|0;break r}if((g=(c=(g=S=d+47|(a=0))+(M=r[2205]?r[2207]:(r[2208]=-1,r[2209]=-1,r[2206]=4096,r[2207]=4096,r[2205]=12+_&-16^1431655768,r[2210]=0,r[2198]=0,4096))|0)&(v=0-M|0))>>>0<=d>>>0||(M=r[2197])&&(A=(y=r[2195])+g|0)>>>0<=y>>>0|M>>>0<A>>>0)break r;if(4&j[8792])break o;a:{d:{if(M=r[2093])for(a=8796;;){if((y=r[a>>2])+r[a+4>>2]>>>0>M>>>0&&y>>>0<=M>>>0)break d;if(!(a=r[a+8>>2]))break}if((0|(M=Qe(0)))==-1||(c=g,(c=(f=(a=r[2206])+-1|0)&M?(g-M|0)+(M+f&0-a)|0:c)>>>0<=d>>>0|2147483646<c>>>0)||(a=r[2197])&&(v=(f=r[2195])+c|0)>>>0<=f>>>0|a>>>0<v>>>0)break s;if((0|M)!=(0|(a=Qe(c))))break a;break n}if(2147483646<(c=v&c-f)>>>0)break s;if((0|(M=Qe(c)))==(r[a>>2]+r[a+4>>2]|0))break c;a=M}if(!(d+48>>>0<=c>>>0|2147483646<c>>>0|(0|(M=a))==-1)){if(2147483646<(a=(a=r[2207])+(S-c|0)&0-a)>>>0)break n;if((0|Qe(a))!=-1){c=a+c|0;break n}Qe(0-c|0);break s}if((0|M)!=-1)break n;break s}S=0;break e}M=0;break t}if((0|M)!=-1)break n}r[2198]=4|r[2198]}if(2147483646<g>>>0||(M=Qe(g),(a=Qe(0))>>>0<=M>>>0|(0|M)==-1|(0|a)==-1)||(c=a-M|0)>>>0<=d+40>>>0)break i}a=r[2195]+c|0,(r[2195]=a)>>>0>re[2196]&&(r[2196]=a);n:{o:{s:{if(g=r[2093]){for(a=8796;;){if(((f=r[a>>2])+(S=r[a+4>>2])|0)==(0|M))break s;if(!(a=r[a+8>>2]))break}break o}for((a=r[2091])>>>0<=M>>>0&&a||(r[2091]=M),a=0,r[2200]=c,r[2199]=M,r[2095]=-1,r[2096]=r[2205],r[2202]=0;r[8396+(g=a<<3)>>2]=f=g+8388|0,r[g+8400>>2]=f,(0|(a=a+1|0))!=32;);r[2090]=f=(a=c+-40|0)-(g=M+8&7?-8-M&7:0)|0,r[2093]=g=M+g|0,r[g+4>>2]=1|f,r[4+(a+M|0)>>2]=40,r[2094]=r[2209];break n}if(!(8&j[a+12|0]|M>>>0<=g>>>0|g>>>0<f>>>0)){r[a+4>>2]=S+c,r[2093]=M=(a=g+8&7?-8-g&7:0)+g|0,f=r[2090]+c|0,r[2090]=a=f-a|0,r[M+4>>2]=1|a,r[4+(g+f|0)>>2]=40,r[2094]=r[2209];break n}}M>>>0<(S=r[2091])>>>0&&(r[2091]=M,S=0),f=M+c|0,a=8796;o:{s:{c:{f:{u:{a:{for(;(0|f)!=r[a>>2];)if(!(a=r[a+8>>2]))break a;if(!(8&j[a+12|0]))break u}for(a=8796;;){if((f=r[a>>2])>>>0<=g>>>0&&g>>>0<(S=f+r[a+4>>2]|0)>>>0)break f;a=r[a+8>>2]}}if(r[a>>2]=M,r[a+4>>2]=r[a+4>>2]+c,r[4+(A=(M+8&7?-8-M&7:0)+M|0)>>2]=3|d,a=((M=f+(f+8&7?-8-f&7:0)|0)-A|0)-d|0,v=d+A|0,(0|M)==(0|g)){r[2093]=v,a=r[2090]+a|0,r[2090]=a,r[v+4>>2]=1|a;break s}if(r[2092]==(0|M)){r[2092]=v,a=r[2089]+a|0,r[2089]=a,r[v+4>>2]=1|a,r[a+v>>2]=a;break s}if((3&(g=r[M+4>>2]))==1){P=-8&g;u:if(g>>>0<=255)S=g>>>3,g=r[M+8>>2],(0|(f=r[M+12>>2]))==(0|g)?(R=r[2087]&Lr(S),r[2087]=R):(r[g+12>>2]=f,r[f+8>>2]=g);else{if(y=r[M+24>>2],(0|(c=r[M+12>>2]))!=(0|M))g=r[M+8>>2],r[g+12>>2]=c,r[c+8>>2]=g;else if(d=(d=r[(f=M+20|0)>>2])||r[(f=M+16|0)>>2]){for(;g=f,(d=r[(f=(c=d)+20|0)>>2])||(f=c+16|0,d=r[c+16>>2]););r[g>>2]=0}else c=0;if(y){g=r[M+28>>2];a:{if(r[(f=8652+(g<<2)|0)>>2]==(0|M)){if(r[f>>2]=c)break a;R=r[2088]&Lr(g),r[2088]=R;break u}if(!(r[y+(r[y+16>>2]==(0|M)?16:20)>>2]=c))break u}r[c+24>>2]=y,(g=r[M+16>>2])&&(r[c+16>>2]=g,r[g+24>>2]=c),(g=r[M+20>>2])&&(r[c+20>>2]=g,r[g+24>>2]=c)}}M=M+P|0,a=a+P|0}if(r[M+4>>2]=-2&r[M+4>>2],r[v+4>>2]=1|a,(r[a+v>>2]=a)>>>0<=255){a=8388+((M=a>>>3)<<3)|0,M=(g=r[2087])&(M=1<<M)?r[a+8>>2]:(r[2087]=M|g,a),r[a+8>>2]=v,r[M+12>>2]=v,r[v+12>>2]=a,r[v+8>>2]=M;break s}if(M=0,(f=a>>>8)&&(M=31,16777215<a>>>0||(M=28+((M=((d=(f<<=S=f+1048320>>>16&8)<<(M=f+520192>>>16&4))<<(f=d+245760>>>16&2)>>>15)-(f|M|S)|0)<<1|a>>>M+21&1)|0)),r[(g=v)+28>>2]=M,r[v+16>>2]=0,g=8652+(M<<2)|(r[v+20>>2]=0),(f=r[2088])&(S=1<<M)){for(f=a<<((0|M)==31?0:25-(M>>>1)|0),M=r[g>>2];;){if((-8&r[(g=M)+4>>2])==(0|a))break c;if(M=f>>>29,f<<=1,!(M=r[16+(S=(4&M)+g|0)>>2]))break}r[S+16>>2]=v}else r[2088]=f|S,r[g>>2]=v;r[v+24>>2]=g,r[v+12>>2]=v,r[v+8>>2]=v;break s}for(r[2090]=v=(a=c+-40|0)-(f=M+8&7?-8-M&7:0)|0,r[2093]=f=M+f|0,r[f+4>>2]=1|v,r[4+(a+M|0)>>2]=40,r[2094]=r[2209],r[(f=(a=(S+(S+-39&7?39-S&7:0)|0)-47|0)>>>0<g+16>>>0?g:a)+4>>2]=27,a=r[2202],r[f+16>>2]=r[2201],r[f+20>>2]=a,a=r[2200],r[f+8>>2]=r[2199],r[f+12>>2]=a,r[2201]=f+8,r[2200]=c,r[2199]=M,a=f+24|(r[2202]=0);r[a+4>>2]=7,M=a+8|0,a=a+4|0,M>>>0<S>>>0;);if((0|g)==(0|f))break n;if(r[f+4>>2]=-2&r[f+4>>2],r[g+4>>2]=1|(S=f-g|0),(r[f>>2]=S)>>>0<=255){a=8388+((M=S>>>3)<<3)|0,M=(f=r[2087])&(M=1<<M)?r[a+8>>2]:(r[2087]=M|f,a),r[a+8>>2]=g,r[M+12>>2]=g,r[g+12>>2]=a,r[g+8>>2]=M;break n}if(r[g+16>>2]=0,a=r[g+20>>2]=0,(f=S>>>8)&&(a=31,16777215<S>>>0||(a=28+((a=((v=(f<<=c=f+1048320>>>16&8)<<(a=f+520192>>>16&4))<<(f=v+245760>>>16&2)>>>15)-(f|a|c)|0)<<1|S>>>a+21&1)|0)),M=8652+((r[(M=g)+28>>2]=a)<<2)|0,(f=r[2088])&(c=1<<a)){for(a=S<<((0|a)==31?0:25-(a>>>1)|0),M=r[M>>2];;){if((0|S)==(-8&r[(f=M)+4>>2]))break o;if(M=a>>>29,a<<=1,!(M=r[16+(c=f+(4&M)|0)>>2]))break}r[c+16>>2]=g,r[g+24>>2]=f}else r[2088]=f|c,r[M>>2]=g,r[g+24>>2]=M;r[g+12>>2]=g,r[g+8>>2]=g;break n}a=r[g+8>>2],r[a+12>>2]=v,r[g+8>>2]=v,r[v+24>>2]=0,r[v+12>>2]=g,r[v+8>>2]=a}a=A+8|0;break r}a=r[f+8>>2],r[a+12>>2]=g,r[f+8>>2]=g,r[g+24>>2]=0,r[g+12>>2]=f,r[g+8>>2]=a}if(!((a=r[2090])>>>0<=d>>>0)){r[2090]=M=a-d|0,a=r[2093],r[2093]=g=a+d|0,r[g+4>>2]=1|M,r[a+4>>2]=3|d,a=a+8|0;break r}}r[2086]=48,a=0;break r}t:if(v){a=r[S+28>>2];i:{if(r[(f=8652+(a<<2)|0)>>2]==(0|S)){if(r[f>>2]=M)break i;y=Lr(a)&y,r[2088]=y;break t}if(!(r[v+(r[v+16>>2]==(0|S)?16:20)>>2]=M))break t}r[M+24>>2]=v,(a=r[S+16>>2])&&(r[M+16>>2]=a,r[a+24>>2]=M),(a=r[S+20>>2])&&(r[M+20>>2]=a,r[a+24>>2]=M)}t:if(g>>>0<=15)r[S+4>>2]=3|(a=g+d|0),r[4+(a=a+S|0)>>2]=1|r[a+4>>2];else if(r[S+4>>2]=3|d,r[4+(f=S+d|0)>>2]=1|g,(r[g+f>>2]=g)>>>0<=255)a=8388+((M=g>>>3)<<3)|0,M=(g=r[2087])&(M=1<<M)?r[a+8>>2]:(r[2087]=M|g,a),r[a+8>>2]=f,r[M+12>>2]=f,r[f+12>>2]=a,r[f+8>>2]=M;else{a=0,(d=g>>>8)&&(a=31,16777215<g>>>0||(a=28+((a=((v=(d<<=c=d+1048320>>>16&8)<<(a=d+520192>>>16&4))<<(d=v+245760>>>16&2)>>>15)-(d|a|c)|0)<<1|g>>>a+21&1)|0)),r[(M=f)+28>>2]=a,r[f+16>>2]=0,M=8652+(a<<2)|(r[f+20>>2]=0);i:{if((d=1<<a)&y){for(a=g<<((0|a)==31?0:25-(a>>>1)|0),d=r[M>>2];;){if((-8&r[(M=d)+4>>2])==(0|g))break i;if(d=a>>>29,a<<=1,!(d=r[16+(c=(4&d)+M|0)>>2]))break}r[c+16>>2]=f}else r[2088]=d|y,r[M>>2]=f;r[f+24>>2]=M,r[f+12>>2]=f,r[f+8>>2]=f;break t}a=r[M+8>>2],r[a+12>>2]=f,r[M+8>>2]=f,r[f+24>>2]=0,r[f+12>>2]=M,r[f+8>>2]=a}a=S+8|0;break r}e:if(A){a=r[M+28>>2];t:{if(r[(g=8652+(a<<2)|0)>>2]==(0|M)){if(r[g>>2]=S)break t;R=Lr(a)&P,r[2088]=R;break e}if(!(r[A+(r[A+16>>2]==(0|M)?16:20)>>2]=S))break e}r[S+24>>2]=A,(a=r[M+16>>2])&&(r[S+16>>2]=a,r[a+24>>2]=S),(a=r[M+20>>2])&&(r[S+20>>2]=a,r[a+24>>2]=S)}f>>>0<=15?(r[M+4>>2]=3|(a=f+d|0),r[4+(a=a+M|0)>>2]=1|r[a+4>>2]):(r[M+4>>2]=3|d,r[4+(d=M+d|0)>>2]=1|f,r[f+d>>2]=f,y&&(a=8388+((g=y>>>3)<<3)|0,S=r[2092],g=(g=1<<g)&c?r[a+8>>2]:(r[2087]=g|c,a),r[a+8>>2]=S,r[g+12>>2]=S,r[S+12>>2]=a,r[S+8>>2]=g),r[2092]=d,r[2089]=f),a=M+8|0}return q=16+_|0,a}function Cr(a,_,M,g,f,S,c){var d,v,y,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0;r[76+(q=y=q-80|0)>>2]=_,v=55+y|0,d=56+y|0,_=0;r:{e:{t:for(;;){(0|Z)<0||(Z=(2147483647-Z|0)<(0|_)?(r[2086]=61,-1):_+Z|0);i:{n:{o:{s:{c:{f:{u:{a:{d:{p:{g:{v:{_:{if(D=r[76+y>>2],R=j[0|(_=D)]){for(;;){y:{b:{h:if(A=255&R){if((0|A)!=37)break b;for(R=_;;){if(j[_+1|0]!=37)break h;if(r[76+y>>2]=A=_+2|0,R=R+1|0,P=j[_+2|0],_=A,(0|P)!=37)break}}else R=_;if(_=R-D|0,a&&gt(a,D,_),_)continue t;K=-1,F=!Fe($[r[76+(A=y)>>2]+(R=1)|0]),_=r[76+y>>2],F|j[_+2|0]!=36||(K=$[_+1|0]+-48|0,se=1,R=3),r[A+76>>2]=_=R+_|0;h:if(31<(P=(X=$[(R=0)|_])+-32|0)>>>0)A=_;else if(A=_,75913&(P=1<<P))for(;;){if(r[76+y>>2]=A=_+1|0,R|=P,31<(P=(X=$[_+1|0])+-32|0)>>>0)break h;if(_=A,!(75913&(P=1<<P)))break}if((0|X)==42){if(F=y,Fe($[A+1|0])&&(_=r[76+y>>2],j[_+2|0]==36))r[(($[_+1|0]<<2)+f|0)-192>>2]=10,Y=r[(($[_+1|0]<<3)+g|0)-384>>2],se=1,_=_+3|0;else{if(se)break e;Y=se=0,a&&(_=r[M>>2],r[M>>2]=_+4,Y=r[_>>2]),_=r[76+y>>2]+1|0}r[F+76>>2]=_,-1<(0|Y)||(Y=0-Y|0,R|=8192)}else{if((0|(Y=ts(76+y|0)))<0)break e;_=r[76+y>>2]}if(P=-1,j[0|_]==46)if(j[_+1|0]==42)if(Fe($[_+2|0])&&(_=r[76+y>>2],j[_+3|0]==36))r[(($[_+2|0]<<2)+f|0)-192>>2]=10,P=r[(($[_+2|0]<<3)+g|0)-384>>2],r[76+y>>2]=_=_+4|0;else{if(se)break e;P=a?(_=r[M>>2],r[M>>2]=_+4,r[_>>2]):0,_=r[76+y>>2]+2|0,r[76+y>>2]=_}else r[76+y>>2]=_+1,P=ts(76+y|0),_=r[76+y>>2];for(A=0;;){if(ve=A,G=-1,57<$[0|_]+-65>>>0)break r;if(r[76+y>>2]=X=_+1|0,A=$[0|_],_=X,!((A=j[3295+(A+z(ve,58)|0)|0])+-1>>>0<8))break}if(!A)break r;h:{l:{m:{if((0|A)==19){if((0|K)<=-1)break m;break r}if((0|K)<0)break l;r[(K<<2)+f>>2]=A,A=r[4+(_=(K<<3)+g|0)>>2],r[64+y>>2]=r[_>>2],r[68+y>>2]=A}if(_=0,a)break h;continue t}if(!a)break i;es(64+y|0,A,M,c),X=r[76+y>>2]}if(F=-65537&R,R=8192&R?F:R,K=3336,A=d,_=$[X+-1|(G=0)],(X=(_=ve&&(15&_)==3?-33&_:_)+-88|0)>>>0<=32)break y;h:{l:{m:{x:{if(6<(F=_+-65|0)>>>0){if((0|_)!=83)break n;if(!P)break x;A=r[64+y>>2];break l}switch(F-1|0){case 1:break m;case 0:case 2:break n;default:break _}}Le(a,32,Y,_=0,R);break h}r[12+y>>2]=0,r[8+y>>2]=r[64+y>>2],r[64+y>>2]=8+y,P=-1,A=8+y|0}_=0;l:{for(;;){if(!(D=r[A>>2]))break l;if((F=(0|(D=ci(4+y|0,D)))<0)|P-_>>>0<D>>>0)break;if(A=A+4|0,!((_=_+D|0)>>>0<P>>>0))break l}if(G=-1,F)break r}if(Le(a,32,Y,_,R),_)for(P=0,A=r[64+y>>2];;){if(!(D=r[A>>2])||(0|_)<(0|(P=(D=ci(4+y|0,D))+P|0)))break h;if(gt(a,4+y|0,D),A=A+4|0,!(P>>>0<_>>>0))break}else _=0}Le(a,32,Y,_,8192^R),_=(0|_)<(0|Y)?Y:_;continue t}r[76+y>>2]=A=_+1|0,R=j[_+1|0],_=A;continue}break}switch(X-1|0){case 28:break c;case 21:break f;case 23:break a;case 22:break d;case 11:case 16:break p;case 10:break g;case 26:break v;case 8:case 12:case 13:case 14:break _;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break n;default:break u}}if(G=Z,a)break r;if(!se)break i;for(_=1;;){if(a=r[(_<<2)+f>>2]){if(es((_<<3)+g|0,a,M,c),(0|(_=_+(G=1)|0))!=10)continue;break r}break}if(G=1,9<_>>>0||(G=-1,r[(_<<2)+f>>2]))break r;for(;!r[((_=_+1|0)<<2)+f>>2]&&(0|_)!=10;);G=_>>>0<10?-1:1;break r}_=0|N[S](a,ee[64+y>>3],Y,P,R,_);continue}A=(_=ns(D=(_=r[64+y>>2])||3346,P))||P+D|0,R=F,P=_?_-D|0:P;break n}$[55+y|0]=r[64+y>>2],P=1,D=v,R=F;break n}if(_=F=r[68+y>>2],D=r[64+y>>2],(0|_)<-1||(0|_)<=-1&&!(4294967295<D>>>0)){_=0-(_+(0<D>>>0)|0)|0,r[64+y>>2]=D=0-D|0,r[68+y>>2]=_,G=1,K=3336;break s}if(2048&R){G=1,K=3337;break s}K=(G=1&R)?3338:3336;break s}if(D=function(Pe,ke,We){if(Pe|ke)for(;$[0|(We=We+-1|0)]=7&Pe|48,(Pe=(7&ke)<<29|Pe>>>3)|(ke>>>=3););return We}(r[64+y>>2],r[68+y>>2],d),!(8&R))break o;P=(0|(_=d-D|0))<(0|P)?P:_+1|0;break o}P=8<P>>>0?P:8,R|=8,_=120}if(D=function(Pe,ke,We,vt){if(Pe|ke)for(;$[0|(We=We+-1|0)]=j[3824+(15&Pe)|0]|vt,(Pe=(15&ke)<<28|Pe>>>4)|(ke>>>=4););return We}(r[64+y>>2],r[68+y>>2],d,32&_),!(8&R)|!(r[64+y>>2]|r[68+y>>2]))break o;K=3336+(_>>>4)|0,G=2;break o}if(7<(A=255&ve)>>>(_=0))continue;switch(A-1|0){default:case 0:case 5:r[r[64+y>>2]>>2]=Z;continue;case 1:A=r[64+y>>2],r[A>>2]=Z,r[A+4>>2]=Z>>31;continue;case 2:J[r[64+y>>2]>>1]=Z;continue;case 3:$[r[64+y>>2]]=Z;continue;case 4:continue;case 6:}A=r[64+y>>2],r[A>>2]=Z,r[A+4>>2]=Z>>31;continue}D=r[64+y>>2],_=r[68+y>>2],K=3336}D=$e(D,_,d)}R=-1<(0|P)?-65537&R:R,P=!!((F=_=r[68+y>>2])|(X=r[64+y>>2]))|P?(0|(_=!(F|X)+(d-D|0)|0))<(0|P)?P:_:(D=d,0)}Le(a,32,_=(0|Y)<(0|(A=(P=(0|P)<(0|(F=A-D|0))?F:P)+G|0))?A:Y,A,R),gt(a,K,G),Le(a,48,_,A,65536^R),Le(a,48,P,F,0),gt(a,D,F),Le(a,32,_,A,8192^R);continue}break}G=0;break r}G=-1}return q=80+y|0,G}function Gr(a){var _,M=0,g=0,f=0,S=0;f=4,g=1439;r:if(M=j[0|a]){for(;!((0|(_=j[0|g]))!=(0|M)||!(f=f+-1|0)|!_);)if(g=g+1|0,M=j[a+1|0],a=a+1|0,!M)break r;S=M}return(255&S)-j[0|g]|0}function jr(a,_,M){var g,f,S=0,c=0,d=0;r[(q=f=q-240|0)>>2]=a,c=1;r:if(!((0|_)<2))for(S=a;;){if(S=(g=S+-4|0)-r[((d=_+-2|0)<<2)+M>>2]|0,0<=(0|N[5](a,S))&&-1<(0|N[5](a,g))||(a=(c<<2)+f|0,0<=(0|N[5](S,g))?(r[a>>2]=S,d=_+-1|0):S=r[a>>2]=g,c=c+1|0,(0|d)<2))break r;a=r[f>>2],_=d}os(f,c),q=240+f|0}function li(a){var _,M,g=0;if(p(0),function(f){var S,c;r[f+428>>2]&&(c=r[f+332>>2],De(r[f+460>>2],r[f+436>>2],S=c<<2),De(r[f+464>>2],r[f+440>>2],S),De(r[f+468>>2],r[f+448>>2],S),j[r[f>>2]+4|0]<4||(De(r[f+472>>2],r[f+452>>2],S=c<<4),De(r[f+476>>2],r[f+456>>2],S)))}(a),function(f){var S,c,d,v=0,y=p(0),A=p(0),P=0,R=p(0);if(p(0),p(0),1<=(0|(P=r[f>>2])))for(d=(v=r[f+4>>2])+z(P,52)|0,f=r[f+12>>2];y=O[f>>2],O[v+44>>2]!=(y=(S=r[v+16>>2])?(A=y,y=O[v+4>>2],R=O[v+12>>2],A=p(p(A-y)/R),c=p(Ye(A)),P=p(de(c))<p(2147483648)?~~c:-2147483648,p(y+p(R*p(A-p(0|P))))):(R=O[v+4>>2],A=O[v+8>>2],y<R?R:A<y?A:y))?(O[v+44>>2]=y,r[v+48>>2]=1):r[v+48>>2]=0,S||(O[f>>2]=y),f=f+4|0,(v=v+52|0)>>>0<d>>>0;);}(a+540|0),function(f){var S,c,d,v,y,A,P=0,R=0,D=p(0),F=0,G=p(0),X=(p(0),p(0),0),Y=p(0),Z=0,K=0,se=0;if(p(0),1<=(0|(F=r[f+540>>2])))for(y=(X=r[f+544>>2])+z(F,52)|0,A=r[f+644>>2];;){r:if(!(r[X>>2]||(0|(F=r[X+32>>2]))<1))if(d=(f=r[X+28>>2])+z(F,28)|0,v=O[X+24>>2],c=O[X+20>>2],S=O[X+44>>2],A)for(;;){Y=p(K=0);e:{t:{i:{if((0|(R=r[f>>2]))<1)P=F=0;else if(Z=r[f+4>>2],G=O[Z>>2],D=p(G-c),(0|R)==1)F=S<p(c+G)^1|D<S^1,P=0;else{if(S<D){F=1,P=0;break t}if(F=0,S<p(c+G))P=0;else{if(P=1,D=O[Z+4>>2],!(S<p(c+D)))for(;;){if((0|R)==(0|(P=P+1|0)))break i;if(G=D,D=O[Z+(P<<2)>>2],S<p(c+D))break}p(D-c)<S||(P=P+-1|0,(D=p(D-G))<v)||(Y=p(p(S-G)/D))}}if(F)break t;if(Z=R=1,r[f+16>>2])break e;break t}P=R+-1|0,F=1}Z=(R=(G=O[f+12>>2])!=Y)&(Y==p(0)|G==p(0))|r[f+8>>2]!=(0|P),K=F}if(r[f+20>>2]=Z,r[f+24>>2]=R,O[f+12>>2]=Y,r[f+16>>2]=K,r[f+8>>2]=P,!((f=f+28|0)>>>0<d>>>0))break}else{if(!r[X+48>>2]){for(;;)if(r[f+20>>2]=0,!((f=f+28|(r[f+24>>2]=0))>>>0<d>>>0))break r}for(;;){Y=p(K=0);e:{t:{i:{n:if(!(((R=0)|(P=r[(Z=f)>>2]))<1)){if(F=r[f+4>>2],G=O[F>>2],D=p(G-c),(0|P)!=1){if(!(S<D)){if(R=0,S<p(c+G))break n;R=1;o:if(D=O[F+4>>2],!(S<p(c+D))){for(P=P+-1|0;G=D,(0|P)!=(0|R);)if(D=O[F+((R=R+1|0)<<2)>>2],S<p(c+D))break o;F=1;break t}if(F=0,p(D-c)<S){P=R;break i}if(P=R+-1|0,(D=p(D-G))<v)break i;Y=p(p(S-G)/D);break i}F=1,P=0;break t}R=S<p(c+G)^1|D<S^1}F=R,P=0}if(!F&&(se=R=1,r[f+16>>2]))break e}K=F,se=(R=(G=O[f+12>>2])!=Y)&(Y==p(0)|G==p(0))|r[f+8>>2]!=(0|P)}if(r[Z+20>>2]=se,r[f+24>>2]=R,O[f+12>>2]=Y,r[f+16>>2]=K,r[f+8>>2]=P,!((f=f+28|0)>>>0<d>>>0))break}}if(!((X=X+52|0)>>>0<y>>>0))break}}(a),function(f){var S,c,d,v,y,A=0,P=p(0),R=0,D=0,F=p(0),G=0,X=p(0);if(p(0),!(j[r[f>>2]+4|0]<4||(0|(A=r[f+540>>2]))<1))for(v=(G=r[f+544>>2])+z(A,52)|0,y=r[f+644>>2];;){r:if(r[G>>2]==1&&!((0|(A=r[G+40>>2]))<1))if(c=(f=r[G+36>>2])+z(A,28)|0,S=O[G+44>>2],y)for(;;){X=p(A=0);e:if(!((0|(D=r[f>>2]))<2||(R=r[f+4>>2],S<=(P=O[R>>2])))){A=1;t:if(!(S<(F=O[R+4>>2]))){for(;P=F,(0|D)!=(0|(A=A+1|0));)if(S<(F=O[R+(A<<2)>>2]))break t;A=D+-1|0;break e}X=p(p(S-P)/p(F-P)),A=A+-1|0}if(P=O[f+16>>2],O[f+16>>2]=X,D=r[f+12>>2],r[f+12>>2]=A,r[f+24>>2]=R=P!=X,r[f+20>>2]=R&(X==p(0)|P==p(0))|(0|A)!=(0|D),!((f=f+28|0)>>>0<c>>>0))break}else{if(!r[G+48>>2]){for(;;)if(r[f+20>>2]=0,!((f=f+28|(r[f+24>>2]=0))>>>0<c>>>0))break r}for(;;){X=p(D=0);e:if(!((0|(d=r[f>>2]))<2||(R=r[f+4>>2],S<=(P=O[R>>2])))){if(A=1,!(S<(F=O[R+4>>2])))for(D=d+-1|0;;){if(P=F,(0|A)==(0|D))break e;if(S<(F=O[R+((A=A+1|0)<<2)>>2]))break}X=p(p(S-P)/p(F-P)),D=A+-1|0}if(P=O[f+16>>2],O[f+16>>2]=X,A=r[f+12>>2],r[f+12>>2]=D,r[f+24>>2]=R=P!=X,r[f+20>>2]=R&(X==p(0)|P==p(0))|(0|A)!=(0|D),!((f=f+28|0)>>>0<c>>>0))break}}if(!((G=G+52|0)>>>0<v>>>0))break}}(a),function(f){var S,c,d,v,y,A,P,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=p(0),se=0,ve=0,Pe=0,ke=0,We=0;if(1<=(0|(D=r[f+564>>2])))for(A=(X=r[f+568>>2])+z(D,36)|0,v=r[f+644>>2];;){r:{if(!(Y=((F=G=D=0)|(c=r[X+4>>2]))<1))for(se=r[X>>2],f=ke=0;;){if(R=r[se+(f<<2)>>2],r[R+16>>2]){R=1,We=0;break r}if(F=F||r[R+24>>2],D=D||r[R+20>>2],G=(O[R+12>>2]!=p(0))+G|0,(0|c)==(0|(f=f+1|0)))break}if(R=0,(ke=v?1:F)|(We=v?1:D)&&(r[X+12>>2]=se=1<<G,(0|G)!=31)){for(D=r[X+20>>2],y=r[X>>2],F=(f=r[X+16>>2])+(Z=se<<2)|0,F=it(f,0,4+((-1^f)+((f=f+4|0)>>>0<F>>>0?F:f)|0)&-4),Z=D+Z|0,f=D;r[f>>2]=1065353216,(f=f+4|0)>>>0<Z>>>0;);if(!Y){if(Y=0,Z=R=1,G)for(;;){if(G=r[(Y<<2)+y>>2],ve=r[G+8>>2],Pe=z(ve,R),(K=O[G+12>>2])!=p(f=0)){for(r[F>>2]=Pe+r[F>>2],O[D>>2]=p(p(1)-K)*O[D>>2],ve=z(ve+(f=1)|0,R);K=O[G+12>>2],P=r[(d=(S=f<<2)+F|0)>>2],r[d>>2]=P+((d=f&Z)?ve:Pe),O[(S=D+S|0)>>2]=(d?K:p(p(1)-K))*O[S>>2],(0|se)!=(0|(f=f+1|0)););Z<<=1}else for(;r[(ve=F+(f<<2)|0)>>2]=Pe+r[ve>>2],(0|se)!=(0|(f=f+1|0)););if(R=z(r[G>>2],R),(0|c)==(0|(Y=Y+1|0)))break}else for(;;){if(G=r[(Y<<2)+y>>2],Z=z(r[G+8>>2],R),(K=O[G+12>>2])!=p(f=0))r[F>>2]=Z+r[F>>2],O[D>>2]=p(p(1)-K)*O[D>>2];else for(;r[(Pe=F+(f<<2)|0)>>2]=Z+r[Pe>>2],(0|se)!=(0|(f=f+1|0)););if(R=z(r[G>>2],R),(0|c)==(0|(Y=Y+1|0)))break}R=0}}}if(r[X+32>>2]=R,r[X+24>>2]=We,r[X+28>>2]=ke,!((X=X+36|0)>>>0<A>>>0))break}}(a),function(f){var S,c,d,v,y=p(0),A=0,P=0,R=0,D=0,F=0,G=p(0),X=p(0),Y=p(0),Z=0,K=0,se=0;if(!(j[r[f>>2]+4|0]<4||(0|(A=r[f+588>>2]))<1))for(v=(R=r[f+592>>2])+z(A,48)|0,S=r[f+644>>2];;){if(f=r[R>>2],(K=S?1:r[f+20>>2])|(se=S?1:r[f+24>>2])){r:{e:{F=R,D=r[f+8>>2],A=r[f+12>>2],y=O[f+16>>2],f=(0|D)!=(0|A);t:{if(y!=p(0)){if(f=A+1|0,(0|A)==(0|D)){r[R+8>>2]=K=1,y=p(p(1)-y),se=1;break t}f=(0|f)==(0|D)?1:2}if(r[F+8>>2]=f,!se)break e;f=A}O[R+24>>2]=y,O[R+20>>2]=p(1)-y;break r}se=0,f=A}K?(r[R+12>>2]=f,r[R+16>>2]=f+1):K=0}else K=se=0;r:if((0|(c=r[R+36>>2]))<1)Y=p(1);else{if(d=r[R+40>>2],f=0,Y=p(1),!S)for(;;){e:{t:{if(A=r[(f<<2)+d>>2],P=r[A>>2]){if(!r[P+48>>2]){y=O[A+16>>2];break e}if((0|(D=r[A+12>>2]))<1){y=p(1),O[A+16>>2]=1;break e}if(Z=r[A+8>>2],(0|D)!=1&&(G=O[P+44>>2],F=r[A+4>>2],!(G<=(X=O[F>>2]))))break t;y=O[Z>>2],O[A+16>>2]=y;break e}r[A+16>>2]=1065353216,y=p(1);break e}P=1;t:if(!(G<(y=O[F+4>>2]))){for(;X=y,(0|D)!=(0|(P=P+1|0));)if(G<(y=O[F+(P<<2)>>2]))break t;y=O[(Z+(D<<2)|0)-4>>2],O[A+16>>2]=y;break e}F=A,y=p(p(G-X)/p(y-X)),y=p(p(y*O[(A=Z+(P<<2)|0)>>2])+p(O[A+-4>>2]*p(p(1)-y))),O[F+16>>2]=y}if(Y=Y<y?Y:y,(0|c)==(0|(f=f+1|0)))break r}for(;;){A=r[(f<<2)+d>>2],P=r[A>>2],y=p(1);e:if(P&&(Z=r[A+12>>2],y=p(1),!((0|Z)<1))&&(D=r[A+8>>2],y=O[D>>2],(0|Z)!=1)){t:{if(G=O[P+44>>2],F=r[A+4>>2],G<=(X=O[F>>2])){y=O[D>>2];break e}if(P=1,!(G<(y=O[F+4>>2]))){for(;X=y,(0|Z)!=(0|(P=P+1|0));)if(G<(y=O[F+(P<<2)>>2]))break t;y=O[(D+(Z<<2)|0)-4>>2];break e}}y=p(p(G-X)/p(y-X)),y=p(p(y*O[(P=D+(P<<2)|0)>>2])+p(O[P+-4>>2]*p(p(1)-y)))}if(Y=Y<(O[A+16>>2]=y)?Y:y,(0|c)==(0|(f=f+1|0)))break}}if(r[R+32>>2]=se,r[R+28>>2]=K,O[R+44>>2]=Y,!((R=R+48|0)>>>0<v>>>0))break}}(a),1<=(0|(_=r[a+4>>2])))for(_=(g=r[a+52>>2])+(_<<2)|0;M=O[g>>2],O[g>>2]=M<p(0)?p(0):p(Ie(M,p(1))),(g=g+4|0)>>>0<_>>>0;);(function(f){var S,c,d,v=0,y=0;if(1<=(0|(y=r[f+4>>2])))for(d=(v=r[f+8>>2])+z(y,12)|0,f=S=r[f+40>>2];y=0,r[v+8>>2]&&(c=r[v+4>>2],!r[(c<<2)+S>>2]&&(0|c)!=-1||(y=!r[r[v>>2]+32>>2])),r[f>>2]=y,f=f+4|0,(v=v+12|0)>>>0<d>>>0;);})(a),function(f){var S,c,d,v,y,A,P,R=0,D=0,F=0,G=0,X=0;if(1<=(0|(c=r[f+4>>2])))for(v=r[f+8>>2],d=r[f>>2],y=r[d+724>>2];;){if(S=r[z(G,12)+v>>2],(r[S+28>>2]||r[S+24>>2])&&(r[(R=G<<2)+r[f+28>>2]>>2]=r[S+12>>2],r[S+24>>2])&&!((0|(F=r[S+12>>2]))<1))for(F=(D=r[S+16>>2])+(F<<2)|0,A=r[R+y>>2],R=r[f+36>>2]+(X<<2)|0,P=r[d+976>>2];r[R>>2]=r[(r[D>>2]+A<<2)+P>>2],R=R+4|0,(D=D+4|0)>>>0<F>>>0;);if(r[S+28>>2]&&!((0|(R=r[S+12>>2]))<1))for(F=(D=r[S+20>>2])+(R<<2)|0,R=r[f+32>>2]+(X<<2)|0;r[R>>2]=r[D>>2],R=R+4|0,(D=D+4|0)>>>0<F>>>0;);if(X=r[S+8>>2]+X|0,(0|c)==(0|(G=G+1|0)))break}}(a),N[r[1808]](a+12|0,r[a+36>>2],r[a+44>>2],r[a+40>>2]),function(f){var S,c,d,v,y,A,P=0,R=0,D=0;if(1<=(0|(D=r[f+304>>2])))for(d=(P=r[f+308>>2])+(D<<5)|0,v=r[f+264>>2],y=r[f+144>>2],A=r[f+40>>2],D=c=r[f+312>>2];S=D,R=0,f=R=!r[P+28>>2]||(0|(f=r[P+4>>2]))!=-1&&(R=0,!r[(f<<2)+A>>2])||(0|(f=r[P+8>>2]))!=-1&&(R=0,!r[(f<<2)+c>>2])?R:!r[r[P>>2]+32>>2],r[S>>2]=f,(S=r[P+12>>2])>>>0<=1?S-1?r[(r[P+16>>2]<<2)+y>>2]=f:r[(r[P+16>>2]<<2)+v>>2]=f:Te(4,1372,0),D=D+4|0,(P=P+32|0)>>>0<d>>>0;);}(a),function(f){var S,c,d,v,y,A,P,R,D,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0,vt=0,Dt=0,pt=0;if(Z=r[f>>2],1<=(0|(ve=r[f+56>>2]))){for(Pe=r[f+60>>2],ke=r[Z+1052>>2],We=r[Z+784>>2];;){if(F=r[Pe+z(K,24)>>2],(r[F+28>>2]||r[F+24>>2])&&(r[(G=K<<2)+r[f+80>>2]>>2]=r[F+12>>2],r[F+24>>2])&&!((0|(Y=r[F+12>>2]))<1))for(vt=(X=r[F+16>>2])+(Y<<2)|0,Dt=r[G+We>>2],G=(Y=se<<2)+r[f+92>>2]|0,Y=Y+r[f+88>>2]|0;pt=Dt+r[X>>2]<<2,r[G>>2]=ke+(r[pt+r[Z+984>>2]>>2]<<2),r[Y>>2]=r[pt+r[Z+980>>2]>>2],Y=Y+4|0,G=G+4|0,(X=X+4|0)>>>0<vt>>>0;);if(r[F+28>>2]&&!((0|(G=r[F+12>>2]))<1))for(Y=(X=r[F+20>>2])+(G<<2)|0,G=r[f+84>>2]+(se<<2)|0;r[G>>2]=r[X>>2],G=G+4|0,(X=X+4|0)>>>0<Y>>>0;);if(se=r[F+8>>2]+se|0,(0|ve)==(0|(K=K+1|0)))break}Z=r[f>>2]}if(!(j[Z+4|0]<4||(0|(Dt=r[f+56>>2]))<1))for(pt=r[Z+792>>2],S=r[f+60>>2],X=se=0;;){if(K=r[z(X,24)+S>>2],r[K+24>>2]&&!((0|(F=r[K+12>>2]))<1))for(c=(G=r[K+16>>2])+(F<<2)|0,d=r[pt+(X<<2)>>2],Y=(F=se<<2)+r[f+96>>2]|0,ve=F+r[f+100>>2]|0,Pe=F+r[f+104>>2]|0,ke=F+r[f+108>>2]|0,We=F+r[f+112>>2]|0,vt=F+r[f+116>>2]|0,v=r[Z+1308>>2],y=r[Z+1304>>2],A=r[Z+1300>>2],P=r[Z+1296>>2],R=r[Z+1292>>2],D=r[Z+1288>>2];F=r[G>>2]+d<<2,r[Y>>2]=r[F+D>>2],r[ve>>2]=r[F+R>>2],r[Pe>>2]=r[F+P>>2],r[ke>>2]=r[F+A>>2],r[We>>2]=r[F+y>>2],r[vt>>2]=r[F+v>>2],vt=vt+4|0,We=We+4|0,ke=ke+4|0,Pe=Pe+4|0,ve=ve+4|0,Y=Y+4|0,(G=G+4|0)>>>0<c>>>0;);if(se=r[K+8>>2]+se|0,(0|Dt)==(0|(X=X+1|0)))break}}(a),function(f){var S=0,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0,vt=0,Dt=r[f+168>>2],pt=r[f>>2];if(1<=(0|(Y=r[f+164>>2])))for(K=r[pt+816>>2];;){if(d=r[z(P,12)+Dt>>2],(r[d+28>>2]||r[d+24>>2])&&(r[(R=P<<2)+r[f+188>>2]>>2]=r[d+12>>2],r[d+24>>2])){if(c=r[d+16>>2],Z=r[R+K>>2],1<=(0|(S=r[d+12>>2])))for(se=c+(S<<2)|0,v=(S=A<<2)+r[f+200>>2]|0,D=S+r[f+204>>2]|0,F=S+r[f+208>>2]|0,G=S+r[f+212>>2]|0,X=S+r[f+196>>2]|0,ve=r[pt+996>>2],Pe=r[pt+1012>>2],ke=r[pt+1008>>2],We=r[pt+1004>>2],vt=r[pt+1e3>>2],S=c;y=Z+r[S>>2]<<2,r[v>>2]=r[y+vt>>2],r[D>>2]=r[y+We>>2],r[F>>2]=r[y+ke>>2],r[G>>2]=r[y+Pe>>2],r[X>>2]=r[y+ve>>2],X=X+4|0,G=G+4|0,F=F+4|0,D=D+4|0,v=v+4|0,(S=S+4|0)>>>0<se>>>0;);S=Z+r[c>>2]<<2,r[R+r[f+288>>2]>>2]=r[S+r[pt+1016>>2]>>2],r[R+r[f+292>>2]>>2]=r[S+r[pt+1020>>2]>>2]}if(r[d+28>>2]&&!((0|(c=r[d+12>>2]))<1))for(c=(S=r[d+20>>2])+(c<<2)|0,v=r[f+192>>2]+(A<<2)|0;r[v>>2]=r[S>>2],v=v+4|0,(S=S+4|0)>>>0<c>>>0;);if(A=r[d+8>>2]+A|0,(0|Y)==(0|(P=P+1|0)))break}if(!(j[pt+4|0]<4||(0|(R=r[f+164>>2]))<1))for(Z=r[pt+824>>2],A=d=0;;){if(y=r[z(A,12)+Dt>>2],r[y+24>>2]&&!((0|(S=r[y+12>>2]))<1))for(Y=(v=r[y+16>>2])+(S<<2)|0,K=r[Z+(A<<2)>>2],D=(c=d<<2)+r[f+216>>2]|0,F=c+r[f+220>>2]|0,G=c+r[f+224>>2]|0,X=c+r[f+228>>2]|0,S=c+r[f+232>>2]|0,P=c+r[f+236>>2]|0,se=r[pt+1308>>2],ve=r[pt+1304>>2],Pe=r[pt+1300>>2],ke=r[pt+1296>>2],We=r[pt+1292>>2],vt=r[pt+1288>>2];c=K+r[v>>2]<<2,r[D>>2]=r[c+vt>>2],r[F>>2]=r[c+We>>2],r[G>>2]=r[c+ke>>2],r[X>>2]=r[c+Pe>>2],r[S>>2]=r[c+ve>>2],r[P>>2]=r[c+se>>2],P=P+4|0,S=S+4|0,X=X+4|0,G=G+4|0,F=F+4|0,D=D+4|0,(v=v+4|0)>>>0<Y>>>0;);if(d=r[y+8>>2]+d|0,(0|R)==(0|(A=A+1|0)))break}}(a),function(f){var S,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0;if(c=f- -64|0,N[r[1807]](c,r[f+88>>2],r[f+148>>2],r[f+144>>2]),N[r[1809]](c,r[f+92>>2],r[f+152>>2],r[r[f>>2]+796>>2],2,r[f+144>>2]),!(j[r[f>>2]+4|0]<4||(N[r[1807]](c,r[f+96>>2],r[f+120>>2],r[f+144>>2]),N[r[1807]](c,r[f+100>>2],r[f+124>>2],r[f+144>>2]),N[r[1807]](c,r[f+104>>2],r[f+128>>2],r[f+144>>2]),N[r[1807]](c,r[f+108>>2],r[f+132>>2],r[f+144>>2]),N[r[1807]](c,r[f+112>>2],r[f+136>>2],r[f+144>>2]),N[r[1807]](c,r[f+116>>2],r[f+140>>2],r[f+144>>2]),(0|(P=r[f+56>>2]))<1))){for(R=r[f+128>>2],D=r[f+124>>2],S=r[f+120>>2],d=r[f+156>>2],c=0;r[(v=y<<2)+d>>2]=r[(A=c<<2)+S>>2],r[d+(4|v)>>2]=r[A+D>>2],r[d+(8|v)>>2]=r[A+R>>2],y=y+4|0,(0|P)!=(0|(c=c+1|0)););for(d=r[f+160>>2],A=r[f+140>>2],R=r[f+136>>2],D=r[f+132>>2],c=f=0;r[(y=f<<2)+d>>2]=r[(v=c<<2)+D>>2],r[d+(4|y)>>2]=r[v+R>>2],r[d+(8|y)>>2]=r[v+A>>2],f=f+4|0,(0|P)!=(0|(c=c+1|0)););}}(a),function(f){var S,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0;if(c=f+172|0,N[r[1807]](c,r[f+196>>2],r[f+268>>2],r[f+264>>2]),N[r[1807]](c,r[f+200>>2],r[f+284>>2],r[f+264>>2]),N[r[1807]](c,r[f+204>>2],r[f+276>>2],r[f+264>>2]),N[r[1807]](c,r[f+208>>2],r[f+280>>2],r[f+264>>2]),N[r[1807]](c,r[f+212>>2],r[f+272>>2],r[f+264>>2]),!(j[r[f>>2]+4|0]<4||(N[r[1807]](c,r[f+216>>2],r[f+240>>2],r[f+264>>2]),N[r[1807]](c,r[f+220>>2],r[f+244>>2],r[f+264>>2]),N[r[1807]](c,r[f+224>>2],r[f+248>>2],r[f+264>>2]),N[r[1807]](c,r[f+228>>2],r[f+252>>2],r[f+264>>2]),N[r[1807]](c,r[f+232>>2],r[f+256>>2],r[f+264>>2]),N[r[1807]](c,r[f+236>>2],r[f+260>>2],r[f+264>>2]),(0|(P=r[f+164>>2]))<1))){for(R=r[f+248>>2],D=r[f+244>>2],S=r[f+240>>2],d=r[f+296>>2],c=0;r[(v=y<<2)+d>>2]=r[(A=c<<2)+S>>2],r[d+(4|v)>>2]=r[A+D>>2],r[d+(8|v)>>2]=r[A+R>>2],y=y+4|0,(0|P)!=(0|(c=c+1|0)););for(d=r[f+300>>2],A=r[f+260>>2],R=r[f+256>>2],D=r[f+252>>2],c=f=0;r[(y=f<<2)+d>>2]=r[(v=c<<2)+D>>2],r[d+(4|y)>>2]=r[v+R>>2],r[d+(8|y)>>2]=r[v+A>>2],f=f+4|0,(0|P)!=(0|(c=c+1|0)););}}(a),function(f){var S,c,d,v=0,y=0,A=0;if(1<=(0|(y=r[f+332>>2])))for(S=(v=r[f+336>>2])+z(y,20)|0,c=r[f+312>>2],d=r[f+40>>2],f=r[f+424>>2];y=0,r[v+12>>2]&&(A=r[v+4>>2],r[(A<<2)+d>>2]||(0|A)==-1)&&(A=r[v+8>>2],r[(A<<2)+c>>2]||(0|A)==-1)&&(y=!r[r[v>>2]+32>>2]),r[f>>2]=y,f=f+4|0,(v=v+20|0)>>>0<S>>>0;);}(a),function(f){var S,c,d,v,y,A,P,R,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0,vt=0,Dt=0,pt=0;if(X=r[f>>2],1<=(0|(Pe=r[f+332>>2]))){for(ke=r[f+336>>2],We=r[X+1052>>2],vt=r[X+856>>2];;){if(D=r[ke+z(K,20)>>2],(r[D+28>>2]||r[D+24>>2])&&(r[(F=K<<2)+r[f+356>>2]>>2]=r[D+12>>2],r[D+24>>2])&&!((0|(Y=r[D+12>>2]))<1))for(Dt=(G=r[D+16>>2])+(Y<<2)|0,pt=r[F+vt>>2],F=(Z=se<<2)+r[f+372>>2]|0,Y=Z+r[f+364>>2]|0,Z=Z+r[f+368>>2]|0;ve=pt+r[G>>2]<<2,r[F>>2]=We+(r[ve+r[X+1040>>2]>>2]<<2),r[Y>>2]=r[ve+r[X+1032>>2]>>2],r[Z>>2]=r[ve+r[X+1036>>2]>>2],Z=Z+4|0,Y=Y+4|0,F=F+4|0,(G=G+4|0)>>>0<Dt>>>0;);if(r[D+28>>2]&&!((0|(F=r[D+12>>2]))<1))for(Y=(G=r[D+20>>2])+(F<<2)|0,F=r[f+360>>2]+(se<<2)|0;r[F>>2]=r[G>>2],F=F+4|0,(G=G+4|0)>>>0<Y>>>0;);if(se=r[D+8>>2]+se|0,(0|Pe)==(0|(K=K+1|0)))break}X=r[f>>2]}if(!(j[X+4|0]<4||(0|(vt=r[f+332>>2]))<1))for(Dt=r[X+864>>2],pt=r[f+336>>2],G=se=0;;){if(K=r[pt+z(G,20)>>2],r[K+24>>2]&&!((0|(D=r[K+12>>2]))<1))for(S=(F=r[K+16>>2])+(D<<2)|0,c=r[Dt+(G<<2)>>2],Y=(D=se<<2)+r[f+376>>2]|0,Z=D+r[f+380>>2]|0,ve=D+r[f+384>>2]|0,Pe=D+r[f+388>>2]|0,ke=D+r[f+392>>2]|0,We=D+r[f+396>>2]|0,d=r[X+1308>>2],v=r[X+1304>>2],y=r[X+1300>>2],A=r[X+1296>>2],P=r[X+1292>>2],R=r[X+1288>>2];D=r[F>>2]+c<<2,r[Y>>2]=r[D+R>>2],r[Z>>2]=r[D+P>>2],r[ve>>2]=r[D+A>>2],r[Pe>>2]=r[D+y>>2],r[ke>>2]=r[D+v>>2],r[We>>2]=r[D+d>>2],We=We+4|0,ke=ke+4|0,Pe=Pe+4|0,ve=ve+4|0,Z=Z+4|0,Y=Y+4|0,(F=F+4|0)>>>0<S>>>0;);if(se=r[K+8>>2]+se|0,(0|vt)==(0|(G=G+1|0)))break}}(a),function(f){var S,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0;if(c=f+340|0,N[r[1807]](c,r[f+364>>2],r[f+448>>2],r[f+424>>2]),N[r[1808]](c,r[f+368>>2],r[f+440>>2],r[f+424>>2]),N[r[1809]](c,r[f+372>>2],r[f+444>>2],r[r[f>>2]+892>>2],2,r[f+424>>2]),!(j[r[f>>2]+4|0]<4||(N[r[1807]](c,r[f+376>>2],r[f+400>>2],r[f+424>>2]),N[r[1807]](c,r[f+380>>2],r[f+404>>2],r[f+424>>2]),N[r[1807]](c,r[f+384>>2],r[f+408>>2],r[f+424>>2]),N[r[1807]](c,r[f+388>>2],r[f+412>>2],r[f+424>>2]),N[r[1807]](c,r[f+392>>2],r[f+416>>2],r[f+424>>2]),N[r[1807]](c,r[f+396>>2],r[f+420>>2],r[f+424>>2]),(0|(P=r[f+332>>2]))<1))){for(R=r[f+408>>2],D=r[f+404>>2],S=r[f+400>>2],d=r[f+452>>2],c=0;r[(v=y<<2)+d>>2]=r[(A=c<<2)+S>>2],r[d+(4|v)>>2]=r[A+D>>2],r[d+(8|v)>>2]=r[A+R>>2],y=y+4|0,(0|P)!=(0|(c=c+1|0)););for(d=r[f+456>>2],A=r[f+420>>2],R=r[f+416>>2],D=r[f+412>>2],c=f=0;r[(y=f<<2)+d>>2]=r[(v=c<<2)+D>>2],r[d+(4|y)>>2]=r[v+R>>2],r[d+(8|y)>>2]=r[v+A>>2],f=f+4|0,(0|P)!=(0|(c=c+1|0)););}}(a),function(f){var S,c,d,v,y,A,P,R=0,D=0,F=0,G=0,X=0;if(1<=(0|(c=r[f+500>>2])))for(v=r[f+504>>2],d=r[f>>2],y=r[d+1252>>2];;){if(S=r[z(G,24)+v>>2],(r[S+28>>2]||r[S+24>>2])&&(r[(R=G<<2)+r[f+524>>2]>>2]=r[S+12>>2],r[S+24>>2])&&!((0|(F=r[S+12>>2]))<1))for(F=(D=r[S+16>>2])+(F<<2)|0,A=r[R+y>>2],R=r[f+532>>2]+(X<<2)|0,P=r[d+1284>>2];r[R>>2]=r[(r[D>>2]+A<<2)+P>>2],R=R+4|0,(D=D+4|0)>>>0<F>>>0;);if(r[S+28>>2]&&!((0|(R=r[S+12>>2]))<1))for(F=(D=r[S+20>>2])+(R<<2)|0,R=r[f+528>>2]+(X<<2)|0;r[R>>2]=r[D>>2],R=R+4|0,(D=D+4|0)>>>0<F>>>0;);if(X=r[S+8>>2]+X|0,(0|c)==(0|(G=G+1|0)))break}}(a),N[r[1807]](a+508|0,r[a+532>>2],r[a+536>>2],0),function(f){var S,c,d,v,y,A,P=p(0),R=0,D=0,F=0,G=0;if(p(0),q=S=q-16|0,F=r[f>>2],!(j[F+4|0]<5||(0|(G=r[f+596>>2]))<1))for(v=(D=r[f+600>>2])+z(G,12)|0,y=r[f+44>>2],G=r[F+976>>2];;){if(F=(r[D>>2]<<2)+y|0,P=p(r[F>>2]),1<=(0|(R=r[D+4>>2])))for(A=(f=r[D+8>>2])+z(R,48)|0;(R=r[f+8>>2])&&((c=R+-1|0)>>>0<=1?(R=r[f+4>>2],d=O[G+(R+r[f+12>>2]<<2)>>2],P=p(c-1?P+p(O[f+44>>2]*p(d*O[f+20>>2])):P+p(O[f+44>>2]*p(p(d*O[f+20>>2])+p(O[G+(R+r[f+16>>2]<<2)>>2]*O[f+24>>2]))))):(r[S>>2]=R,Te(4,1024,S))),(f=f+48|0)>>>0<A>>>0;);if(P=(P=p(P+p(.0010000000474974513)))<p(0)?p(0):p(Ie(P,p(1e3))),f=p(de(P))<p(2147483648)?~~P:-2147483648,r[F>>2]=f,!((D=D+12|0)>>>0<v>>>0))break}q=16+S|0}(a),function(f){var S,c,d,v,y,A,P,R,D,F=0,G=0,X=0,Y=0,Z=0,K=p(0);if(q=S=q-16|0,F=r[f>>2],!(j[F+4|0]<4||(Jr(f,r[f+604>>2],r[f+608>>2],r[F+984>>2],r[f+152>>2],r[F+796>>2]),G=r[f>>2],j[G+4|0]<5))){if(X=r[f+608>>2],y=r[G+992>>2],A=r[G+988>>2],1<=(0|(F=r[f+604>>2]))){for(P=z(F,12)+X|0,R=r[f+148>>2],c=r[G+980>>2];;){if(d=(r[X>>2]<<2)+R|0,Z=r[d>>2],1<=(0|(Y=r[X+4>>2])))for(D=(F=r[X+8>>2])+z(Y,48)|0;(Y=r[F+8>>2])&&((v=Y+-1|0)>>>0<=1?(Y=r[F+4>>2],K=O[(Y+r[F+12>>2]<<2)+c>>2],He(p(v-1?p(O[F+44>>2]*p(K*O[F+20>>2]))+(ut(0,Z),l()):p(O[F+44>>2]*p(p(K*O[F+20>>2])+p(O[(Y+r[F+16>>2]<<2)+c>>2]*O[F+24>>2])))+(ut(0,Z),l()))),Z=Ve[0]):(r[S>>2]=Y,Te(4,1024,S))),(F=F+48|0)>>>0<D>>>0;);if(ut(0,Z),K=l(),O[d>>2]=K<p(0)?p(0):p(Ie(K,p(1))),!((X=X+12|0)>>>0<P>>>0))break}X=r[f+608>>2],F=r[f+604>>2]}nt(F,X,A,r[G+1288>>2],r[G+1292>>2],r[G+1296>>2],r[f+156>>2]),nt(r[f+604>>2],r[f+608>>2],y,r[G+1300>>2],r[G+1304>>2],r[G+1308>>2],r[f+160>>2])}q=16+S|0}(a),function(f){var S,c=0,d=0,v=0,y=0,A=0,P=p(0),R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0;if(q=S=q-80|0,A=r[f>>2],!(j[A+4|0]<5)){if(Y=r[A+1028>>2],Z=r[A+1024>>2],v=d=r[f+616>>2],!((0|(c=r[f+612>>2]))<1)){for(D=z(c,12)+d|0,F=r[f+276>>2],R=r[A+1004>>2];;){if(G=F+(r[d>>2]<<2)|0,v=r[G>>2],1<=(0|(y=r[d+4>>2])))for(K=(c=r[d+8>>2])+z(y,48)|0;(y=r[c+8>>2])&&((X=y+-1|0)>>>0<=1?(y=r[c+4>>2],P=O[R+(y+r[c+12>>2]<<2)>>2],He(p(X-1?p(O[c+44>>2]*p(P*O[c+20>>2]))+(ut(0,v),l()):p(O[c+44>>2]*p(p(P*O[c+20>>2])+p(O[R+(y+r[c+16>>2]<<2)>>2]*O[c+24>>2])))+(ut(0,v),l()))),v=Ve[0]):(r[64+S>>2]=y,Te(4,1024,64+S|0))),(c=c+48|0)>>>0<K>>>0;);if(r[G>>2]=v,!((d=d+12|0)>>>0<D>>>0))break}if(v=d=r[f+616>>2],!((0|(c=r[f+612>>2]))<1)){for(D=z(c,12)+d|0,F=r[f+280>>2],R=r[r[f>>2]+1008>>2];;){if(G=F+(r[d>>2]<<2)|0,v=r[G>>2],1<=(0|(y=r[d+4>>2])))for(K=(c=r[d+8>>2])+z(y,48)|0;(y=r[c+8>>2])&&((X=y+-1|0)>>>0<=1?(y=r[c+4>>2],P=O[R+(y+r[c+12>>2]<<2)>>2],He(p(X-1?p(O[c+44>>2]*p(P*O[c+20>>2]))+(ut(0,v),l()):p(O[c+44>>2]*p(p(P*O[c+20>>2])+p(O[R+(y+r[c+16>>2]<<2)>>2]*O[c+24>>2])))+(ut(0,v),l()))),v=Ve[0]):(r[48+S>>2]=y,Te(4,1024,48+S|0))),(c=c+48|0)>>>0<K>>>0;);if(r[G>>2]=v,!((d=d+12|0)>>>0<D>>>0))break}if(v=d=r[f+616>>2],!((0|(c=r[f+612>>2]))<1)){for(D=z(c,12)+d|0,F=r[f+268>>2],R=r[r[f>>2]+996>>2];;){if(G=F+(r[d>>2]<<2)|0,v=r[G>>2],1<=(0|(y=r[d+4>>2])))for(K=(c=r[d+8>>2])+z(y,48)|0;(y=r[c+8>>2])&&((X=y+-1|0)>>>0<=1?(y=r[c+4>>2],P=O[R+(y+r[c+12>>2]<<2)>>2],He(p(X-1?p(O[c+44>>2]*p(P*O[c+20>>2]))+(ut(0,v),l()):p(O[c+44>>2]*p(p(P*O[c+20>>2])+p(O[R+(y+r[c+16>>2]<<2)>>2]*O[c+24>>2])))+(ut(0,v),l()))),v=Ve[0]):(r[32+S>>2]=y,Te(4,1024,32+S|0))),(c=c+48|0)>>>0<K>>>0;);if(ut(0,v),P=l(),O[G>>2]=P<p(0)?p(0):p(Ie(P,p(1))),!((d=d+12|0)>>>0<D>>>0))break}c=r[f+612>>2],v=r[f+616>>2]}}}if(nt(c,v,Z,r[A+1288>>2],r[A+1292>>2],r[A+1296>>2],r[f+296>>2]),nt(r[f+612>>2],r[f+616>>2],Y,r[A+1300>>2],r[A+1304>>2],r[A+1308>>2],r[f+300>>2]),!((0|(c=r[f+612>>2]))<1)){for(y=(d=r[f+616>>2])+z(c,12)|0,Y=r[f+284>>2],A=r[r[f>>2]+1e3>>2];;){if(Z=Y+(r[d>>2]<<2)|0,v=r[Z>>2],1<=(0|(R=r[d+4>>2])))for(D=(c=r[d+8>>2])+z(R,48)|0;(R=r[c+8>>2])&&((F=R+-1|0)>>>0<=1?(R=r[c+4>>2],P=O[A+(R+r[c+12>>2]<<2)>>2],He(p(F-1?p(O[c+44>>2]*p(P*O[c+20>>2]))+(ut(0,v),l()):p(O[c+44>>2]*p(p(P*O[c+20>>2])+p(O[A+(R+r[c+16>>2]<<2)>>2]*O[c+24>>2])))+(ut(0,v),l()))),v=Ve[0]):(r[16+S>>2]=R,Te(4,1024,16+S|0))),(c=c+48|0)>>>0<D>>>0;);if(ut(0,v),P=l(),O[Z>>2]=P<p(-3600)?p(-3600):p(Ie(P,p(3600))),!((d=d+12|0)>>>0<y>>>0))break}if(!((0|(c=r[f+612>>2]))<1))for(R=(d=r[f+616>>2])+z(c,12)|0,y=r[f+272>>2],f=r[r[f>>2]+1012>>2];;){if(Y=y+(r[d>>2]<<2)|0,v=r[Y>>2],1<=(0|(A=r[d+4>>2])))for(Z=(c=r[d+8>>2])+z(A,48)|0;(A=r[c+8>>2])&&((D=A+-1|0)>>>0<=1?(A=r[c+4>>2],P=O[f+(A+r[c+12>>2]<<2)>>2],He(p(D-1?p(O[c+44>>2]*p(P*O[c+20>>2]))+(ut(0,v),l()):p(O[c+44>>2]*p(p(P*O[c+20>>2])+p(O[f+(A+r[c+16>>2]<<2)>>2]*O[c+24>>2])))+(ut(0,v),l()))),v=Ve[0]):(r[S>>2]=A,Te(4,1024,S))),(c=c+48|0)>>>0<Z>>>0;);if(ut(0,v),P=l(),O[Y>>2]=P<p(9999999747378752e-20)?p(9999999747378752e-20):p(Ie(P,p(100))),!((d=d+12|0)>>>0<R>>>0))break}}}q=80+S|0}(a),function(f){var S,c,d,v,y,A=0,P=0,R=0,D=0,F=p(0),G=0,X=0,Y=0,Z=0,K=0,se=0;if(p(0),q=S=q-32|0,R=r[f>>2],!(j[R+4|0]<4||(Jr(f,r[f+620>>2],r[f+624>>2],r[R+1040>>2],r[f+444>>2],r[R+892>>2]),G=r[f>>2],j[G+4|0]<5))){if(v=r[G+1048>>2],y=r[G+1044>>2],R=D=r[f+624>>2],!((0|(A=r[f+620>>2]))<1)){for(K=z(A,12)+D|0,se=r[f+440>>2],X=r[G+1036>>2];;){if(R=se+(r[D>>2]<<2)|0,F=p(r[R>>2]),1<=(0|(P=r[D+4>>2])))for(Y=(A=r[D+8>>2])+z(P,48)|0;(P=r[A+8>>2])&&((Z=P+-1|0)>>>0<=1?(P=r[A+4>>2],c=O[X+(P+r[A+12>>2]<<2)>>2],F=p(Z-1?F+p(O[A+44>>2]*p(c*O[A+20>>2])):F+p(O[A+44>>2]*p(p(c*O[A+20>>2])+p(O[X+(P+r[A+16>>2]<<2)>>2]*O[A+24>>2]))))):(r[16+S>>2]=P,Te(4,1024,16+S|0))),(A=A+48|0)>>>0<Y>>>0;);if(F=(F=p(F+p(.0010000000474974513)))<p(0)?p(0):p(Ie(F,p(1e3))),A=p(de(F))<p(2147483648)?~~F:-2147483648,r[R>>2]=A,!((D=D+12|0)>>>0<K>>>0))break}if(R=D=r[f+624>>2],!((0|(A=r[f+620>>2]))<1)){for(K=z(A,12)+D|0,se=r[f+448>>2],X=r[r[f>>2]+1032>>2];;){if(Y=se+(r[D>>2]<<2)|0,R=r[Y>>2],1<=(0|(P=r[D+4>>2])))for(Z=(A=r[D+8>>2])+z(P,48)|0;(P=r[A+8>>2])&&((d=P+-1|0)>>>0<=1?(P=r[A+4>>2],F=O[X+(P+r[A+12>>2]<<2)>>2],He(p(d-1?p(O[A+44>>2]*p(F*O[A+20>>2]))+(ut(0,R),l()):p(O[A+44>>2]*p(p(F*O[A+20>>2])+p(O[X+(P+r[A+16>>2]<<2)>>2]*O[A+24>>2])))+(ut(0,R),l()))),R=Ve[0]):(r[S>>2]=P,Te(4,1024,S))),(A=A+48|0)>>>0<Z>>>0;);if(ut(0,R),F=l(),O[Y>>2]=F<p(0)?p(0):p(Ie(F,p(1))),!((D=D+12|0)>>>0<K>>>0))break}A=r[f+620>>2],R=r[f+624>>2]}}nt(A,R,y,r[G+1288>>2],r[G+1292>>2],r[G+1296>>2],r[f+452>>2]),nt(r[f+620>>2],r[f+624>>2],v,r[G+1300>>2],r[G+1304>>2],r[G+1308>>2],r[f+456>>2])}q=32+S|0}(a),function(f){var S,c,d,v,y,A,P=0,R=0,D=0,F=0,G=p(0);if(q=S=q-16|0,R=r[f>>2],!(j[R+4|0]<5||(0|(F=r[f+628>>2]))<1))for(v=(D=r[f+632>>2])+z(F,12)|0,y=r[f+536>>2],F=r[R+1284>>2];;){if(c=(r[D>>2]<<2)+y|0,R=r[c>>2],1<=(0|(P=r[D+4>>2])))for(A=(f=r[D+8>>2])+z(P,48)|0;(P=r[f+8>>2])&&((d=P+-1|0)>>>0<=1?(P=r[f+4>>2],G=O[F+(P+r[f+12>>2]<<2)>>2],He(p(d-1?p(O[f+44>>2]*p(G*O[f+20>>2]))+(ut(0,R),l()):p(O[f+44>>2]*p(p(G*O[f+20>>2])+p(O[F+(P+r[f+16>>2]<<2)>>2]*O[f+24>>2])))+(ut(0,R),l()))),R=Ve[0]):(r[S>>2]=P,Te(4,1024,S))),(f=f+48|0)>>>0<A>>>0;);if(ut(0,R),G=l(),O[c>>2]=G<p(0)?p(0):p(Ie(G,p(1))),!((D=D+12|0)>>>0<v>>>0))break}q=16+S|0}(a),function(f){var S,c,d=0,v=0,y=0,A=p(0),P=0;if(1<=(0|(d=r[f+4>>2])))for(c=(v=r[f+8>>2])+z(d,12)|0,d=r[f+40>>2],y=r[f+52>>2],f=S=r[f+48>>2];r[d>>2]&&(A=O[y>>2],O[f>>2]=A,(0|(P=r[v+4>>2]))!=-1)&&(O[f>>2]=A*O[(P<<2)+S>>2]),f=f+4|0,y=y+4|0,d=d+4|0,(v=v+12|0)>>>0<c>>>0;);}(a),function(f){var S,c=0,d=0,v=0;if(1<=(0|(S=r[f+304>>2])))for(c=r[f+308>>2],d=r[f+312>>2];r[d>>2]&&N[r[c+20>>2]](f,v),d=d+4|0,c=c+32|0,(0|S)!=(0|(v=v+1|0)););}(a),function(f){var S,c,d,v,y,A=0,P=0,R=(p(0),p(0),0),D=0,F=0,G=(p(0),0),X=0,Y=0;if(1<=(0|(A=r[f+332>>2])))for(X=(P=r[f+336>>2])+z(A,20)|0,Y=r[f+308>>2],G=r[f+316>>2],y=r[f+48>>2],A=r[f+448>>2],R=r[f+444>>2],F=r[f+424>>2];r[F>>2]&&((0|(D=r[P+4>>2]))!=-1&&(O[A>>2]=O[(D<<2)+y>>2]*O[A>>2]),(0|(D=r[P+8>>2]))!=-1)&&(O[A>>2]=O[G+(D<<2)>>2]*O[A>>2],v=r[R>>2],N[r[24+(Y+(D<<5)|0)>>2]](f,D,v,v,r[P+16>>2])),R=R+4|0,A=A+4|0,F=F+4|0,(P=P+20|0)>>>0<X>>>0;);if(!(j[r[f>>2]+4|0]<4||(0|(A=r[f+332>>2]))<1))for(D=(R=r[f+336>>2])+z(A,20)|0,X=r[f+328>>2],Y=r[f+324>>2],P=r[f+452>>2],A=r[f+456>>2],F=r[f+424>>2];r[F>>2]&&(0|(f=r[R+8>>2]))!=-1&&(f=(G=f<<4)+Y|0,S=p(O[P>>2]*O[f>>2]),O[P>>2]=S,c=p(O[P+4>>2]*O[f+4>>2]),O[P+4>>2]=c,d=O[f+8>>2],r[P+12>>2]=1065353216,O[P+4>>2]=c<p(0)?p(0):p(Ie(c,p(1))),O[P>>2]=S<p(0)?p(0):p(Ie(S,p(1))),S=p(d*O[P+8>>2]),O[P+8>>2]=S<p(0)?p(0):p(Ie(S,p(1))),S=O[A>>2],c=O[(f=X+G|0)>>2],S=p(p(S+c)-p(S*c)),O[A>>2]=S,c=O[A+4>>2],d=O[f+4>>2],c=p(p(c+d)-p(c*d)),O[A+4>>2]=c,d=O[f+8>>2],r[A+12>>2]=1065353216,O[A+4>>2]=c<p(0)?p(0):p(Ie(c,p(1))),O[A>>2]=S<p(0)?p(0):p(Ie(S,p(1))),S=O[A+8>>2],S=p(p(d+S)-p(S*d)),O[A+8>>2]=S<p(0)?p(0):p(Ie(S,p(1)))),A=A+16|0,P=P+16|0,F=F+4|0,(R=R+20|0)>>>0<D>>>0;);}(a),function(f){var S,c,d,v,y,A,P,R,D,F,G,X,Y,Z,K,se,ve,Pe,ke,We,vt=0;if(p(0),p(0),p(0),p(0),p(0),p(0),p(0),1<=(0|(R=r[f+500>>2])))for(ke=r[f+536>>2],D=r[f+444>>2],We=r[f+504>>2];;){if(f=z(vt,24)+We|0,0<(0|(F=r[f+12>>2])))for(d=O[(vt<<2)+ke>>2],G=r[f+20>>2],X=r[f+16>>2],Y=r[(r[f+4>>2]<<2)+D>>2],Z=r[(r[f+8>>2]<<2)+D>>2],f=0;K=O[((S=1|f)<<2)+X>>2],c=W[(f<<1)+G>>1]<<3&262136,v=O[(se=(4|c)+Y|0)>>2],S=W[(S<<1)+G>>1]<<3&262136,y=O[(ve=(4|S)+Z|0)>>2],A=O[(c=c+Y|0)>>2],Pe=O[(f<<2)+X>>2],P=O[(S=S+Z|0)>>2],O[c>>2]=A+p(d*p(Pe*p(P-A))),O[se>>2]=v+p(d*p(Pe*p(y-v))),O[S>>2]=P+p(d*p(K*p(A-P))),O[ve>>2]=y+p(d*p(K*p(v-y))),(0|(f=f+2|0))<(0|F););if(!((0|(vt=vt+1|0))<(0|R)))break}}(a),N[r[1810]](a),function(f){var S,c,d,v,y=0,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0;if(!((0|(S=r[f+480>>2]))<1)){for(R=(c=r[f+484>>2])+z(S,28)|0,G=r[f+424>>2],X=r[f+40>>2],D=r[f+44>>2],K=r[f+440>>2],y=c;;){if(1<=(0|(F=r[y+4>>2])))for(Z=y+20|0,Y=r[y+12>>2],A=0;d=r[4+(P=Y+(A<<4)|0)>>2]<<2,P=r[(v=P)>>2]==1,r[v+12>>2]=r[(r[(P?X:G)+d>>2]?(P?D:K)+d:Z)>>2],(0|(A=A+1|0))<(0|F););if(!((y=y+28|0)>>>0<R>>>0))break}if(!((0|S)<1))for(K=r[f+436>>2],X=0;;){if(R=z(X,28)+c|0,!(r[(G=R)+24>>2]<1)){for(P=r[f+488>>2],A=0;r[P+(A<<2)>>2]=-1,(0|(A=A+1|0))<(0|(y=r[G+24>>2])););if(!((0|y)<1))for(y=r[f+496>>2],A=0;r[y+(A<<2)>>2]=-1,(0|(A=A+1|0))<r[G+24>>2];);}if(!(r[R+4>>2]<1)){for(D=r[f+492>>2],A=0;r[D+(A<<2)>>2]=-1,(0|(A=A+1|0))<(0|(y=r[R+4>>2])););if(!((0|y)<1))for(F=r[R+12>>2],Z=r[f+496>>2],A=0;Y=r[12+(F+(A<<4)|0)>>2]-r[R+20>>2]<<2,y=(0|(y=r[(P=Y+Z|0)>>2]))==-1?Y+r[f+488>>2]|0:D+(y<<2)|0,r[y>>2]=A,(0|(A=(r[P>>2]=A)+1|0))<r[R+4>>2];);}if(1<=(0|(y=r[G+24>>2])))for(D=r[R+8>>2],Z=r[f+488>>2],F=0;;){if((0|(A=r[Z+(F<<2)>>2]))!=-1){for(Y=r[f+492>>2],P=r[R+12>>2];D=(y=r[(y=P+(A<<4)|0)>>2]==1?(y=z(r[y+8>>2],28)+c|0,r[y+8>>2]=D,r[y>>2]):(r[K+(r[y+4>>2]<<2)>>2]=D,1))+D|0,(0|A)<(0|(y=r[Y+(A<<2)>>2]))&&(0|(A=y))!=-1;);y=r[G+24>>2]}if(!((0|(F=F+1|0))<(0|y)))break}if((0|S)==(0|(X=X+1|0)))break}}}(a),function(f){var S=0,c=0,d=0,v=0,y=0,A=p(0),P=0,R=0,D=r[f+332>>2];if(r[f+644>>2]){if(!(((r[f+428>>2]=0)|D)<1))for(;S=126,P=r[f+432>>2]+d|0,!r[(c=d<<2)+r[f+424>>2]>>2]|O[c+r[f+448>>2]>>2]==p(0)||(S=127),$[0|P]=S,(0|D)!=(0|(d=d+1|0)););}else if(r[f+428>>2]){if(S=j[r[f>>2]+4|0],!(((r[f+428>>2]=0)|D)<1))if(4<=S>>>0)for(;A=O[(S=d<<2)+r[f+448>>2]>>2],v=r[S+r[f+424>>2]>>2],c=A!=p(0)&!!(0|v),P=r[f+432>>2]+d|0,c=(0|c)==(1&$[0|P])?c:2|c,c=A!=O[S+r[f+468>>2]>>2]?4|c:c,c=r[S+r[f+440>>2]>>2]==r[S+r[f+464>>2]>>2]?c:8|c,S=r[S+r[f+436>>2]>>2]==r[S+r[f+460>>2]>>2]?c:16|c,S=v?32|S:S,v=(c=R<<2)+r[f+452>>2]|0,y=c+r[f+472>>2]|0,(O[v>>2]!=O[y>>2]|O[v+4>>2]!=O[y+4>>2]|O[v+8>>2]!=O[y+8>>2]|O[v+12>>2]!=O[y+12>>2]||(v=c+r[f+456>>2]|0,c=c+r[f+476>>2]|0,O[v>>2]!=O[c>>2]|O[v+4>>2]!=O[c+4>>2]|O[v+8>>2]!=O[c+8>>2])||O[v+12>>2]!=O[c+12>>2])&&(S|=64),$[0|P]=S,R=R+4|0,(0|D)!=(0|(d=d+1|0)););else for(;A=O[(S=d<<2)+r[f+448>>2]>>2],v=r[S+r[f+424>>2]>>2],c=A!=p(0)&!!(0|v),y=r[f+432>>2]+d|0,c=(0|c)==(1&$[0|y])?c:2|c,c=A!=O[S+r[f+468>>2]>>2]?4|c:c,c=r[S+r[f+440>>2]>>2]==r[S+r[f+464>>2]>>2]?c:8|c,S=r[S+r[f+436>>2]>>2]==r[S+r[f+460>>2]>>2]?c:16|c,$[0|y]=v?32|S:S,(0|D)!=(0|(d=d+1|0)););}else if(!((0|D)<1))for(;!r[(S=d<<2)+r[f+424>>2]>>2]|O[S+r[f+448>>2]>>2]==p(0)?(S=r[f+432>>2]+d|0,$[0|S]=254&j[0|S]):(S=r[f+432>>2]+d|0,$[0|S]=1|j[0|S]),(0|D)!=(0|(d=d+1|0)););}(a),r[a+644>>2]=0}function Jr(a,_,M,g,f,S){var c,d,v,y,A,P,R,D=0,F=0,G=0,X=0;if(q=P=q-32|0,1<=(0|_))for(A=z(_,12)+M|0;;){if(!((0|(D=r[M+4>>2]))<1))if(c=(_=r[M+8>>2])+z(D,48)|0,D=r[M>>2]<<2,1<=(0|(R=r[D+S>>2])))for(R<<=1,d=r[r[a>>2]+1052>>2],v=r[f+D>>2];;){r:if(D=r[_+8>>2]){e:{if((F=D+-1|0)>>>0<=1){if(D=(r[_+4>>2]<<2)+g|0,X=(r[D+(r[_+12>>2]<<2)>>2]<<2)+d|0,F-1)break e;for(G=(r[D+(r[_+16>>2]<<2)>>2]<<2)+d|0,D=0;O[(y=(F=D<<2)+v|0)>>2]=O[y>>2]+p(O[_+44>>2]*p(p(O[F+X>>2]*O[_+20>>2])+p(O[F+G>>2]*O[_+24>>2]))),(0|R)!=(0|(D=D+1|0)););break r}r[P>>2]=D,Te(4,1024,P);break r}for(D=0;O[(G=(F=D<<2)+v|0)>>2]=O[G>>2]+p(O[_+44>>2]*p(O[F+X>>2]*O[_+20>>2])),(0|R)!=(0|(D=D+1|0)););}if(!((_=_+48|0)>>>0<c>>>0))break}else for(;3<=(D=r[_+8>>2])>>>0&&(r[16+P>>2]=D,Te(4,1024,16+P|0)),(_=_+48|0)>>>0<c>>>0;);if(!((M=M+12|0)>>>0<A>>>0))break}q=32+P|0}function Or(a,_,M){var g;_|=0,M|=0,q=g=q+-64|0;r:{if(a|=0)if(_)if((_+15&-16)!=(0|_))r[52+g>>2]=1522,r[48+g>>2]=2361,Te(4,1294,48+g|0);else{if(_=function(f,S,c){var d,v=0,y=0,A=0,P=0,R=0,D=0,F=0,G=0,X=0,Y=0,Z=0,K=0,se=0,ve=p(0),Pe=0,ke=0,We=0,vt=0,Dt=0;if(it(16+(q=d=q-576|0)|0,0,560),Kn(f,16+d|0,12+d|0),(P=r[12+d>>2])>>>0<=c>>>0){if(v=(y=it(S,0,P))+r[16+d>>2]|0,r[v+8>>2]=y+r[20+d>>2],r[v+40>>2]=y+r[24+d>>2],r[v+44>>2]=y+r[28+d>>2],r[v+48>>2]=y+r[32+d>>2],r[v+52>>2]=y+r[36+d>>2],r[v+16>>2]=y+r[40+d>>2],r[v+24>>2]=y+r[44+d>>2],r[v+28>>2]=y+r[48+d>>2],r[v+32>>2]=y+r[52+d>>2],r[v+36>>2]=y+r[56+d>>2],S=r[f+704>>2],r[v+308>>2]=y+r[60+d>>2],r[v+312>>2]=y+r[64+d>>2],r[v+316>>2]=y+r[68+d>>2],r[v+320>>2]=y+r[72+d>>2],r[v+324>>2]=y+r[76+d>>2],r[v+328>>2]=y+r[80+d>>2],r[v+60>>2]=y+r[84+d>>2],r[v+144>>2]=y+r[88+d>>2],r[v+148>>2]=y+r[92+d>>2],c=y+r[96+d>>2]|0,r[v+152>>2]=c,!((0|(P=r[S+8>>2]))<1)&&(S=y+r[100+d>>2]|0,r[c>>2]=S,(0|P)!=1))for(c=1;S=(15+(r[r[f+796>>2]+(A<<2)>>2]<<3)&-16)+S|0,r[r[v+152>>2]+(c<<2)>>2]=S,(0|P)!=(0|(c=(A=c)+1|0)););if(r[v+156>>2]=y+r[104+d>>2],r[v+160>>2]=y+r[108+d>>2],r[v+68>>2]=y+r[112+d>>2],r[v+76>>2]=y+r[116+d>>2],r[v+80>>2]=y+r[120+d>>2],r[v+84>>2]=y+r[124+d>>2],r[v+88>>2]=y+r[128+d>>2],r[v+92>>2]=y+r[132+d>>2],r[v+96>>2]=y+r[136+d>>2],r[v+100>>2]=y+r[140+d>>2],r[v+104>>2]=y+r[144+d>>2],r[v+108>>2]=y+r[148+d>>2],r[v+112>>2]=y+r[152+d>>2],r[v+116>>2]=y+r[156+d>>2],r[v+120>>2]=y+r[160+d>>2],r[v+124>>2]=y+r[164+d>>2],r[v+128>>2]=y+r[168+d>>2],r[v+132>>2]=y+r[172+d>>2],r[v+136>>2]=y+r[176+d>>2],r[v+140>>2]=y+r[180+d>>2],r[v+168>>2]=y+r[184+d>>2],r[v+264>>2]=y+r[188+d>>2],r[v+268>>2]=y+r[192+d>>2],r[v+272>>2]=y+r[196+d>>2],r[v+276>>2]=y+r[200+d>>2],r[v+280>>2]=y+r[204+d>>2],r[v+284>>2]=y+r[208+d>>2],r[v+288>>2]=y+r[212+d>>2],r[v+292>>2]=y+r[216+d>>2],r[v+296>>2]=y+r[220+d>>2],r[v+300>>2]=y+r[224+d>>2],r[v+176>>2]=y+r[228+d>>2],r[v+184>>2]=y+r[232+d>>2],r[v+188>>2]=y+r[236+d>>2],r[v+192>>2]=y+r[240+d>>2],r[v+196>>2]=y+r[244+d>>2],r[v+200>>2]=y+r[248+d>>2],r[v+204>>2]=y+r[252+d>>2],r[v+208>>2]=y+r[256+d>>2],r[v+212>>2]=y+r[260+d>>2],r[v+216>>2]=y+r[264+d>>2],r[v+220>>2]=y+r[268+d>>2],r[v+224>>2]=y+r[272+d>>2],r[v+228>>2]=y+r[276+d>>2],r[v+232>>2]=y+r[280+d>>2],r[v+236>>2]=y+r[284+d>>2],r[v+240>>2]=y+r[288+d>>2],r[v+244>>2]=y+r[292+d>>2],r[v+248>>2]=y+r[296+d>>2],r[v+252>>2]=y+r[300+d>>2],r[v+256>>2]=y+r[304+d>>2],r[v+260>>2]=y+r[308+d>>2],S=r[f+704>>2],r[v+336>>2]=y+r[312+d>>2],r[v+424>>2]=y+r[316+d>>2],r[v+432>>2]=y+r[320+d>>2],r[v+436>>2]=y+r[324+d>>2],r[v+440>>2]=y+r[328+d>>2],c=y+r[332+d>>2]|0,r[v+444>>2]=c,!((0|(P=r[S+16>>2]))<1)&&(A=y+r[336+d>>2]|0,r[c>>2]=A,(c=1)!=(0|P)))for(S=0;A=(15+(r[r[f+892>>2]+(S<<2)>>2]<<3)&-16)+A|0,r[r[v+444>>2]+(c<<2)>>2]=A,(0|P)!=(0|(c=(S=c)+1|0)););if(r[v+448>>2]=y+r[340+d>>2],r[v+452>>2]=y+r[344+d>>2],r[v+456>>2]=y+r[348+d>>2],r[v+460>>2]=y+r[352+d>>2],r[v+464>>2]=y+r[356+d>>2],r[v+468>>2]=y+r[360+d>>2],r[v+472>>2]=y+r[364+d>>2],r[v+476>>2]=y+r[368+d>>2],r[v+344>>2]=y+r[372+d>>2],r[v+352>>2]=y+r[376+d>>2],r[v+356>>2]=y+r[380+d>>2],r[v+360>>2]=y+r[384+d>>2],r[v+364>>2]=y+r[388+d>>2],r[v+368>>2]=y+r[392+d>>2],r[v+372>>2]=y+r[396+d>>2],r[v+376>>2]=y+r[400+d>>2],r[v+380>>2]=y+r[404+d>>2],r[v+384>>2]=y+r[408+d>>2],r[v+388>>2]=y+r[412+d>>2],r[v+392>>2]=y+r[416+d>>2],r[v+396>>2]=y+r[420+d>>2],r[v+400>>2]=y+r[424+d>>2],r[v+404>>2]=y+r[428+d>>2],r[v+408>>2]=y+r[432+d>>2],r[v+412>>2]=y+r[436+d>>2],r[v+416>>2]=y+r[440+d>>2],r[v+420>>2]=y+r[444+d>>2],S=r[448+d>>2],c=r[452+d>>2],r[v+552>>2]=y+r[456+d>>2],r[v+548>>2]=c+y,r[v+544>>2]=S+y,r[v+560>>2]=y+r[460+d>>2],S=r[f+704>>2],F=y+r[464+d>>2]|0,r[v+568>>2]=F,1<=(0|(D=r[S+48>>2])))for(A=y+r[468+d>>2]|0,S=y+r[472+d>>2]|0,R=y+r[476+d>>2]|0,G=r[f+1072>>2],c=0;P=F+z(c,36)|0,r[P+20>>2]=R,r[P+16>>2]=S,r[P>>2]=A,A=((P=r[G+(c<<2)>>2])<<2)+A|0,R=(P=1<<P<<2)+R|0,S=S+P|0,(0|D)!=(0|(c=c+1|0)););if(S=r[f+704>>2],P=y+r[516+d>>2]|0,r[v+484>>2]=P,1<=(0|(S=r[S+72>>2])))for(A=y+r[520+d>>2]|0,R=r[f+1212>>2],c=0;r[12+(P+z(c,28)|0)>>2]=A,A=(r[R+(c<<2)>>2]<<4)+A|0,(0|S)!=(0|(c=c+1|0)););r[v+488>>2]=y+r[524+d>>2],r[v+492>>2]=y+r[528+d>>2],r[v+496>>2]=y+r[532+d>>2],r[v+504>>2]=y+r[536+d>>2],r[v+536>>2]=y+r[540+d>>2],r[v+512>>2]=y+r[544+d>>2],r[v+520>>2]=y+r[548+d>>2],r[v+524>>2]=y+r[552+d>>2],r[v+528>>2]=y+r[556+d>>2],r[v+532>>2]=y+r[560+d>>2];e:{if(4<=(D=j[f+4|0])>>>0){if(r[v+576>>2]=y+r[480+d>>2],r[v+584>>2]=y+r[484+d>>2],S=r[f+704>>2],c=r[492+d>>2],P=y+r[488+d>>2]|0,r[v+592>>2]=P,1<=(0|(S=r[S+104>>2])))for(A=c+y|0,R=r[f+1104>>2],c=0;r[40+(P+z(c,48)|0)>>2]=A,A=(r[R+(c<<2)>>2]<<2)+A|0,(0|S)!=(0|(c=c+1|0)););r[v+608>>2]=y+r[500+d>>2],r[v+624>>2]=y+r[508+d>>2]}else{if(S=r[572+d>>2],c=r[568+d>>2],r[v+636>>2]=y+r[564+d>>2],r[v+640>>2]=c+y,r[r[f+704>>2]+20>>2]<1)break e;for(P=S+y|0,F=0;;){t:{if((0|(A=r[(S=F<<2)+r[f+952>>2]>>2]))<=0)S=S+r[v+636>>2]|0;else{for(R=A+(c=r[S+r[f+948>>2]>>2])|0,G=r[f+1060>>2],A=0;A=r[G+(c<<2)>>2]+A|0,(0|(c=c+1|0))<(0|R););if(S=S+r[v+636>>2]|0,c=P,A)break t}c=A=0}if(r[S>>2]=c,P=(A<<2)+P|0,!((0|(F=F+1|0))<r[r[f+704>>2]+20>>2]))break}}D>>>0<5||(r[v+600>>2]=y+r[496+d>>2],r[v+616>>2]=y+r[504+d>>2],r[v+632>>2]=y+r[512+d>>2])}r[v+644>>2]=1,r[v>>2]=f,r[v+648>>2]=1&$[r[f+708>>2]+20|0],y=r[f+704>>2],F=r[y+20>>2];e:if(!((0|(r[v+540>>2]=F))<1)){if(S=F+-1|0,G=r[f+952>>2],X=r[f+940>>2],Y=r[f+932>>2],Z=r[f+936>>2],K=r[f+924>>2],se=r[f+928>>2],Pe=r[v+552>>2],We=r[v+544>>2],D>>>0<4){for(;;)if(c=We+z(S,52)|0,A=(P=S<<2)+se|(r[c>>2]=0),r[c+4>>2]=r[A>>2],r[c+8>>2]=r[(R=P+K|0)>>2],O[c+12>>2]=O[R>>2]-O[A>>2],r[c+16>>2]=r[P+Z>>2],r[c+44>>2]=r[(A=P+Y|0)>>2],ve=Yi(p(r[P+X>>2])),O[c+20>>2]=ve,O[c+24>>2]=ve*p(1.5),ke=r[P+G>>2],R=0,R=(r[c+32>>2]=ke)?r[v+560>>2]+z(r[P+r[f+948>>2]>>2],28)|0:R,r[c+48>>2]=1,r[c+28>>2]=R,r[P+Pe>>2]=r[A>>2],c=0<(0|S),S=S+-1|0,!c)break e}for(ke=r[f+960>>2],Dt=r[f+944>>2];c=We+z(S,52)|0,r[c>>2]=r[(A=S<<2)+Dt>>2],r[c+4>>2]=r[(P=A+se|0)>>2],r[c+8>>2]=r[(R=A+K|0)>>2],O[c+12>>2]=O[R>>2]-O[P>>2],r[c+16>>2]=r[A+Z>>2],r[c+44>>2]=r[(vt=A+Y|0)>>2],ve=Yi(p(r[A+X>>2])),O[c+20>>2]=ve,O[c+24>>2]=ve*p(1.5),R=r[A+G>>2],r[c+32>>2]=R,r[c+28>>2]=R?r[v+560>>2]+z(r[A+r[f+948>>2]>>2],28)|0:0,P=r[A+ke>>2],P=(r[c+40>>2]=P)?r[v+584>>2]+z(r[A+r[f+956>>2]>>2],28)|0:0,r[c+48>>2]=1,r[c+36>>2]=P,r[A+Pe>>2]=r[vt>>2],c=0<(0|S),S=S+-1|0,c;);}if(4<=D>>>0?(r[v+548>>2]=r[f+944>>2],P=f):(it(r[v+548>>2],0,F<<2),P=r[v>>2],y=r[P+704>>2]),A=r[y+52>>2],1<=(0|(r[v+556>>2]=A)))for(c=r[P+1056>>2],R=r[P+1192>>2],F=r[P+1060>>2],D=r[v+560>>2];S=D+z(A=A+-1|0,28)|0,r[S>>2]=r[(G=A<<2)+F>>2],G=r[c+G>>2],r[S+24>>2]=1,r[S+16>>2]=0,r[S+20>>2]=1,r[S+8>>2]=0,r[S+12>>2]=0,r[S+4>>2]=R+(G<<2),0<(0|A););if(A=r[y+48>>2],1<=(0|(r[v+564>>2]=A))){for(;;){if(S=r[v+568>>2]+z(A=A+-1|0,36)|0,R=r[(y=A<<2)+r[P+1072>>2]>>2],1<=(0|(r[S+4>>2]=R)))for(c=0;r[r[S>>2]+(c<<2)>>2]=r[v+560>>2]+z(r[r[P+1064>>2]+(r[y+r[P+1068>>2]>>2]+c<<2)>>2],28),(0|R)!=(0|(c=c+1|0)););if(r[S+24>>2]=1,r[S+28>>2]=1,r[S+8>>2]=1<<R,!(0<(0|A)))break}P=r[v>>2],y=r[P+704>>2]}if(S=r[y>>2],(0|(r[v+4>>2]=S))<1)c=0;else{for(G=r[P+732>>2],X=r[P+736>>2],Y=r[P+740>>2],R=r[P+720>>2],Z=r[v+52>>2],F=r[v+568>>2],K=r[v+8>>2],A=S;D=K+z(A=A+-1|0,12)|0,r[D>>2]=F+z(r[(c=A<<2)+R>>2],36),r[D+4>>2]=r[c+Y>>2],r[D+8>>2]=r[c+X>>2],O[c+Z>>2]=r[c+G>>2]?p(1):p(0),0<(0|A););for(D=r[v+16>>2],c=0;A=r[8+(F+z(r[(G=(S=S+-1|0)<<2)+R>>2],36)|0)>>2],c=c+(r[D+G>>2]=A)|0,0<(0|S););S=r[v+4>>2]}if(r[v+12>>2]=S,r[v+20>>2]=c,S=r[y+4>>2],1<=(0|(r[v+304>>2]=S))){for(;c=r[v+308>>2]+((S=S+-1|0)<<5)|0,r[c>>2]=r[v+568>>2]+z(r[(A=S<<2)+r[P+752>>2]>>2],36),r[c+4>>2]=r[A+r[P+764>>2]>>2],r[c+8>>2]=r[A+r[P+768>>2]>>2],R=r[A+r[P+772>>2]>>2],r[c+12>>2]=R,y=r[A+r[P+776>>2]>>2],r[c+16>>2]=y,r[c+28>>2]=r[A+r[P+760>>2]>>2],R>>>0<=1?R-1?(r[20+(r[v+60>>2]+z(y,24)|0)>>2]=S,r[c+24>>2]=1,r[c+20>>2]=2):(r[8+(r[v+168>>2]+z(y,12)|0)>>2]=S,r[c+24>>2]=3,r[c+20>>2]=4):Te(4,1179,0),0<(0|S););P=r[v>>2],y=r[P+704>>2]}A=r[y+8>>2];e:if(!((0|(r[v+56>>2]=A))<1)){if(c=A+-1|0,F=r[P+796>>2],D=r[P+804>>2],G=r[P+800>>2],X=r[P+780>>2],Y=r[v+568>>2],Z=r[v+60>>2],j[P+4|0]<2){for(;;)if(S=Z+z(c,24)|0,r[S>>2]=Y+z(r[(R=c<<2)+X>>2],36),r[S+4>>2]=r[R+G>>2],r[S+8>>2]=r[R+D>>2],R=r[R+F>>2],r[S+12>>2]=0,r[S+16>>2]=R,S=0<(0|c),c=c+-1|0,!S)break e}for(K=r[P+808>>2];S=Z+z(c,24)|0,r[S>>2]=Y+z(r[(R=c<<2)+X>>2],36),r[S+4>>2]=r[R+G>>2],r[S+8>>2]=r[R+D>>2],r[S+16>>2]=r[R+F>>2],r[S+12>>2]=r[R+K>>2],S=0<(0|c),c=c+-1|0,S;);}if(c=r[y+12>>2],1<=(0|(r[v+164>>2]=c)))for(R=r[P+828>>2],F=r[P+812>>2],D=r[v+568>>2],G=r[v+168>>2],S=c;X=G+z(S=S+-1|0,12)|0,r[X>>2]=D+z(r[(Y=S<<2)+F>>2],36),r[X+4>>2]=r[R+Y>>2],0<(0|S););if(((S=0)|A)<1)R=0;else{for(F=r[v+68>>2],D=r[v+60>>2],R=0;c=r[r[D+z(A=A+-1|0,24)>>2]+8>>2],R=(r[F+(A<<2)>>2]=c)+R|0,0<(0|A););c=r[v+164>>2],A=r[v+56>>2]}if(r[v+64>>2]=A,r[v+72>>2]=R,A=v,1<=(0|c)){for(F=r[v+176>>2],D=r[v+168>>2];R=r[r[D+z(c=c+-1|0,12)>>2]+8>>2],S=S+(r[F+(c<<2)>>2]=R)|0,0<(0|c););c=r[v+164>>2]}if(r[A+172>>2]=c,r[v+180>>2]=S,R=r[y+16>>2],1<=(0|(r[v+332>>2]=R))){for(G=r[P+872>>2],X=r[P+892>>2],Y=r[P+880>>2],Z=r[P+876>>2],F=r[P+852>>2],D=r[v+568>>2],K=r[v+336>>2],S=R;c=K+z(S=S+-1|0,20)|0,r[c>>2]=D+z(r[(A=S<<2)+F>>2],36),r[c+4>>2]=r[A+Z>>2],r[c+8>>2]=r[A+Y>>2],r[c+16>>2]=r[A+X>>2],r[c+12>>2]=r[A+G>>2],0<(0|S););for(A=r[v+344>>2],c=0;S=r[8+(D+z(r[(G=(R=R+-1|0)<<2)+F>>2],36)|0)>>2],c=(r[A+G>>2]=S)+c|0,0<(0|R););if(r[v+348>>2]=c,R=r[v+332>>2],!((0|(r[v+340>>2]=R))<1))for(c=R<<2,A=r[v+456>>2],F=r[v+452>>2];r[(D=(S=c+-4|0)<<2)+F>>2]=1065353216,r[(G=(c<<=2)-4|0)+F>>2]=1065353216,r[(X=(c=c+-12|0)+F|0)>>2]=1065353216,r[X+4>>2]=1065353216,r[A+D>>2]=0,r[A+G>>2]=1065353216,r[(c=c+A|0)>>2]=0,r[c+4>>2]=0,c=S,0<(0|(R=R+-1|0)););}else r[v+340>>2]=R,r[v+348>>2]=0;if(R=r[y+72>>2],1<=(0|(r[v+480>>2]=R)))for(G=r[P+1208>>2],X=r[P+1224>>2],Y=r[P+1220>>2],Z=r[P+1216>>2],K=r[P+1212>>2],se=r[v+484>>2],A=0;;){if(S=se+z(A,28)|0,F=r[(c=A<<2)+K>>2],r[S+4>>2]=F,r[S>>2]=r[c+Z>>2],D=r[c+Y>>2],r[S+16>>2]=D,Pe=r[c+X>>2],r[S+20>>2]=Pe,r[S+8>>2]=0,r[S+24>>2]=1+(D-Pe|0),1<=(0|F))for(Pe=r[c+G>>2],We=r[S+12>>2],ke=r[P+1236>>2],Dt=r[P+1228>>2],vt=r[P+1232>>2],c=0;r[4+(S=We+(c<<4)|0)>>2]=r[(D=c+Pe<<2)+vt>>2],r[S>>2]=r[D+Dt>>2],D=r[D+ke>>2],r[S+12>>2]=0,r[S+8>>2]=D,(0|F)!=(0|(c=c+1|0)););if((0|R)==(0|(A=A+1|0)))break}if(c=r[y+80>>2],(0|(r[v+500>>2]=c))<1)A=0;else{for(D=r[P+1280>>2],G=r[P+1268>>2],X=r[P+1276>>2],Y=r[P+1272>>2],Z=r[P+1264>>2],K=r[P+1260>>2],R=r[P+1248>>2],F=r[v+568>>2],se=r[v+504>>2];S=se+z(c=c+-1|0,24)|0,r[S>>2]=F+z(r[(A=c<<2)+R>>2],36),r[S+4>>2]=r[A+K>>2],r[S+8>>2]=r[A+Z>>2],r[S+12>>2]=r[A+Y>>2],A=r[A+G>>2],r[S+20>>2]=D+(A<<1),r[S+16>>2]=X+(A<<2),0<(0|c););if((0|(c=r[v+500>>2]))<1)A=0;else{for(D=r[v+512>>2],A=0;S=r[8+(F+z(r[(G=(c=c+-1|0)<<2)+R>>2],36)|0)>>2],A=(r[D+G>>2]=S)+A|0,0<(0|c););c=r[v+500>>2]}}r[v+508>>2]=c,r[v+516>>2]=A;e:if(4<=j[f+4|0]){if(!((R=j[P+4|0])>>>0<4)){if(c=r[y+120>>2],1<=(0|(r[v+572>>2]=c))){for(D=r[P+1172>>2],G=r[v+576>>2];R=(0|(y=r[(S=(c=c+-1|0)<<2)+D>>2]))<0?y=F=A=0:(A=(R=r[S+r[P+1176>>2]>>2]<<2)+r[P+1188>>2]|0,F=r[S+r[P+1180>>2]>>2],y=r[v+544>>2]+z(y,52)|0,R+r[P+1184>>2]|0),S=G+z(c,20)|0,r[S+12>>2]=F,r[S+8>>2]=A,r[S+4>>2]=R,r[S>>2]=y,0<(0|c););if(P=r[v>>2],(R=j[P+4|0])>>>0<4)break e}if(y=r[P+704>>2],A=r[y+100>>2],1<=(0|(r[v+580>>2]=A)))for(F=r[P+1084>>2],D=r[P+1076>>2],G=r[P+1192>>2],X=r[P+1080>>2],Y=r[v+584>>2];S=Y+z(A=A+-1|0,28)|0,r[S>>2]=r[(c=A<<2)+X>>2],r[S+4>>2]=G+(r[c+D>>2]<<2),c=r[c+F>>2],r[S+20>>2]=1,r[S+24>>2]=1,r[S+12>>2]=0,r[S+16>>2]=0,r[S+8>>2]=c,0<(0|A););if(A=r[y+104>>2],1<=(0|(r[v+588>>2]=A))){for(;;){if(S=r[v+592>>2]+z(A=A+-1|0,48)|0,r[S>>2]=r[v+584>>2]+z(r[(R=A<<2)+r[P+1088>>2]>>2],28),c=r[R+r[P+1092>>2]>>2],r[S+28>>2]=1,r[S+32>>2]=1,r[S+8>>2]=0,r[S+4>>2]=c,y=r[R+r[P+1104>>2]>>2],1<=(0|(r[S+36>>2]=y)))for(c=0;r[r[S+40>>2]+(c<<2)>>2]=r[v+576>>2]+z(r[r[P+1168>>2]+(r[R+r[P+1100>>2]>>2]+c<<2)>>2],20),(0|y)!=(0|(c=c+1|0)););if(!(1<=(0|A)))break}P=r[v>>2],R=j[P+4|0]}if(!(R>>>0<4)){if(R=r[f+704>>2],c=r[R+108>>2],1<=(0|(r[v+604>>2]=c)))for(y=r[f+1124>>2],F=r[f+1128>>2],D=r[f+1120>>2],G=r[v+592>>2],X=r[v+608>>2];S=X+z(c=c+-1|0,12)|0,r[S>>2]=r[(A=c<<2)+D>>2],r[S+4>>2]=r[A+F>>2],r[S+8>>2]=G+z(r[y+A>>2],48),0<(0|c););if(c=r[R+112>>2],1<=(0|(r[v+620>>2]=c)))for(R=r[f+1148>>2],y=r[f+1152>>2],F=r[f+1144>>2],D=r[v+592>>2],G=r[v+624>>2];S=G+z(c=c+-1|0,12)|0,r[S>>2]=r[(A=c<<2)+F>>2],r[S+4>>2]=r[y+A>>2],r[S+8>>2]=D+z(r[A+R>>2],48),0<(0|c););if(A=r[P+1192>>2],S=r[r[P+704>>2]+20>>2],r[v+640>>2]=r[P+972>>2],R=r[P+964>>2],r[v+636>>2]=R,!((0|S)<(c=1))&&(r[R>>2]=A+(r[r[P+968>>2]>>2]<<2),(0|S)!=1))for(;r[(R=c<<2)+r[v+636>>2]>>2]=A+(r[R+r[P+968>>2]>>2]<<2),(0|S)!=(0|(c=c+1|0)););}}}else if(!(r[y+20>>2]<1))for(y=0;;){if(A=r[(F=y<<2)+r[v+636>>2]>>2],1<=((S=0)|(c=r[F+r[P+952>>2]>>2])))for(X=c+(D=r[F+r[P+948>>2]>>2])|0,Y=r[P+1060>>2],Z=r[P+1056>>2];;){if(1<=(0|(G=r[(c=D<<2)+Y>>2])))for(K=G+(R=r[c+Z>>2])|0,se=r[P+1192>>2];;){G=A+(S<<2)|0,ve=O[se+(R<<2)>>2],c=A;t:{if(0<(0|S))for(;;){if(O[c>>2]==ve)break t;if(!((c=c+4|0)>>>0<G>>>0))break}O[G>>2]=ve,S=S+1|0}if(!((0|(R=R+1|0))<(0|K)))break}if(!((0|(D=D+1|0))<(0|X)))break}if(function(pt,Yt){var xe,Ne,Je=0,mt=0,At=0;r[8+(q=xe=q-208|0)>>2]=1,r[12+xe>>2]=0;t:if(Ne=Yt<<2){for(r[16+xe>>2]=4,At=Yt=r[20+xe>>2]=4,Je=2;Yt=(At+4|0)+(mt=Yt)|0,r[(16+xe|0)+(Je<<2)>>2]=Yt,Je=Je+1|0,At=mt,Yt>>>0<Ne>>>0;);if((mt=(pt+Ne|0)-4|0)>>>0<=pt>>>0)Yt=Je=1;else for(Yt=Je=1;Yt=3&~Je?(re[(16+xe|0)+((At=Yt+-1|0)<<2)>>2]>=mt-pt>>>0?Pt(pt,8+xe|0,Yt,0,16+xe|0):jr(pt,Yt,16+xe|0),(0|Yt)==1?(at(8+xe|0,1),0):(at(8+xe|0,At),1)):(jr(pt,Yt,16+xe|0),Lt(8+xe|0,2),Yt+2|0),Je=1|r[8+xe>>2],r[8+xe>>2]=Je,(pt=pt+4|0)>>>0<mt>>>0;);for(Pt(pt,8+xe|0,Yt,0,16+xe|0);;){i:{n:{o:{if(!((0|Yt)!=1|(0|Je)!=1)){if(r[12+xe>>2])break o;break t}if(1<(0|Yt))break n}Lt(8+xe|0,mt=as(8+xe|0)),Je=r[8+xe>>2],Yt=Yt+mt|0;break i}at(8+xe|0,2),r[8+xe>>2]=7^r[8+xe>>2],Lt(8+xe|0,1),Pt((At=pt+-4|0)-r[(16+xe|0)+((mt=Yt+-2|0)<<2)>>2]|0,8+xe|0,Yt+-1|0,1,16+xe|0),at(8+xe|0,1),Je=1|r[8+xe>>2],r[8+xe>>2]=Je,Pt(At,8+xe|0,mt,1,16+xe|0),Yt=mt}pt=pt+-4|0}}q=208+xe|0}(A,S),r[F+r[v+640>>2]>>2]=S,!((0|(y=y+1|0))<r[r[P+704>>2]+20>>2]))break}if(!(j[f+4|0]<5|j[r[v>>2]+4|0]<4)){if(S=r[f+704>>2],c=r[S+128>>2],1<=(0|(r[v+596>>2]=c)))for(R=r[f+1112>>2],y=r[f+1116>>2],F=r[f+1108>>2],D=r[v+592>>2],G=r[v+600>>2];P=G+z(c=c+-1|0,12)|0,r[P>>2]=r[(A=c<<2)+F>>2],r[P+4>>2]=r[y+A>>2],r[P+8>>2]=D+z(r[A+R>>2],48),0<(0|c););if(c=r[S+132>>2],1<=(0|(r[v+612>>2]=c)))for(R=r[f+1136>>2],y=r[f+1140>>2],F=r[f+1132>>2],D=r[v+592>>2],G=r[v+616>>2];P=G+z(c=c+-1|0,12)|0,r[P>>2]=r[(A=c<<2)+F>>2],r[P+4>>2]=r[y+A>>2],r[P+8>>2]=D+z(r[A+R>>2],48),0<(0|c););if(c=r[S+136>>2],!((0|(r[v+628>>2]=c))<1))for(P=r[f+1160>>2],A=r[f+1164>>2],R=r[f+1156>>2],y=r[v+592>>2],F=r[v+632>>2];f=F+z(c=c+-1|0,12)|0,r[f>>2]=r[(S=c<<2)+R>>2],r[f+4>>2]=r[S+A>>2],r[f+8>>2]=y+z(r[S+P>>2],48),0<(0|c););}li(v)}return q=576+d|0,v}(a,_,M))break r;r[36+g>>2]=2209,r[32+g>>2]=2361,Te(4,1294,32+g|0)}else r[20+g>>2]=1444,r[16+g>>2]=2361,Te(4,1294,16+g|0);else r[4+g>>2]=2132,r[g>>2]=2361,Te(4,1294,g);_=0}return q=64+g|0,0|_}function rr(a){var _;return q=_=q-16|0,a=(a|=0)?function(M){var g;return it(16+(q=g=q-576|0)|0,0,560),Kn(M,16+g|0,12+g|0),q=576+g|0,r[12+g>>2]}(a):(r[4+_>>2]=2132,r[_>>2]=2343,Te(4,1294,_),0),q=16+_|0,0|a}function Qr(a){var _=j[a+4|0];he(r[a+704>>2],4,64),st(r[a+708>>2],4),st(r[a+708>>2]+4|0,4),st(r[a+708>>2]+8|0,4),st(r[a+708>>2]+12|0,4),st(r[a+708>>2]+16|0,4),st(r[a+708>>2]+20|0,1),he(r[a+720>>2],4,r[r[a+704>>2]>>2]),he(r[a+724>>2],4,r[r[a+704>>2]>>2]),he(r[a+728>>2],4,r[r[a+704>>2]>>2]),he(r[a+732>>2],4,r[r[a+704>>2]>>2]),he(r[a+736>>2],4,r[r[a+704>>2]>>2]),he(r[a+740>>2],4,r[r[a+704>>2]>>2]),he(r[a+752>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+756>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+760>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+764>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+768>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+772>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+776>>2],4,r[r[a+704>>2]+4>>2]),he(r[a+780>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+784>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+788>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+796>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+800>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+804>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+812>>2],4,r[r[a+704>>2]+12>>2]),he(r[a+816>>2],4,r[r[a+704>>2]+12>>2]),he(r[a+820>>2],4,r[r[a+704>>2]+12>>2]),he(r[a+828>>2],4,r[r[a+704>>2]+12>>2]),he(r[a+852>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+856>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+860>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+868>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+872>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+876>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+880>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+884>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+888>>2],1,r[r[a+704>>2]+16>>2]),he(r[a+892>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+896>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+900>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+904>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+908>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+912>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+924>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+928>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+932>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+936>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+940>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+948>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+952>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+976>>2],4,r[r[a+704>>2]+24>>2]),he(r[a+980>>2],4,r[r[a+704>>2]+28>>2]),he(r[a+984>>2],4,r[r[a+704>>2]+28>>2]),he(r[a+996>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1e3>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1004>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1008>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1012>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1016>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1020>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1032>>2],4,r[r[a+704>>2]+36>>2]),he(r[a+1036>>2],4,r[r[a+704>>2]+36>>2]),he(r[a+1040>>2],4,r[r[a+704>>2]+36>>2]),he(r[a+1052>>2],4,r[r[a+704>>2]+40>>2]),he(r[a+1064>>2],4,r[r[a+704>>2]+44>>2]),he(r[a+1068>>2],4,r[r[a+704>>2]+48>>2]),he(r[a+1072>>2],4,r[r[a+704>>2]+48>>2]),he(r[a+1056>>2],4,r[r[a+704>>2]+52>>2]),he(r[a+1060>>2],4,r[r[a+704>>2]+52>>2]),he(r[a+1192>>2],4,r[r[a+704>>2]+56>>2]),he(r[a+1196>>2],4,r[r[a+704>>2]+60>>2]),he(r[a+1200>>2],2,r[r[a+704>>2]+64>>2]),he(r[a+1204>>2],4,r[r[a+704>>2]+68>>2]),he(r[a+1208>>2],4,r[r[a+704>>2]+72>>2]),he(r[a+1212>>2],4,r[r[a+704>>2]+72>>2]),he(r[a+1216>>2],4,r[r[a+704>>2]+72>>2]),he(r[a+1220>>2],4,r[r[a+704>>2]+72>>2]),he(r[a+1224>>2],4,r[r[a+704>>2]+72>>2]),he(r[a+1228>>2],4,r[r[a+704>>2]+76>>2]),he(r[a+1232>>2],4,r[r[a+704>>2]+76>>2]),he(r[a+1236>>2],4,r[r[a+704>>2]+76>>2]),he(r[a+1248>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1252>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1256>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1260>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1264>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1268>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1272>>2],4,r[r[a+704>>2]+80>>2]),he(r[a+1276>>2],4,r[r[a+704>>2]+84>>2]),he(r[a+1280>>2],2,r[r[a+704>>2]+84>>2]),he(r[a+1284>>2],4,r[r[a+704>>2]+88>>2]),_>>>0<2||(he(r[a+808>>2],4,r[r[a+704>>2]+8>>2]),_>>>0<4)||(he(r[a+968>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+972>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+792>>2],4,r[r[a+704>>2]+8>>2]),he(r[a+824>>2],4,r[r[a+704>>2]+12>>2]),he(r[a+864>>2],4,r[r[a+704>>2]+16>>2]),he(r[a+1288>>2],4,r[r[a+704>>2]+92>>2]),he(r[a+1292>>2],4,r[r[a+704>>2]+92>>2]),he(r[a+1296>>2],4,r[r[a+704>>2]+92>>2]),he(r[a+1300>>2],4,r[r[a+704>>2]+96>>2]),he(r[a+1304>>2],4,r[r[a+704>>2]+96>>2]),he(r[a+1308>>2],4,r[r[a+704>>2]+96>>2]),he(r[a+944>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+956>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+960>>2],4,r[r[a+704>>2]+20>>2]),he(r[a+1076>>2],4,r[r[a+704>>2]+100>>2]),he(r[a+1080>>2],4,r[r[a+704>>2]+100>>2]),he(r[a+1084>>2],4,r[r[a+704>>2]+100>>2]),he(r[a+1088>>2],4,r[r[a+704>>2]+104>>2]),he(r[a+1092>>2],4,r[r[a+704>>2]+104>>2]),he(r[a+1096>>2],4,r[r[a+704>>2]+104>>2]),he(r[a+1100>>2],4,r[r[a+704>>2]+104>>2]),he(r[a+1104>>2],4,r[r[a+704>>2]+104>>2]),he(r[a+1120>>2],4,r[r[a+704>>2]+108>>2]),he(r[a+1124>>2],4,r[r[a+704>>2]+108>>2]),he(r[a+1128>>2],4,r[r[a+704>>2]+108>>2]),he(r[a+1144>>2],4,r[r[a+704>>2]+112>>2]),he(r[a+1148>>2],4,r[r[a+704>>2]+112>>2]),he(r[a+1152>>2],4,r[r[a+704>>2]+112>>2]),he(r[a+1168>>2],4,r[r[a+704>>2]+116>>2]),he(r[a+1172>>2],4,r[r[a+704>>2]+120>>2]),he(r[a+1176>>2],4,r[r[a+704>>2]+120>>2]),he(r[a+1180>>2],4,r[r[a+704>>2]+120>>2]),he(r[a+1184>>2],4,r[r[a+704>>2]+124>>2]),he(r[a+1188>>2],4,r[r[a+704>>2]+124>>2]),(0|_)!=4&&(he(r[a+988>>2],4,r[r[a+704>>2]+28>>2]),he(r[a+992>>2],4,r[r[a+704>>2]+28>>2]),he(r[a+1024>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1028>>2],4,r[r[a+704>>2]+32>>2]),he(r[a+1044>>2],4,r[r[a+704>>2]+36>>2]),he(r[a+1048>>2],4,r[r[a+704>>2]+36>>2]),he(r[a+1108>>2],4,r[r[a+704>>2]+128>>2]),he(r[a+1112>>2],4,r[r[a+704>>2]+128>>2]),he(r[a+1116>>2],4,r[r[a+704>>2]+128>>2]),he(r[a+1132>>2],4,r[r[a+704>>2]+132>>2]),he(r[a+1136>>2],4,r[r[a+704>>2]+132>>2]),he(r[a+1140>>2],4,r[r[a+704>>2]+132>>2]),he(r[a+1156>>2],4,r[r[a+704>>2]+136>>2]),he(r[a+1160>>2],4,r[r[a+704>>2]+136>>2]),he(r[a+1164>>2],4,r[r[a+704>>2]+136>>2])))}function Ti(a,_){var M=0,g=0,f=0,S=0,c=0,d=0,v=a+_|0;r:{e:if(!(1&(M=r[a+4>>2]))){if(!(3&M))break r;if(_=(M=r[a>>2])+_|0,(0|(a=a-M|0))!=r[2092])if(M>>>0<=255)f=M>>>3,M=r[a+8>>2],(0|(g=r[a+12>>2]))==(0|M)?(d=r[2087]&Lr(f),r[2087]=d):(r[M+12>>2]=g,r[g+8>>2]=M);else{if(c=r[a+24>>2],(0|(M=r[a+12>>2]))!=(0|a))g=r[a+8>>2],r[g+12>>2]=M,r[M+8>>2]=g;else if(f=(f=r[(g=a+20|0)>>2])||r[(g=a+16|0)>>2]){for(;S=g,(f=r[(g=(M=f)+20|0)>>2])||(g=M+16|0,f=r[M+16>>2]););r[S>>2]=0}else M=0;if(c){g=r[a+28>>2];t:{if(r[(f=8652+(g<<2)|0)>>2]==(0|a)){if(r[f>>2]=M)break t;d=r[2088]&Lr(g),r[2088]=d;break e}if(!(r[c+(r[c+16>>2]==(0|a)?16:20)>>2]=M))break e}r[M+24>>2]=c,(g=r[a+16>>2])&&(r[M+16>>2]=g,r[g+24>>2]=M),(g=r[a+20>>2])&&(r[M+20>>2]=g,r[g+24>>2]=M)}}else if(!(3&~(M=r[4+v>>2])))return r[2089]=_,r[4+v>>2]=-2&M,r[a+4>>2]=1|_,r[v>>2]=_}e:{if(!(2&(M=r[4+v>>2]))){if(r[2093]==(0|v)){if(r[2093]=a,_=r[2090]+_|0,r[2090]=_,r[a+4>>2]=1|_,r[2092]!=(0|a))break r;return r[2089]=0,r[2092]=0}if(r[2092]==(0|v))return r[2092]=a,_=r[2089]+_|0,r[2089]=_,r[a+4>>2]=1|_,r[a+_>>2]=_;_=(-8&M)+_|0;t:if(M>>>0<=255)f=M>>>3,M=r[8+v>>2],(0|(g=r[12+v>>2]))==(0|M)?(d=r[2087]&Lr(f),r[2087]=d):(r[M+12>>2]=g,r[g+8>>2]=M);else{if(c=r[24+v>>2],(0|v)!=(0|(M=r[12+v>>2])))g=r[8+v>>2],r[g+12>>2]=M,r[M+8>>2]=g;else if(f=(f=r[(g=20+v|0)>>2])||r[(g=16+v|0)>>2]){for(;S=g,(f=r[(g=(M=f)+20|0)>>2])||(g=M+16|0,f=r[M+16>>2]););r[S>>2]=0}else M=0;if(c){g=r[28+v>>2];i:{if(r[(f=8652+(g<<2)|0)>>2]==(0|v)){if(r[f>>2]=M)break i;d=r[2088]&Lr(g),r[2088]=d;break t}if(!(r[c+(r[c+16>>2]==(0|v)?16:20)>>2]=M))break t}r[M+24>>2]=c,(g=r[16+v>>2])&&(r[M+16>>2]=g,r[g+24>>2]=M),(g=r[20+v>>2])&&(r[M+20>>2]=g,r[g+24>>2]=M)}}if(r[a+4>>2]=1|_,r[a+_>>2]=_,r[2092]!=(0|a))break e;return r[2089]=_}r[4+v>>2]=-2&M,r[a+4>>2]=1|_,r[a+_>>2]=_}if(_>>>0<=255)return _=8388+((M=_>>>3)<<3)|0,M=(g=r[2087])&(M=1<<M)?r[_+8>>2]:(r[2087]=M|g,_),r[_+8>>2]=a,r[M+12>>2]=a,r[a+12>>2]=_,r[a+8>>2]=M;r[a+16>>2]=0,M=r[a+20>>2]=0,(f=_>>>8)&&(M=31,16777215<_>>>0||(M=28+((M=((v=(f<<=S=f+1048320>>>16&8)<<(M=f+520192>>>16&4))<<(f=245760+v>>>16&2)>>>15)-(f|M|S)|0)<<1|_>>>M+21&1)|0)),f=8652+((r[(g=a)+28>>2]=M)<<2)|0;e:{if((g=r[2088])&(S=1<<M)){for(g=_<<((0|M)==31?0:25-(M>>>1)|0),M=r[f>>2];;){if((-8&r[(f=M)+4>>2])==(0|_))break e;if(M=g>>>29,g<<=1,!(M=r[16+(S=f+(4&M)|0)>>2]))break}r[S+16>>2]=a}else r[2088]=g|S,r[f>>2]=a;return r[a+24>>2]=f,r[a+12>>2]=a,r[a+8>>2]=a}_=r[f+8>>2],r[_+12>>2]=a,r[f+8>>2]=a,r[a+24>>2]=0,r[a+12>>2]=f,r[a+8>>2]=_}}function Yi(a){var _,M,g,f,S,c,d,v,y=p(0),A=(p(0),0),P=0,R=(p(0),p(0),p(0),p(0),0);p(0),p(0);r:{e:{if(He(a),P=2147483647&(A=Ve[0])){if(!(P>>>0<2139095041))return p(p(.10000000149011612)+a);if((0|P)==1065353216)return p(-1<(0|A)?.10000000149011612:10);if((0|P)==2139095040)return p(-1<(0|A)?0:-a);if((0|A)==1073741824)return p(.010000000707805157);if((0|A)==1056964608)return p(.3162277638912201);if(1291845633<=P>>>0)return p((0|A)<0?fe:0);if(_=O[1701],v=p(p(1.600000023841858)-_),M=p(p(1)/p(_+p(1.600000023841858))),ut(0,-4096&(He(d=p(v*M)),Ve[0])),y=l(),g=p(y*y),S=O[1705],_=p(M*p(p(v-p((f=y)*p(3.099609375)))-p(y*p(p(1.600000023841858)-p(p(3.099609375)-_))))),M=p(p(d+y)*_),y=p(d*d),v=p(M+p(p(y*y)*p(p(y*p(p(y*p(p(y*p(p(y*p(p(y*p(.20697501301765442))+p(.23066075146198273)))+p(.2727281153202057)))+p(.3333333432674408)))+p(.4285714328289032)))+p(.6000000238418579)))),ut(0,-4096&(He(p(p(g+p(3))+v)),Ve[0])),y=l(),M=p(f*y),d=p(p(_*y)+p(d*p(v-p(p(y+p(-3))-g)))),ut(0,-4096&(He(p(M+d)),Ve[0])),y=l(),_=p(y*p(.9619140625)),g=p(O[1703]+p(p(p(d-p(y-M))*p(.9617967009544373))+p(y*p(-.00011736857413779944)))),ut(0,-4096&(He(p(p(S+p(_+g))+p(-4))),Ve[0])),d=l(),ut(0,-4096&A),v=l(),y=p(d*v),a=p(p(p(g-p(p(p(d-p(-4))-S)-_))*a)+p(p(a-v)*d)),He(d=p(y+a)),1124073473<=(0|(A=Ve[0])))break e;t:{if((P=1124073472)==(0|A)){if(p(a+p(4299566569443414e-23))>p(d-y))break e}else{if(P=2147483647&A,!(a<=p(d-y)^1|(0|A)!=-1021968384)|1125515265<=P>>>0)break r;if(P>>>0<1056964609)break t}R=(8388607&(P=(8388608>>>(P>>>23)-126)+A|0)|8388608)>>>150-(c=P>>>23&255),R=(0|A)<0?0-R|0:R,y=p(y-(ut(0,P&-8388608>>c-127),l())),He(p(a+y)),A=Ve[0]}ut(0,-32768&A),d=l(),_=p(d*p(.693145751953125)),d=p(p(d*p(14286065379565116e-22))+p(p(a-p(d-y))*p(.6931471824645996))),a=p(_+d),y=p(a*a),y=p(a-p(y*p(p(y*p(p(y*p(p(y*p(p(y*p(4138136944220605e-23))+p(-16533901998627698e-22)))+p(661375597701408e-19)))+p(-.0027777778450399637)))+p(.1666666716337204)))),f=p(p(a*y)/p(y+p(-2))),y=p(d-p(a-_)),a=(0|(A=0|(He(a=p(p(a-p(f-p(y+p(a*y))))+p(1))),Ve[0]+(R<<23))))<=8388607?function(D,F){var G=0;return 128<=(0|F)?(D=p(D*p(17014118346046923e22)),F=(0|(G=F+-127|0))<128?G:(D=p(D*p(17014118346046923e22)),((0|F)<381?F:381)+-254|0)):-127<(0|F)||(D=p(D*p(11754943508222875e-54)),F=-127<(0|(G=F+126|0))?G:(D=p(D*p(11754943508222875e-54)),(-378<(0|F)?F:-378)+252|0)),p(D*(ut(0,1065353216+(F<<23)|0),l()))}(a,R):(ut(0,A),l()),a=p(p(1)*a)}else a=p(1);return a}return p(fe)}return p(0)}function zi(a,_){var M,g,f,S=0,c=0,d=p(0);if(He(_),!((f=2147483647&(g=Ve[0]))>>>0<=2139095040&&(He(a),(S=2147483647&(c=Ve[0]))>>>0<2139095041)))return p(a+_);if((0|g)==1065353216)return xr(a);g=(M=g>>>30&2)|c>>>31;r:{e:{t:{i:{if(!S){switch(g-2|0){case 0:break i;case 1:break;default:break t}return p(-3.1415927410125732)}if((0|f)!=2139095040){if(!f|!(S>>>0<=218103808+f>>>0&&(0|S)!=2139095040))break r;if(a=d=S+218103808>>>0<f>>>0&&(d=p(0),M)?d:xr(p(de(p(a/_)))),g>>>0<=2){switch(g-1|0){case 0:return p(-a);case 1:break;default:break t}return p(p(3.1415927410125732)-p(a+p(8742277657347586e-23)))}return p(p(a+p(8742277657347586e-23))+p(-3.1415927410125732))}if((0|S)==2139095040)break e;return O[6784+(g<<2)>>2]}a=p(3.1415927410125732)}return a}return O[6768+(g<<2)>>2]}return p((0|c)<0?-1.5707963705062866:1.5707963705062866)}function xr(a){p(0);var _,M,g,f,S,c=0;p(0),p(0),He(a);r:{if(1283457024<=(f=2147483647&(S=Ve[0]))>>>0){if(2139095040<f>>>0)break r;return p((0|S)<0?-1.570796251296997:1.570796251296997)}e:{if(f>>>0<=1054867455){if(c=-1,964689920<=f>>>0)break e;break r}a=p(de(a)),c=f>>>0<=1066926079?f>>>0<=1060110335?(a=p(p(p(a+a)+p(-1))/p(a+p(2))),0):(a=p(p(a+p(-1))/p(a+p(1))),1):f>>>0<=1075576831?(a=p(p(a+p(-1.5))/p(p(a*p(1.5))+p(1))),2):(a=p(p(-1)/a),3)}if(f=c,M=p(a*a),_=p(M*M),g=p(_*p(p(_*p(-.106480173766613))+p(-.19999158382415771))),_=p(M*p(p(_*p(p(_*p(.06168760731816292))+p(.14253635704517365)))+p(.333333283662796))),(0|f)<=-1)return p(a-p(a*p(g+_)));a=p(O[6736+(f<<=2)>>2]-p(p(p(a*p(g+_))-O[6752+f>>2])-a)),a=(0|S)<0?p(-a):a}return a}function ri(a,_){var M,g,f,S=0,c=0;return q=g=q-16|0,He(a),(S=2147483647&(f=Ve[0]))>>>0<=1305022426?(ee[_>>3]=(M=+a)+-1.5707963109016418*(c=.6366197723675814*M+6755399441055744-6755399441055744)+-15893254773528196e-24*c,S=de(c)<2147483648?~~c:-2147483648):2139095040<=S>>>0?(ee[_>>3]=p(a-a),S=0):(M=S,ee[8+g>>3]=(ut(0,M-((S=(S>>>23)-150|0)<<23)|0),l()),S=function(d,v,y){var A,P,R,D,F,G,X=0,Y=0,Z=0,K=0,se=0,ve=0,Pe=0,ke=0,We=0,vt=0,Dt=0;if(q=A=q-560|0,Pe=(Y=y)+z(R=0<(0|(y=(y+-3|0)/24|0))?y:0,-24)|0,0<=(0|(P=r[972])))for(Y=P+1|0,y=R;ee[(320+A|0)+(Z<<3)>>3]=(0|y)<0?0:+r[3904+(y<<2)>>2],y=y+1|0,(0|Y)!=(0|(Z=Z+1|0)););for(se=Pe+-24|0,Y=0;;){for(X=y=0;X+=ee[(y<<3)+d>>3]*ee[(320+A|0)+(Y-y<<3)>>3],(0|(y=y+1|0))!=1;);if(ee[(Y<<3)+A>>3]=X,y=(0|Y)<(0|P),Y=Y+1|0,!y)break}G=23-se|0,D=24-se|0,Y=P;r:{for(;;){if(X=ee[(Y<<3)+A>>3],!(We=((y=0)|(Z=Y))<1))for(;ve=(480+A|0)+(y<<2)|0,ke=X,K=de(X*=5960464477539063e-23)<2147483648?~~X:-2147483648,K=de(ke+=-16777216*(X=0|K))<2147483648?~~ke:-2147483648,r[ve>>2]=K,X=ee[((Z=Z+-1|0)<<3)+A>>3]+X,(0|Y)!=(0|(y=y+1|0)););X=Gt(X,se),X=(X+=-8*Ye(.125*X))-(0|(ve=de(X)<2147483648?~~X:-2147483648));e:{t:{i:{if(Dt=(0|se)<1){if(se)break i;K=r[476+((Y<<2)+A|0)>>2]>>23}else K=r[476+(Z=(Y<<2)+A|0)>>2],vt=Z,Z=K-((y=K>>D)<<D)|0,ve=y+ve|0,K=(r[vt+476>>2]=Z)>>G;if((0|K)<1)break e;break t}if(K=2,!(.5<=X)){K=0;break e}}if(Z=y=0,!We)for(;;){We=r[(F=(480+A|0)+(y<<2)|0)>>2],vt=16777215;t:{i:{if(!Z){if(!We)break i;vt=16777216,Z=1}r[F>>2]=vt-We;break t}Z=0}if((0|Y)==(0|(y=y+1|0)))break}Dt||1<(y=se+-1|0)>>>0||(r[476+(y=(Y<<2)+A|0)>>2]=y-1?8388607&r[y+476>>2]:4194303&r[y+476>>2]),ve=ve+1|0,(0|K)==2&&(X=1-X,K=2,Z)&&(X-=Gt(1,se))}if(X!=0)break;if(!(((Z=0)|(y=Y))<=(0|P))){for(;Z=r[(480+A|0)+((y=y+-1|0)<<2)>>2]|Z,(0|P)<(0|y););if(Z){for(Pe=se;Pe=Pe+-24|0,!r[(480+A|0)+((Y=Y+-1|0)<<2)>>2];);break r}}for(y=1;y=(Z=y)+1|0,!r[(480+A|0)+(P-Z<<2)>>2];);for(Z=Y+Z|0;;){for(Y=ve=Y+1|0,ee[(320+A|0)+(ve<<3)>>3]=r[3904+(R+Y<<2)>>2],X=y=0;X+=ee[(y<<3)+d>>3]*ee[(320+A|0)+(ve-y<<3)>>3],(0|(y=y+1|0))!=1;);if(ee[(Y<<3)+A>>3]=X,!((0|Y)<(0|Z)))break}Y=Z}16777216<=(X=Gt(X,0-se|0))?(d=(480+A|0)+(Y<<2)|0,ke=X,y=de(X*=5960464477539063e-23)<2147483648?~~X:-2147483648,Z=de(X=ke+-16777216*(0|y))<2147483648?~~X:-2147483648,r[d>>2]=Z,Y=Y+1|0):(y=de(X)<2147483648?~~X:-2147483648,Pe=se),r[(480+A|0)+(Y<<2)>>2]=y}if(X=Gt(1,Pe),!((0|Y)<=-1)){for(y=Y;ee[(y<<3)+A>>3]=X*+r[(480+A|0)+(y<<2)>>2],X*=5960464477539063e-23,d=0<(0|y),y=y+-1|0,d;);if(!((0|Y)<=-1))for(y=Y;;){for(se=Y-(d=y)|0,y=X=0;X+=ee[6672+(y<<3)>>3]*ee[(d+y<<3)+A>>3],!((0|P)<=(0|y))&&(Pe=y>>>0<se>>>0,y=y+1|0,Pe););if(ee[(160+A|0)+(se<<3)>>3]=X,y=d+-1|0,!(0<(0|d)))break}}if(0<=(Y|(X=0)))for(;X+=ee[(160+A|0)+(Y<<3)>>3],d=0<(0|Y),Y=Y+-1|0,d;);return ee[v>>3]=K?-X:X,q=560+A|0,7&ve}(8+g|0,g,S),c=ee[g>>3],(0|f)<=-1?(ee[_>>3]=-c,S=0-S|0):ee[_>>3]=c),q=16+g|0,S}function ci(a,_){return a?function(M,g){r:{if(M){if(g>>>0<=127)break r;if(r[r[1789]>>2]){if(g>>>0<=2047)return $[M+1|0]=63&g|128,$[0|M]=g>>>6|192,2;if(!((-8192&g)!=57344&&55296<=g>>>0))return $[M+2|0]=63&g|128,$[0|M]=g>>>12|224,$[M+1|0]=g>>>6&63|128,3;if(g+-65536>>>0<=1048575)return $[M+3|0]=63&g|128,$[0|M]=g>>>18|240,$[M+2|0]=g>>>6&63|128,$[M+1|0]=g>>>12&63|128,4}else if((-128&g)==57216)break r;r[2086]=25,M=-1}else M=1;return M}return $[0|M]=g,1}(a,_):0}function Kn(a,_,M){var g,f,S=0,c=0,d=0,v=0,y=0,A=0,P=0,R=0,D=0,F=j[a+4|0];if(r[_>>2]=652,c=r[a+704>>2],1<=(0|(v=r[c>>2]))){for(y=r[a+720>>2],P=r[a+1072>>2];d=(1<<r[P+(r[y+(S<<2)>>2]<<2)>>2])+d|0,(0|v)!=(0|(S=S+1|0)););S=d<<2}if(r[_+4>>2]=z(v,12),r[_+8>>2]=r[c>>2]<<2,r[_+12>>2]=r[c>>2]<<2,r[_+16>>2]=r[c>>2]<<2,r[_+20>>2]=r[c>>2]<<2,d=r[c>>2],r[_+28>>2]=S,r[_+24>>2]=d<<2,d=r[c>>2],r[_+40>>2]=S,r[_+36>>2]=S,r[_+32>>2]=d<<2,r[_+44>>2]=r[c+4>>2]<<5,r[_+48>>2]=r[c+4>>2]<<2,r[_+52>>2]=r[c+4>>2]<<2,r[_+56>>2]=r[c+4>>2]<<2,r[_+60>>2]=r[c+4>>2]<<4,r[_+64>>2]=r[c+4>>2]<<4,1<=((S=0)|(v=r[c+8>>2]))){for(y=r[a+780>>2],P=r[a+1072>>2],D=r[a+796>>2],d=0;A=(15+(r[(R=S<<2)+D>>2]<<3)&-16)+A|0,d=(1<<r[P+(r[y+R>>2]<<2)>>2])+d|0,(0|v)!=(0|(S=S+1|0)););S=d<<2}if(r[_+68>>2]=z(v,24),r[_+72>>2]=r[c+8>>2]<<2,r[_+76>>2]=r[c+8>>2]<<2,d=r[c+8>>2],r[_+84>>2]=A,r[_+80>>2]=d<<2,r[_+88>>2]=r[c+8>>2]<<4,r[_+92>>2]=r[c+8>>2]<<4,d=r[c+8>>2],r[_+100>>2]=S,r[_+96>>2]=d<<2,d=r[c+8>>2],r[_+140>>2]=S,r[_+136>>2]=S,r[_+132>>2]=S,r[_+128>>2]=S,r[_+124>>2]=S,r[_+120>>2]=S,r[_+116>>2]=S,r[_+112>>2]=S,r[_+108>>2]=S,r[_+104>>2]=d<<2,r[_+144>>2]=r[c+8>>2]<<2,r[_+148>>2]=r[c+8>>2]<<2,r[_+152>>2]=r[c+8>>2]<<2,r[_+156>>2]=r[c+8>>2]<<2,r[_+160>>2]=r[c+8>>2]<<2,r[_+164>>2]=r[c+8>>2]<<2,1<=((S=A=0)|(v=r[c+12>>2]))){for(y=r[a+812>>2],P=r[a+1072>>2],d=0;d=(1<<r[P+(r[y+(S<<2)>>2]<<2)>>2])+d|0,(0|v)!=(0|(S=S+1|0)););S=d<<2}if(r[_+168>>2]=z(v,12),r[_+172>>2]=r[c+12>>2]<<2,r[_+176>>2]=r[c+12>>2]<<2,r[_+180>>2]=r[c+12>>2]<<2,r[_+184>>2]=r[c+12>>2]<<2,r[_+188>>2]=r[c+12>>2]<<2,r[_+192>>2]=r[c+12>>2]<<2,r[_+196>>2]=r[c+12>>2]<<2,r[_+200>>2]=r[c+12>>2]<<2,r[_+204>>2]=r[c+12>>2]<<4,r[_+208>>2]=r[c+12>>2]<<4,d=r[c+12>>2],r[_+216>>2]=S,r[_+212>>2]=d<<2,d=r[c+12>>2],r[_+268>>2]=S,r[_+264>>2]=S,r[_+260>>2]=S,r[_+256>>2]=S,r[_+252>>2]=S,r[_+248>>2]=S,r[_+244>>2]=S,r[_+240>>2]=S,r[_+236>>2]=S,r[_+232>>2]=S,r[_+228>>2]=S,r[_+224>>2]=S,r[_+220>>2]=d<<2,r[_+272>>2]=r[c+12>>2]<<2,r[_+276>>2]=r[c+12>>2]<<2,r[_+280>>2]=r[c+12>>2]<<2,r[_+284>>2]=r[c+12>>2]<<2,r[_+288>>2]=r[c+12>>2]<<2,r[_+292>>2]=r[c+12>>2]<<2,1<=((S=0)|(d=r[c+16>>2]))){for(y=r[a+852>>2],P=r[a+1072>>2],D=r[a+892>>2],v=0;A=(15+(r[(R=S<<2)+D>>2]<<3)&-16)+A|0,v=(1<<r[P+(r[y+R>>2]<<2)>>2])+v|0,(0|d)!=(0|(S=S+1|0)););S=v<<2}if(r[_+296>>2]=z(d,20),r[_+300>>2]=r[c+16>>2]<<2,r[_+304>>2]=r[c+16>>2],r[_+308>>2]=r[c+16>>2]<<2,r[_+312>>2]=r[c+16>>2]<<2,d=r[c+16>>2],r[_+320>>2]=A,r[_+316>>2]=d<<2,r[_+324>>2]=r[c+16>>2]<<2,r[_+328>>2]=r[c+16>>2]<<4,r[_+332>>2]=r[c+16>>2]<<4,r[_+336>>2]=r[c+16>>2]<<2,r[_+340>>2]=r[c+16>>2]<<2,r[_+344>>2]=r[c+16>>2]<<2,r[_+348>>2]=r[c+16>>2]<<4,r[_+352>>2]=r[c+16>>2]<<4,d=r[c+16>>2],r[_+360>>2]=S,r[_+356>>2]=d<<2,d=r[c+16>>2],r[_+404>>2]=S,r[_+400>>2]=S,r[_+396>>2]=S,r[_+392>>2]=S,r[_+388>>2]=S,r[_+384>>2]=S,r[_+380>>2]=S,r[_+376>>2]=S,r[_+372>>2]=S,r[_+368>>2]=S,r[_+364>>2]=d<<2,r[_+408>>2]=r[c+16>>2]<<2,r[_+412>>2]=r[c+16>>2]<<2,r[_+416>>2]=r[c+16>>2]<<2,r[_+420>>2]=r[c+16>>2]<<2,r[_+424>>2]=r[c+16>>2]<<2,r[_+428>>2]=r[c+16>>2]<<2,y=r[a+704>>2],r[_+432>>2]=z(r[y+20>>2],52),r[_+436>>2]=F>>>(S=v=0)<=3?r[y+20>>2]<<2:0,r[_+440>>2]=r[y+20>>2]<<2,r[_+444>>2]=z(r[y+52>>2],28),1<=(0|(c=r[y+48>>2]))){for(d=r[a+1072>>2],A=0;A=(P=r[d+(S<<2)>>2])+A|0,v=(1<<P)+v|0,(0|c)!=(0|(S=S+1|0)););S=v<<2,v=A<<2}if(r[_+460>>2]=S,r[_+456>>2]=S,r[_+452>>2]=v,r[_+448>>2]=z(c,36),r[_+500>>2]=z(r[y+72>>2],28),1<=((A=S=d=0)|(P=r[y+72>>2]))){for(D=r[a+1224>>2],R=r[a+1220>>2],f=r[a+1212>>2],v=0;v=(0|(g=r[(c=A<<2)+R>>2]-r[c+D>>2]|0))<(0|v)?v:1+g|0,S=(0|S)<(0|(c=r[c+f>>2]))?c:S,(0|P)!=(0|(A=A+1|0)););A=S<<2,S=v<<2}if(c=r[y+76>>2],r[_+516>>2]=S,r[_+512>>2]=A,r[_+508>>2]=S,r[_+504>>2]=c<<4,1<=(0|(c=r[y+80>>2]))){for(d=r[a+1248>>2],A=r[a+1072>>2],v=S=0;v=(1<<r[A+(r[d+(S<<2)>>2]<<2)>>2])+v|0,(0|c)!=(0|(S=S+1|0)););d=v<<2}if(r[_+520>>2]=z(c,24),r[_+524>>2]=r[y+80>>2]<<2,c=r[y+80>>2],r[_+532>>2]=d,r[_+528>>2]=c<<2,c=r[y+80>>2],r[_+544>>2]=d,r[_+540>>2]=d,r[_+536>>2]=c<<2,c=_,4<=F>>>0){if(r[_+464>>2]=z(r[y+120>>2],20),r[_+468>>2]=z(r[y+100>>2],28),d=_,1<=((S=A=0)|(P=r[y+104>>2]))){for(a=r[a+1104>>2],v=0;v=r[a+(S<<2)>>2]+v|0,(0|P)!=(0|(S=S+1|0)););a=v<<2}else a=0;r[d+476>>2]=a,r[_+472>>2]=z(P,48),r[_+484>>2]=z(r[y+108>>2],12),a=r[y+112>>2],r[_+552>>2]=0,r[_+492>>2]=z(a,12),a=0}else{if((0|(A=r[y+20>>2]))<1)v=0;else for(P=r[a+1060>>2],D=r[a+952>>2],a=r[a+948>>2],d=v=0;;){if(1<=(0|(R=r[(S=d<<2)+D>>2])))for(R=(S=P+(r[a+S>>2]<<2)|0)+(R<<2)|0;v=r[S>>2]+v|0,(S=S+4|0)>>>0<R>>>0;);if((0|A)==(0|(d=d+1|0)))break}r[_+552>>2]=A<<2,A=r[y+20>>2]<<2,a=v<<2}for(r[c+556>>2]=a,r[_+548>>2]=A,4<F>>>0&&(r[_+480>>2]=z(r[y+128>>2],12),r[_+488>>2]=z(r[y+132>>2],12),r[_+496>>2]=z(r[y+136>>2],12)),S=v=0;S=((c=r[(a=(v<<2)+_|0)>>2])+15&-16)+(r[a>>2]=S)|0,(0|(v=v+1|0))!=140;);r[M>>2]=S}function es(a,_,M,g){r:{if(!(20<_>>>0||9<(_=_+-9|0)>>>0)){switch(_-1|0){default:return _=r[M>>2],r[M>>2]=_+4,r[a>>2]=r[_>>2];case 0:return _=r[M>>2],r[M>>2]=_+4,_=r[_>>2],r[a>>2]=_,r[a+4>>2]=_>>31;case 1:return _=r[M>>2],r[M>>2]=_+4,r[a>>2]=r[_>>2],r[a+4>>2]=0;case 3:return _=r[M>>2],r[M>>2]=_+4,_=J[_>>1],r[a>>2]=_,r[a+4>>2]=_>>31;case 4:return _=r[M>>2],r[M>>2]=_+4,r[a>>2]=W[_>>1],r[a+4>>2]=0;case 5:return _=r[M>>2],r[M>>2]=_+4,_=$[0|_],r[a>>2]=_,r[a+4>>2]=_>>31;case 6:return _=r[M>>2],r[M>>2]=_+4,r[a>>2]=j[0|_],r[a+4>>2]=0;case 2:case 7:break r;case 8:}N[g](a,M)}return}_=r[M>>2]+7&-8,r[M>>2]=_+8,M=r[_+4>>2],r[a>>2]=r[_>>2],r[a+4>>2]=M}function ts(a){var _,M,g=0;if(Fe($[r[a>>2]]))for(;_=r[a>>2],M=$[0|_],r[a>>2]=_+1,g=(z(g,10)+M|0)-48|0,Fe($[_+1|0]););return g}function rs(a,_,M,g,f){var S,c;r[204+(q=c=q-208|0)>>2]=M,it(160+c|(M=0),0,40),r[200+c>>2]=r[204+c>>2],(0|Cr(0,_,200+c|0,80+c|0,160+c|0,g,f))<0||(M=0<=r[a+76>>2]?1:M,M=r[a>>2],$[a+74|0]<=0&&(r[a>>2]=-33&M),S=32&M,r[a+48>>2]?Cr(a,_,200+c|0,80+c|0,160+c|0,g,f):(r[a+48>>2]=80,r[a+16>>2]=80+c,r[a+28>>2]=c,r[a+20>>2]=c,M=r[a+44>>2],Cr(a,_,200+(r[a+44>>2]=c)|0,80+c|0,160+c|0,g,f),M&&(N[r[a+36>>2]](a,0,0),r[a+48>>2]=0,r[a+44>>2]=M,r[a+28>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0)),r[a>>2]=r[a>>2]|S),q=208+c|0}function is(a,_,M){var g,f;De(8+(q=f=q-160|0)|0,3192,144),r[52+f>>2]=a,r[28+f>>2]=a,r[56+f>>2]=g=(g=-2-a|0)>>>0<256?g:256,r[36+f>>2]=a=a+g|0,r[24+f>>2]=a,rs(8+f|0,_,M,11,12),g&&(a=r[28+f>>2],$[a-((0|a)==r[24+f>>2])|0]=0),q=160+f|0}function ns(a,_){var M,g,f=0;f=!!(0|_);r:{e:{t:{i:if(!(!_|!(3&a)))for(;;){if(!j[0|a])break t;if(a=a+1|0,f=!!(0|(_=_+-1|0)),!_)break i;if(!(3&a))break}if(!f)break e}if(!j[0|a])break r;t:{if(4<=_>>>0){for(f=(f=_+-4|0)-(M=-4&f)|0,M=4+(a+M|0)|0;;){if((-1^(g=r[a>>2]))&g+-16843009&-2139062144)break t;if(a=a+4|0,!(3<(_=_+-4|0)>>>0))break}_=f,a=M}if(!_)break e}for(;;){if(!j[0|a])break r;if(a=a+1|0,!(_=_+-1|0))break}}return 0}return a}function ss(a){var _,M=0;if(!a)return 32;if(!(1&a))for(;M=M+1|0,_=2&a,a>>>=1,!_;);return M}function os(a,_){var M,g,f,S,c=0,d=0;d=4,q=S=q-256|0;r:if(!((0|_)<2))for(c=r[(f=(_<<2)+a|0)>>2]=S;;){for(De(c,r[a>>2],M=d>>>0<256?d:256),c=0;De(r[(g=(c<<2)+a|0)>>2],r[((c=c+1|0)<<2)+a>>2],M),r[g>>2]=r[g>>2]+M,(0|_)!=(0|c););if(!(d=d-M|0))break r;c=r[f>>2]}q=256+S|0}function as(a){return ss(r[a>>2]+-1|0)||((a=ss(r[a+4>>2]))?a+32|0:0)}function Wi(a,_){_|=0,Ve[0]=a|=0,Ve[1]=_}function hs(a,_,M){return function(g,f,S){var c,d,v,y,A=z(d=S>>>16,v=g>>>16);return g=(65535&(v=((c=z(y=65535&S,g&=65535))>>>16)+z(v,y)|0))+z(g,d)|0,Ae=((A+z(f,S)|0)+(v>>>16)|0)+(g>>>16)|0,65535&c|g<<16}(a,_,M)}function us(a,_,M){return function(g,f,S){var c,d,v=0,y=0,A=0,P=0,R=0,D=0,F=0;r:{e:{t:{i:{n:{if(!(y=f))return Wi((f=g)-z(g=(g>>>0)/(S>>>0)|0,S)|0,0),Ae=0,g;if(v=S){if(!((P=v+-1|0)&v))break n;R=0-(P=(be(v)+33|0)-be(y)|0)|0;break t}if(!g)return Wi(0,y-z(g=(y>>>0)/0|0,0)|0),Ae=0,g;if((v=32-be(y)|0)>>>0<31)break i;break e}if(Wi(g&P,0),(0|v)==1)break r;return S=31&(v=v?31-be(v+-1^v)|0:32),g=32<=(63&v)>>>0?(y=0,f>>>S):(y=f>>>S,((1<<S)-1&f)<<32-S|g>>>S),Ae=y,g}P=v+1|0,R=63-v|0}if(v=f,A=31&(y=63&P),A=32<=y>>>0?(y=0,v>>>A):(y=v>>>A,((1<<A)-1&v)<<32-A|g>>>A),v=31&(R&=63),32<=R>>>0?(f=g<<v,g=0):(f=(1<<v)-1&g>>>32-v|f<<v,g<<=v),P)for((R=S+(v=-1)|0)>>>0<4294967295&&(v=0);A=(d=D=A<<1|f>>>31)-(c=S&(D=v-((y=y<<1|A>>>31)+(R>>>0<D>>>0)|0)>>31))|0,y=y-(d>>>0<c>>>0)|0,f=f<<1|g>>>31,g=F|g<<1,F=D&=1,P=P+-1|0;);return Wi(A,y),Ae=f<<1|g>>>31,D|g<<1}Wi(g,f),f=g=0}return Ae=f,g}(a,_,M)}function Lr(a){var _;return(-1>>>(_=31&a)&-2)<<_|(-1<<(a=0-a&31)&-2)>>>a}function ls(){return I.byteLength/65536|0}}(an,_e,Be)}}L=null,E.wasmBinary&&(pe=E.wasmBinary);var Xe={},pe=[];Mi(Xe)!="object"&&oe("no native wasm support detected");var _e,Be=new function(){var ue=Array(16);return ue.grow=function(){17<=ue.length&&Ct("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),ue.push(null)},ue.set=function(ge,Se){ue[ge]=Se},ue.get=function(ge){return ue[ge]},ue},Me=!1;function _t(ue,ge){ue||Ct("Assertion failed: "+ge)}var Ke,Re,me,tt,je=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ht(ue,ge,Se){var we=ge+Se;for(Se=ge;ue[Se]&&!(we<=Se);)++Se;if(16<Se-ge&&ue.subarray&&je)return je.decode(ue.subarray(ge,Se));for(we="";ge<Se;){var Ve,kt,Tt=ue[ge++];128&Tt?(Ve=63&ue[ge++],(224&Tt)==192?we+=String.fromCharCode((31&Tt)<<6|Ve):(kt=63&ue[ge++],(Tt=(240&Tt)==224?(15&Tt)<<12|Ve<<6|kt:(7&Tt)<<18|Ve<<12|kt<<6|63&ue[ge++])<65536?we+=String.fromCharCode(Tt):(Tt-=65536,we+=String.fromCharCode(55296|Tt>>10,56320|1023&Tt)))):we+=String.fromCharCode(Tt)}return we}function Ee(ue,ge){return ue?ht(me,ue,ge):""}function Qt(ue){return 0<ue%65536&&(ue+=65536-ue%65536),ue}function ot(ue){Ke=ue,E.HEAP8=Re=new Int8Array(ue),E.HEAP16=new Int16Array(ue),E.HEAP32=tt=new Int32Array(ue),E.HEAPU8=me=new Uint8Array(ue),E.HEAPU16=new Uint16Array(ue),E.HEAPU32=new Uint32Array(ue),E.HEAPF32=new Float32Array(ue),E.HEAPF64=new Float64Array(ue)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var Mt=E.TOTAL_MEMORY||16777216;function gr(ue){for(;0<ue.length;){var ge,Se=ue.shift();typeof Se=="function"?Se():typeof(ge=Se.ea)=="number"?Se.da===void 0?E.dynCall_v(ge):E.dynCall_vi(ge,Se.da):ge(Se.da===void 0?null:Se.da)}}(_e=E.wasmMemory||new function(){return{buffer:new ArrayBuffer(Mt/65536*65536),grow:function(ue){return er(ue)}}})&&(Ke=_e.buffer),Ke.byteLength,ot(Ke),tt[2216]=5251936;var qe,Mr=[],jt=[],$t=[],hr=[],yt=(Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(ue,ge){var Se=65535&ue,we=65535&ge;return Se*we+((ue>>>16)*we+Se*(ge>>>16)<<16)|0}),Math.fround||(qe=new Float32Array(1),Math.fround=function(ue){return qe[0]=ue,qe[0]}),Math.clz32||(Math.clz32=function(ue){var ge=32,Se=ue>>16;return Se&&(ge-=16,ue=Se),(Se=ue>>8)&&(ge-=8,ue=Se),(Se=ue>>4)&&(ge-=4,ue=Se),(Se=ue>>2)&&(ge-=2,ue=Se),ue>>1?ge-2:ge-ue}),Math.trunc||(Math.trunc=function(ue){return ue<0?Math.ceil(ue):Math.floor(ue)}),0),rt=null;function Ct(ue){throw E.onAbort&&E.onAbort(ue),le(ue),oe(ue),Me=!0,"abort("+ue+"). Build with -s ASSERTIONS=1 for more info."}E.preloadedImages={},E.preloadedAudios={};var St="data:application/octet-stream;base64,";function Ze(ue){return String.prototype.startsWith?ue.startsWith(St):ue.indexOf(St)===0}var or="_em_module.wasm";function br(){try{if(pe)return new Uint8Array(pe);var ue=Kt(or);if(ue)return ue;if(H)return H(or);throw"both async and sync fetching of the wasm failed"}catch(ge){Ct(ge)}}Ze(or)||(ae=or,or=E.locateFile?E.locateFile(ae,ne):ne+ae),jt.push({ea:function(){Zr()}});var qr=[null,[],[]];function Ht(ue){for(var ge=[],Se=0;Se<ue.length;Se++){var we=ue[Se];255<we&&(we&=255),ge.push(String.fromCharCode(we))}return ge.join("")}var ui=typeof atob=="function"?atob:function(ue){var ge="",Se=0;ue=ue.replace(/[^A-Za-z0-9\+\/=]/g,"");do var we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ue.charAt(Se++)),Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ue.charAt(Se++)),kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ue.charAt(Se++)),Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ue.charAt(Se++)),ut=(we=we<<2|Ve>>4,Ve=(15&Ve)<<4|kt>>2,(3&kt)<<6|Tt);while(ge+=String.fromCharCode(we),kt!==64&&(ge+=String.fromCharCode(Ve)),Tt!==64&&(ge+=String.fromCharCode(ut)),Se<ue.length);return ge};function Kt(ue){if(Ze(ue)){if(ue=ue.slice(St.length),typeof ie=="boolean"&&ie){try{var ge=Buffer.from(ue,"base64")}catch{ge=new Buffer(ue,"base64")}var Se=new Uint8Array(ge.buffer,ge.byteOffset,ge.byteLength)}else try{var we=ui(ue),Ve=new Uint8Array(we.length);for(ge=0;ge<we.length;++ge)Ve[ge]=we.charCodeAt(ge);Se=Ve}catch{throw Error("Converting base64 string to bytes failed.")}return Se}}var ce,an={a:function(ue,ge,Se){me.set(me.subarray(ge,ge+Se),ue)},b:function(ue){if(2147418112<ue)return!1;for(var ge=Math.max(Re.length,16777216);ge<ue;)ge=ge<=536870912?Qt(2*ge):Math.min(Qt((3*ge+2147483648)/4),2147418112);r:{try{_e.grow(ge-Ke.byteLength+65535>>16),ot(_e.buffer);var Se=1;break r}catch{}Se=void 0}return!!Se},c:function(ue,ge,Se,we){try{for(var Ve=0,kt=0;kt<Se;kt++){for(var Tt=tt[ge+8*kt>>2],ut=tt[ge+(8*kt+4)>>2],Ut=0;Ut<ut;Ut++){var Wt=me[Tt+Ut],He=qr[ue];Wt===0||Wt===10?((ue===1?le:oe)(ht(He,0)),He.length=0):He.push(Wt)}Ve+=ut}return tt[we>>2]=Ve,0}catch(l){return typeof FS<"u"&&l instanceof FS.fa||Ct(l),l.ga}},memory:_e,table:Be},Zr=(ne=function(){function ue(Ve){E.asm=Ve.exports,yt--,E.monitorRunDependencies&&E.monitorRunDependencies(yt),yt==0&&rt&&(Ve=rt,rt=null,Ve())}function ge(Ve){ue(Ve.instance)}function Se(Ve){(pe||!Q&&!te||typeof fetch!="function"?new Promise(function(kt){kt(br())}):fetch(or,{credentials:"same-origin"}).then(function(kt){if(kt.ok)return kt.arrayBuffer();throw"failed to load wasm binary file at '"+or+"'"}).catch(br)).then(function(){return{then:function(kt){kt({instance:new ye})}}}).then(Ve,function(kt){oe("failed to asynchronously prepare wasm: "+kt),Ct(kt)})}var we={env:an,wasi_unstable:an};if(yt++,E.monitorRunDependencies&&E.monitorRunDependencies(yt),E.instantiateWasm)try{return E.instantiateWasm(we,ue)}catch(Ve){return oe("Module.instantiateWasm callback failed with error: "+Ve),!1}return pe||typeof Xe.instantiateStreaming!="function"||Ze(or)||typeof fetch!="function"?Se(ge):fetch(or,{credentials:"same-origin"}).then(function(Ve){return Xe.instantiateStreaming(Ve,we).then(ge,function(kt){oe("wasm streaming compile failed: "+kt),oe("falling back to ArrayBuffer instantiation"),Se(ge)})}),{}}(),E.asm=ne,E.___wasm_call_ctors=function(){return E.asm.d.apply(null,arguments)}),Ft=(E._csmGetVersion=function(){return E.asm.e.apply(null,arguments)},E._csmGetLatestMocVersion=function(){return E.asm.f.apply(null,arguments)},E._csmGetMocVersion=function(){return E.asm.g.apply(null,arguments)},E._csmHasMocConsistency=function(){return E.asm.h.apply(null,arguments)},E._csmSetLogFunction=function(){return E.asm.i.apply(null,arguments)},E._csmReviveMocInPlace=function(){return E.asm.j.apply(null,arguments)},E._csmReadCanvasInfo=function(){return E.asm.k.apply(null,arguments)},E._csmGetSizeofModel=function(){return E.asm.l.apply(null,arguments)},E._csmInitializeModelInPlace=function(){return E.asm.m.apply(null,arguments)},E._csmUpdateModel=function(){return E.asm.n.apply(null,arguments)},E._csmGetParameterCount=function(){return E.asm.o.apply(null,arguments)},E._csmGetParameterIds=function(){return E.asm.p.apply(null,arguments)},E._csmGetParameterTypes=function(){return E.asm.q.apply(null,arguments)},E._csmGetParameterMinimumValues=function(){return E.asm.r.apply(null,arguments)},E._csmGetParameterMaximumValues=function(){return E.asm.s.apply(null,arguments)},E._csmGetParameterDefaultValues=function(){return E.asm.t.apply(null,arguments)},E._csmGetParameterValues=function(){return E.asm.u.apply(null,arguments)},E._csmGetPartCount=function(){return E.asm.v.apply(null,arguments)},E._csmGetPartIds=function(){return E.asm.w.apply(null,arguments)},E._csmGetPartOpacities=function(){return E.asm.x.apply(null,arguments)},E._csmGetPartParentPartIndices=function(){return E.asm.y.apply(null,arguments)},E._csmGetDrawableCount=function(){return E.asm.z.apply(null,arguments)},E._csmGetDrawableIds=function(){return E.asm.A.apply(null,arguments)},E._csmGetDrawableConstantFlags=function(){return E.asm.B.apply(null,arguments)},E._csmGetDrawableDynamicFlags=function(){return E.asm.C.apply(null,arguments)},E._csmGetDrawableTextureIndices=function(){return E.asm.D.apply(null,arguments)},E._csmGetDrawableDrawOrders=function(){return E.asm.E.apply(null,arguments)},E._csmGetDrawableRenderOrders=function(){return E.asm.F.apply(null,arguments)},E._csmGetDrawableOpacities=function(){return E.asm.G.apply(null,arguments)},E._csmGetDrawableMaskCounts=function(){return E.asm.H.apply(null,arguments)},E._csmGetDrawableMasks=function(){return E.asm.I.apply(null,arguments)},E._csmGetDrawableVertexCounts=function(){return E.asm.J.apply(null,arguments)},E._csmGetDrawableVertexPositions=function(){return E.asm.K.apply(null,arguments)},E._csmGetDrawableVertexUvs=function(){return E.asm.L.apply(null,arguments)},E._csmGetDrawableIndexCounts=function(){return E.asm.M.apply(null,arguments)},E._csmGetDrawableIndices=function(){return E.asm.N.apply(null,arguments)},E._csmGetDrawableMultiplyColors=function(){return E.asm.O.apply(null,arguments)},E._csmGetDrawableScreenColors=function(){return E.asm.P.apply(null,arguments)},E._csmGetDrawableParentPartIndices=function(){return E.asm.Q.apply(null,arguments)},E._csmResetDrawableDynamicFlags=function(){return E.asm.R.apply(null,arguments)},E._csmGetParameterKeyCounts=function(){return E.asm.S.apply(null,arguments)},E._csmGetParameterKeyValues=function(){return E.asm.T.apply(null,arguments)},E._csmMallocMoc=function(){return E.asm.U.apply(null,arguments)},E._csmMallocModelAndInitialize=function(){return E.asm.V.apply(null,arguments)},E._csmMalloc=function(){return E.asm.W.apply(null,arguments)},E._csmFree=function(){return E.asm.X.apply(null,arguments)},E._csmInitializeAmountOfMemory=function(){return E.asm.Y.apply(null,arguments)},E.stackSave=function(){return E.asm.Z.apply(null,arguments)}),hn=E.stackAlloc=function(){return E.asm._.apply(null,arguments)},Qn=E.stackRestore=function(){return E.asm.$.apply(null,arguments)},er=E.__growWasmMemory=function(){return E.asm.aa.apply(null,arguments)};function ti(){function ue(){if(!ce&&(ce=!0,!Me)){if(gr(jt),gr($t),E.onRuntimeInitialized&&E.onRuntimeInitialized(),E.postRun)for(typeof E.postRun=="function"&&(E.postRun=[E.postRun]);E.postRun.length;){var ge=E.postRun.shift();hr.unshift(ge)}gr(hr)}}if(!(0<yt)){if(E.preRun)for(typeof E.preRun=="function"&&(E.preRun=[E.preRun]);E.preRun.length;)(function(){var ge=E.preRun.shift();Mr.unshift(ge)})();gr(Mr),0<yt||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),ue()},1)):ue())}}if(E.dynCall_vi=function(){return E.asm.ba.apply(null,arguments)},E.asm=ne,E.ccall=function(ue,ge,Se,we){var Ve={string:function(Wt){var He=0;if(Wt!=null&&Wt!==0){var l=1+(Wt.length<<2),T=He=hn(l),I=me;if(0<l){l=T+l-1;for(var B=0;B<Wt.length;++B){var N=Wt.charCodeAt(B);if((N=55296<=N&&N<=57343?65536+((1023&N)<<10)|1023&Wt.charCodeAt(++B):N)<=127){if(l<=T)break;I[T++]=N}else{if(N<=2047){if(l<=T+1)break;I[T++]=192|N>>6}else{if(N<=65535){if(l<=T+2)break;I[T++]=224|N>>12}else{if(l<=T+3)break;I[T++]=240|N>>18,I[T++]=128|N>>12&63}I[T++]=128|N>>6&63}I[T++]=128|63&N}}I[T]=0}}return He},array:function(Wt){var He=hn(Wt.length);return Re.set(Wt,He),He}},kt=function(Wt){var He=E["_"+Wt];return _t(He,"Cannot call unknown function "+Wt+", make sure it is exported"),He}(ue),Tt=[];if(ue=0,we)for(var ut=0;ut<we.length;ut++){var Ut=Ve[Se[ut]];Ut?(ue===0&&(ue=Ft()),Tt[ut]=Ut(we[ut])):Tt[ut]=we[ut]}return Se=function(Wt){return ge==="string"?Ee(Wt):ge==="boolean"?!!Wt:Wt}(Se=kt.apply(null,Tt)),ue!==0&&Qn(ue),Se},E.UTF8ToString=Ee,E.addFunction=function(ue,ge){var Se=Be.length;try{Be.grow(1)}catch(we){throw!we instanceof RangeError?we:"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{Be.set(Se,ue)}catch(we){if(!we instanceof TypeError)throw we;_t(ge!==void 0,"Missing signature argument to addFunction"),Be.set(Se,ue)}return Se},E.then=function(ue){var ge;return ce?ue(E):(ge=E.onRuntimeInitialized,E.onRuntimeInitialized=function(){ge&&ge(),ue(E)}),E},rt=function ue(){ce||ti(),ce||(rt=ue)},E.run=ti,E.preInit)for(typeof E.preInit=="function"&&(E.preInit=[E.preInit]);0<E.preInit.length;)E.preInit.pop()();return ti(),w}),x=((typeof exports>"u"?"undefined":Mi(exports))=="object"&&(typeof module>"u"?"undefined":Mi(module))=="object"?module.exports=b:typeof define=="function"&&define.amd?define([],function(){return b}):(typeof exports>"u"?"undefined":Mi(exports))=="object"&&(exports._em_module=b),b())})(Go=Go||{}),window.Live2DCubismCore=Go,function(){var n=!0;function e(){n||(this._$MT=null,this._$5S=null,this._$NP=0,e._$42++,this._$5S=new Ee(this))}function t(l){if(!n){this.clipContextList=new Array,this.glcontext=l.gl,this.dp_webgl=l,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new ae,ce.glContext.length>ce.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new Ke,this.tmpMatrix2=new Ke,this.tmpMatrixForMask=new Ke,this.tmpMatrixForDraw=new Ke,this.CHANNEL_COLORS=new Array;var T=new Xe;(T=new Xe).r=0,T.g=0,T.b=0,T.a=1,this.CHANNEL_COLORS.push(T),(T=new Xe).r=1,T.g=0,T.b=0,T.a=0,this.CHANNEL_COLORS.push(T),(T=new Xe).r=0,T.g=1,T.b=0,T.a=0,this.CHANNEL_COLORS.push(T),(T=new Xe).r=0,T.g=0,T.b=1,T.a=0,this.CHANNEL_COLORS.push(T);for(var I=0;I<this.CHANNEL_COLORS.length;I++)this.dp_webgl.setChannelFlagAsColor(I,this.CHANNEL_COLORS[I])}}function i(l,T,I){this.clipIDList=new Array,this.clipIDList=I,this.clippingMaskDrawIndexList=new Array;for(var B=0;B<I.length;B++)this.clippingMaskDrawIndexList.push(T.getDrawDataIndex(I[B]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new ae,this.allClippedDrawRect=new ae,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=l}function s(l,T){this._$gP=l,this.drawDataIndex=T}function o(){n||(this.color=null)}function h(){n||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}function u(){}function b(){this._$r=null,this._$0S=null}function x(){n||(this.x=null,this.y=null,this.width=null,this.height=null)}function w(l){n||br.prototype.constructor.call(this,l)}function E(l){n||br.prototype.constructor.call(this,l)}function C(){n||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,C._$42++)}function L(){n||(this.p1=new k,this.p2=new k,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}function k(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}function U(l,T,I){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=l,this.scale=T,this._$V0=I}function V(l,T,I,B){U.prototype.constructor.call(this,T,I,B),this._$tL=null,this._$tL=l}function H(l,T,I){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=l,this.scale=T,this._$V0=I}function Q(l,T,I,B){H.prototype.constructor.call(this,T,I,B),this._$YP=null,this._$YP=l}function te(){n||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}e._$0s=1,e._$4s=2,e._$42=0,e._$62=function(l,T){try{if(T instanceof ArrayBuffer&&(T=new DataView(T)),!(T instanceof DataView))throw new Zr("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var I,B=new Tt(T),N=B._$ST(),$=B._$ST(),J=B._$ST();if(N!=109||$!=111||J!=99)throw new Zr("_$gi _$C _$li , _$Q0 _$P0.");if(I=B._$ST(),B._$gr(I),I>ht._$T7)throw l._$NP|=e._$4s,new Zr("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+ht._$T7+" < _$f0 : "+I+` )@_$SS#loadModel()
`);var r=B._$nP();if(I>=ht._$s7){var j=B._$9T(),W=B._$9T();if(j!=-30584||W!=-30584)throw l._$NP|=e._$0s,new Zr("_$gi _$C _$li , _$0 _$6 _$Ui.")}l._$KS(r);var re=l.getModelContext();re.setDrawParam(l.getDrawParam()),re.init()}catch(O){u._$Rb(O)}},e.prototype._$KS=function(l){this._$MT=l},e.prototype.getModelImpl=function(){return this._$MT==null&&(this._$MT=new C,this._$MT._$zP()),this._$MT},e.prototype.getCanvasWidth=function(){return this._$MT==null?0:this._$MT.getCanvasWidth()},e.prototype.getCanvasHeight=function(){return this._$MT==null?0:this._$MT.getCanvasHeight()},e.prototype.getParamFloat=function(l){return typeof l!="number"&&(l=this._$5S.getParamIndex(E.getID(l))),this._$5S.getParamFloat(l)},e.prototype.setParamFloat=function(l,T,I){typeof l!="number"&&(l=this._$5S.getParamIndex(E.getID(l))),arguments.length<3&&(I=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)*(1-I)+T*I)},e.prototype.addToParamFloat=function(l,T,I){typeof l!="number"&&(l=this._$5S.getParamIndex(E.getID(l))),arguments.length<3&&(I=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)+T*I)},e.prototype.multParamFloat=function(l,T,I){typeof l!="number"&&(l=this._$5S.getParamIndex(E.getID(l))),arguments.length<3&&(I=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)*(1+(T-1)*I))},e.prototype.getParamIndex=function(l){return this._$5S.getParamIndex(E.getID(l))},e.prototype.loadParam=function(){this._$5S.loadParam()},e.prototype.saveParam=function(){this._$5S.saveParam()},e.prototype.init=function(){this._$5S.init()},e.prototype.update=function(){this._$5S.update()},e.prototype._$Rs=function(){return u._$li("_$60 _$PT _$Rs()"),-1},e.prototype._$Ds=function(l){u._$li(`_$60 _$PT _$SS#_$Ds() 
`)},e.prototype._$K2=function(){},e.prototype.draw=function(){},e.prototype.getModelContext=function(){return this._$5S},e.prototype._$s2=function(){return this._$NP},e.prototype._$P7=function(l,T,I,B){var N=-1,$=0,J=this,r=.5;if(I!=0)if(l.length==1){p=l[0];var j=J.getParamFloat(p)!=0,W=(de=T[0],J.getPartsOpacity(de)),re=I/B;j?(W+=re)>1&&(W=1):(W-=re)<0&&(W=0),J.setPartsOpacity(de,W)}else{for(z=0;z<l.length;z++)if(p=l[z],be=J.getParamFloat(p)!=0){if(N>=0)break;N=z,de=T[z],$=J.getPartsOpacity(de),($+=I/B)>1&&($=1)}for(N<0&&(console.log("No _$wi _$q0/ _$U default[%s]",l[0]),N=0,$=1,J.loadParam(),J.setParamFloat(l[N],$),J.saveParam()),z=0;z<l.length;z++)if(de=T[z],N==z)J.setPartsOpacity(de,$);else{var O,ee=J.getPartsOpacity(de);(1-(O=$<r?-.5*$/r+1:(1-$)*r/.5))*(1-$)>.15&&(O=1-.15/(1-$)),ee>O&&(ee=O),J.setPartsOpacity(de,ee)}}else for(var z=0;z<l.length;z++){var p=l[z],de=T[z],be=J.getParamFloat(p)!=0;J.setPartsOpacity(de,be?1:0)}},e.prototype.setPartsOpacity=function(l,T){typeof l!="number"&&(l=this._$5S.getPartsDataIndex(w.getID(l))),this._$5S.setPartsOpacity(l,T)},e.prototype.getPartsDataIndex=function(l){return l instanceof w||(l=w.getID(l)),this._$5S.getPartsDataIndex(l)},e.prototype.getPartsOpacity=function(l){return typeof l!="number"&&(l=this._$5S.getPartsDataIndex(w.getID(l))),l<0?0:this._$5S.getPartsOpacity(l)},e.prototype.getDrawParam=function(){},e.prototype.getDrawDataIndex=function(l){return this._$5S.getDrawDataIndex(Re.getID(l))},e.prototype.getDrawData=function(l){return this._$5S.getDrawData(l)},e.prototype.getTransformedPoints=function(l){var T=this._$5S._$C2(l);return T instanceof hn?T.getTransformedPoints():null},e.prototype.getIndexArray=function(l){if(l<0||l>=this._$5S._$aS.length)return null;var T=this._$5S._$aS[l];return T!=null&&T.getType()==qe._$wb&&T instanceof Ft?T.getIndexArray():null},t.CHANNEL_COUNT=4,t.RENDER_TEXTURE_USE_MIPMAP=!1,t.NOT_USED_FRAME=-100,t.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var l=this.CHANNEL_COLORS.length-1;l>=0;--l)this.CHANNEL_COLORS.splice(l,1);this.CHANNEL_COLORS=[]}this.releaseShader()},t.prototype.releaseShader=function(){for(var l=ce.frameBuffers.length,T=0;T<l;T++)this.gl.deleteFramebuffer(ce.frameBuffers[T].framebuffer);ce.frameBuffers=[],ce.glContext=[]},t.prototype.init=function(l,T,I){for(var B=0;B<T.length;B++){var N=T[B].getClipIDList();if(N!=null){var $=this.findSameClip(N);$==null&&($=new i(this,l,N),this.clipContextList.push($));var J=T[B].getDrawDataID(),r=l.getDrawDataIndex(J);$.addClippedDrawData(J,r),I[B].clipBufPre_clipContext=$}}},t.prototype.getMaskRenderTexture=function(){var l;return l=this.dp_webgl.createFramebuffer(),ce.frameBuffers[this.dp_webgl.glno]=l,this.dp_webgl.glno},t.prototype.setupClip=function(l,T){for(var I=0,B=0;B<this.clipContextList.length;B++){var N=this.clipContextList[B];this.calcClippedDrawTotalBounds(l,N),N.isUsing&&I++}if(I>0){var $=T.gl.getParameter(T.gl.FRAMEBUFFER_BINDING),J=new Array(4);for(J[0]=0,J[1]=0,J[2]=T.gl.canvas.width,J[3]=T.gl.canvas.height,T.gl.viewport(0,0,ce.clippingMaskBufferSize,ce.clippingMaskBufferSize),this.setupLayoutBounds(I),T.gl.bindFramebuffer(T.gl.FRAMEBUFFER,ce.frameBuffers[this.curFrameNo].framebuffer),T.gl.clearColor(0,0,0,0),T.gl.clear(T.gl.COLOR_BUFFER_BIT),B=0;B<this.clipContextList.length;B++){var r=(N=this.clipContextList[B]).allClippedDrawRect;N.layoutChannelNo;var j=N.layoutBounds;this.tmpBoundsOnModel._$jL(r),this.tmpBoundsOnModel.expand(.05*r.width,.05*r.height);var W=j.width/this.tmpBoundsOnModel.width,re=j.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(j.x,j.y,0),this.tmpMatrix2.scale(W,re,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(j.x,j.y,0),this.tmpMatrix2.scale(W,re,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var O=this.tmpMatrixForMask.getArray(),ee=0;ee<16;ee++)N.matrixForMask[ee]=O[ee];var z=this.tmpMatrixForDraw.getArray();for(ee=0;ee<16;ee++)N.matrixForDraw[ee]=z[ee];for(var p=N.clippingMaskDrawIndexList.length,de=0;de<p;de++){var be=N.clippingMaskDrawIndexList[de],Ie=l.getDrawData(be),Ye=l._$C2(be);T.setClipBufPre_clipContextForMask(N),Ie.draw(T,l,Ye)}}T.gl.bindFramebuffer(T.gl.FRAMEBUFFER,$),T.setClipBufPre_clipContextForMask(null),T.gl.viewport(J[0],J[1],J[2],J[3])}},t.prototype.getColorBuffer=function(){return this.colorBuffer},t.prototype.findSameClip=function(l){for(var T=0;T<this.clipContextList.length;T++){var I=this.clipContextList[T],B=I.clipIDList.length;if(B==l.length){for(var N=0,$=0;$<B;$++)for(var J=I.clipIDList[$],r=0;r<B;r++)if(l[r]==J){N++;break}if(N==B)return I}}return null},t.prototype.calcClippedDrawTotalBounds=function(l,T){for(var I=l._$Ri.getModelImpl().getCanvasWidth(),B=l._$Ri.getModelImpl().getCanvasHeight(),N=I>B?I:B,$=N,J=N,r=0,j=0,W=T.clippedDrawContextList.length,re=0;re<W;re++){var O=T.clippedDrawContextList[re].drawDataIndex,ee=l._$C2(O);if(ee._$yo()){for(var z=ee.getTransformedPoints(),p=z.length,de=[],be=[],Ie=0,Ye=je._$i2;Ye<p;Ye+=je._$No)de[Ie]=z[Ye],be[Ie]=z[Ye+1],Ie++;var fe=Math.min.apply(null,de),ze=Math.min.apply(null,be),lt=Math.max.apply(null,de),dt=Math.max.apply(null,be);fe<$&&($=fe),ze<J&&(J=ze),lt>r&&(r=lt),dt>j&&(j=dt)}}if($==N)T.allClippedDrawRect.x=0,T.allClippedDrawRect.y=0,T.allClippedDrawRect.width=0,T.allClippedDrawRect.height=0,T.isUsing=!1;else{var q=r-$,Ae=j-J;T.allClippedDrawRect.x=$,T.allClippedDrawRect.y=J,T.allClippedDrawRect.width=q,T.allClippedDrawRect.height=Ae,T.isUsing=!0}},t.prototype.setupLayoutBounds=function(l){var T=l/t.CHANNEL_COUNT,I=l%t.CHANNEL_COUNT;T=~~T,I=~~I;for(var B=0,N=0;N<t.CHANNEL_COUNT;N++){var $=T+(N<I?1:0);if($!=0)if($==1)(W=this.clipContextList[B++]).layoutChannelNo=N,W.layoutBounds.x=0,W.layoutBounds.y=0,W.layoutBounds.width=1,W.layoutBounds.height=1;else if($==2)for(var J=0;J<$;J++){var r=0;j=~~(j=J%2),(W=this.clipContextList[B++]).layoutChannelNo=N,W.layoutBounds.x=.5*j,W.layoutBounds.y=0,W.layoutBounds.width=.5,W.layoutBounds.height=1}else if($<=4)for(J=0;J<$;J++)j=~~(j=J%2),r=~~(r=J/2),(W=this.clipContextList[B++]).layoutChannelNo=N,W.layoutBounds.x=.5*j,W.layoutBounds.y=.5*r,W.layoutBounds.width=.5,W.layoutBounds.height=.5;else if($<=9)for(J=0;J<$;J++){var j,W;j=~~(j=J%3),r=~~(r=J/3),(W=this.clipContextList[B++]).layoutChannelNo=N,W.layoutBounds.x=j/3,W.layoutBounds.y=r/3,W.layoutBounds.width=1/3,W.layoutBounds.height=1/3}else u._$li("_$6 _$0P mask count : %d",$)}},i.prototype.addClippedDrawData=function(l,T){var I=new s(l,T);this.clippedDrawContextList.push(I)},h._$JT=function(l,T,I){var B=l/T,N=I/T,$=1/3,J=2/3,r=1-(1-N)*(1-N),j=1-(1-N)*(1-N),W=(1-N)*$*r+(N*J+(1-N)*$)*(1-r),re=(N+(1-N)*J)*j+(N*$+(1-N)*J)*(1-j);if(B<=0)return 0;if(B>=1)return 1;var O=B*B;return(1-3*re+3*W-0)*(B*O)+(3*re-6*W+0)*O+(3*W-0)*B+0},h.prototype._$a0=function(){},h.prototype.setFadeIn=function(l){this._$dP=l},h.prototype.setFadeOut=function(l){this._$eo=l},h.prototype._$pT=function(l){this._$V0=l},h.prototype.getFadeOut=function(){return this._$eo},h.prototype._$4T=function(){return this._$eo},h.prototype._$mT=function(){return this._$V0},h.prototype.getDurationMSec=function(){return-1},h.prototype.getLoopDurationMSec=function(){return-1},h.prototype.updateParam=function(l,T){if(T._$AT&&!T._$9L){var I=_e.getUserTimeMSec();if(T._$z2<0){T._$z2=I,T._$bs=I;var B=this.getDurationMSec();T._$Do<0&&(T._$Do=B<=0?-1:T._$z2+B)}var N=this._$V0;0<=(N=N*(this._$dP==0?1:an._$r2((I-T._$bs)/this._$dP))*(this._$eo==0||T._$Do<0?1:an._$r2((T._$Do-I)/this._$eo)))&&N<=1||console.log("### assert!! ### "),this.updateParamExe(l,I,N,T),T._$Do>0&&T._$Do<I&&(T._$9L=!0)}},h.prototype.updateParamExe=function(l,T,I,B){},u._$8s=0,u._$fT=new Object,u.start=function(l){var T=u._$fT[l];T==null&&((T=new b)._$r=l,u._$fT[l]=T),T._$0S=_e.getSystemTimeMSec()},u.dump=function(l){var T=u._$fT[l];if(T!=null){var I=_e.getSystemTimeMSec()-T._$0S;return console.log(l+" : "+I+"ms"),I}return-1},u.end=function(l){var T=u._$fT[l];return T!=null?_e.getSystemTimeMSec()-T._$0S:-1},u._$li=function(l,T){console.log("_$li : "+l+`
`,T)},u._$Ji=function(l,T){console.log(l,T)},u._$dL=function(l,T){console.log(l,T),console.log(`
`)},u._$KL=function(l,T){for(var I=0;I<T;I++)I%16==0&&I>0?console.log(`
`):I%8==0&&I>0&&console.log("  "),console.log("%02X ",255&l[I]);console.log(`
`)},u._$nr=function(l,T,I){console.log(`%s
`,l);for(var B=T.length,N=0;N<B;++N)console.log("%5d",T[N]),console.log(`%s
`,I),console.log(",");console.log(`
`)},u._$Rb=function(l){console.log("dump exception : "+l),console.log("stack :: "+l.stack)},x.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},x.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},x.prototype._$EL=function(){return this.x+this.width},x.prototype._$5T=function(){return this.y+this.height},x.prototype._$jL=function(l,T,I,B){this.x=l,this.y=T,this.width=I,this.height=B},x.prototype._$jL=function(l){this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height},w.prototype=new br,w._$tP=new Object,w._$27=function(){w._$tP.clear()},w.getID=function(l){var T=w._$tP[l];return T==null&&(T=new w(l),w._$tP[l]=T),T},w.prototype._$3s=function(){return new w},E.prototype=new br,E._$tP=new Object,E._$27=function(){E._$tP.clear()},E.getID=function(l){var T=E._$tP[l];return T==null&&(T=new E(l),E._$tP[l]=T),T},E.prototype._$3s=function(){return new E},C._$42=0,C.prototype._$zP=function(){this._$vo==null&&(this._$vo=new qr),this._$F2==null&&(this._$F2=new Array)},C.prototype.getCanvasWidth=function(){return this._$ao},C.prototype.getCanvasHeight=function(){return this._$1S},C.prototype._$F0=function(l){this._$vo=l._$nP(),this._$F2=l._$nP(),this._$ao=l._$6L(),this._$1S=l._$6L()},C.prototype._$6S=function(l){this._$F2.push(l)},C.prototype._$Xr=function(){return this._$F2},C.prototype._$E2=function(){return this._$vo},L.prototype.setup=function(l,T,I){this._$ks=this._$Yb(),this.p2._$xT(),arguments.length==3&&(this._$Fo=l,this._$L2=T,this.p1._$p=I,this.p2._$p=I,this.p2.y=l,this.setup())},L.prototype.getPhysicsPoint1=function(){return this.p1},L.prototype.getPhysicsPoint2=function(){return this.p2},L.prototype._$qr=function(){return this._$Db},L.prototype._$pr=function(l){this._$Db=l},L.prototype._$5r=function(){return this._$M2},L.prototype._$Cs=function(){return this._$9b},L.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},L.prototype.addSrcParam=function(l,T,I,B){var N=new V(l,T,I,B);this._$lL.push(N)},L.prototype.addTargetParam=function(l,T,I,B){var N=new Q(l,T,I,B);this._$qP.push(N)},L.prototype.update=function(l,T){if(this._$iP==0)return this._$iP=this._$iT=T,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var I=(T-this._$iT)/1e3;if(I!=0){for(var B=this._$lL.length-1;B>=0;--B)this._$lL[B]._$oP(l,this);this._$oo(l,I),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/I,this._$ks=this._$M2}for(B=this._$qP.length-1;B>=0;--B)this._$qP[B]._$YS(l,this);this._$iT=T},L.prototype._$oo=function(l,T){T<.033&&(T=.033);var I=1/T;this.p1.vx=(this.p1.x-this.p1._$s0)*I,this.p1.vy=(this.p1.y-this.p1._$70)*I,this.p1.ax=(this.p1.vx-this.p1._$7L)*I,this.p1.ay=(this.p1.vy-this.p1._$HL)*I,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var B,N,$=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),J=Math.cos($),r=Math.sin($),j=9.8*this.p2._$p,W=this._$Db*Ut._$bS,re=j*Math.cos($-W);B=re*r,N=re*J;var O=-this.p1.fx*r*r,ee=-this.p1.fy*r*J,z=-this.p2.vx*this._$L2,p=-this.p2.vy*this._$L2;this.p2.fx=B+O+z,this.p2.fy=N+ee+p,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*T,this.p2.vy+=this.p2.ay*T,this.p2.x+=this.p2.vx*T,this.p2.y+=this.p2.vy*T;var de=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/de,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/de,this.p2.vx=(this.p2.x-this.p2._$s0)*I,this.p2.vy=(this.p2.y-this.p2._$70)*I,this.p2._$xT()},k.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy},U.prototype._$oP=function(l,T){},V.prototype=new U,V.prototype._$oP=function(l,T){var I=this.scale*l.getParamFloat(this._$wL),B=T.getPhysicsPoint1();switch(this._$tL){default:case L.Src.SRC_TO_X:B.x=B.x+(I-B.x)*this._$V0;break;case L.Src.SRC_TO_Y:B.y=B.y+(I-B.y)*this._$V0;break;case L.Src.SRC_TO_G_ANGLE:var N=T._$qr();N+=(I-N)*this._$V0,T._$pr(N)}},H.prototype._$YS=function(l,T){},Q.prototype=new H,Q.prototype._$YS=function(l,T){switch(this._$YP){default:case L.Target.TARGET_FROM_ANGLE:l.setParamFloat(this._$wL,this.scale*T._$5r(),this._$V0);break;case L.Target.TARGET_FROM_ANGLE_V:l.setParamFloat(this._$wL,this.scale*T._$Cs(),this._$V0)}},L.Src=function(){},L.Src.SRC_TO_X="SRC_TO_X",L.Src.SRC_TO_Y="SRC_TO_Y",L.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",L.Target=function(){},L.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",L.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V",te.prototype.init=function(l){this._$fL=l._$fL,this._$gL=l._$gL,this._$B0=l._$B0,this._$z0=l._$z0,this._$qT=l._$qT,this.reflectX=l.reflectX,this.reflectY=l.reflectY},te.prototype._$F0=function(l){this._$fL=l._$_T(),this._$gL=l._$_T(),this._$B0=l._$_T(),this._$z0=l._$_T(),this._$qT=l._$_T(),l.getFormatVersion()>=ht.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=l._$po(),this.reflectY=l._$po())},te.prototype._$e=function(){};var ie=function(){};function ae(){n||(this.x=null,this.y=null,this.width=null,this.height=null)}function ne(){}function le(){n||(this.x=null,this.y=null)}function oe(){n||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}function ye(){n||(this._$Eb=ye._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=ye.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}function Xe(){n||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=ce.L2D_COLOR_BLEND_MODE_MULT)}function pe(){n||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function _e(){}function Be(){n||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=Be._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function Me(){}function _t(){n||(this._$Ob=null)}function Ke(){this.m=new Float32Array(16),this.identity()}function Re(l){n||br.prototype.constructor.call(this,l)}function me(){n||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function tt(){n||(h.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=tt._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function je(){}function ht(){}function Ee(l){n||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(Ee._$is),this._$_2=new Float32Array(Ee._$is),this._$vr=new Float32Array(Ee._$is),this._$Rr=new Float32Array(Ee._$is),this._$Or=new Float32Array(Ee._$is),this._$fs=new Float32Array(Ee._$is),this._$Js=new Array(Ee._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(je._$Qb),this._$ZP=new Float32Array(2*je._$1r),this._$Ri=l,this._$b0=Ee._$HP++,this.clipManager=null,this.dp_webgl=null)}function Qt(){}function ot(){n||(ye.prototype.constructor.call(this),this._$sb=new Int32Array(ot._$As),this._$U2=new Array,this.transform=null,this.gl=null,ot._$NT==null&&(ot._$NT=ot._$9r(256),ot._$vS=ot._$9r(256),ot._$no=ot._$vb(256)))}function Mt(){n||(pe.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function gr(l){Kt.prototype.constructor.call(this,l),this._$8r=pe._$ur,this._$Yr=null,this._$Wr=null}function qe(){n||(oe.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function Mr(){n||(this._$NL=null,this._$3S=null,this._$aS=null,Mr._$42++)}function jt(){n||(e.prototype.constructor.call(this),this._$zo=new ot)}function $t(){n||(h.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=$t._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function hr(l,T){return String.fromCharCode(l.getUint8(T))}function yt(){this._$P=new Float32Array(100),this.size=0}function rt(){this._$4P=null,this._$I0=null,this._$RP=null}function Ct(){n||(pe.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function St(l){Kt.prototype.constructor.call(this,l),this._$8r=pe._$ur,this._$Cr=null,this._$hr=null}function Ze(){n||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,Ze._$42++)}function or(l){this._$VS=null,this._$e0=null,this._$e0=l}function br(l){n||(this.id=l)}function qr(){n||(this._$4S=null)}function Ht(l,T){this.canvas=l,this.context=T,this.viewport=new Array(0,0,l.width,l.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}function ui(){n||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function Kt(l){n||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=l,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function ce(){}function an(){}function Zr(l){n||(this._$ib=l)}function Ft(){n||(qe.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=Ft._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=Ft._$42++)}function hn(l){Wt.prototype.constructor.call(this,l),this._$8r=qe._$ur,this._$Cr=null,this._$hr=null}function Qn(){n||(this.x=null,this.y=null)}function er(l){n||(e.prototype.constructor.call(this),this.drawParamWebGL=new we(l),this.drawParamWebGL.setGL(ce.getGL(l)))}function ti(){n||(this.motions=null,this._$eb=!1,this.motions=new Array)}function ue(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=ue._$Gs++}function ge(){this.m=new Array(1,0,0,0,1,0,0,0,1)}function Se(l){n||br.prototype.constructor.call(this,l)}function we(l){n||(ye.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=l,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function Ve(l,T,I){return T==null&&(T=l.createBuffer()),l.bindBuffer(l.ARRAY_BUFFER,T),l.bufferData(l.ARRAY_BUFFER,I,l.DYNAMIC_DRAW),T}function kt(l,T,I){return T==null&&(T=l.createBuffer()),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,T),l.bufferData(l.ELEMENT_ARRAY_BUFFER,I,l.DYNAMIC_DRAW),T}function Tt(l){n||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=l,this._$F=0)}ie._$ni=function(l,T,I,B,N,$,J,r,j){var W=J*$-r*N;if(W==0)return null;var re,O=((l-I)*$-(T-B)*N)/W;return re=N!=0?(l-I-O*J)/N:(T-B-O*r)/$,isNaN(re)&&(re=(l-I-O*J)/N,isNaN(re)&&(re=(T-B-O*r)/$),isNaN(re)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+N),console.log("v1x != 0 ? "+(N!=0)))),j==null?new Array(re,O):(j[0]=re,j[1]=O,j)},ae.prototype._$8P=function(){return this.x+.5*this.width},ae.prototype._$6P=function(){return this.y+.5*this.height},ae.prototype._$EL=function(){return this.x+this.width},ae.prototype._$5T=function(){return this.y+this.height},ae.prototype._$jL=function(l,T,I,B){this.x=l,this.y=T,this.width=I,this.height=B},ae.prototype._$jL=function(l){this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height},ae.prototype.contains=function(l,T){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},ae.prototype.expand=function(l,T){this.x-=l,this.y-=T,this.width+=2*l,this.height+=2*T},ne._$Z2=function(l,T,I,B){var N=T._$Q2(l,I),$=l._$vs(),J=l._$Tr();if(T._$zr($,J,N),N<=0)return B[$[0]];if(N==1)return(r=B[$[0]])+((j=B[$[1]])-r)*(fe=J[0])|0;if(N==2){var r=B[$[0]],j=B[$[1]],W=B[$[2]],re=B[$[3]];return(dt=r+(j-r)*(fe=J[0])|0)+((W+(re-W)*fe|0)-dt)*(ze=J[1])|0}if(N==3){var O=B[$[0]],ee=B[$[1]],z=B[$[2]],p=B[$[3]],de=B[$[4]],be=B[$[5]],Ie=B[$[6]],Ye=B[$[7]];return(dt=(r=O+(ee-O)*(fe=J[0])|0)+((j=z+(p-z)*fe|0)-r)*(ze=J[1])|0)+(((W=de+(be-de)*fe|0)+((re=Ie+(Ye-Ie)*fe|0)-W)*ze|0)-dt)*(lt=J[2])|0}if(N==4){var fe,ze,lt,dt,q=B[$[0]],Ae=B[$[1]],bt=B[$[2]],he=B[$[3]],Te=B[$[4]],gt=B[$[5]],Le=B[$[6]],De=B[$[7]],et=B[$[8]],Oe=B[$[9]],it=B[$[10]],st=B[$[11]],Qe=B[$[12]],nt=B[$[13]],$e=B[$[14]],Fe=B[$[15]];return(dt=(r=(O=q+(Ae-q)*(fe=J[0])|0)+((ee=bt+(he-bt)*fe|0)-O)*(ze=J[1])|0)+((j=(z=Te+(gt-Te)*fe|0)+((p=Le+(De-Le)*fe|0)-z)*ze|0)-r)*(lt=J[2])|0)+(((W=(de=et+(Oe-et)*fe|0)+((be=it+(st-it)*fe|0)-de)*ze|0)+((re=(Ie=Qe+(nt-Qe)*fe|0)+((Ye=$e+(Fe-$e)*fe|0)-Ie)*ze|0)-W)*lt|0)-dt)*J[3]|0}for(var Nt=1<<N,Gt=new Float32Array(Nt),at=0;at<Nt;at++){for(var Pt=at,Lt=1,xt=0;xt<N;xt++)Lt*=Pt%2==0?1-J[xt]:J[xt],Pt/=2;Gt[at]=Lt}for(var Xt=new Float32Array(Nt),It=0;It<Nt;It++)Xt[It]=B[$[It]];var ur=0;for(It=0;It<Nt;It++)ur+=Gt[It]*Xt[It];return ur+.5|0},ne._$br=function(l,T,I,B){var N=T._$Q2(l,I),$=l._$vs(),J=l._$Tr();if(T._$zr($,J,N),N<=0)return B[$[0]];if(N==1)return(r=B[$[0]])+((j=B[$[1]])-r)*(O=J[0]);if(N==2){var r=B[$[0]],j=B[$[1]],W=B[$[2]],re=B[$[3]],O=J[0];return(1-(ze=J[1]))*(r+(j-r)*O)+ze*(W+(re-W)*O)}if(N==3){var ee=B[$[0]],z=B[$[1]],p=B[$[2]],de=B[$[3]],be=B[$[4]],Ie=B[$[5]],Ye=B[$[6]],fe=B[$[7]],ze=(O=J[0],J[1]);return(1-($e=J[2]))*((1-ze)*(ee+(z-ee)*O)+ze*(p+(de-p)*O))+$e*((1-ze)*(be+(Ie-be)*O)+ze*(Ye+(fe-Ye)*O))}if(N==4){var lt=B[$[0]],dt=B[$[1]],q=B[$[2]],Ae=B[$[3]],bt=B[$[4]],he=B[$[5]],Te=B[$[6]],gt=B[$[7]],Le=B[$[8]],De=B[$[9]],et=B[$[10]],Oe=B[$[11]],it=B[$[12]],st=B[$[13]],Qe=B[$[14]],nt=B[$[15]],$e=(O=J[0],ze=J[1],J[2]),Fe=J[3];return(1-Fe)*((1-$e)*((1-ze)*(lt+(dt-lt)*O)+ze*(q+(Ae-q)*O))+$e*((1-ze)*(bt+(he-bt)*O)+ze*(Te+(gt-Te)*O)))+Fe*((1-$e)*((1-ze)*(Le+(De-Le)*O)+ze*(et+(Oe-et)*O))+$e*((1-ze)*(it+(st-it)*O)+ze*(Qe+(nt-Qe)*O)))}for(var Nt=1<<N,Gt=new Float32Array(Nt),at=0;at<Nt;at++){for(var Pt=at,Lt=1,xt=0;xt<N;xt++)Lt*=Pt%2==0?1-J[xt]:J[xt],Pt/=2;Gt[at]=Lt}for(var Xt=new Float32Array(Nt),It=0;It<Nt;It++)Xt[It]=B[$[It]];var ur=0;for(It=0;It<Nt;It++)ur+=Gt[It]*Xt[It];return ur},ne._$Vr=function(l,T,I,B,N,$,J,r){var j=T._$Q2(l,I),W=l._$vs(),re=l._$Tr();T._$zr(W,re,j);var O=2*B,ee=J;if(j<=0){var z=N[W[0]];if(r==2&&J==0)_e._$jT(z,0,$,0,O);else for(var p=0;p<O;)$[ee]=z[p++],$[ee+1]=z[p++],ee+=r}else if(j==1){z=N[W[0]];var de=N[W[1]],be=1-(fe=re[0]);for(p=0;p<O;)$[ee]=z[p]*be+de[p]*fe,++p,$[ee+1]=z[p]*be+de[p]*fe,++p,ee+=r}else if(j==2){z=N[W[0]],de=N[W[1]];var Ie=N[W[2]],Ye=N[W[3]],fe=re[0],ze=(at=1-(Oe=re[1]))*(be=1-fe),lt=at*fe,dt=Oe*be,q=Oe*fe;for(p=0;p<O;)$[ee]=ze*z[p]+lt*de[p]+dt*Ie[p]+q*Ye[p],++p,$[ee+1]=ze*z[p]+lt*de[p]+dt*Ie[p]+q*Ye[p],++p,ee+=r}else if(j==3){var Ae=N[W[0]],bt=N[W[1]],he=N[W[2]],Te=N[W[3]],gt=N[W[4]],Le=N[W[5]],De=N[W[6]],et=N[W[7]],Oe=(fe=re[0],re[1]),it=(Pt=1-(xr=re[2]))*(at=1-Oe)*(be=1-fe),st=Pt*at*fe,Qe=Pt*Oe*be,nt=Pt*Oe*fe,$e=xr*at*be,Fe=xr*at*fe,Nt=xr*Oe*be,Gt=xr*Oe*fe;for(p=0;p<O;)$[ee]=it*Ae[p]+st*bt[p]+Qe*he[p]+nt*Te[p]+$e*gt[p]+Fe*Le[p]+Nt*De[p]+Gt*et[p],++p,$[ee+1]=it*Ae[p]+st*bt[p]+Qe*he[p]+nt*Te[p]+$e*gt[p]+Fe*Le[p]+Nt*De[p]+Gt*et[p],++p,ee+=r}else if(j==4){var at,Pt,Lt=N[W[0]],xt=N[W[1]],Xt=N[W[2]],It=N[W[3]],ur=N[W[4]],Cr=N[W[5]],Gr=N[W[6]],jr=N[W[7]],li=N[W[8]],Jr=N[W[9]],Or=N[W[10]],rr=N[W[11]],Qr=N[W[12]],Ti=N[W[13]],Yi=N[W[14]],zi=N[W[15]],xr=(fe=re[0],Oe=re[1],re[2]),ri=re[3],ci=1-ri,Kn=ci*(Pt=1-xr)*(at=1-Oe)*(be=1-fe),es=ci*Pt*at*fe,ts=ci*Pt*Oe*be,rs=ci*Pt*Oe*fe,is=ci*xr*at*be,ns=ci*xr*at*fe,ss=ci*xr*Oe*be,os=ci*xr*Oe*fe,as=ri*Pt*at*be,Wi=ri*Pt*at*fe,hs=ri*Pt*Oe*be,us=ri*Pt*Oe*fe,Lr=ri*xr*at*be,ls=ri*xr*at*fe,a=ri*xr*Oe*be,_=ri*xr*Oe*fe;for(p=0;p<O;)$[ee]=Kn*Lt[p]+es*xt[p]+ts*Xt[p]+rs*It[p]+is*ur[p]+ns*Cr[p]+ss*Gr[p]+os*jr[p]+as*li[p]+Wi*Jr[p]+hs*Or[p]+us*rr[p]+Lr*Qr[p]+ls*Ti[p]+a*Yi[p]+_*zi[p],++p,$[ee+1]=Kn*Lt[p]+es*xt[p]+ts*Xt[p]+rs*It[p]+is*ur[p]+ns*Cr[p]+ss*Gr[p]+os*jr[p]+as*li[p]+Wi*Jr[p]+hs*Or[p]+us*rr[p]+Lr*Qr[p]+ls*Ti[p]+a*Yi[p]+_*zi[p],++p,ee+=r}else{for(var M=1<<j,g=new Float32Array(M),f=0;f<M;f++){for(var S=f,c=1,d=0;d<j;d++)c*=S%2==0?1-re[d]:re[d],S/=2;g[f]=c}for(var v=new Float32Array(M),y=0;y<M;y++)v[y]=N[W[y]];for(p=0;p<O;){var A=0,P=0,R=p+1;for(y=0;y<M;y++)A+=g[y]*v[y][p],P+=g[y]*v[y][R];p+=2,$[ee]=A,$[ee+1]=P,ee+=r}}},le.prototype._$HT=function(l,T){this.x=l,this.y=T},le.prototype._$HT=function(l){this.x=l.x,this.y=l.y},oe._$ur=-2,oe._$ES=500,oe._$wb=2,oe._$8S=3,oe._$52=oe._$ES,oe._$R2=oe._$ES,oe._$or=function(){return oe._$52},oe._$Pr=function(){return oe._$R2},oe.prototype.convertClipIDForV2_11=function(l){var T=[];return l==null||l.length==0?null:/,/.test(l)?T=l.id.split(","):(T.push(l.id),T)},oe.prototype._$F0=function(l){this._$gP=l._$nP(),this._$dr=l._$nP(),this._$GS=l._$nP(),this._$qb=l._$6L(),this._$Lb=l._$cS(),this._$mS=l._$Tb(),l.getFormatVersion()>=ht._$T7?(this.clipID=l._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},oe.prototype.getClipIDList=function(){return this.clipIDList},oe.prototype.init=function(l){},oe.prototype._$Nr=function(l,T){if(T._$IS[0]=!1,T._$Us=ne._$Z2(l,this._$GS,T._$IS,this._$Lb),!ce._$Zs){if(T._$IS[0])return}T._$7s=ne._$br(l,this._$GS,T._$IS,this._$mS)},oe.prototype._$2b=function(l,T){},oe.prototype.getDrawDataID=function(){return this._$gP},oe.prototype._$j2=function(l){this._$gP=l},oe.prototype.getOpacity=function(l,T){return T._$7s},oe.prototype._$zS=function(l,T){return T._$Us},oe.prototype._$MS=function(l){for(var T=l.length-1;T>=0;--T){var I=l[T];I<oe._$52?oe._$52=I:I>oe._$R2&&(oe._$R2=I)}},oe.prototype.getTargetBaseDataID=function(){return this._$dr},oe.prototype._$gs=function(l){this._$dr=l},oe.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Se._$2o()},oe.prototype.preDraw=function(l,T,I){},oe.prototype.draw=function(l,T,I){},oe.prototype.getType=function(){},oe.prototype._$B2=function(l,T,I){},ye._$ps=32,ye.CLIPPING_PROCESS_NONE=0,ye.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,ye.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,ye.CLIPPING_PROCESS_DRAW=3,ye.CLIPPING_PROCESS_CLEAR_ALPHA=4,ye.prototype.setChannelFlagAsColor=function(l,T){this.CHANNEL_COLORS[l]=T},ye.prototype.getChannelFlagAsColor=function(l){return this.CHANNEL_COLORS[l]},ye.prototype._$ZT=function(){},ye.prototype._$Uo=function(l,T,I,B,N,$,J){},ye.prototype._$Rs=function(){return-1},ye.prototype._$Ds=function(l){},ye.prototype.setBaseColor=function(l,T,I,B){l<0?l=0:l>1&&(l=1),T<0?T=0:T>1&&(T=1),I<0?I=0:I>1&&(I=1),B<0?B=0:B>1&&(B=1),this._$lT=l,this._$C0=T,this._$tT=I,this._$WL=B},ye.prototype._$WP=function(l){this.culling=l},ye.prototype.setMatrix=function(l){for(var T=0;T<16;T++)this.matrix4x4[T]=l[T]},ye.prototype._$IT=function(){return this.matrix4x4},ye.prototype.setPremultipliedAlpha=function(l){this.premultipliedAlpha=l},ye.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},ye.prototype.setAnisotropy=function(l){this.anisotropy=l},ye.prototype.getAnisotropy=function(){return this.anisotropy},ye.prototype.getClippingProcess=function(){return this.clippingProcess},ye.prototype.setClippingProcess=function(l){this.clippingProcess=l},ye.prototype.setClipBufPre_clipContextForMask=function(l){this.clipBufPre_clipContextMask=l},ye.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},ye.prototype.setClipBufPre_clipContextForDraw=function(l){this.clipBufPre_clipContextDraw=l},ye.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw},pe._$ur=-2,pe._$c2=1,pe._$_b=2,pe.prototype._$F0=function(l){this._$kP=l._$nP(),this._$dr=l._$nP()},pe.prototype.readV2_opacity=function(l){l.getFormatVersion()>=ht.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=l._$Tb())},pe.prototype.init=function(l){},pe.prototype._$Nr=function(l,T){},pe.prototype.interpolateOpacity=function(l,T,I,B){this._$mS==null?I.setInterpolatedOpacity(1):I.setInterpolatedOpacity(ne._$br(l,T,B,this._$mS))},pe.prototype._$2b=function(l,T){},pe.prototype._$nb=function(l,T,I,B,N,$,J){},pe.prototype.getType=function(){},pe.prototype._$gs=function(l){this._$dr=l},pe.prototype._$a2=function(l){this._$kP=l},pe.prototype.getTargetBaseDataID=function(){return this._$dr},pe.prototype.getBaseDataID=function(){return this._$kP},pe.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Se._$2o()},_e._$W2=0,_e._$CS=_e._$W2,_e._$Mo=function(){return!0},_e._$XP=function(l){try{for(var T=getTimeMSec();getTimeMSec()-T<l;);}catch(I){I._$Rb()}},_e.getUserTimeMSec=function(){return _e._$CS==_e._$W2?_e.getSystemTimeMSec():_e._$CS},_e.setUserTimeMSec=function(l){_e._$CS=l},_e.updateUserTimeMSec=function(){return _e._$CS=_e.getSystemTimeMSec()},_e.getTimeMSec=function(){return new Date().getTime()},_e.getSystemTimeMSec=function(){return new Date().getTime()},_e._$Q=function(l){},_e._$jT=function(l,T,I,B,N){for(var $=0;$<N;$++)I[B+$]=l[T+$]},Be._$ds=-2,Be.prototype._$F0=function(l){this._$wL=l._$nP(),this._$VP=l._$6L(),this._$GP=l._$nP()},Be.prototype.getParamIndex=function(l){return this._$2r!=l&&(this._$8o=Be._$ds),this._$8o},Be.prototype._$Pb=function(l,T){this._$8o=l,this._$2r=T},Be.prototype.getParamID=function(){return this._$wL},Be.prototype._$yP=function(l){this._$wL=l},Be.prototype._$N2=function(){return this._$VP},Be.prototype._$d2=function(){return this._$GP},Be.prototype._$t2=function(l,T){this._$VP=l,this._$GP=T},Be.prototype._$Lr=function(){return this._$O2},Be.prototype._$wr=function(l){this._$O2=l},Be.prototype._$SL=function(){return this._$ri},Be.prototype._$AL=function(l){this._$ri=l},Me.startsWith=function(l,T,I){var B=T+I.length;if(B>=l.length)return!1;for(var N=T;N<B;N++)if(Me.getChar(l,N)!=I.charAt(N-T))return!1;return!0},Me.getChar=function(l,T){return String.fromCharCode(l.getUint8(T))},Me.createString=function(l,T,I){for(var B=new ArrayBuffer(2*I),N=new Uint16Array(B),$=0;$<I;$++)N[$]=l.getUint8(T+$);return String.fromCharCode.apply(null,N)},Me._$LS=function(l,T,I,B){l instanceof ArrayBuffer&&(l=new DataView(l));var N=I,$=!1,J=!1,r=0,j=Me.getChar(l,N);j=="-"&&($=!0,N++);for(var W=!1;N<T;N++){switch(j=Me.getChar(l,N)){case"0":r*=10;break;case"1":r=10*r+1;break;case"2":r=10*r+2;break;case"3":r=10*r+3;break;case"4":r=10*r+4;break;case"5":r=10*r+5;break;case"6":r=10*r+6;break;case"7":r=10*r+7;break;case"8":r=10*r+8;break;case"9":r=10*r+9;break;case".":J=!0,N++,W=!0;break;default:W=!0}if(W)break}if(J)for(var re=.1,O=!1;N<T;N++){switch(j=Me.getChar(l,N)){case"0":break;case"1":r+=1*re;break;case"2":r+=2*re;break;case"3":r+=3*re;break;case"4":r+=4*re;break;case"5":r+=5*re;break;case"6":r+=6*re;break;case"7":r+=7*re;break;case"8":r+=8*re;break;case"9":r+=9*re;break;default:O=!0}if(re*=.1,O)break}return $&&(r=-r),B[0]=N,r},_t.prototype._$zP=function(){this._$Ob=new Array},_t.prototype._$F0=function(l){this._$Ob=l._$nP()},_t.prototype._$Ur=function(l){if(l._$WS())return!0;for(var T=l._$v2(),I=this._$Ob.length-1;I>=0;--I){var B=this._$Ob[I].getParamIndex(T);if(B==Be._$ds&&(B=l.getParamIndex(this._$Ob[I].getParamID())),l._$Xb(B))return!0}return!1},_t.prototype._$Q2=function(l,T){for(var I,B,N=this._$Ob.length,$=l._$v2(),J=0,r=0;r<N;r++){var j=this._$Ob[r];if((I=j.getParamIndex($))==Be._$ds&&(I=l.getParamIndex(j.getParamID()),j._$Pb(I,$)),I<0)throw new Exception("err 23242 : "+j.getParamID());var W=I<0?0:l.getParamFloat(I);B=j._$N2();var re,O,ee=j._$d2(),z=-1,p=0;if(!(B<1))if(B==1)(re=ee[0])-je._$J<W&&W<re+je._$J?(z=0,p=0):(z=0,T[0]=!0);else if(W<(re=ee[0])-je._$J)z=0,T[0]=!0;else if(W<re+je._$J)z=0;else{for(var de=!1,be=1;be<B;++be){if(W<(O=ee[be])+je._$J){O-je._$J<W?z=be:(z=be-1,p=(W-re)/(O-re),J++),de=!0;break}re=O}de||(z=B-1,p=0,T[0]=!0)}j._$wr(z),j._$AL(p)}return J},_t.prototype._$zr=function(l,T,I){var B=1<<I;B+1>je._$Qb&&console.log(`err 23245
`);for(var N=this._$Ob.length,$=1,J=1,r=0,j=0;j<B;++j)l[j]=0;for(var W=0;W<N;++W){var re=this._$Ob[W];if(re._$SL()==0){if((O=re._$Lr()*$)<0&&ce._$3T)throw new Exception("err 23246");for(j=0;j<B;++j)l[j]+=O}else{var O=$*re._$Lr(),ee=$*(re._$Lr()+1);for(j=0;j<B;++j)l[j]+=(j/J|0)%2==0?O:ee;T[r++]=re._$SL(),J*=2}$*=re._$N2()}l[B]=65535,T[r]=-1},_t.prototype._$h2=function(l,T,I){for(var B=new Float32Array(T),N=0;N<T;++N)B[N]=I[N];var $=new Be;$._$yP(l),$._$t2(T,B),this._$Ob.push($)},_t.prototype._$J2=function(l){for(var T=l,I=this._$Ob.length,B=0;B<I;++B){var N=this._$Ob[B],$=N._$N2(),J=T%N._$N2(),r=N._$d2()[J];console.log("%s[%d]=%7.2f / ",N.getParamID(),J,r),T/=$}console.log(`
`)},_t.prototype.getParamCount=function(){return this._$Ob.length},_t.prototype._$zs=function(){return this._$Ob},Ke.prototype.identity=function(){for(var l=0;l<16;l++)this.m[l]=l%5==0?1:0},Ke.prototype.getArray=function(){return this.m},Ke.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},Ke.prototype.setMatrix=function(l){if(l!=null&&l.length==16)for(var T=0;T<16;T++)this.m[T]=l[T]},Ke.prototype.mult=function(l,T,I){return T==null?null:(this==T?this.mult_safe(this.m,l.m,T.m,I):this.mult_fast(this.m,l.m,T.m,I),T)},Ke.prototype.mult_safe=function(l,T,I,B){if(l==I){var N=new Array(16);this.mult_fast(l,T,N,B);for(var $=15;$>=0;--$)I[$]=N[$]}else this.mult_fast(l,T,I,B)},Ke.prototype.mult_fast=function(l,T,I,B){B?(I[0]=l[0]*T[0]+l[4]*T[1]+l[8]*T[2],I[4]=l[0]*T[4]+l[4]*T[5]+l[8]*T[6],I[8]=l[0]*T[8]+l[4]*T[9]+l[8]*T[10],I[12]=l[0]*T[12]+l[4]*T[13]+l[8]*T[14]+l[12],I[1]=l[1]*T[0]+l[5]*T[1]+l[9]*T[2],I[5]=l[1]*T[4]+l[5]*T[5]+l[9]*T[6],I[9]=l[1]*T[8]+l[5]*T[9]+l[9]*T[10],I[13]=l[1]*T[12]+l[5]*T[13]+l[9]*T[14]+l[13],I[2]=l[2]*T[0]+l[6]*T[1]+l[10]*T[2],I[6]=l[2]*T[4]+l[6]*T[5]+l[10]*T[6],I[10]=l[2]*T[8]+l[6]*T[9]+l[10]*T[10],I[14]=l[2]*T[12]+l[6]*T[13]+l[10]*T[14]+l[14],I[3]=I[7]=I[11]=0,I[15]=1):(I[0]=l[0]*T[0]+l[4]*T[1]+l[8]*T[2]+l[12]*T[3],I[4]=l[0]*T[4]+l[4]*T[5]+l[8]*T[6]+l[12]*T[7],I[8]=l[0]*T[8]+l[4]*T[9]+l[8]*T[10]+l[12]*T[11],I[12]=l[0]*T[12]+l[4]*T[13]+l[8]*T[14]+l[12]*T[15],I[1]=l[1]*T[0]+l[5]*T[1]+l[9]*T[2]+l[13]*T[3],I[5]=l[1]*T[4]+l[5]*T[5]+l[9]*T[6]+l[13]*T[7],I[9]=l[1]*T[8]+l[5]*T[9]+l[9]*T[10]+l[13]*T[11],I[13]=l[1]*T[12]+l[5]*T[13]+l[9]*T[14]+l[13]*T[15],I[2]=l[2]*T[0]+l[6]*T[1]+l[10]*T[2]+l[14]*T[3],I[6]=l[2]*T[4]+l[6]*T[5]+l[10]*T[6]+l[14]*T[7],I[10]=l[2]*T[8]+l[6]*T[9]+l[10]*T[10]+l[14]*T[11],I[14]=l[2]*T[12]+l[6]*T[13]+l[10]*T[14]+l[14]*T[15],I[3]=l[3]*T[0]+l[7]*T[1]+l[11]*T[2]+l[15]*T[3],I[7]=l[3]*T[4]+l[7]*T[5]+l[11]*T[6]+l[15]*T[7],I[11]=l[3]*T[8]+l[7]*T[9]+l[11]*T[10]+l[15]*T[11],I[15]=l[3]*T[12]+l[7]*T[13]+l[11]*T[14]+l[15]*T[15])},Ke.prototype.translate=function(l,T,I){this.m[12]=this.m[0]*l+this.m[4]*T+this.m[8]*I+this.m[12],this.m[13]=this.m[1]*l+this.m[5]*T+this.m[9]*I+this.m[13],this.m[14]=this.m[2]*l+this.m[6]*T+this.m[10]*I+this.m[14],this.m[15]=this.m[3]*l+this.m[7]*T+this.m[11]*I+this.m[15]},Ke.prototype.scale=function(l,T,I){this.m[0]*=l,this.m[4]*=T,this.m[8]*=I,this.m[1]*=l,this.m[5]*=T,this.m[9]*=I,this.m[2]*=l,this.m[6]*=T,this.m[10]*=I,this.m[3]*=l,this.m[7]*=T,this.m[11]*=I},Ke.prototype.rotateX=function(l){var T=Ut.fcos(l),I=Ut._$9(l),B=this.m[4];this.m[4]=B*T+this.m[8]*I,this.m[8]=B*-I+this.m[8]*T,B=this.m[5],this.m[5]=B*T+this.m[9]*I,this.m[9]=B*-I+this.m[9]*T,B=this.m[6],this.m[6]=B*T+this.m[10]*I,this.m[10]=B*-I+this.m[10]*T,B=this.m[7],this.m[7]=B*T+this.m[11]*I,this.m[11]=B*-I+this.m[11]*T},Ke.prototype.rotateY=function(l){var T=Ut.fcos(l),I=Ut._$9(l),B=this.m[0];this.m[0]=B*T+this.m[8]*-I,this.m[8]=B*I+this.m[8]*T,B=this.m[1],this.m[1]=B*T+this.m[9]*-I,this.m[9]=B*I+this.m[9]*T,B=m[2],this.m[2]=B*T+this.m[10]*-I,this.m[10]=B*I+this.m[10]*T,B=m[3],this.m[3]=B*T+this.m[11]*-I,this.m[11]=B*I+this.m[11]*T},Ke.prototype.rotateZ=function(l){var T=Ut.fcos(l),I=Ut._$9(l),B=this.m[0];this.m[0]=B*T+this.m[4]*I,this.m[4]=B*-I+this.m[4]*T,B=this.m[1],this.m[1]=B*T+this.m[5]*I,this.m[5]=B*-I+this.m[5]*T,B=this.m[2],this.m[2]=B*T+this.m[6]*I,this.m[6]=B*-I+this.m[6]*T,B=this.m[3],this.m[3]=B*T+this.m[7]*I,this.m[7]=B*-I+this.m[7]*T},Re.prototype=new br,Re._$tP=new Object,Re._$27=function(){Re._$tP.clear()},Re.getID=function(l){var T=Re._$tP[l];return T==null&&(T=new Re(l),Re._$tP[l]=T),T},Re.prototype._$3s=function(){return new Re},me._$kS=-1,me._$pS=0,me._$hb=1,me.STATE_IDENTITY=0,me._$gb=1,me._$fo=2,me._$go=4,me.prototype.transform=function(l,T,I){var B,N,$,J,r,j,W=0,re=0;switch(this._$hi){default:return;case me._$go|me._$fo|me._$gb:for(B=this._$7,N=this._$H,$=this._$k,J=this._$f,r=this._$g,j=this._$w;--I>=0;){var O=l[W++],ee=l[W++];T[re++]=B*O+N*ee+$,T[re++]=J*O+r*ee+j}return;case me._$go|me._$fo:for(B=this._$7,N=this._$H,J=this._$f,r=this._$g;--I>=0;)O=l[W++],ee=l[W++],T[re++]=B*O+N*ee,T[re++]=J*O+r*ee;return;case me._$go|me._$gb:for(N=this._$H,$=this._$k,J=this._$f,j=this._$w;--I>=0;)O=l[W++],T[re++]=N*l[W++]+$,T[re++]=J*O+j;return;case me._$go:for(N=this._$H,J=this._$f;--I>=0;)O=l[W++],T[re++]=N*l[W++],T[re++]=J*O;return;case me._$fo|me._$gb:for(B=this._$7,$=this._$k,r=this._$g,j=this._$w;--I>=0;)T[re++]=B*l[W++]+$,T[re++]=r*l[W++]+j;return;case me._$fo:for(B=this._$7,r=this._$g;--I>=0;)T[re++]=B*l[W++],T[re++]=r*l[W++];return;case me._$gb:for($=this._$k,j=this._$w;--I>=0;)T[re++]=l[W++]+$,T[re++]=l[W++]+j;return;case me.STATE_IDENTITY:return void(l==T&&W==re||_e._$jT(l,W,T,re,2*I))}},me.prototype.update=function(){this._$H==0&&this._$f==0?this._$7==1&&this._$g==1?this._$k==0&&this._$w==0?(this._$hi=me.STATE_IDENTITY,this._$Z=me._$pS):(this._$hi=me._$gb,this._$Z=me._$hb):this._$k==0&&this._$w==0?(this._$hi=me._$fo,this._$Z=me._$kS):(this._$hi=me._$fo|me._$gb,this._$Z=me._$kS):this._$7==0&&this._$g==0?this._$k==0&&this._$w==0?(this._$hi=me._$go,this._$Z=me._$kS):(this._$hi=me._$go|me._$gb,this._$Z=me._$kS):this._$k==0&&this._$w==0?(this._$hi=me._$go|me._$fo,this._$Z=me._$kS):(this._$hi=me._$go|me._$fo|me._$gb,this._$Z=me._$kS)},me.prototype._$RT=function(l){this._$IT(l);var T=l[0],I=l[2],B=l[1],N=l[3],$=Math.sqrt(T*T+B*B),J=T*N-I*B;$==0?ce._$so&&console.log("affine._$RT() / rt==0"):(l[0]=$,l[1]=J/$,l[2]=(B*N+T*I)/J,l[3]=Math.atan2(B,T))},me.prototype._$ho=function(l,T,I,B){var N=new Float32Array(6),$=new Float32Array(6);l._$RT(N),T._$RT($);var J=new Float32Array(6);J[0]=N[0]+($[0]-N[0])*I,J[1]=N[1]+($[1]-N[1])*I,J[2]=N[2]+($[2]-N[2])*I,J[3]=N[3]+($[3]-N[3])*I,J[4]=N[4]+($[4]-N[4])*I,J[5]=N[5]+($[5]-N[5])*I,B._$CT(J)},me.prototype._$CT=function(l){var T=Math.cos(l[3]),I=Math.sin(l[3]);this._$7=l[0]*T,this._$f=l[0]*I,this._$H=l[1]*(l[2]*T-I),this._$g=l[1]*(l[2]*I+T),this._$k=l[4],this._$w=l[5],this.update()},me.prototype._$IT=function(l){l[0]=this._$7,l[1]=this._$f,l[2]=this._$H,l[3]=this._$g,l[4]=this._$k,l[5]=this._$w},tt.prototype=new h,tt._$cs="VISIBLE:",tt._$ar="LAYOUT:",tt._$Co=0,tt._$D2=[],tt._$1T=1,tt.loadMotion=function(l){var T=new tt,I=[0],B=l.length;T._$yT=0;for(var N=0;N<B;++N){var $=255&l[N];if($!=`
`&&$!="\r")if($!="#")if($!="$"){if("a"<=$&&$<="z"||"A"<=$&&$<="Z"||$=="_"){for(W=N,re=-1;N<B&&($=255&l[N])!="\r"&&$!=`
`;++N)if($=="="){re=N;break}if(re>=0){var J=new rt;Me.startsWith(l,W,tt._$cs)?(J._$RP=rt._$hs,J._$4P=new String(l,W,re-W)):Me.startsWith(l,W,tt._$ar)?(J._$4P=new String(l,W+7,re-W-7),Me.startsWith(l,W+7,"ANCHOR_X")?J._$RP=rt._$xs:Me.startsWith(l,W+7,"ANCHOR_Y")?J._$RP=rt._$us:Me.startsWith(l,W+7,"SCALE_X")?J._$RP=rt._$qs:Me.startsWith(l,W+7,"SCALE_Y")?J._$RP=rt._$Ys:Me.startsWith(l,W+7,"X")?J._$RP=rt._$ws:Me.startsWith(l,W+7,"Y")&&(J._$RP=rt._$Ns)):(J._$RP=rt._$Fr,J._$4P=new String(l,W,re-W)),T.motions.push(J);var r=0;for(tt._$D2.clear(),N=re+1;N<B&&($=255&l[N])!="\r"&&$!=`
`;++N)if($!=","&&$!=" "&&$!="	"&&(ee=Me._$LS(l,B,N,I),I[0]>0)){tt._$D2.push(ee),r++;var j=I[0];if(j<N){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}N=j}J._$I0=tt._$D2._$BL(),r>T._$yT&&(T._$yT=r)}}}else{for(var W=N,re=-1;N<B&&($=255&l[N])!="\r"&&$!=`
`;++N)if($=="="){re=N;break}var O=!1;if(re>=0){for(re==W+4&&l[W+1]=="f"&&l[W+2]=="p"&&l[W+3]=="s"&&(O=!0),N=re+1;N<B&&($=255&l[N])!="\r"&&$!=`
`;++N)if($!=","&&$!=" "&&$!="	"){var ee=Me._$LS(l,B,N,I);I[0]>0&&O&&5<ee&&ee<121&&(T._$D0=ee),N=I[0]}}for(;N<B&&l[N]!=`
`&&l[N]!="\r";++N);}else for(;N<B&&l[N]!=`
`&&l[N]!="\r";++N);}return T._$AS=1e3*T._$yT/T._$D0|0,T},tt.prototype.getDurationMSec=function(){return this._$AS},tt.prototype.dump=function(){for(var l=0;l<this.motions.length;l++){var T=this.motions[l];console.log("_$wL[%s] [%d]. ",T._$4P,T._$I0.length);for(var I=0;I<T._$I0.length&&I<10;I++)console.log("%5.2f ,",T._$I0[I]);console.log(`
`)}},tt.prototype.updateParamExe=function(l,T,I,B){for(var N=(T-B._$z2)*this._$D0/1e3,$=0|N,J=N-$,r=0;r<this.motions.length;r++){var j=this.motions[r],W=j._$I0.length,re=j._$4P;if(j._$RP==rt._$hs){var O=j._$I0[$>=W?W-1:$];l.setParamFloat(re,O)}else if(!(rt._$ws<=j._$RP&&j._$RP<=rt._$Ys)){var ee=l.getParamFloat(re),z=j._$I0[$>=W?W-1:$],p=ee+(z+(j._$I0[$+1>=W?W-1:$+1]-z)*J-ee)*I;l.setParamFloat(re,p)}}$>=this._$yT&&(this._$E?(B._$z2=T,this.loopFadeIn&&(B._$bs=T)):B._$9L=!0)},tt.prototype._$r0=function(){return this._$E},tt.prototype._$aL=function(l){this._$E=l},tt.prototype.isLoopFadeIn=function(){return this.loopFadeIn},tt.prototype.setLoopFadeIn=function(l){this.loopFadeIn=l},yt.prototype.clear=function(){this.size=0},yt.prototype.add=function(l){if(this._$P.length<=this.size){var T=new Float32Array(2*this.size);_e._$jT(this._$P,0,T,0,this.size),this._$P=T}this._$P[this.size++]=l},yt.prototype._$BL=function(){var l=new Float32Array(this.size);return _e._$jT(this._$P,0,l,0,this.size),l},rt._$Fr=0,rt._$hs=1,rt._$ws=100,rt._$Ns=101,rt._$xs=102,rt._$us=103,rt._$qs=104,rt._$Ys=105,je._$Ms=1,je._$Qs=2,je._$i2=0,je._$No=2,je._$do=je._$Ms,je._$Ls=!0,je._$1r=5,je._$Qb=65,je._$J=1e-4,je._$FT=.001,je._$Ss=3,ht._$o7=6,ht._$S7=7,ht._$s7=8,ht._$77=9,ht.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,ht.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,ht._$T7=ht.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,ht._$Is=-2004318072,ht._$h0=0,ht._$4L=23,ht._$7P=33,ht._$uT=function(l){console.log(`_$bo :: _$6 _$mo _$E0 : %d
`,l)},ht._$9o=function(l){if(l<40||l<50||l<60)return ht._$uT(l),null;if(l<100)switch(l){case 65:return new Ct;case 66:return new _t;case 67:return new Be;case 68:return new Mt;case 69:return new te;case 70:return new Ft;default:return ht._$uT(l),null}else if(l<150)switch(l){case 131:return new ui;case 133:return new Ze;case 136:return new C;case 137:return new qr;case 142:return new Mr}return ht._$uT(l),null},Ee._$HP=0,Ee._$_0=!0,Ee._$V2=-1,Ee._$W0=-1,Ee._$jr=!1,Ee._$ZS=!0,Ee._$tr=-1e6,Ee._$lr=1e6,Ee._$is=32,Ee._$e=!1,Ee.prototype.getDrawDataIndex=function(l){for(var T=this._$aS.length-1;T>=0;--T)if(this._$aS[T]!=null&&this._$aS[T].getDrawDataID()==l)return T;return-1},Ee.prototype.getDrawData=function(l){if(l instanceof Re){if(this._$Bo==null){this._$Bo=new Object;for(var T=this._$aS.length,I=0;I<T;I++){var B=this._$aS[I],N=B.getDrawDataID();N!=null&&(this._$Bo[N]=B)}}return this._$Bo[id]}return l<this._$aS.length?this._$aS[l]:null},Ee.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),this._$Bo!=null&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},Ee.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var l=this._$Ri.getModelImpl(),T=l._$Xr(),I=T.length,B=new Array,N=new Array,$=0;$<I;++$){var J=T[$];this._$F2.push(J),this._$Hr.push(J.init(this));for(var r=J.getBaseData(),j=r.length,W=0;W<j;++W)B.push(r[W]);for(W=0;W<j;++W){var re=r[W].init(this);re._$l2($),N.push(re)}var O=J.getDrawData(),ee=O.length;for(W=0;W<ee;++W){var z=O[W],p=z.init(this);p._$IP=$,this._$aS.push(z),this._$8b.push(p)}}for(var de=B.length,be=Se._$2o();;){var Ie=!1;for($=0;$<de;++$){var Ye=B[$];if(Ye!=null){var fe=Ye.getTargetBaseDataID();(fe==null||fe==be||this.getBaseDataIndex(fe)>=0)&&(this._$3S.push(Ye),this._$db.push(N[$]),B[$]=null,Ie=!0)}}if(!Ie)break}var ze=l._$E2();if(ze!=null){var lt=ze._$1s();if(lt!=null){var dt=lt.length;for($=0;$<dt;++$){var q=lt[$];q!=null&&this._$02(q.getParamID(),q.getDefaultValue(),q.getMinValue(),q.getMaxValue())}}}this.clipManager=new t(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},Ee.prototype.update=function(){Ee._$e&&u.start("_$zL");for(var l=this._$_2.length,T=0;T<l;T++)this._$_2[T]!=this._$vr[T]&&(this._$Js[T]=Ee._$ZS,this._$vr[T]=this._$_2[T]);var I=this._$3S.length,B=this._$aS.length,N=qe._$or(),$=qe._$Pr()-N+1;for((this._$Ws==null||this._$Ws.length<$)&&(this._$Ws=new Int16Array($),this._$Vs=new Int16Array($)),T=0;T<$;T++)this._$Ws[T]=Ee._$V2,this._$Vs[T]=Ee._$V2;for((this._$Er==null||this._$Er.length<B)&&(this._$Er=new Int16Array(B)),T=0;T<B;T++)this._$Er[T]=Ee._$W0;Ee._$e&&u.dump("_$zL"),Ee._$e&&u.start("_$UL");for(var J=null,r=0;r<I;++r){var j=this._$3S[r],W=this._$db[r];try{j._$Nr(this,W),j._$2b(this,W)}catch(be){J==null&&(J=be)}}J!=null&&Ee._$_0&&u._$Rb(J),Ee._$e&&u.dump("_$UL"),Ee._$e&&u.start("_$DL");for(var re=null,O=0;O<B;++O){var ee=this._$aS[O],z=this._$8b[O];try{if(ee._$Nr(this,z),z._$u2())continue;ee._$2b(this,z);var p,de=Math.floor(ee._$zS(this,z)-N);try{p=this._$Vs[de]}catch(be){console.log(`_$li :: %s / %s 				@@_$fS
`,be.toString(),ee.getDrawDataID().toString()),de=Math.floor(ee._$zS(this,z)-N);continue}p==Ee._$V2?this._$Ws[de]=O:this._$Er[p]=O,this._$Vs[de]=O}catch(be){re==null&&(re=be,ce._$sT(ce._$H7))}}for(re!=null&&Ee._$_0&&u._$Rb(re),Ee._$e&&u.dump("_$DL"),Ee._$e&&u.start("_$eL"),T=this._$Js.length-1;T>=0;T--)this._$Js[T]=Ee._$jr;return this._$QT=!1,Ee._$e&&u.dump("_$eL"),!1},Ee.prototype.preDraw=function(l){this.clipManager!=null&&(l._$ZT(),this.clipManager.setupClip(this,l))},Ee.prototype.draw=function(l){if(this._$Ws!=null){var T=this._$Ws.length;l._$ZT();for(var I=0;I<T;++I){var B=this._$Ws[I];if(B!=Ee._$V2)for(;;){var N=this._$aS[B],$=this._$8b[B];if($._$yo()){var J=$._$IP,r=this._$Hr[J];$._$VS=r.getPartsOpacity(),N.draw(l,this,$)}var j=this._$Er[B];if(j<=B||j==Ee._$W0)break;B=j}}}else u._$li("call _$Ri.update() before _$Ri.draw() ")},Ee.prototype.getParamIndex=function(l){for(var T=this._$pb.length-1;T>=0;--T)if(this._$pb[T]==l)return T;return this._$02(l,0,Ee._$tr,Ee._$lr)},Ee.prototype._$BS=function(l){return this.getBaseDataIndex(l)},Ee.prototype.getBaseDataIndex=function(l){for(var T=this._$3S.length-1;T>=0;--T)if(this._$3S[T]!=null&&this._$3S[T].getBaseDataID()==l)return T;return-1},Ee.prototype._$UT=function(l,T){var I=new Float32Array(T);return _e._$jT(l,0,I,0,l.length),I},Ee.prototype._$02=function(l,T,I,B){if(this._$qo>=this._$pb.length){var N=this._$pb.length,$=new Array(2*N);_e._$jT(this._$pb,0,$,0,N),this._$pb=$,this._$_2=this._$UT(this._$_2,2*N),this._$vr=this._$UT(this._$vr,2*N),this._$Rr=this._$UT(this._$Rr,2*N),this._$Or=this._$UT(this._$Or,2*N);var J=new Array;_e._$jT(this._$Js,0,J,0,N),this._$Js=J}return this._$pb[this._$qo]=l,this._$_2[this._$qo]=T,this._$vr[this._$qo]=T,this._$Rr[this._$qo]=I,this._$Or[this._$qo]=B,this._$Js[this._$qo]=Ee._$ZS,this._$qo++},Ee.prototype._$Zo=function(l,T){this._$3S[l]=T},Ee.prototype.setParamFloat=function(l,T){T<this._$Rr[l]&&(T=this._$Rr[l]),T>this._$Or[l]&&(T=this._$Or[l]),this._$_2[l]=T},Ee.prototype.loadParam=function(){var l=this._$_2.length;l>this._$fs.length&&(l=this._$fs.length),_e._$jT(this._$fs,0,this._$_2,0,l)},Ee.prototype.saveParam=function(){var l=this._$_2.length;l>this._$fs.length&&(this._$fs=new Float32Array(l)),_e._$jT(this._$_2,0,this._$fs,0,l)},Ee.prototype._$v2=function(){return this._$co},Ee.prototype._$WS=function(){return this._$QT},Ee.prototype._$Xb=function(l){return this._$Js[l]==Ee._$ZS},Ee.prototype._$vs=function(){return this._$Es},Ee.prototype._$Tr=function(){return this._$ZP},Ee.prototype.getBaseData=function(l){return this._$3S[l]},Ee.prototype.getParamFloat=function(l){return this._$_2[l]},Ee.prototype.getParamMax=function(l){return this._$Or[l]},Ee.prototype.getParamMin=function(l){return this._$Rr[l]},Ee.prototype.setPartsOpacity=function(l,T){this._$Hr[l].setPartsOpacity(T)},Ee.prototype.getPartsOpacity=function(l){return this._$Hr[l].getPartsOpacity()},Ee.prototype.getPartsDataIndex=function(l){for(var T=this._$F2.length-1;T>=0;--T)if(this._$F2[T]!=null&&this._$F2[T]._$p2()==l)return T;return-1},Ee.prototype._$q2=function(l){return this._$db[l]},Ee.prototype._$C2=function(l){return this._$8b[l]},Ee.prototype._$Bb=function(l){return this._$Hr[l]},Ee.prototype._$5s=function(l,T){for(var I=this._$Ws.length,B=l,N=0;N<I;++N){var $=this._$Ws[N];if($!=Ee._$V2)for(;;){var J=this._$8b[$];J._$yo()&&(J._$GT()._$B2(this,J,B),B+=T);var r=this._$Er[$];if(r<=$||r==Ee._$W0)break;$=r}}},Ee.prototype.setDrawParam=function(l){this.dp_webgl=l},Ee.prototype.getDrawParam=function(){return this.dp_webgl},Qt._$0T=function(l){return Qt._$0T(new _$5(l))},Qt._$0T=function(l){if(!l.exists())throw new _$ls(l._$3b());for(var T,I=l.length(),B=new Int8Array(I),N=new _$Xs(new _$kb(l),8192),$=0;(T=N.read(B,$,I-$))>0;)$+=T;return B},Qt._$C=function(l){var T=null,I=null;try{T=l instanceof Array?l:new _$Xs(l,8192),I=new _$js;for(var B,N=new Int8Array(1e3);(B=T.read(N))>0;)I.write(N,0,B);return I._$TS()}finally{l!=null&&l.close(),I!=null&&(I.flush(),I.close())}},ot.prototype=new ye,ot._$As=32,ot._$Gr=!1,ot._$NT=null,ot._$vS=null,ot._$no=null,ot._$9r=function(l){return new Float32Array(l)},ot._$vb=function(l){return new Int16Array(l)},ot._$cr=function(l,T){return l==null||l._$yL()<T.length?((l=ot._$9r(2*T.length)).put(T),l._$oT(0)):(l.clear(),l.put(T),l._$oT(0)),l},ot._$mb=function(l,T){return l==null||l._$yL()<T.length?((l=ot._$vb(2*T.length)).put(T),l._$oT(0)):(l.clear(),l.put(T),l._$oT(0)),l},ot._$Hs=function(){return ot._$Gr},ot._$as=function(l){ot._$Gr=l},ot.prototype.setGL=function(l){this.gl=l},ot.prototype.setTransform=function(l){this.transform=l},ot.prototype._$ZT=function(){},ot.prototype._$Uo=function(l,T,I,B,N,$,J,r){if(!($<.01)){var j=this._$U2[l],W=$>.9?ce.EXPAND_W:0;this.gl.drawElements(j,I,B,N,$,W,this.transform,r)}},ot.prototype._$Rs=function(){throw new Error("_$Rs")},ot.prototype._$Ds=function(l){throw new Error("_$Ds")},ot.prototype._$K2=function(){for(var l=0;l<this._$sb.length;l++)this._$sb[l]!=0&&(this.gl._$Sr(1,this._$sb,l),this._$sb[l]=0)},ot.prototype.setTexture=function(l,T){this._$sb.length<l+1&&this._$nS(l),this._$sb[l]=T},ot.prototype.setTexture=function(l,T){this._$sb.length<l+1&&this._$nS(l),this._$U2[l]=T},ot.prototype._$nS=function(l){var T=Math.max(2*this._$sb.length,l+1+10),I=new Int32Array(T);_e._$jT(this._$sb,0,I,0,this._$sb.length),this._$sb=I;var B=new Array;_e._$jT(this._$U2,0,B,0,this._$U2.length),this._$U2=B},Mt.prototype=new pe,Mt._$Xo=new Float32Array(2),Mt._$io=new Float32Array(2),Mt._$0o=new Float32Array(2),Mt._$Lo=new Float32Array(2),Mt._$To=new Float32Array(2),Mt._$Po=new Float32Array(2),Mt._$gT=new Array,Mt.prototype._$zP=function(){this._$GS=new _t,this._$GS._$zP(),this._$Y0=new Array},Mt.prototype.getType=function(){return pe._$c2},Mt.prototype._$F0=function(l){pe.prototype._$F0.call(this,l),this._$GS=l._$nP(),this._$Y0=l._$nP(),pe.prototype.readV2_opacity.call(this,l)},Mt.prototype.init=function(l){var T=new gr(this);return T._$Yr=new te,this._$32()&&(T._$Wr=new te),T},Mt.prototype._$Nr=function(l,T){this!=T._$GT()&&console.log("### assert!! ### ");var I=T;if(this._$GS._$Ur(l)){var B=Mt._$gT;B[0]=!1;var N=this._$GS._$Q2(l,B);T._$Ib(B[0]),this.interpolateOpacity(l,this._$GS,T,B);var $=l._$vs(),J=l._$Tr();if(this._$GS._$zr($,J,N),N<=0){var r=this._$Y0[$[0]];I._$Yr.init(r)}else if(N==1){r=this._$Y0[$[0]];var j=this._$Y0[$[1]],W=J[0];I._$Yr._$fL=r._$fL+(j._$fL-r._$fL)*W,I._$Yr._$gL=r._$gL+(j._$gL-r._$gL)*W,I._$Yr._$B0=r._$B0+(j._$B0-r._$B0)*W,I._$Yr._$z0=r._$z0+(j._$z0-r._$z0)*W,I._$Yr._$qT=r._$qT+(j._$qT-r._$qT)*W}else if(N==2){r=this._$Y0[$[0]],j=this._$Y0[$[1]];var re=this._$Y0[$[2]],O=this._$Y0[$[3]],ee=(W=J[0],J[1]),z=r._$fL+(j._$fL-r._$fL)*W,p=re._$fL+(O._$fL-re._$fL)*W;I._$Yr._$fL=z+(p-z)*ee,z=r._$gL+(j._$gL-r._$gL)*W,p=re._$gL+(O._$gL-re._$gL)*W,I._$Yr._$gL=z+(p-z)*ee,z=r._$B0+(j._$B0-r._$B0)*W,p=re._$B0+(O._$B0-re._$B0)*W,I._$Yr._$B0=z+(p-z)*ee,z=r._$z0+(j._$z0-r._$z0)*W,p=re._$z0+(O._$z0-re._$z0)*W,I._$Yr._$z0=z+(p-z)*ee,z=r._$qT+(j._$qT-r._$qT)*W,p=re._$qT+(O._$qT-re._$qT)*W,I._$Yr._$qT=z+(p-z)*ee}else if(N==3){var de=this._$Y0[$[0]],be=this._$Y0[$[1]],Ie=this._$Y0[$[2]],Ye=this._$Y0[$[3]],fe=this._$Y0[$[4]],ze=this._$Y0[$[5]],lt=this._$Y0[$[6]],dt=this._$Y0[$[7]],q=(W=J[0],ee=J[1],J[2]),Ae=(z=de._$fL+(be._$fL-de._$fL)*W,p=Ie._$fL+(Ye._$fL-Ie._$fL)*W,fe._$fL+(ze._$fL-fe._$fL)*W),bt=lt._$fL+(dt._$fL-lt._$fL)*W;I._$Yr._$fL=(1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee),z=de._$gL+(be._$gL-de._$gL)*W,p=Ie._$gL+(Ye._$gL-Ie._$gL)*W,Ae=fe._$gL+(ze._$gL-fe._$gL)*W,bt=lt._$gL+(dt._$gL-lt._$gL)*W,I._$Yr._$gL=(1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee),z=de._$B0+(be._$B0-de._$B0)*W,p=Ie._$B0+(Ye._$B0-Ie._$B0)*W,Ae=fe._$B0+(ze._$B0-fe._$B0)*W,bt=lt._$B0+(dt._$B0-lt._$B0)*W,I._$Yr._$B0=(1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee),z=de._$z0+(be._$z0-de._$z0)*W,p=Ie._$z0+(Ye._$z0-Ie._$z0)*W,Ae=fe._$z0+(ze._$z0-fe._$z0)*W,bt=lt._$z0+(dt._$z0-lt._$z0)*W,I._$Yr._$z0=(1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee),z=de._$qT+(be._$qT-de._$qT)*W,p=Ie._$qT+(Ye._$qT-Ie._$qT)*W,Ae=fe._$qT+(ze._$qT-fe._$qT)*W,bt=lt._$qT+(dt._$qT-lt._$qT)*W,I._$Yr._$qT=(1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee)}else if(N==4){var he=this._$Y0[$[0]],Te=this._$Y0[$[1]],gt=this._$Y0[$[2]],Le=this._$Y0[$[3]],De=this._$Y0[$[4]],et=this._$Y0[$[5]],Oe=this._$Y0[$[6]],it=this._$Y0[$[7]],st=this._$Y0[$[8]],Qe=this._$Y0[$[9]],nt=this._$Y0[$[10]],$e=this._$Y0[$[11]],Fe=this._$Y0[$[12]],Nt=this._$Y0[$[13]],Gt=this._$Y0[$[14]],at=this._$Y0[$[15]],Pt=(W=J[0],ee=J[1],q=J[2],J[3]),Lt=(z=he._$fL+(Te._$fL-he._$fL)*W,p=gt._$fL+(Le._$fL-gt._$fL)*W,Ae=De._$fL+(et._$fL-De._$fL)*W,bt=Oe._$fL+(it._$fL-Oe._$fL)*W,st._$fL+(Qe._$fL-st._$fL)*W),xt=nt._$fL+($e._$fL-nt._$fL)*W,Xt=Fe._$fL+(Nt._$fL-Fe._$fL)*W,It=Gt._$fL+(at._$fL-Gt._$fL)*W;I._$Yr._$fL=(1-Pt)*((1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee))+Pt*((1-q)*(Lt+(xt-Lt)*ee)+q*(Xt+(It-Xt)*ee)),z=he._$gL+(Te._$gL-he._$gL)*W,p=gt._$gL+(Le._$gL-gt._$gL)*W,Ae=De._$gL+(et._$gL-De._$gL)*W,bt=Oe._$gL+(it._$gL-Oe._$gL)*W,Lt=st._$gL+(Qe._$gL-st._$gL)*W,xt=nt._$gL+($e._$gL-nt._$gL)*W,Xt=Fe._$gL+(Nt._$gL-Fe._$gL)*W,It=Gt._$gL+(at._$gL-Gt._$gL)*W,I._$Yr._$gL=(1-Pt)*((1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee))+Pt*((1-q)*(Lt+(xt-Lt)*ee)+q*(Xt+(It-Xt)*ee)),z=he._$B0+(Te._$B0-he._$B0)*W,p=gt._$B0+(Le._$B0-gt._$B0)*W,Ae=De._$B0+(et._$B0-De._$B0)*W,bt=Oe._$B0+(it._$B0-Oe._$B0)*W,Lt=st._$B0+(Qe._$B0-st._$B0)*W,xt=nt._$B0+($e._$B0-nt._$B0)*W,Xt=Fe._$B0+(Nt._$B0-Fe._$B0)*W,It=Gt._$B0+(at._$B0-Gt._$B0)*W,I._$Yr._$B0=(1-Pt)*((1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee))+Pt*((1-q)*(Lt+(xt-Lt)*ee)+q*(Xt+(It-Xt)*ee)),z=he._$z0+(Te._$z0-he._$z0)*W,p=gt._$z0+(Le._$z0-gt._$z0)*W,Ae=De._$z0+(et._$z0-De._$z0)*W,bt=Oe._$z0+(it._$z0-Oe._$z0)*W,Lt=st._$z0+(Qe._$z0-st._$z0)*W,xt=nt._$z0+($e._$z0-nt._$z0)*W,Xt=Fe._$z0+(Nt._$z0-Fe._$z0)*W,It=Gt._$z0+(at._$z0-Gt._$z0)*W,I._$Yr._$z0=(1-Pt)*((1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee))+Pt*((1-q)*(Lt+(xt-Lt)*ee)+q*(Xt+(It-Xt)*ee)),z=he._$qT+(Te._$qT-he._$qT)*W,p=gt._$qT+(Le._$qT-gt._$qT)*W,Ae=De._$qT+(et._$qT-De._$qT)*W,bt=Oe._$qT+(it._$qT-Oe._$qT)*W,Lt=st._$qT+(Qe._$qT-st._$qT)*W,xt=nt._$qT+($e._$qT-nt._$qT)*W,Xt=Fe._$qT+(Nt._$qT-Fe._$qT)*W,It=Gt._$qT+(at._$qT-Gt._$qT)*W,I._$Yr._$qT=(1-Pt)*((1-q)*(z+(p-z)*ee)+q*(Ae+(bt-Ae)*ee))+Pt*((1-q)*(Lt+(xt-Lt)*ee)+q*(Xt+(It-Xt)*ee))}else{for(var ur=0|Math.pow(2,N),Cr=new Float32Array(ur),Gr=0;Gr<ur;Gr++){for(var jr=Gr,li=1,Jr=0;Jr<N;Jr++)li*=jr%2==0?1-J[Jr]:J[Jr],jr/=2;Cr[Gr]=li}for(var Or=new Array,rr=0;rr<ur;rr++)Or[rr]=this._$Y0[$[rr]];var Qr=0,Ti=0,Yi=0,zi=0,xr=0;for(rr=0;rr<ur;rr++)Qr+=Cr[rr]*Or[rr]._$fL,Ti+=Cr[rr]*Or[rr]._$gL,Yi+=Cr[rr]*Or[rr]._$B0,zi+=Cr[rr]*Or[rr]._$z0,xr+=Cr[rr]*Or[rr]._$qT;I._$Yr._$fL=Qr,I._$Yr._$gL=Ti,I._$Yr._$B0=Yi,I._$Yr._$z0=zi,I._$Yr._$qT=xr}r=this._$Y0[$[0]],I._$Yr.reflectX=r.reflectX,I._$Yr.reflectY=r.reflectY}},Mt.prototype._$2b=function(l,T){this!=T._$GT()&&console.log("### assert!! ### ");var I=T;if(I._$hS(!0),this._$32()){var B=this.getTargetBaseDataID();if(I._$8r==pe._$ur&&(I._$8r=l.getBaseDataIndex(B)),I._$8r<0)ce._$so&&u._$li("_$L _$0P _$G :: %s",B),I._$hS(!1);else{var N=l.getBaseData(I._$8r);if(N!=null){var $=l._$q2(I._$8r),J=Mt._$Xo;J[0]=I._$Yr._$fL,J[1]=I._$Yr._$gL;var r=Mt._$io;r[0]=0,r[1]=-.1,$._$GT().getType()==pe._$c2?r[1]=-10:r[1]=-.1;var j=Mt._$0o;this._$Jr(l,N,$,J,r,j);var W=Ut._$92(r,j);N._$nb(l,$,J,J,1,0,2),I._$Wr._$fL=J[0],I._$Wr._$gL=J[1],I._$Wr._$B0=I._$Yr._$B0,I._$Wr._$z0=I._$Yr._$z0,I._$Wr._$qT=I._$Yr._$qT-W*Ut._$NS;var re=$.getTotalScale();I.setTotalScale_notForClient(re*I._$Wr._$B0);var O=$.getTotalOpacity();I.setTotalOpacity(O*I.getInterpolatedOpacity()),I._$Wr.reflectX=I._$Yr.reflectX,I._$Wr.reflectY=I._$Yr.reflectY,I._$hS($._$yo())}else I._$hS(!1)}}else I.setTotalScale_notForClient(I._$Yr._$B0),I.setTotalOpacity(I.getInterpolatedOpacity())},Mt.prototype._$nb=function(l,T,I,B,N,$,J){this!=T._$GT()&&console.log("### assert!! ### ");for(var r,j,W=T,re=W._$Wr!=null?W._$Wr:W._$Yr,O=Math.sin(Ut._$bS*re._$qT),ee=Math.cos(Ut._$bS*re._$qT),z=W.getTotalScale(),p=re.reflectX?-1:1,de=re.reflectY?-1:1,be=ee*z*p,Ie=-O*z*de,Ye=O*z*p,fe=ee*z*de,ze=re._$fL,lt=re._$gL,dt=N*J,q=$;q<dt;q+=J)r=I[q],j=I[q+1],B[q]=be*r+Ie*j+ze,B[q+1]=Ye*r+fe*j+lt},Mt.prototype._$Jr=function(l,T,I,B,N,$){T!=I._$GT()&&console.log("### assert!! ### ");var J=Mt._$Lo;Mt._$Lo[0]=B[0],Mt._$Lo[1]=B[1],T._$nb(l,I,J,J,1,0,2);for(var r=Mt._$To,j=Mt._$Po,W=1,re=0;re<10;re++){if(j[0]=B[0]+W*N[0],j[1]=B[1]+W*N[1],T._$nb(l,I,j,r,1,0,2),r[0]-=J[0],r[1]-=J[1],r[0]!=0||r[1]!=0)return $[0]=r[0],void($[1]=r[1]);if(j[0]=B[0]-W*N[0],j[1]=B[1]-W*N[1],T._$nb(l,I,j,r,1,0,2),r[0]-=J[0],r[1]-=J[1],r[0]!=0||r[1]!=0)return r[0]=-r[0],r[0]=-r[0],$[0]=r[0],void($[1]=r[1]);W*=.1}ce._$so&&console.log(`_$L0 to transform _$SP
`)},gr.prototype=new Kt,qe.prototype=new oe,qe._$ur=-2,qe._$ES=500,qe._$wb=2,qe._$8S=3,qe._$os=4,qe._$52=qe._$ES,qe._$R2=qe._$ES,qe._$Sb=function(l){for(var T=l.length-1;T>=0;--T){var I=l[T];I<qe._$52?qe._$52=I:I>qe._$R2&&(qe._$R2=I)}},qe._$or=function(){return qe._$52},qe._$Pr=function(){return qe._$R2},qe.prototype._$F0=function(l){this._$gP=l._$nP(),this._$dr=l._$nP(),this._$GS=l._$nP(),this._$qb=l._$6L(),this._$Lb=l._$cS(),this._$mS=l._$Tb(),l.getFormatVersion()>=ht._$T7?(this.clipID=l._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,qe._$Sb(this._$Lb)},qe.prototype.getClipIDList=function(){return this.clipIDList},qe.prototype._$Nr=function(l,T){if(T._$IS[0]=!1,T._$Us=ne._$Z2(l,this._$GS,T._$IS,this._$Lb),!ce._$Zs){if(T._$IS[0])return}T._$7s=ne._$br(l,this._$GS,T._$IS,this._$mS)},qe.prototype._$2b=function(l){},qe.prototype.getDrawDataID=function(){return this._$gP},qe.prototype._$j2=function(l){this._$gP=l},qe.prototype.getOpacity=function(l,T){return T._$7s},qe.prototype._$zS=function(l,T){return T._$Us},qe.prototype.getTargetBaseDataID=function(){return this._$dr},qe.prototype._$gs=function(l){this._$dr=l},qe.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Se._$2o()},qe.prototype.getType=function(){},Mr._$42=0,Mr.prototype._$1b=function(){return this._$3S},Mr.prototype.getDrawDataList=function(){return this._$aS},Mr.prototype._$F0=function(l){this._$NL=l._$nP(),this._$aS=l._$nP(),this._$3S=l._$nP()},Mr.prototype._$kr=function(l){l._$Zo(this._$3S),l._$xo(this._$aS),this._$3S=null,this._$aS=null},jt.prototype=new e,jt.loadModel=function(l){var T=new jt;return e._$62(T,l),T},jt.loadModel=function(l){var T=new jt;return e._$62(T,l),T},jt._$to=function(){return new jt},jt._$er=function(l){var T=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(T.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+T._$PL());for(var I=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],B=jt.loadModel(T._$3b()),N=0;N<I.length;N++){var $=new _$5(I[N]);if($.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+$._$PL());B.setTexture(N,_$nL._$_o(l,$._$3b()))}return B},jt.prototype.setGL=function(l){this._$zo.setGL(l)},jt.prototype.setTransform=function(l){this._$zo.setTransform(l)},jt.prototype.draw=function(){this._$5S.draw(this._$zo)},jt.prototype._$K2=function(){this._$zo._$K2()},jt.prototype.setTexture=function(l,T){this._$zo==null&&u._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(l,T)},jt.prototype.setTexture=function(l,T){this._$zo==null&&u._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(l,T)},jt.prototype._$Rs=function(){return this._$zo._$Rs()},jt.prototype._$Ds=function(l){this._$zo._$Ds(l)},jt.prototype.getDrawParam=function(){return this._$zo},$t.prototype=new h,$t._$cs="VISIBLE:",$t._$ar="LAYOUT:",$t.MTN_PREFIX_FADEIN="FADEIN:",$t.MTN_PREFIX_FADEOUT="FADEOUT:",$t._$Co=0,$t._$1T=1,$t.loadMotion=function(l){var T=Qt._$C(l);return $t.loadMotion(T)},$t.loadMotion=function(l){l instanceof ArrayBuffer&&(l=new DataView(l));var T=new $t,I=[0],B=l.byteLength;T._$yT=0;for(var N=0;N<B;++N){var $=hr(l,N),J=$.charCodeAt(0);if($!=`
`&&$!="\r")if($!="#")if($!="$"){if(97<=J&&J<=122||65<=J&&J<=90||$=="_"){for(O=N,ee=-1;N<B&&($=hr(l,N))!="\r"&&$!=`
`;++N)if($=="="){ee=N;break}if(ee>=0){var r=new rt;Me.startsWith(l,O,$t._$cs)?(r._$RP=rt._$hs,r._$4P=Me.createString(l,O,ee-O)):Me.startsWith(l,O,$t._$ar)?(r._$4P=Me.createString(l,O+7,ee-O-7),Me.startsWith(l,O+7,"ANCHOR_X")?r._$RP=rt._$xs:Me.startsWith(l,O+7,"ANCHOR_Y")?r._$RP=rt._$us:Me.startsWith(l,O+7,"SCALE_X")?r._$RP=rt._$qs:Me.startsWith(l,O+7,"SCALE_Y")?r._$RP=rt._$Ys:Me.startsWith(l,O+7,"X")?r._$RP=rt._$ws:Me.startsWith(l,O+7,"Y")&&(r._$RP=rt._$Ns)):(r._$RP=rt._$Fr,r._$4P=Me.createString(l,O,ee-O)),T.motions.push(r);var j=0,W=[];for(N=ee+1;N<B&&($=hr(l,N))!="\r"&&$!=`
`;++N)if($!=","&&$!=" "&&$!="	"&&(p=Me._$LS(l,B,N,I),I[0]>0)){W.push(p),j++;var re=I[0];if(re<N){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}N=re-1}r._$I0=new Float32Array(W),j>T._$yT&&(T._$yT=j)}}}else{for(var O=N,ee=-1;N<B&&($=hr(l,N))!="\r"&&$!=`
`;++N)if($=="="){ee=N;break}var z=!1;if(ee>=0){for(ee==O+4&&hr(l,O+1)=="f"&&hr(l,O+2)=="p"&&hr(l,O+3)=="s"&&(z=!0),N=ee+1;N<B&&($=hr(l,N))!="\r"&&$!=`
`;++N)if($!=","&&$!=" "&&$!="	"){var p=Me._$LS(l,B,N,I);I[0]>0&&z&&5<p&&p<121&&(T._$D0=p),N=I[0]}}for(;N<B&&hr(l,N)!=`
`&&hr(l,N)!="\r";++N);}else for(;N<B&&hr(l,N)!=`
`&&hr(l,N)!="\r";++N);}return T._$rr=1e3*T._$yT/T._$D0|0,T},$t.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},$t.prototype.getLoopDurationMSec=function(){return this._$rr},$t.prototype.dump=function(){for(var l=0;l<this.motions.length;l++){var T=this.motions[l];console.log("_$wL[%s] [%d]. ",T._$4P,T._$I0.length);for(var I=0;I<T._$I0.length&&I<10;I++)console.log("%5.2f ,",T._$I0[I]);console.log(`
`)}},$t.prototype.updateParamExe=function(l,T,I,B){for(var N=(T-B._$z2)*this._$D0/1e3,$=0|N,J=N-$,r=0;r<this.motions.length;r++){var j=this.motions[r],W=j._$I0.length,re=j._$4P;if(j._$RP==rt._$hs){var O=j._$I0[$>=W?W-1:$];l.setParamFloat(re,O)}else if(!(rt._$ws<=j._$RP&&j._$RP<=rt._$Ys)){var ee=l.getParamIndex(re),z=l.getModelContext(),p=.4*(z.getParamMax(ee)-z.getParamMin(ee)),de=z.getParamFloat(ee),be=j._$I0[$>=W?W-1:$],Ie=j._$I0[$+1>=W?W-1:$+1],Ye=de+((be<Ie&&Ie-be>p||be>Ie&&be-Ie>p?be:be+(Ie-be)*J)-de)*I;l.setParamFloat(re,Ye)}}$>=this._$yT&&(this._$E?(B._$z2=T,this.loopFadeIn&&(B._$bs=T)):B._$9L=!0),this._$eP=I},$t.prototype._$r0=function(){return this._$E},$t.prototype._$aL=function(l){this._$E=l},$t.prototype._$S0=function(){return this._$D0},$t.prototype._$U0=function(l){this._$D0=l},$t.prototype.isLoopFadeIn=function(){return this.loopFadeIn},$t.prototype.setLoopFadeIn=function(l){this.loopFadeIn=l},yt.prototype.clear=function(){this.size=0},yt.prototype.add=function(l){if(this._$P.length<=this.size){var T=new Float32Array(2*this.size);_e._$jT(this._$P,0,T,0,this.size),this._$P=T}this._$P[this.size++]=l},yt.prototype._$BL=function(){var l=new Float32Array(this.size);return _e._$jT(this._$P,0,l,0,this.size),l},rt._$Fr=0,rt._$hs=1,rt._$ws=100,rt._$Ns=101,rt._$xs=102,rt._$us=103,rt._$qs=104,rt._$Ys=105,Ct.prototype=new pe,Ct._$gT=new Array,Ct.prototype._$zP=function(){this._$GS=new _t,this._$GS._$zP()},Ct.prototype._$F0=function(l){pe.prototype._$F0.call(this,l),this._$A=l._$6L(),this._$o=l._$6L(),this._$GS=l._$nP(),this._$Eo=l._$nP(),pe.prototype.readV2_opacity.call(this,l)},Ct.prototype.init=function(l){var T=new St(this),I=(this._$o+1)*(this._$A+1);return T._$Cr!=null&&(T._$Cr=null),T._$Cr=new Float32Array(2*I),T._$hr!=null&&(T._$hr=null),this._$32()?T._$hr=new Float32Array(2*I):T._$hr=null,T},Ct.prototype._$Nr=function(l,T){var I=T;if(this._$GS._$Ur(l)){var B=this._$VT(),N=Ct._$gT;N[0]=!1,ne._$Vr(l,this._$GS,N,B,this._$Eo,I._$Cr,0,2),T._$Ib(N[0]),this.interpolateOpacity(l,this._$GS,T,N)}},Ct.prototype._$2b=function(l,T){var I=T;if(I._$hS(!0),this._$32()){var B=this.getTargetBaseDataID();if(I._$8r==pe._$ur&&(I._$8r=l.getBaseDataIndex(B)),I._$8r<0)ce._$so&&u._$li("_$L _$0P _$G :: %s",B),I._$hS(!1);else{var N=l.getBaseData(I._$8r),$=l._$q2(I._$8r);if(N!=null&&$._$yo()){var J=$.getTotalScale();I.setTotalScale_notForClient(J);var r=$.getTotalOpacity();I.setTotalOpacity(r*I.getInterpolatedOpacity()),N._$nb(l,$,I._$Cr,I._$hr,this._$VT(),0,2),I._$hS(!0)}else I._$hS(!1)}}else I.setTotalOpacity(I.getInterpolatedOpacity())},Ct.prototype._$nb=function(l,T,I,B,N,$,J){var r=T,j=r._$hr!=null?r._$hr:r._$Cr;Ct.transformPoints_sdk2(I,B,N,$,J,j,this._$o,this._$A)},Ct.transformPoints_sdk2=function(l,T,I,B,N,$,J,r){for(var j,W,re,O=I*N,ee=0,z=0,p=0,de=0,be=0,Ie=0,Ye=!1,fe=B;fe<O;fe+=N){var ze,lt,dt,q;if(dt=l[fe],lt=(q=l[fe+1])*r,(ze=dt*J)<0||lt<0||J<=ze||r<=lt){var Ae=J+1;if(!Ye){Ye=!0,ee=.25*($[2*(0+0*Ae)]+$[2*(J+0*Ae)]+$[2*(0+r*Ae)]+$[2*(J+r*Ae)]),z=.25*($[2*(0+0*Ae)+1]+$[2*(J+0*Ae)+1]+$[2*(0+r*Ae)+1]+$[2*(J+r*Ae)+1]);var bt=$[2*(J+r*Ae)]-$[2*(0+0*Ae)],he=$[2*(J+r*Ae)+1]-$[2*(0+0*Ae)+1],Te=$[2*(J+0*Ae)]-$[2*(0+r*Ae)],gt=$[2*(J+0*Ae)+1]-$[2*(0+r*Ae)+1];ee-=.5*((p=.5*(bt+Te))+(be=.5*(bt-Te))),z-=.5*((de=.5*(he+gt))+(Ie=.5*(he-gt)))}if(-2<dt&&dt<3&&-2<q&&q<3)if(dt<=0)if(q<=0){var Le=$[2*(0+0*Ae)],De=$[2*(0+0*Ae)+1],et=ee-2*p,Oe=z-2*de,it=ee-2*be,st=z-2*Ie,Qe=ee-2*p-2*be,nt=z-2*de-2*Ie;($e=.5*(dt- -2))+(Fe=.5*(q- -2))<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe))}else if(q>=1)it=$[2*(0+r*Ae)],st=$[2*(0+r*Ae)+1],Qe=ee-2*p+1*be,nt=z-2*de+1*Ie,Le=ee+3*be,De=z+3*Ie,et=ee-2*p+3*be,Oe=z-2*de+3*Ie,($e=.5*(dt- -2))+(Fe=.5*(q-1))<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe));else{(at=0|lt)==r&&(at=r-1);var $e=.5*(dt- -2),Fe=lt-at,Nt=at/r,Gt=(at+1)/r;it=$[2*(0+at*Ae)],st=$[2*(0+at*Ae)+1],Le=$[2*(0+(at+1)*Ae)],De=$[2*(0+(at+1)*Ae)+1],Qe=ee-2*p+Nt*be,nt=z-2*de+Nt*Ie,et=ee-2*p+Gt*be,Oe=z-2*de+Gt*Ie,$e+Fe<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe))}else if(1<=dt)if(q<=0)et=$[2*(J+0*Ae)],Oe=$[2*(J+0*Ae)+1],Le=ee+3*p,De=z+3*de,Qe=ee+1*p-2*be,nt=z+1*de-2*Ie,it=ee+3*p-2*be,st=z+3*de-2*Ie,($e=.5*(dt-1))+(Fe=.5*(q- -2))<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe));else if(q>=1)Qe=$[2*(J+r*Ae)],nt=$[2*(J+r*Ae)+1],it=ee+3*p+1*be,st=z+3*de+1*Ie,et=ee+1*p+3*be,Oe=z+1*de+3*Ie,Le=ee+3*p+3*be,De=z+3*de+3*Ie,($e=.5*(dt-1))+(Fe=.5*(q-1))<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe));else{var at;(at=0|lt)==r&&(at=r-1),$e=.5*(dt-1),Fe=lt-at,Nt=at/r,Gt=(at+1)/r,Qe=$[2*(J+at*Ae)],nt=$[2*(J+at*Ae)+1],et=$[2*(J+(at+1)*Ae)],Oe=$[2*(J+(at+1)*Ae)+1],it=ee+3*p+Nt*be,st=z+3*de+Nt*Ie,Le=ee+3*p+Gt*be,De=z+3*de+Gt*Ie,$e+Fe<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe))}else if(q<=0){(xt=0|ze)==J&&(xt=J-1),$e=ze-xt,Fe=.5*(q- -2);var Pt=xt/J,Lt=(xt+1)/J;et=$[2*(xt+0*Ae)],Oe=$[2*(xt+0*Ae)+1],Le=$[2*(xt+1+0*Ae)],De=$[2*(xt+1+0*Ae)+1],Qe=ee+Pt*p-2*be,nt=z+Pt*de-2*Ie,it=ee+Lt*p-2*be,st=z+Lt*de-2*Ie,$e+Fe<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe))}else if(q>=1){var xt;(xt=0|ze)==J&&(xt=J-1),$e=ze-xt,Fe=.5*(q-1),Pt=xt/J,Lt=(xt+1)/J,Qe=$[2*(xt+r*Ae)],nt=$[2*(xt+r*Ae)+1],it=$[2*(xt+1+r*Ae)],st=$[2*(xt+1+r*Ae)+1],et=ee+Pt*p+3*be,Oe=z+Pt*de+3*Ie,Le=ee+Lt*p+3*be,De=z+Lt*de+3*Ie,$e+Fe<=1?(T[fe]=Qe+(it-Qe)*$e+(et-Qe)*Fe,T[fe+1]=nt+(st-nt)*$e+(Oe-nt)*Fe):(T[fe]=Le+(et-Le)*(1-$e)+(it-Le)*(1-Fe),T[fe+1]=De+(Oe-De)*(1-$e)+(st-De)*(1-Fe))}else System.err.printf(`_$li calc : %.4f , %.4f					@@BDBoxGrid
`,dt,q);else T[fe]=ee+dt*p+q*be,T[fe+1]=z+dt*de+q*Ie}else j=2*((0|ze)+(0|lt)*(J+1)),(W=ze-(0|ze))+(re=lt-(0|lt))<1?(T[fe]=$[j]*(1-W-re)+$[j+2]*W+$[j+2*(J+1)]*re,T[fe+1]=$[j+1]*(1-W-re)+$[j+3]*W+$[j+2*(J+1)+1]*re):(T[fe]=$[j+2*(J+1)+2]*(W-1+re)+$[j+2*(J+1)]*(1-W)+$[j+2]*(1-re),T[fe+1]=$[j+2*(J+1)+3]*(W-1+re)+$[j+2*(J+1)+1]*(1-W)+$[j+3]*(1-re))}},Ct.prototype.transformPoints_sdk1=function(l,T,I,B,N,$,J){for(var r,j,W,re,O,ee,z,p=T,de=this._$o,be=this._$A,Ie=N*J,Ye=p._$hr!=null?p._$hr:p._$Cr,fe=$;fe<Ie;fe+=J)ce._$ts?((r=I[fe])<0?r=0:r>1&&(r=1),(j=I[fe+1])<0?j=0:j>1&&(j=1),(W=0|(r*=de))>de-1&&(W=de-1),(re=0|(j*=be))>be-1&&(re=be-1),ee=r-W,z=j-re,O=2*(W+re*(de+1))):(ee=(r=I[fe]*de)-(0|r),z=(j=I[fe+1]*be)-(0|j),O=2*((0|r)+(0|j)*(de+1))),ee+z<1?(B[fe]=Ye[O]*(1-ee-z)+Ye[O+2]*ee+Ye[O+2*(de+1)]*z,B[fe+1]=Ye[O+1]*(1-ee-z)+Ye[O+3]*ee+Ye[O+2*(de+1)+1]*z):(B[fe]=Ye[O+2*(de+1)+2]*(ee-1+z)+Ye[O+2*(de+1)]*(1-ee)+Ye[O+2]*(1-z),B[fe+1]=Ye[O+2*(de+1)+3]*(ee-1+z)+Ye[O+2*(de+1)+1]*(1-ee)+Ye[O+3]*(1-z))},Ct.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},Ct.prototype.getType=function(){return pe._$_b},St.prototype=new Kt,Ze._$42=0,Ze.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},Ze.prototype._$F0=function(l){this._$g0=l._$8L(),this.visible=l._$8L(),this._$NL=l._$nP(),this._$3S=l._$nP(),this._$aS=l._$nP()},Ze.prototype.init=function(l){var T=new or(this);return T.setPartsOpacity(this.isVisible()?1:0),T},Ze.prototype._$6o=function(l){if(this._$3S==null)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(l)},Ze.prototype._$3o=function(l){if(this._$aS==null)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(l)},Ze.prototype._$Zo=function(l){this._$3S=l},Ze.prototype._$xo=function(l){this._$aS=l},Ze.prototype.isVisible=function(){return this.visible},Ze.prototype._$uL=function(){return this._$g0},Ze.prototype._$KP=function(l){this.visible=l},Ze.prototype._$ET=function(l){this._$g0=l},Ze.prototype.getBaseData=function(){return this._$3S},Ze.prototype.getDrawData=function(){return this._$aS},Ze.prototype._$p2=function(){return this._$NL},Ze.prototype._$ob=function(l){this._$NL=l},Ze.prototype.getPartsID=function(){return this._$NL},Ze.prototype._$MP=function(l){this._$NL=l},or.prototype=new function(){},or.prototype.getPartsOpacity=function(){return this._$VS},or.prototype.setPartsOpacity=function(l){this._$VS=l},br._$L7=function(){E._$27(),Se._$27(),Re._$27(),w._$27()},br.prototype.toString=function(){return this.id},qr.prototype._$1s=function(){return this._$4S},qr.prototype._$zP=function(){this._$4S=new Array},qr.prototype._$F0=function(l){this._$4S=l._$nP()},qr.prototype._$Ks=function(l){this._$4S.push(l)},Ht.tr=new ge,Ht._$50=new ge,Ht._$Ti=new Array(0,0),Ht._$Pi=new Array(0,0),Ht._$B=new Array(0,0),Ht.prototype._$lP=function(l,T,I,B){this.viewport=new Array(l,T,I,B)},Ht.prototype._$bL=function(){this.context.save();var l=this.viewport;l!=null&&(this.context.beginPath(),this.context._$Li(l[0],l[1],l[2],l[3]),this.context.clip())},Ht.prototype._$ei=function(){this.context.restore()},Ht.prototype.drawElements=function(l,T,I,B,N,$,J,r){try{N!=this._$Qo&&(this._$Qo=N,this.context.globalAlpha=N);for(var j=T.length,W=l.width,re=l.height,O=this.context,ee=this._$xP,z=this._$uP,p=this._$6r,de=this._$3r,be=Ht.tr,Ie=Ht._$Ti,Ye=Ht._$Pi,fe=Ht._$B,ze=0;ze<j;ze+=3){O.save();var lt=T[ze],dt=T[ze+1],q=T[ze+2],Ae=ee+p*I[2*lt],bt=z+de*I[2*lt+1],he=ee+p*I[2*dt],Te=z+de*I[2*dt+1],gt=ee+p*I[2*q],Le=z+de*I[2*q+1];J&&(J._$PS(Ae,bt,fe),Ae=fe[0],bt=fe[1],J._$PS(he,Te,fe),he=fe[0],Te=fe[1],J._$PS(gt,Le,fe),gt=fe[0],Le=fe[1]);var De=W*B[2*lt],et=re-re*B[2*lt+1],Oe=W*B[2*dt],it=re-re*B[2*dt+1],st=W*B[2*q],Qe=re-re*B[2*q+1],nt=Math.atan2(it-et,Oe-De),$e=Math.atan2(Te-bt,he-Ae),Fe=he-Ae,Nt=Te-bt,Gt=Math.sqrt(Fe*Fe+Nt*Nt),at=Oe-De,Pt=it-et,Lt=Gt/Math.sqrt(at*at+Pt*Pt);ie._$ni(st,Qe,De,et,Oe-De,it-et,-(it-et),Oe-De,Ie),ie._$ni(gt,Le,Ae,bt,he-Ae,Te-bt,-(Te-bt),he-Ae,Ye);var xt=(Ye[0]-Ie[0])/Ie[1],Xt=Math.min(De,Oe,st),It=Math.max(De,Oe,st),ur=Math.min(et,it,Qe),Cr=Math.max(et,it,Qe),Gr=Math.floor(Xt),jr=Math.floor(ur),li=Math.ceil(It),Jr=Math.ceil(Cr);if(be.identity(),be.translate(Ae,bt),be.rotate($e),be.scale(1,Ye[1]/Ie[1]),be.shear(xt,0),be.scale(Lt,Lt),be.rotate(-nt),be.translate(-De,-et),be.setContext(O),$||($=1.2),ce.IGNORE_EXPAND&&($=0),ce.USE_CACHED_POLYGON_IMAGE){var Or=r._$e0;if(Or.gl_cacheImage=Or.gl_cacheImage||{},!Or.gl_cacheImage[ze]){var rr=Ht.createCanvas(li-Gr,Jr-jr);ce.DEBUG_DATA.LDGL_CANVAS_MB=ce.DEBUG_DATA.LDGL_CANVAS_MB||0,ce.DEBUG_DATA.LDGL_CANVAS_MB+=(li-Gr)*(Jr-jr)*4;var Qr=rr.getContext("2d");Qr.translate(-Gr,-jr),Ht.clip(Qr,be,$,Gt,De,et,Oe,it,st,Qe,Ae,bt,he,Te,gt,Le),Qr.drawImage(l,0,0),Or.gl_cacheImage[ze]={cacheCanvas:rr,cacheContext:Qr}}O.drawImage(Or.gl_cacheImage[ze].cacheCanvas,Gr,jr)}else ce.IGNORE_CLIP||Ht.clip(O,be,$,Gt,De,et,Oe,it,st,Qe,Ae,bt,he,Te,gt,Le),ce.USE_ADJUST_TRANSLATION&&(Xt=0,It=W,ur=0,Cr=re),O.drawImage(l,Xt,ur,It-Xt,Cr-ur,Xt,ur,It-Xt,Cr-ur);O.restore()}}catch(Ti){u._$Rb(Ti)}},Ht.clip=function(l,T,I,B,N,$,J,r,j,W,re,O,ee,z,p,de){I>.02?Ht.expandClip(l,T,I,B,re,O,ee,z,p,de):Ht.clipWithTransform(l,null,N,$,J,r,j,W)},Ht.expandClip=function(l,T,I,B,N,$,J,r,j,W){var re=J-N,O=r-$,ee=j-N,z=W-$,p=re*z-O*ee>0?I:-I,de=-O,be=re,Ie=j-J,Ye=W-r,fe=-Ye,ze=Ie,lt=Math.sqrt(Ie*Ie+Ye*Ye),dt=-z,q=ee,Ae=Math.sqrt(ee*ee+z*z),bt=N-p*de/B,he=$-p*be/B,Te=J-p*de/B,gt=r-p*be/B,Le=J-p*fe/lt,De=r-p*ze/lt,et=j-p*fe/lt,Oe=W-p*ze/lt,it=N+p*dt/Ae,st=$+p*q/Ae,Qe=j+p*dt/Ae,nt=W+p*q/Ae,$e=Ht._$50;return T._$P2($e)!=null&&(Ht.clipWithTransform(l,$e,bt,he,Te,gt,Le,De,et,Oe,Qe,nt,it,st),!0)},Ht.clipWithTransform=function(l,T,I,B,N,$,J,r){if(arguments.length<7)u._$li("err : @LDGL.clip()");else if(arguments[1]instanceof ge){var j=Ht._$B,W=T,re=arguments;if(l.beginPath(),W){W._$PS(re[2],re[3],j),l.moveTo(j[0],j[1]);for(var O=4;O<re.length;O+=2)W._$PS(re[O],re[O+1],j),l.lineTo(j[0],j[1])}else for(l.moveTo(re[2],re[3]),O=4;O<re.length;O+=2)l.lineTo(re[O],re[O+1]);l.clip()}else u._$li("err : a[0] is _$6 LDTransform @LDGL.clip()")},Ht.createCanvas=function(l,T){var I=document.createElement("canvas");return I.setAttribute("width",l),I.setAttribute("height",T),I||u._$li("err : "+I),I},Ht.dumpValues=function(){for(var l="",T=0;T<arguments.length;T++)l+="["+T+"]= "+arguments[T].toFixed(3)+" , ";console.log(l)},ui.prototype._$F0=function(l){this._$TT=l._$_T(),this._$LT=l._$_T(),this._$FS=l._$_T(),this._$wL=l._$nP()},ui.prototype.getMinValue=function(){return this._$TT},ui.prototype.getMaxValue=function(){return this._$LT},ui.prototype.getDefaultValue=function(){return this._$FS},ui.prototype.getParamID=function(){return this._$wL},Kt.prototype._$yo=function(){return this._$AT&&!this._$JS},Kt.prototype._$hS=function(l){this._$AT=l},Kt.prototype._$GT=function(){return this._$e0},Kt.prototype._$l2=function(l){this._$IP=l},Kt.prototype.getPartsIndex=function(){return this._$IP},Kt.prototype._$x2=function(){return this._$JS},Kt.prototype._$Ib=function(l){this._$JS=l},Kt.prototype.getTotalScale=function(){return this.totalScale},Kt.prototype.setTotalScale_notForClient=function(l){this.totalScale=l},Kt.prototype.getInterpolatedOpacity=function(){return this._$7s},Kt.prototype.setInterpolatedOpacity=function(l){this._$7s=l},Kt.prototype.getTotalOpacity=function(l){return this.totalOpacity},Kt.prototype.setTotalOpacity=function(l){this.totalOpacity=l},ce._$2s="2.1.00_1",ce._$Kr=201001e3,ce._$sP=!0,ce._$so=!0,ce._$cb=!1,ce._$3T=!0,ce._$Ts=!0,ce._$fb=!0,ce._$ts=!0,ce.L2D_DEFORMER_EXTEND=!0,ce._$Wb=!1,ce._$yr=!1,ce._$Zs=!1,ce.L2D_NO_ERROR=0,ce._$i7=1e3,ce._$9s=1001,ce._$es=1100,ce._$r7=2e3,ce._$07=2001,ce._$b7=2002,ce._$H7=4e3,ce.L2D_COLOR_BLEND_MODE_MULT=0,ce.L2D_COLOR_BLEND_MODE_ADD=1,ce.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,ce._$6b=!0,ce._$cT=0,ce.clippingMaskBufferSize=256,ce.glContext=new Array,ce.frameBuffers=new Array,ce.fTexture=new Array,ce.IGNORE_CLIP=!1,ce.IGNORE_EXPAND=!1,ce.EXPAND_W=2,ce.USE_ADJUST_TRANSLATION=!0,ce.USE_CANVAS_TRANSFORM=!0,ce.USE_CACHED_POLYGON_IMAGE=!1,ce.DEBUG_DATA={},ce.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},ce.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ce.PROFILE_IOS_DEFAULT=ce.PROFILE_IOS_QUALITY,ce.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ce.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ce.initProfile=function(){He.isIOS()?ce.setupProfile(ce.PROFILE_IOS_DEFAULT):He.isAndroid()?ce.setupProfile(ce.PROFILE_ANDROID):ce.setupProfile(ce.PROFILE_DESKTOP)},ce.setupProfile=function(l,T){if(typeof l=="number")switch(l){case 9901:l=ce.PROFILE_IOS_SPEED;break;case 9902:l=ce.PROFILE_IOS_QUALITY;break;case 9903:l=ce.PROFILE_IOS_DEFAULT;break;case 9904:l=ce.PROFILE_ANDROID;break;case 9905:l=ce.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+l)}for(var I in arguments.length<2&&(T=!0),T&&console.log("profile : "+l.PROFILE_NAME),l)ce[I]=l[I],T&&console.log("  ["+I+"] = "+l[I])},ce.init=function(){ce._$6b&&(console.log("Live2D %s",ce._$2s),ce._$6b=!1,ce.initProfile())},ce.getVersionStr=function(){return ce._$2s},ce.getVersionNo=function(){return ce._$Kr},ce._$sT=function(l){ce._$cT=l},ce.getError=function(){var l=ce._$cT;return ce._$cT=0,l},ce.dispose=function(){ce.glContext=[],ce.frameBuffers=[],ce.fTexture=[]},ce.setGL=function(l,T){var I=T||0;ce.glContext[I]=l},ce.getGL=function(l){return ce.glContext[l]},ce.setClippingMaskBufferSize=function(l){ce.clippingMaskBufferSize=l},ce.getClippingMaskBufferSize=function(){return ce.clippingMaskBufferSize},ce.deleteBuffer=function(l){ce.getGL(l).deleteFramebuffer(ce.frameBuffers[l].framebuffer),delete ce.frameBuffers[l],delete ce.glContext[l]},an._$r2=function(l){return l<0?0:l>1?1:.5-.5*Math.cos(l*Ut.PI_F)},Zr._$fr=-1,Zr.prototype.toString=function(){return this._$ib},Ft.prototype=new qe,Ft._$42=0,Ft._$Os=30,Ft._$ms=0,Ft._$ns=1,Ft._$_s=2,Ft._$gT=new Array,Ft.prototype._$_S=function(l){this._$LP=l},Ft.prototype.getTextureNo=function(){return this._$LP},Ft.prototype._$ZL=function(){return this._$Qi},Ft.prototype._$H2=function(){return this._$JP},Ft.prototype.getNumPoints=function(){return this._$d0},Ft.prototype.getType=function(){return qe._$wb},Ft.prototype._$B2=function(l,T,I){var B=T,N=B._$hr!=null?B._$hr:B._$Cr;switch(je._$do){default:case je._$Ms:throw new Error("_$L _$ro ");case je._$Qs:for(var $=this._$d0-1;$>=0;--$)N[$*je._$No+4]=I}},Ft.prototype._$zP=function(){this._$GS=new _t,this._$GS._$zP()},Ft.prototype._$F0=function(l){qe.prototype._$F0.call(this,l),this._$LP=l._$6L(),this._$d0=l._$6L(),this._$Yo=l._$6L();var T=l._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var I=3*this._$Yo-1;I>=0;--I)this._$BP[I]=T[I];if(this._$Eo=l._$nP(),this._$Qi=l._$nP(),l.getFormatVersion()>=ht._$s7){if(this._$JP=l._$6L(),this._$JP!=0){if(1&this._$JP){var B=l._$6L();this._$5P==null&&(this._$5P=new Object),this._$5P._$Hb=parseInt(B)}this._$JP&Ft._$Os?this._$6s=(this._$JP&Ft._$Os)>>1:this._$6s=Ft._$ms,32&this._$JP&&(this.culling=!1)}}else this._$JP=0},Ft.prototype.init=function(l){var T=new hn(this),I=this._$d0*je._$No,B=this._$32();switch(T._$Cr!=null&&(T._$Cr=null),T._$Cr=new Float32Array(I),T._$hr!=null&&(T._$hr=null),T._$hr=B?new Float32Array(I):null,je._$do){default:case je._$Ms:if(je._$Ls)for(var N=this._$d0-1;N>=0;--N){var $=N<<1;this._$Qi[$+1]=1-this._$Qi[$+1]}break;case je._$Qs:for(N=this._$d0-1;N>=0;--N){$=N<<1;var J=N*je._$No,r=this._$Qi[$],j=this._$Qi[$+1];T._$Cr[J]=r,T._$Cr[J+1]=j,T._$Cr[J+4]=0,B&&(T._$hr[J]=r,T._$hr[J+1]=j,T._$hr[J+4]=0)}}return T},Ft.prototype._$Nr=function(l,T){var I=T;if(this!=I._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(l)&&(qe.prototype._$Nr.call(this,l,I),!I._$IS[0])){var B=Ft._$gT;B[0]=!1,ne._$Vr(l,this._$GS,B,this._$d0,this._$Eo,I._$Cr,je._$i2,je._$No)}},Ft.prototype._$2b=function(l,T){try{this!=T._$GT()&&console.log("### assert!! ### ");var I=!1;T._$IS[0]&&(I=!0);var B=T;if(!I&&(qe.prototype._$2b.call(this,l),this._$32())){var N=this.getTargetBaseDataID();if(B._$8r==qe._$ur&&(B._$8r=l.getBaseDataIndex(N)),B._$8r<0)ce._$so&&u._$li("_$L _$0P _$G :: %s",N);else{var $=l.getBaseData(B._$8r),J=l._$q2(B._$8r);$==null||J._$x2()?B._$AT=!1:($._$nb(l,J,B._$Cr,B._$hr,this._$d0,je._$i2,je._$No),B._$AT=!0),B.baseOpacity=J.getTotalOpacity()}}}catch(r){throw r}},Ft.prototype.draw=function(l,T,I){if(this!=I._$GT()&&console.log("### assert!! ### "),!I._$IS[0]){var B=I,N=this._$LP;N<0&&(N=1);var $=this.getOpacity(T,B)*I._$VS*I.baseOpacity,J=B._$hr!=null?B._$hr:B._$Cr;l.setClipBufPre_clipContextForDraw(I.clipBufPre_clipContext),l._$WP(this.culling),l._$Uo(N,3*this._$Yo,this._$BP,J,this._$Qi,$,this._$6s,B)}},Ft.prototype.dump=function(){console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`,this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var l=0;l<this._$BP.length;l++)console.log("%5d ,",this._$BP[l]);for(console.log(`
  _$5i _$30`),l=0;l<this._$Eo.length;l++){console.log(`
    _$30[%d] = `,l);for(var T=this._$Eo[l],I=0;I<T.length;I++)console.log("%6.2f, ",T[I])}console.log(`
`)},Ft.prototype._$72=function(l){return this._$5P==null?null:this._$5P[l]},Ft.prototype.getIndexArray=function(){return this._$BP},hn.prototype=new Wt,hn.prototype.getTransformedPoints=function(){return this._$hr!=null?this._$hr:this._$Cr},Qn.prototype._$HT=function(l){this.x=l.x,this.y=l.y},Qn.prototype._$HT=function(l,T){this.x=l,this.y=T},er.prototype=new e,er.loadModel=function(l){var T=new er;return e._$62(T,l),T},er.loadModel=function(l,T){var I=new er(T||0);return e._$62(I,l),I},er._$to=function(){return new er},er._$er=function(l){var T=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(T.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+T._$PL());for(var I=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],B=er.loadModel(T._$3b()),N=0;N<I.length;N++){var $=new _$5(I[N]);if($.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+$._$PL());B.setTexture(N,_$nL._$_o(l,$._$3b()))}return B},er.prototype.setGL=function(l){ce.setGL(l)},er.prototype.setTransform=function(l){this.drawParamWebGL.setTransform(l)},er.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},er.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},er.prototype._$K2=function(){this.drawParamWebGL._$K2()},er.prototype.setTexture=function(l,T){this.drawParamWebGL==null&&u._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(l,T)},er.prototype.setTexture=function(l,T){this.drawParamWebGL==null&&u._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(l,T)},er.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},er.prototype._$Ds=function(l){this.drawParamWebGL._$Ds(l)},er.prototype.getDrawParam=function(){return this.drawParamWebGL},er.prototype.setMatrix=function(l){this.drawParamWebGL.setMatrix(l)},er.prototype.setPremultipliedAlpha=function(l){this.drawParamWebGL.setPremultipliedAlpha(l)},er.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},er.prototype.setAnisotropy=function(l){this.drawParamWebGL.setAnisotropy(l)},er.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()},ti.prototype._$tb=function(){return this.motions},ti.prototype.startMotion=function(l,T){for(var I=null,B=this.motions.length,N=0;N<B;++N)(I=this.motions[N])!=null&&(I._$qS(I._$w0.getFadeOut()),this._$eb&&u._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`,B,I._$sr));if(l==null)return-1;(I=new ue)._$w0=l,this.motions.push(I);var $=I._$sr;return this._$eb&&u._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`,B,$),$},ti.prototype.updateParam=function(l){try{for(var T=!1,I=0;I<this.motions.length;I++){var B=this.motions[I];if(B!=null){var N=B._$w0;N!=null?(N.updateParam(l,B),T=!0,B.isFinished()&&(this._$eb&&u._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`,this.motions.length-1,B._$sr),this.motions.splice(I,1),I--)):(this.motions=this.motions.splice(I,1),I--)}else this.motions.splice(I,1),I--}return T}catch($){return u._$li($),!0}},ti.prototype.isFinished=function(l){if(arguments.length>=1){for(var T=0;T<this.motions.length;T++)if((I=this.motions[T])!=null&&I._$sr==l&&!I.isFinished())return!1;return!0}for(T=0;T<this.motions.length;T++){var I;if((I=this.motions[T])!=null)if(I._$w0!=null){if(!I.isFinished())return!1}else this.motions.splice(T,1),T--;else this.motions.splice(T,1),T--}return!0},ti.prototype.stopAllMotions=function(){for(var l=0;l<this.motions.length;l++){var T=this.motions[l];T!=null?(T._$w0,this.motions.splice(l,1),l--):(this.motions.splice(l,1),l--)}},ti.prototype._$Zr=function(l){this._$eb=l},ti.prototype._$e=function(){console.log(`-- _$R --
`);for(var l=0;l<this.motions.length;l++){var T=this.motions[l]._$w0;console.log(`MotionQueueEnt[%d] :: %s
`,this.motions.length,T.toString())}},ue._$Gs=0,ue.prototype.isFinished=function(){return this._$9L},ue.prototype._$qS=function(l){var T=_e.getUserTimeMSec()+l;(this._$Do<0||T<this._$Do)&&(this._$Do=T)},ue.prototype._$Bs=function(){return this._$sr},ge.prototype.setContext=function(l){var T=this.m;l.transform(T[0],T[1],T[3],T[4],T[6],T[7])},ge.prototype.toString=function(){for(var l="LDTransform { ",T=0;T<9;T++)l+=this.m[T].toFixed(2)+" ,";return l+=" }"},ge.prototype.identity=function(){var l=this.m;l[0]=l[4]=l[8]=1,l[1]=l[2]=l[3]=l[5]=l[6]=l[7]=0},ge.prototype._$PS=function(l,T,I){I==null&&(I=new Array(0,0));var B=this.m;return I[0]=B[0]*l+B[3]*T+B[6],I[1]=B[1]*l+B[4]*T+B[7],I},ge.prototype._$P2=function(l){l||(l=new ge);var T=this.m,I=T[0],B=T[1],N=T[2],$=T[3],J=T[4],r=T[5],j=T[6],W=T[7],re=T[8],O=I*J*re+B*r*j+N*$*W-I*r*W-N*J*j-B*$*re;if(O==0)return null;var ee=1/O;return l.m[0]=ee*(J*re-W*r),l.m[1]=ee*(W*N-B*re),l.m[2]=ee*(B*r-J*N),l.m[3]=ee*(j*r-$*re),l.m[4]=ee*(I*re-j*N),l.m[5]=ee*($*N-I*r),l.m[6]=ee*($*W-j*J),l.m[7]=ee*(j*B-I*W),l.m[8]=ee*(I*J-$*B),l},ge.prototype.transform=function(l,T,I){I==null&&(I=new Array(0,0));var B=this.m;return I[0]=B[0]*l+B[3]*T+B[6],I[1]=B[1]*l+B[4]*T+B[7],I},ge.prototype.translate=function(l,T){var I=this.m;I[6]=I[0]*l+I[3]*T+I[6],I[7]=I[1]*l+I[4]*T+I[7],I[8]=I[2]*l+I[5]*T+I[8]},ge.prototype.scale=function(l,T){var I=this.m;I[0]*=l,I[1]*=l,I[2]*=l,I[3]*=T,I[4]*=T,I[5]*=T},ge.prototype.shear=function(l,T){var I=this.m,B=I[0]+I[3]*T,N=I[1]+I[4]*T,$=I[2]+I[5]*T;I[3]=I[0]*l+I[3],I[4]=I[1]*l+I[4],I[5]=I[2]*l+I[5],I[0]=B,I[1]=N,I[2]=$},ge.prototype.rotate=function(l){var T=this.m,I=Math.cos(l),B=Math.sin(l),N=T[0]*I+T[3]*B,$=T[1]*I+T[4]*B,J=T[2]*I+T[5]*B;T[3]=-T[0]*B+T[3]*I,T[4]=-T[1]*B+T[4]*I,T[5]=-T[2]*B+T[5]*I,T[0]=N,T[1]=$,T[2]=J},ge.prototype.concatenate=function(l){var T=this.m,I=l.m,B=T[0]*I[0]+T[3]*I[1]+T[6]*I[2],N=T[1]*I[0]+T[4]*I[1]+T[7]*I[2],$=T[2]*I[0]+T[5]*I[1]+T[8]*I[2],J=T[0]*I[3]+T[3]*I[4]+T[6]*I[5],r=T[1]*I[3]+T[4]*I[4]+T[7]*I[5],j=T[2]*I[3]+T[5]*I[4]+T[8]*I[5],W=T[0]*I[6]+T[3]*I[7]+T[6]*I[8],re=T[1]*I[6]+T[4]*I[7]+T[7]*I[8],O=T[2]*I[6]+T[5]*I[7]+T[8]*I[8];m[0]=B,m[1]=N,m[2]=$,m[3]=J,m[4]=r,m[5]=j,m[6]=W,m[7]=re,m[8]=O},Se.prototype=new br,Se._$eT=null,Se._$tP=new Object,Se._$2o=function(){return Se._$eT==null&&(Se._$eT=Se.getID("DST_BASE")),Se._$eT},Se._$27=function(){Se._$tP.clear(),Se._$eT=null},Se.getID=function(l){var T=Se._$tP[l];return T==null&&(T=new Se(l),Se._$tP[l]=T),T},Se.prototype._$3s=function(){return new Se},we.prototype=new ye,we._$9r=function(l){return new Float32Array(l)},we._$vb=function(l){return new Int16Array(l)},we._$cr=function(l,T){return l==null||l._$yL()<T.length?((l=we._$9r(2*T.length)).put(T),l._$oT(0)):(l.clear(),l.put(T),l._$oT(0)),l},we._$mb=function(l,T){return l==null||l._$yL()<T.length?((l=we._$vb(2*T.length)).put(T),l._$oT(0)):(l.clear(),l.put(T),l._$oT(0)),l},we._$Hs=function(){return this._$Gr},we._$as=function(l){this._$Gr=l},we.prototype.getGL=function(){return this.gl},we.prototype.setGL=function(l){this.gl=l},we.prototype.setTransform=function(l){this.transform=l},we.prototype._$ZT=function(){var l=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=l.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),l.disable(l.SCISSOR_TEST),l.disable(l.STENCIL_TEST),l.disable(l.DEPTH_TEST),l.frontFace(l.CW),l.enable(l.BLEND),l.colorMask(1,1,1,1),l.bindBuffer(l.ARRAY_BUFFER,null),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null)},we.prototype._$Uo=function(l,T,I,B,N,$,J,r){if(!($<.01&&this.clipBufPre_clipContextMask==null)){$>.9&&ce.EXPAND_W;var j=this.gl;if(this.gl==null)throw new Error("gl is null");var W,re,O,ee,z=1*this._$C0*$,p=1*this._$tT*$,de=1*this._$WL*$,be=this._$lT*$;if(this.clipBufPre_clipContextMask!=null){j.frontFace(j.CCW),j.useProgram(this.shaderProgram),this._$vS=Ve(j,this._$vS,B),this._$no=kt(j,this._$no,I),j.enableVertexAttribArray(this.a_position_Loc),j.vertexAttribPointer(this.a_position_Loc,2,j.FLOAT,!1,0,0),this._$NT=Ve(j,this._$NT,N),j.activeTexture(j.TEXTURE1),j.bindTexture(j.TEXTURE_2D,this.textures[l]),j.uniform1i(this.s_texture0_Loc,1),j.enableVertexAttribArray(this.a_texCoord_Loc),j.vertexAttribPointer(this.a_texCoord_Loc,2,j.FLOAT,!1,0,0),j.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var Ie=this.getClipBufPre_clipContextMask().layoutChannelNo,Ye=this.getChannelFlagAsColor(Ie);j.uniform4f(this.u_channelFlag,Ye.r,Ye.g,Ye.b,Ye.a);var fe=this.getClipBufPre_clipContextMask().layoutBounds;j.uniform4f(this.u_baseColor_Loc,2*fe.x-1,2*fe.y-1,2*fe._$EL()-1,2*fe._$5T()-1),j.uniform1i(this.u_maskFlag_Loc,!0)}else this.getClipBufPre_clipContextDraw()!=null?(j.useProgram(this.shaderProgramOff),this._$vS=Ve(j,this._$vS,B),this._$no=kt(j,this._$no,I),j.enableVertexAttribArray(this.a_position_Loc_Off),j.vertexAttribPointer(this.a_position_Loc_Off,2,j.FLOAT,!1,0,0),this._$NT=Ve(j,this._$NT,N),j.activeTexture(j.TEXTURE1),j.bindTexture(j.TEXTURE_2D,this.textures[l]),j.uniform1i(this.s_texture0_Loc_Off,1),j.enableVertexAttribArray(this.a_texCoord_Loc_Off),j.vertexAttribPointer(this.a_texCoord_Loc_Off,2,j.FLOAT,!1,0,0),j.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),j.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),j.activeTexture(j.TEXTURE2),j.bindTexture(j.TEXTURE_2D,ce.fTexture[this.glno]),j.uniform1i(this.s_texture1_Loc_Off,2),Ie=this.getClipBufPre_clipContextDraw().layoutChannelNo,Ye=this.getChannelFlagAsColor(Ie),j.uniform4f(this.u_channelFlag_Loc_Off,Ye.r,Ye.g,Ye.b,Ye.a),j.uniform4f(this.u_baseColor_Loc_Off,z,p,de,be)):(j.useProgram(this.shaderProgram),this._$vS=Ve(j,this._$vS,B),this._$no=kt(j,this._$no,I),j.enableVertexAttribArray(this.a_position_Loc),j.vertexAttribPointer(this.a_position_Loc,2,j.FLOAT,!1,0,0),this._$NT=Ve(j,this._$NT,N),j.activeTexture(j.TEXTURE1),j.bindTexture(j.TEXTURE_2D,this.textures[l]),j.uniform1i(this.s_texture0_Loc,1),j.enableVertexAttribArray(this.a_texCoord_Loc),j.vertexAttribPointer(this.a_texCoord_Loc,2,j.FLOAT,!1,0,0),j.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),j.uniform4f(this.u_baseColor_Loc,z,p,de,be),j.uniform1i(this.u_maskFlag_Loc,!1));if(this.culling?this.gl.enable(j.CULL_FACE):this.gl.disable(j.CULL_FACE),this.gl.enable(j.BLEND),this.clipBufPre_clipContextMask!=null)W=j.ONE,re=j.ONE_MINUS_SRC_ALPHA,O=j.ONE,ee=j.ONE_MINUS_SRC_ALPHA;else switch(J){case Ft._$ms:W=j.ONE,re=j.ONE_MINUS_SRC_ALPHA,O=j.ONE,ee=j.ONE_MINUS_SRC_ALPHA;break;case Ft._$ns:W=j.ONE,re=j.ONE,O=j.ZERO,ee=j.ONE;break;case Ft._$_s:W=j.DST_COLOR,re=j.ONE_MINUS_SRC_ALPHA,O=j.ZERO,ee=j.ONE}j.blendEquationSeparate(j.FUNC_ADD,j.FUNC_ADD),j.blendFuncSeparate(W,re,O,ee),this.anisotropyExt&&j.texParameteri(j.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var ze=I.length;j.drawElements(j.TRIANGLES,ze,j.UNSIGNED_SHORT,0),j.bindTexture(j.TEXTURE_2D,null)}},we.prototype._$Rs=function(){throw new Error("_$Rs")},we.prototype._$Ds=function(l){throw new Error("_$Ds")},we.prototype._$K2=function(){for(var l=0;l<this.textures.length;l++)this.textures[l]!=0&&(this.gl._$K2(1,this.textures,l),this.textures[l]=null)},we.prototype.setTexture=function(l,T){this.textures[l]=T},we.prototype.initShader=function(){var l=this.gl;this.loadShaders2(),this.a_position_Loc=l.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=l.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=l.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=l.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=l.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=l.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=l.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=l.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=l.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_baseColor")},we.prototype.disposeShader=function(){var l=this.gl;this.shaderProgram&&(l.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(l.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},we.prototype.compileShader=function(l,T){var I=this.gl,B=T,N=I.createShader(l);if(N==null)return u._$Ji("_$L0 to create shader"),null;if(I.shaderSource(N,B),I.compileShader(N),!I.getShaderParameter(N,I.COMPILE_STATUS)){var $=I.getShaderInfoLog(N);return u._$Ji("_$L0 to compile shader : "+$),I.deleteShader(N),null}return N},we.prototype.loadShaders2=function(){var l=this.gl;if(this.shaderProgram=l.createProgram(),!this.shaderProgram||(this.shaderProgramOff=l.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(l.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return u._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(l.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return u._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(l.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return u._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(l.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return u._$Ji("OffFragment shader compile _$li!"),!1;if(l.attachShader(this.shaderProgram,this.vertShader),l.attachShader(this.shaderProgram,this.fragShader),l.attachShader(this.shaderProgramOff,this.vertShaderOff),l.attachShader(this.shaderProgramOff,this.fragShaderOff),l.linkProgram(this.shaderProgram),l.linkProgram(this.shaderProgramOff),!l.getProgramParameter(this.shaderProgram,l.LINK_STATUS)){var T=l.getProgramInfoLog(this.shaderProgram);return u._$Ji("_$L0 to link program: "+T),this.vertShader&&(l.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(l.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(l.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(l.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(l.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(l.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},we.prototype.createFramebuffer=function(){var l=this.gl,T=ce.clippingMaskBufferSize,I=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,I);var B=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,B),l.renderbufferStorage(l.RENDERBUFFER,l.RGBA4,T,T),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,B);var N=l.createTexture();return l.bindTexture(l.TEXTURE_2D,N),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,T,T,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,N,0),l.bindTexture(l.TEXTURE_2D,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),ce.fTexture[this.glno]=N,{framebuffer:I,renderbuffer:B,texture:ce.fTexture[this.glno]}},Tt.prototype._$fP=function(){var l,T,I,B=this._$ST();if(128&B){if(128&(l=this._$ST())){if(128&(T=this._$ST())){if(128&(I=this._$ST()))throw new Zr("_$L _$0P  _");return(127&B)<<21|(127&l)<<14|(127&T)<<7|255&I}return(127&B)<<14|(127&l)<<7|255&T}return(127&B)<<7|127&l}return 255&B},Tt.prototype.getFormatVersion=function(){return this._$S2},Tt.prototype._$gr=function(l){this._$S2=l},Tt.prototype._$3L=function(){return this._$fP()},Tt.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},Tt.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},Tt.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},Tt.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},Tt.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},Tt.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new Zr("_$L _$q read long")},Tt.prototype._$po=function(){return this._$zT(),this._$T.getInt8(this._$F++)!=0};var ut=!0;function Ut(){}function Wt(l){n||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=l)}function He(){}Tt.prototype._$bT=function(){this._$zT();var l=this._$3L(),T=null;if(ut)try{var I=new ArrayBuffer(2*l);T=new Uint16Array(I);for(var B=0;B<l;++B)T[B]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,T)}catch{ut=!1}try{var N=new Array;if(T==null)for(B=0;B<l;++B)N[B]=this._$T.getUint8(this._$F++);else for(B=0;B<l;++B)N[B]=T[B];return String.fromCharCode.apply(null,N)}catch($){console.log("read utf8 / _$rT _$L0 !! : "+$)}},Tt.prototype._$cS=function(){this._$zT();for(var l=this._$3L(),T=new Int32Array(l),I=0;I<l;I++)T[I]=this._$T.getInt32(this._$F),this._$F+=4;return T},Tt.prototype._$Tb=function(){this._$zT();for(var l=this._$3L(),T=new Float32Array(l),I=0;I<l;I++)T[I]=this._$T.getFloat32(this._$F),this._$F+=4;return T},Tt.prototype._$5b=function(){this._$zT();for(var l=this._$3L(),T=new Float64Array(l),I=0;I<l;I++)T[I]=this._$T.getFloat64(this._$F),this._$F+=8;return T},Tt.prototype._$nP=function(){return this._$Jb(-1)},Tt.prototype._$Jb=function(l){if(this._$zT(),l<0&&(l=this._$3L()),l==ht._$7P){var T=this._$6L();if(0<=T&&T<this._$Ko.length)return this._$Ko[T];throw new Zr("_$sL _$4i @_$m0")}var I=this._$4b(l);return this._$Ko.push(I),I},Tt.prototype._$4b=function(l){if(l==0)return null;if(l==50){var T=this._$bT();return N=Re.getID(T)}if(l==51)return T=this._$bT(),N=Se.getID(T);if(l==134)return T=this._$bT(),N=w.getID(T);if(l==60)return T=this._$bT(),N=E.getID(T);if(l>=48){var I=ht._$9o(l);return I!=null?(I._$F0(this),I):null}switch(l){case 1:return this._$bT();case 10:return this._$6L(),new o;case 11:return new ae(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new ae(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new le(this._$mP(),this._$mP());case 14:return new le(this._$_T(),this._$_T());case 15:for(var B=this._$3L(),N=new Array(B),$=0;$<B;$++)N[$]=this._$nP();return N;case 17:return N=new me(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new x(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Qn(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new Zr("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+l);default:throw new Zr("_$6 _$q : _$nP() NO _$i : "+l)}},Tt.prototype._$8L=function(){return this._$hL==0?this._$v0=this._$ST():this._$hL==8&&(this._$v0=this._$ST(),this._$hL=0),(this._$v0>>7-this._$hL++&1)==1},Tt.prototype._$zT=function(){this._$hL!=0&&(this._$hL=0)},Ut._$2S=Math.PI/180,Ut._$bS=Math.PI/180,Ut._$wS=180/Math.PI,Ut._$NS=180/Math.PI,Ut.PI_F=Math.PI,Ut._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],Ut._$92=function(l,T){var I=Math.atan2(l[1],l[0]),B=Math.atan2(T[1],T[0]);return Ut._$tS(I,B)},Ut._$tS=function(l,T){for(var I=l-T;I<-Math.PI;)I+=2*Math.PI;for(;I>Math.PI;)I-=2*Math.PI;return I},Ut._$9=function(l){return Math.sin(l)},Ut.fcos=function(l){return Math.cos(l)},Wt.prototype._$u2=function(){return this._$IS[0]},Wt.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},Wt.prototype._$GT=function(){return this._$e0},He._$W2=0,He.SYSTEM_INFO=null,He.USER_AGENT=navigator.userAgent,He.isIPhone=function(){return He.SYSTEM_INFO||He.setup(),He.SYSTEM_INFO._isIPhone},He.isIOS=function(){return He.SYSTEM_INFO||He.setup(),He.SYSTEM_INFO._isIPhone||He.SYSTEM_INFO._isIPad},He.isAndroid=function(){return He.SYSTEM_INFO||He.setup(),He.SYSTEM_INFO._isAndroid},He.getOSVersion=function(){return He.SYSTEM_INFO||He.setup(),He.SYSTEM_INFO.version},He.getOS=function(){return He.SYSTEM_INFO||He.setup(),He.SYSTEM_INFO._isIPhone||He.SYSTEM_INFO._isIPad?"iOS":He.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},He.setup=function(){var l,T=He.USER_AGENT;function I(N,$){for(var J=N.substring($).split(/[ _,;\.]/),r=0,j=0;j<=2&&!isNaN(J[j]);j++){var W=parseInt(J[j]);if(W<0||W>999){u._$li("err : "+W+" @UtHtml5.setup()"),r=0;break}r+=W*Math.pow(1e3,2-j)}return r}var B=He.SYSTEM_INFO={userAgent:T};if((l=T.indexOf("iPhone OS "))>=0)B.os="iPhone",B._isIPhone=!0,B.version=I(T,l+10);else if((l=T.indexOf("iPad"))>=0){if((l=T.indexOf("CPU OS"))<0)return void u._$li(" err : "+T+" @UtHtml5.setup()");B.os="iPad",B._isIPad=!0,B.version=I(T,l+7)}else(l=T.indexOf("Android"))>=0?(B.os="Android",B._isAndroid=!0,B.version=I(T,l+8)):(B.os="-",B.version=-1)},window.UtSystem=_e,window.UtDebug=u,window.LDTransform=ge,window.LDGL=Ht,window.Live2D=ce,window.Live2DModelWebGL=er,window.Live2DModelJS=jt,window.Live2DMotion=$t,window.MotionQueueManager=ti,window.PhysicsHair=L,window.AMotion=h,window.PartsDataID=w,window.DrawDataID=Re,window.BaseDataID=Se,window.ParamID=E,ce.init(),n=!1}(),function(n){n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2"}(Vi||(Vi={})),function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS"}(Is||(Is={})),function(n){n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL"}(bo||(bo={})),function(n){n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR"}(ft||(ft={})),function(n){n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(gi||(gi={})),function(n){n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ce||(Ce={})),function(n){n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Pn||(Pn={})),function(n){n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT"}(ct||(ct={})),function(n){n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT"}(xo||(xo={})),function(n){n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR"}(Di||(Di={})),function(n){n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}($i||($i={})),function(n){n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL"}(bi||(bi={})),function(n){n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(xi||(xi={})),function(n){n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT"}(_i||(_i={})),function(n){n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL"}(Ao||(Ao={})),function(n){n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp"}(ei||(ei={})),function(n){n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR"}(Pr||(Pr={})),function(n){n[n.RED=1]="RED",n[n.GREEN=2]="GREEN",n[n.BLUE=4]="BLUE",n[n.ALPHA=8]="ALPHA"}(Nh||(Nh={})),function(n){n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH"}(cr||(cr={})),function(n){n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Li||(Li={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var k0={createCanvas:function(n,e){var t=document.createElement("canvas");return t.width=n,t.height=e,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var n;return(n=document.baseURI)!==null&&n!==void 0?n:window.location.href},fetch:function(n,e){return fetch(n,e)}},Xo=/iPhone/i,Bh=/iPod/i,Uh=/iPad/i,Gh=/\biOS-universal(?:.+)Mac\b/i,Vo=/\bAndroid(?:.+)Mobile\b/i,Xh=/Android/i,Ln=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,js=/Silk/i,Fi=/Windows Phone/i,Vh=/\bWindows(?:.+)ARM\b/i,jh=/BlackBerry/i,Hh=/BB10/i,Yh=/Opera Mini/i,zh=/\b(CriOS|Chrome)(?:.+)Mobile/i,Wh=/Mobile(?:.+)Firefox\b/i,qh=function(n){return n!==void 0&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"},Ci=function(n){var e={userAgent:"",platform:"",maxTouchPoints:0};n||typeof navigator>"u"?typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,i=t.split("[FBAN");i[1]!==void 0&&(t=i[0]),(i=t.split("Twitter"))[1]!==void 0&&(t=i[0]);var s=function(h){return function(u){return u.test(h)}}(t),o={apple:{phone:s(Xo)&&!s(Fi),ipod:s(Bh),tablet:!s(Xo)&&(s(Uh)||qh(e))&&!s(Fi),universal:s(Gh),device:(s(Xo)||s(Bh)||s(Uh)||s(Gh)||qh(e))&&!s(Fi)},amazon:{phone:s(Ln),tablet:!s(Ln)&&s(js),device:s(Ln)||s(js)},android:{phone:!s(Fi)&&s(Ln)||!s(Fi)&&s(Vo),tablet:!s(Fi)&&!s(Ln)&&!s(Vo)&&(s(js)||s(Xh)),device:!s(Fi)&&(s(Ln)||s(js)||s(Vo)||s(Xh))||s(/\bokhttp\b/i)},windows:{phone:s(Fi),tablet:s(Vh),device:s(Fi)||s(Vh)},other:{blackberry:s(jh),blackberry10:s(Hh),opera:s(Yh),firefox:s(Wh),chrome:s(zh),device:s(jh)||s(Hh)||s(Yh)||s(Wh)||s(zh)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),Ue={ADAPTER:k0,MIPMAP_TEXTURES:bi.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:cr.NONE,SPRITE_MAX_TEXTURES:function(n){var e=!0;if(Ci.tablet||Ci.phone){var t;Ci.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),Ci.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1)}return e?n:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Ao.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:$i.CLAMP,SCALE_MODE:Di.LINEAR,PRECISION_VERTEX:ei.HIGH,PRECISION_FRAGMENT:Ci.apple.device?ei.HIGH:ei.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Ci.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};function Do(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Il={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}function s(b,x,w){this.fn=b,this.context=x,this.once=w||!1}function o(b,x,w,E,C){if(typeof w!="function")throw new TypeError("The listener must be a function");var L=new s(w,E||b,C),k=t?t+x:x;return b._events[k]?b._events[k].fn?b._events[k]=[b._events[k],L]:b._events[k].push(L):(b._events[k]=L,b._eventsCount++),b}function h(b,x){--b._eventsCount===0?b._events=new i:delete b._events[x]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1)),u.prototype.eventNames=function(){var b,x,w=[];if(this._eventsCount===0)return w;for(x in b=this._events)e.call(b,x)&&w.push(t?x.slice(1):x);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(b)):w},u.prototype.listeners=function(b){var x=t?t+b:b,w=this._events[x];if(!w)return[];if(w.fn)return[w.fn];for(var E=0,C=w.length,L=new Array(C);E<C;E++)L[E]=w[E].fn;return L},u.prototype.listenerCount=function(b){var x=t?t+b:b,w=this._events[x];return w?w.fn?1:w.length:0},u.prototype.emit=function(b,x,w,E,C,L){var k=t?t+b:b;if(!this._events[k])return!1;var U,V,H=this._events[k],Q=arguments.length;if(H.fn){switch(H.once&&this.removeListener(b,H.fn,void 0,!0),Q){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,w),!0;case 4:return H.fn.call(H.context,x,w,E),!0;case 5:return H.fn.call(H.context,x,w,E,C),!0;case 6:return H.fn.call(H.context,x,w,E,C,L),!0}for(V=1,U=new Array(Q-1);V<Q;V++)U[V-1]=arguments[V];H.fn.apply(H.context,U)}else{var te,ie=H.length;for(V=0;V<ie;V++)switch(H[V].once&&this.removeListener(b,H[V].fn,void 0,!0),Q){case 1:H[V].fn.call(H[V].context);break;case 2:H[V].fn.call(H[V].context,x);break;case 3:H[V].fn.call(H[V].context,x,w);break;case 4:H[V].fn.call(H[V].context,x,w,E);break;default:if(!U)for(te=1,U=new Array(Q-1);te<Q;te++)U[te-1]=arguments[te];H[V].fn.apply(H[V].context,U)}}return!0},u.prototype.on=function(b,x,w){return o(this,b,x,w,!1)},u.prototype.once=function(b,x,w){return o(this,b,x,w,!0)},u.prototype.removeListener=function(b,x,w,E){var C=t?t+b:b;if(!this._events[C])return this;if(!x)return h(this,C),this;var L=this._events[C];if(L.fn)L.fn!==x||E&&!L.once||w&&L.context!==w||h(this,C);else{for(var k=0,U=[],V=L.length;k<V;k++)(L[k].fn!==x||E&&!L[k].once||w&&L[k].context!==w)&&U.push(L[k]);U.length?this._events[C]=U.length===1?U[0]:U:h(this,C)}return this},u.prototype.removeAllListeners=function(b){var x;return b?(x=t?t+b:b,this._events[x]&&h(this,x)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u})(Il);var sn=Do(Il.exports),ya={exports:{}};function Hs(n,e,t){t=t||2;var i,s,o,h,u,b,x,w=e&&e.length,E=w?e[0]*t:n.length,C=Zh(n,0,E,t,!0),L=[];if(!C||C.next===C.prev)return L;if(w&&(C=function(U,V,H,Q){var te,ie,ae,ne=[];for(te=0,ie=V.length;te<ie;te++)(ae=Zh(U,V[te]*Q,te<ie-1?V[te+1]*Q:U.length,Q,!1))===ae.next&&(ae.steiner=!0),ne.push(H0(ae));for(ne.sort(X0),te=0;te<ne.length;te++)H=V0(ne[te],H);return H}(n,e,C,t)),n.length>80*t){i=o=n[0],s=h=n[1];for(var k=t;k<E;k+=t)(u=n[k])<i&&(i=u),(b=n[k+1])<s&&(s=b),u>o&&(o=u),b>h&&(h=b);x=(x=Math.max(o-i,h-s))!==0?32767/x:0}return Rs(C,L,t,i,s,x,0),L}function Zh(n,e,t,i,s){var o,h;if(s===Aa(n,e,t,i)>0)for(o=e;o<t;o+=i)h=Jh(o,n[o],n[o+1],h);else for(o=t-i;o>=e;o-=i)h=Jh(o,n[o],n[o+1],h);return h&&$o(h,h.next)&&(Os(h),h=h.next),h}function In(n,e){if(!n)return n;e||(e=n);var t,i=n;do if(t=!1,i.steiner||!$o(i,i.next)&&_r(i.prev,i,i.next)!==0)i=i.next;else{if(Os(i),(i=e=i.prev)===i.next)break;t=!0}while(t||i!==e);return e}function Rs(n,e,t,i,s,o,h){if(n){!h&&o&&function(w,E,C,L){var k=w;do k.z===0&&(k.z=ba(k.x,k.y,E,C,L)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==w);k.prevZ.nextZ=null,k.prevZ=null,function(U){var V,H,Q,te,ie,ae,ne,le,oe=1;do{for(H=U,U=null,ie=null,ae=0;H;){for(ae++,Q=H,ne=0,V=0;V<oe&&(ne++,Q=Q.nextZ);V++);for(le=oe;ne>0||le>0&&Q;)ne!==0&&(le===0||!Q||H.z<=Q.z)?(te=H,H=H.nextZ,ne--):(te=Q,Q=Q.nextZ,le--),ie?ie.nextZ=te:U=te,te.prevZ=ie,ie=te;H=Q}ie.nextZ=null,oe*=2}while(ae>1)}(k)}(n,i,s,o);for(var u,b,x=n;n.prev!==n.next;)if(u=n.prev,b=n.next,o?B0(n,i,s,o):N0(n))e.push(u.i/t|0),e.push(n.i/t|0),e.push(b.i/t|0),Os(n),n=b.next,x=b.next;else if((n=b)===x){h?h===1?Rs(n=U0(In(n),e,t),e,t,i,s,o,2):h===2&&G0(n,e,t,i,s,o):Rs(In(n),e,t,i,s,o,1);break}}}function N0(n){var e=n.prev,t=n,i=n.next;if(_r(e,t,i)>=0)return!1;for(var s=e.x,o=t.x,h=i.x,u=e.y,b=t.y,x=i.y,w=s<o?s<h?s:h:o<h?o:h,E=u<b?u<x?u:x:b<x?b:x,C=s>o?s>h?s:h:o>h?o:h,L=u>b?u>x?u:x:b>x?b:x,k=i.next;k!==e;){if(k.x>=w&&k.x<=C&&k.y>=E&&k.y<=L&&Xn(s,u,o,b,h,x,k.x,k.y)&&_r(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function B0(n,e,t,i){var s=n.prev,o=n,h=n.next;if(_r(s,o,h)>=0)return!1;for(var u=s.x,b=o.x,x=h.x,w=s.y,E=o.y,C=h.y,L=u<b?u<x?u:x:b<x?b:x,k=w<E?w<C?w:C:E<C?E:C,U=u>b?u>x?u:x:b>x?b:x,V=w>E?w>C?w:C:E>C?E:C,H=ba(L,k,e,t,i),Q=ba(U,V,e,t,i),te=n.prevZ,ie=n.nextZ;te&&te.z>=H&&ie&&ie.z<=Q;){if(te.x>=L&&te.x<=U&&te.y>=k&&te.y<=V&&te!==s&&te!==h&&Xn(u,w,b,E,x,C,te.x,te.y)&&_r(te.prev,te,te.next)>=0||(te=te.prevZ,ie.x>=L&&ie.x<=U&&ie.y>=k&&ie.y<=V&&ie!==s&&ie!==h&&Xn(u,w,b,E,x,C,ie.x,ie.y)&&_r(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;te&&te.z>=H;){if(te.x>=L&&te.x<=U&&te.y>=k&&te.y<=V&&te!==s&&te!==h&&Xn(u,w,b,E,x,C,te.x,te.y)&&_r(te.prev,te,te.next)>=0)return!1;te=te.prevZ}for(;ie&&ie.z<=Q;){if(ie.x>=L&&ie.x<=U&&ie.y>=k&&ie.y<=V&&ie!==s&&ie!==h&&Xn(u,w,b,E,x,C,ie.x,ie.y)&&_r(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function U0(n,e,t){var i=n;do{var s=i.prev,o=i.next.next;!$o(s,o)&&Rl(s,i,i.next,o)&&Cs(s,o)&&Cs(o,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(o.i/t|0),Os(i),Os(i.next),i=n=o),i=i.next}while(i!==n);return In(i)}function G0(n,e,t,i,s,o){var h=n;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&Y0(h,u)){var b=Cl(h,u);return h=In(h,h.next),b=In(b,b.next),Rs(h,e,t,i,s,o,0),void Rs(b,e,t,i,s,o,0)}u=u.next}h=h.next}while(h!==n)}function X0(n,e){return n.x-e.x}function V0(n,e){var t=function(s,o){var h,u=o,b=s.x,x=s.y,w=-1/0;do{if(x<=u.y&&x>=u.next.y&&u.next.y!==u.y){var E=u.x+(x-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(E<=b&&E>w&&(w=E,h=u.x<u.next.x?u:u.next,E===b))return h}u=u.next}while(u!==o);if(!h)return null;var C,L=h,k=h.x,U=h.y,V=1/0;u=h;do b>=u.x&&u.x>=k&&b!==u.x&&Xn(x<U?b:w,x,k,U,x<U?w:b,x,u.x,u.y)&&(C=Math.abs(x-u.y)/(b-u.x),Cs(u,s)&&(C<V||C===V&&(u.x>h.x||u.x===h.x&&j0(h,u)))&&(h=u,V=C)),u=u.next;while(u!==L);return h}(n,e);if(!t)return e;var i=Cl(t,n);return In(i,i.next),In(t,t.next)}function j0(n,e){return _r(n.prev,n,e.prev)<0&&_r(e.next,n,n.next)<0}function ba(n,e,t,i,s){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-t)*s|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function H0(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Xn(n,e,t,i,s,o,h,u){return(s-h)*(e-u)>=(n-h)*(o-u)&&(n-h)*(i-u)>=(t-h)*(e-u)&&(t-h)*(o-u)>=(s-h)*(i-u)}function Y0(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(t,i){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==i.i&&s.next.i!==i.i&&Rl(s,s.next,t,i))return!0;s=s.next}while(s!==t);return!1}(n,e)&&(Cs(n,e)&&Cs(e,n)&&function(t,i){var s=t,o=!1,h=(t.x+i.x)/2,u=(t.y+i.y)/2;do s.y>u!=s.next.y>u&&s.next.y!==s.y&&h<(s.next.x-s.x)*(u-s.y)/(s.next.y-s.y)+s.x&&(o=!o),s=s.next;while(s!==t);return o}(n,e)&&(_r(n.prev,n,e.prev)||_r(n,e.prev,e))||$o(n,e)&&_r(n.prev,n,n.next)>0&&_r(e.prev,e,e.next)>0)}function _r(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function $o(n,e){return n.x===e.x&&n.y===e.y}function Rl(n,e,t,i){var s=zs(_r(n,e,t)),o=zs(_r(n,e,i)),h=zs(_r(t,i,n)),u=zs(_r(t,i,e));return s!==o&&h!==u||!(s!==0||!Ys(n,t,e))||!(o!==0||!Ys(n,i,e))||!(h!==0||!Ys(t,n,i))||!(u!==0||!Ys(t,e,i))}function Ys(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function zs(n){return n>0?1:n<0?-1:0}function Cs(n,e){return _r(n.prev,n,n.next)<0?_r(n,e,n.next)>=0&&_r(n,n.prev,e)>=0:_r(n,e,n.prev)<0||_r(n,n.next,e)<0}function Cl(n,e){var t=new xa(n.i,n.x,n.y),i=new xa(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function Jh(n,e,t,i){var s=new xa(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Os(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function xa(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Aa(n,e,t,i){for(var s=0,o=e,h=t-i;o<t;o+=i)s+=(n[h]-n[o])*(n[o+1]+n[h+1]),h=o;return s}ya.exports=Hs,ya.exports.default=Hs,Hs.deviation=function(n,e,t,i){var s=e&&e.length,o=s?e[0]*t:n.length,h=Math.abs(Aa(n,0,o,t));if(s)for(var u=0,b=e.length;u<b;u++){var x=e[u]*t,w=u<b-1?e[u+1]*t:n.length;h-=Math.abs(Aa(n,x,w,t))}var E=0;for(u=0;u<i.length;u+=3){var C=i[u]*t,L=i[u+1]*t,k=i[u+2]*t;E+=Math.abs((n[C]-n[k])*(n[L+1]-n[C+1])-(n[C]-n[L])*(n[k+1]-n[C+1]))}return h===0&&E===0?0:Math.abs((E-h)/h)},Hs.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,s=0;s<n.length;s++){for(var o=0;o<n[s].length;o++)for(var h=0;h<e;h++)t.vertices.push(n[s][o][h]);s>0&&(i+=n[s-1].length,t.holes.push(i))}return t};var Ol=Do(ya.exports),jo=2147483647,z0=/[^\x20-\x7E]/,W0=/[\x2E\u3002\uFF0E\uFF61]/g,q0={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Vn=Math.floor,Ho=String.fromCharCode;function Qh(n){throw new RangeError(q0[n])}function Kh(n,e){return n+22+75*(n<26)-((e!=0)<<5)}function Z0(n,e,t){var i=0;for(n=t?Vn(n/700):n>>1,n+=Vn(n/e);n>455;i+=36)n=Vn(n/35);return Vn(i+36*n/(n+38))}function J0(n){return function(e,t){var i=e.split("@"),s="";i.length>1&&(s=i[0]+"@",e=i[1]);var o=function(h,u){for(var b=h.length,x=[];b--;)x[b]=u(h[b]);return x}((e=e.replace(W0,".")).split("."),t).join(".");return s+o}(n,function(e){return z0.test(e)?"xn--"+function(t){var i,s,o,h,u,b,x,w,E,C,L,k,U,V,H,Q=[];for(t=function(te){for(var ie,ae,ne=[],le=0,oe=te.length;le<oe;)(ie=te.charCodeAt(le++))>=55296&&ie<=56319&&le<oe?(64512&(ae=te.charCodeAt(le++)))==56320?ne.push(((1023&ie)<<10)+(1023&ae)+65536):(ne.push(ie),le--):ne.push(ie);return ne}(t),k=t.length,i=128,s=0,u=72,b=0;b<k;++b)(L=t[b])<128&&Q.push(Ho(L));for(o=h=Q.length,h&&Q.push("-");o<k;){for(x=jo,b=0;b<k;++b)(L=t[b])>=i&&L<x&&(x=L);for(x-i>Vn((jo-s)/(U=o+1))&&Qh("overflow"),s+=(x-i)*U,i=x,b=0;b<k;++b)if((L=t[b])<i&&++s>jo&&Qh("overflow"),L==i){for(w=s,E=36;!(w<(C=E<=u?1:E>=u+26?26:E-u));E+=36)H=w-C,V=36-C,Q.push(Ho(Kh(C+H%V,0))),w=Vn(H/V);Q.push(Ho(Kh(w,0))),u=Z0(s,U,o==h),s=0,++o}++s,++i}return Q.join("")}(e):e})}function Ws(n){return n===null}function ch(n){return typeof n=="string"}function Dl(n){return typeof n=="object"&&n!==null}function Q0(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var $l=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Yo(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}}function eu(n,e){if(n.map)return n.map(e);for(var t=[],i=0;i<n.length;i++)t.push(e(n[i],i));return t}var K0=Object.keys||function(n){var e=[];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.push(t);return e};function tu(n,e,t,i){e=e||"&",t=t||"=";var s={};if(typeof n!="string"||n.length===0)return s;var o=/\+/g;n=n.split(e);var h=1e3,u=n.length;u>h&&(u=h);for(var b=0;b<u;++b){var x,w,E,C,L=n[b].replace(o,"%20"),k=L.indexOf(t);k>=0?(x=L.substr(0,k),w=L.substr(k+1)):(x=L,w=""),E=decodeURIComponent(x),C=decodeURIComponent(w),Q0(s,E)?$l(s[E])?s[E].push(C):s[E]=[s[E],C]:s[E]=C}return s}function Ni(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ec=/^([a-z0-9.+-]+:)/i,tc=/:[0-9]*$/,rc=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ic=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Ta=["'"].concat(ic),ru=["%","/","?",";","#"].concat(Ta),iu=["/","?","#"],nu=/^[+a-z0-9A-Z_-]{0,63}$/,nc=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sc={javascript:!0,"javascript:":!0},Ea={javascript:!0,"javascript:":!0},Hn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function wa(n,e,t){if(n&&Dl(n)&&n instanceof Ni)return n;var i=new Ni;return i.parse(n,e,t),i}function Ll(n,e,t,i){if(!ch(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),o=s!==-1&&s<e.indexOf("#")?"?":"#",h=e.split(o);h[0]=h[0].replace(/\\/g,"/");var u=e=h.join(o);if(u=u.trim(),!i&&e.split("#").length===1){var b=rc.exec(u);if(b)return n.path=u,n.href=u,n.pathname=b[1],b[2]?(n.search=b[2],n.query=t?tu(n.search.substr(1)):n.search.substr(1)):t&&(n.search="",n.query={}),n}var x,w,E,C,L=ec.exec(u);if(L){var k=(L=L[0]).toLowerCase();n.protocol=k,u=u.substr(L.length)}if(i||L||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var U=u.substr(0,2)==="//";!U||L&&Ea[L]||(u=u.substr(2),n.slashes=!0)}if(!Ea[L]&&(U||L&&!Hn[L])){var V,H,Q=-1;for(x=0;x<iu.length;x++)(w=u.indexOf(iu[x]))!==-1&&(Q===-1||w<Q)&&(Q=w);for((H=Q===-1?u.lastIndexOf("@"):u.lastIndexOf("@",Q))!==-1&&(V=u.slice(0,H),u=u.slice(H+1),n.auth=decodeURIComponent(V)),Q=-1,x=0;x<ru.length;x++)(w=u.indexOf(ru[x]))!==-1&&(Q===-1||w<Q)&&(Q=w);Q===-1&&(Q=u.length),n.host=u.slice(0,Q),u=u.slice(Q),Fl(n),n.hostname=n.hostname||"";var te=n.hostname[0]==="["&&n.hostname[n.hostname.length-1]==="]";if(!te){var ie=n.hostname.split(/\./);for(x=0,E=ie.length;x<E;x++){var ae=ie[x];if(ae&&!ae.match(nu)){for(var ne="",le=0,oe=ae.length;le<oe;le++)ae.charCodeAt(le)>127?ne+="x":ne+=ae[le];if(!ne.match(nu)){var ye=ie.slice(0,x),Xe=ie.slice(x+1),pe=ae.match(nc);pe&&(ye.push(pe[1]),Xe.unshift(pe[2])),Xe.length&&(u="/"+Xe.join(".")+u),n.hostname=ye.join(".");break}}}}n.hostname.length>255?n.hostname="":n.hostname=n.hostname.toLowerCase(),te||(n.hostname=J0(n.hostname)),C=n.port?":"+n.port:"";var _e=n.hostname||"";n.host=_e+C,n.href+=n.host,te&&(n.hostname=n.hostname.substr(1,n.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!sc[k])for(x=0,E=Ta.length;x<E;x++){var Be=Ta[x];if(u.indexOf(Be)!==-1){var Me=encodeURIComponent(Be);Me===Be&&(Me=escape(Be)),u=u.split(Be).join(Me)}}var _t=u.indexOf("#");_t!==-1&&(n.hash=u.substr(_t),u=u.slice(0,_t));var Ke=u.indexOf("?");if(Ke!==-1?(n.search=u.substr(Ke),n.query=u.substr(Ke+1),t&&(n.query=tu(n.query)),u=u.slice(0,Ke)):t&&(n.search="",n.query={}),u&&(n.pathname=u),Hn[k]&&n.hostname&&!n.pathname&&(n.pathname="/"),n.pathname||n.search){C=n.pathname||"";var Re=n.search||"";n.path=C+Re}return n.href=fh(n),n}function fh(n){var e=n.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t,i,s,o=n.protocol||"",h=n.pathname||"",u=n.hash||"",b=!1,x="";n.host?b=e+n.host:n.hostname&&(b=e+(n.hostname.indexOf(":")===-1?n.hostname:"["+this.hostname+"]"),n.port&&(b+=":"+n.port)),n.query&&Dl(n.query)&&Object.keys(n.query).length&&(t=n.query,i=i||"&",s=s||"=",t===null&&(t=void 0),x=typeof t=="object"?eu(K0(t),function(E){var C=encodeURIComponent(Yo(E))+s;return $l(t[E])?eu(t[E],function(L){return C+encodeURIComponent(Yo(L))}).join(i):C+encodeURIComponent(Yo(t[E]))}).join(i):"");var w=n.search||x&&"?"+x||"";return o&&o.substr(-1)!==":"&&(o+=":"),n.slashes||(!o||Hn[o])&&b!==!1?(b="//"+(b||""),h&&h.charAt(0)!=="/"&&(h="/"+h)):b||(b=""),u&&u.charAt(0)!=="#"&&(u="#"+u),w&&w.charAt(0)!=="?"&&(w="?"+w),o+b+(h=h.replace(/[?#]/g,function(E){return encodeURIComponent(E)}))+(w=w.replace("#","%23"))+u}function Fl(n){var e=n.host,t=tc.exec(e);t&&((t=t[0])!==":"&&(n.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(n.hostname=e)}/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ni.prototype.parse=function(n,e,t){return Ll(this,n,e,t)},Ni.prototype.format=function(){return fh(this)},Ni.prototype.resolve=function(n){return this.resolveObject(wa(n,!1,!0)).format()},Ni.prototype.resolveObject=function(n){if(ch(n)){var e=new Ni;e.parse(n,!1,!0),n=e}for(var t,i=new Ni,s=Object.keys(this),o=0;o<s.length;o++){var h=s[o];i[h]=this[h]}if(i.hash=n.hash,n.href==="")return i.href=i.format(),i;if(n.slashes&&!n.protocol){for(var u=Object.keys(n),b=0;b<u.length;b++){var x=u[b];x!=="protocol"&&(i[x]=n[x])}return Hn[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(n.protocol&&n.protocol!==i.protocol){if(!Hn[n.protocol]){for(var w=Object.keys(n),E=0;E<w.length;E++){var C=w[E];i[C]=n[C]}return i.href=i.format(),i}if(i.protocol=n.protocol,n.host||Ea[n.protocol])i.pathname=n.pathname;else{for(t=(n.pathname||"").split("/");t.length&&!(n.host=t.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),t[0]!==""&&t.unshift(""),t.length<2&&t.unshift(""),i.pathname=t.join("/")}if(i.search=n.search,i.query=n.query,i.host=n.host||"",i.auth=n.auth,i.hostname=n.hostname||n.host,i.port=n.port,i.pathname||i.search){var L=i.pathname||"",k=i.search||"";i.path=L+k}return i.slashes=i.slashes||n.slashes,i.href=i.format(),i}var U,V=i.pathname&&i.pathname.charAt(0)==="/",H=n.host||n.pathname&&n.pathname.charAt(0)==="/",Q=H||V||i.host&&n.pathname,te=Q,ie=i.pathname&&i.pathname.split("/")||[],ae=i.protocol&&!Hn[i.protocol];if(t=n.pathname&&n.pathname.split("/")||[],ae&&(i.hostname="",i.port=null,i.host&&(ie[0]===""?ie[0]=i.host:ie.unshift(i.host)),i.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(t[0]===""?t[0]=n.host:t.unshift(n.host)),n.host=null),Q=Q&&(t[0]===""||ie[0]==="")),H)i.host=n.host||n.host===""?n.host:i.host,i.hostname=n.hostname||n.hostname===""?n.hostname:i.hostname,i.search=n.search,i.query=n.query,ie=t;else if(t.length)ie||(ie=[]),ie.pop(),ie=ie.concat(t),i.search=n.search,i.query=n.query;else if(n.search!=null)return ae&&(i.hostname=i.host=ie.shift(),(U=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=U.shift(),i.host=i.hostname=U.shift())),i.search=n.search,i.query=n.query,Ws(i.pathname)&&Ws(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!ie.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var ne=ie.slice(-1)[0],le=(i.host||n.host||ie.length>1)&&(ne==="."||ne==="..")||ne==="",oe=0,ye=ie.length;ye>=0;ye--)(ne=ie[ye])==="."?ie.splice(ye,1):ne===".."?(ie.splice(ye,1),oe++):oe&&(ie.splice(ye,1),oe--);if(!Q&&!te)for(;oe--;oe)ie.unshift("..");!Q||ie[0]===""||ie[0]&&ie[0].charAt(0)==="/"||ie.unshift(""),le&&ie.join("/").substr(-1)!=="/"&&ie.push("");var Xe=ie[0]===""||ie[0]&&ie[0].charAt(0)==="/";return ae&&(i.hostname=i.host=Xe?"":ie.length?ie.shift():"",(U=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=U.shift(),i.host=i.hostname=U.shift())),(Q=Q||i.host&&ie.length)&&!Xe&&ie.unshift(""),ie.length?i.pathname=ie.join("/"):(i.pathname=null,i.path=null),Ws(i.pathname)&&Ws(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=n.auth||i.auth,i.slashes=i.slashes||n.slashes,i.href=i.format(),i},Ni.prototype.parseHost=function(){return Fl(this)};var Gi={parse:wa,format:function(n){return ch(n)&&(n=Ll({},n)),fh(n)},resolve:function(n,e){return wa(n,!1,!0).resolve(e)}};Ue.RETINA_PREFIX=/@([0-9\.]+)x/,Ue.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var zo,su=!1,ou="6.5.10",oc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Zn(n,e){return e===void 0&&(e=[]),e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(255&n)/255,e}function kl(n){var e=n.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function Nl(n){return typeof n=="string"&&(n=oc[n.toLowerCase()]||n)[0]==="#"&&(n=n.slice(1)),parseInt(n,16)}var Bl=function(){for(var n=[],e=[],t=0;t<32;t++)n[t]=t,e[t]=t;n[ft.NORMAL_NPM]=ft.NORMAL,n[ft.ADD_NPM]=ft.ADD,n[ft.SCREEN_NPM]=ft.SCREEN,e[ft.NORMAL]=ft.NORMAL_NPM,e[ft.ADD]=ft.ADD_NPM,e[ft.SCREEN]=ft.SCREEN_NPM;var i=[];return i.push(e),i.push(n),i}();function Ul(n,e){return Bl[e?1:0][n]}function dh(n,e){if(e===1)return(255*e<<24)+n;if(e===0)return 0;var t=n>>16&255,i=n>>8&255,s=255&n;return(255*e<<24)+((t=t*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(s=s*e+.5|0)}function Gl(n,e,t,i){return(t=t||new Float32Array(4))[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(255&n)/255,(i||i===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function au(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function To(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)+1}function hu(n){return!(n&n-1||!n)}function uu(n){var e=(n>65535?1:0)<<4,t=((n>>>=e)>255?1:0)<<3;return e|=t,e|=t=((n>>>=t)>15?1:0)<<2,(e|=t=((n>>>=t)>3?1:0)<<1)|(n>>>=t)>>1}function Yn(n,e,t){var i,s=n.length;if(!(e>=s||t===0)){var o=s-(t=e+t>s?s-e:t);for(i=e;i<o;++i)n[i]=n[i+t];n.length=o}}function jn(n){return n===0?0:n<0?-1:1}var ac=0;function Rn(){return++ac}var lu={};function yi(n,e,t){if(t===void 0&&(t=3),!lu[e]){var i=new Error().stack;i===void 0?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+n):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+n),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+n),console.warn(i))),lu[e]=!0}}var qs,cu={},ki=Object.create(null),un=Object.create(null),fu=function(){function n(e,t,i){this.canvas=Ue.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Ue.RESOLUTION,this.resize(e,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),n}();function hc(n,e){if(e===void 0&&(e=globalThis.location),n.indexOf("data:")===0)return"";e=e||globalThis.location,qs||(qs=document.createElement("a")),qs.href=n;var t=Gi.parse(qs.href),i=!t.port&&e.port===""||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}function Eo(n,e){var t=Ue.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):e!==void 0?e:1}/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $r,wo=2*Math.PI,uc=180/Math.PI,lc=Math.PI/180;(function(n){n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC"})($r||($r={}));var nr=function(){function n(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},n.prototype.copyTo=function(e){return e.set(this.x,this.y),e},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},n.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},n}(),Zs=[new nr,new nr,new nr,new nr],Bt=function(){function n(e,t,i,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(s),this.type=$r.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},n.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},n.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},n.prototype.intersects=function(e,t){if(!t){var i=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=i)return!1;var s=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>s}var o=this.left,h=this.right,u=this.top,b=this.bottom;if(h<=o||b<=u)return!1;var x=Zs[0].set(e.left,e.top),w=Zs[1].set(e.left,e.bottom),E=Zs[2].set(e.right,e.top),C=Zs[3].set(e.right,e.bottom);if(E.x<=x.x||w.y<=x.y)return!1;var L=Math.sign(t.a*t.d-t.b*t.c);if(L===0||(t.apply(x,x),t.apply(w,w),t.apply(E,E),t.apply(C,C),Math.max(x.x,w.x,E.x,C.x)<=o||Math.min(x.x,w.x,E.x,C.x)>=h||Math.max(x.y,w.y,E.y,C.y)<=u||Math.min(x.y,w.y,E.y,C.y)>=b))return!1;var k=L*(w.y-x.y),U=L*(x.x-w.x),V=k*o+U*u,H=k*h+U*u,Q=k*o+U*b,te=k*h+U*b;if(Math.max(V,H,Q,te)<=k*x.x+U*x.y||Math.min(V,H,Q,te)>=k*C.x+U*C.y)return!1;var ie=L*(x.y-E.y),ae=L*(E.x-x.x),ne=ie*o+ae*u,le=ie*h+ae*u,oe=ie*o+ae*b,ye=ie*h+ae*b;return!(Math.max(ne,le,oe,ye)<=ie*x.x+ae*x.y||Math.min(ne,le,oe,ye)>=ie*C.x+ae*C.y)},n.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},n.prototype.fit=function(e){var t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=s,this.height=Math.max(o-s,0),this},n.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var i=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=s-this.y,this},n.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=s,this.height=o-s,this},n.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),cc=function(){function n(e,t,i){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this.x=e,this.y=t,this.radius=i,this.type=$r.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-e,o=this.y-t;return(s*=s)+(o*=o)<=i},n.prototype.getBounds=function(){return new Bt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},n}(),fc=function(){function n(e,t,i,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=e,this.y=t,this.width=i,this.height=s,this.type=$r.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,s=(t-this.y)/this.height;return(i*=i)+(s*=s)<=1},n.prototype.getBounds=function(){return new Bt(this.x-this.width,this.y-this.height,this.width,this.height)},n.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),mo=function(){function n(){for(var e=arguments,t=[],i=0;i<arguments.length;i++)t[i]=e[i];var s=Array.isArray(t[0])?t[0]:t;if(typeof s[0]!="number"){for(var o=[],h=0,u=s.length;h<u;h++)o.push(s[h].x,s[h].y);s=o}this.points=s,this.type=$r.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var e=new n(this.points.slice());return e.closeStroke=this.closeStroke,e},n.prototype.contains=function(e,t){for(var i=!1,s=this.points.length/2,o=0,h=s-1;o<s;h=o++){var u=this.points[2*o],b=this.points[2*o+1],x=this.points[2*h],w=this.points[2*h+1];b>t!=w>t&&e<(t-b)/(w-b)*(x-u)+u&&(i=!i)}return i},n.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]"},n}(),dc=function(){function n(e,t,i,s,o){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=20),this.x=e,this.y=t,this.width=i,this.height=s,this.radius=o,this.type=$r.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var s=e-(this.x+i),o=t-(this.y+i),h=i*i;if(s*s+o*o<=h||(s=e-(this.x+this.width-i))*s+o*o<=h||s*s+(o=t-(this.y+this.height-i))*o<=h||(s=e-(this.x+i))*s+o*o<=h)return!0}return!1},n.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},n}(),Sn=function(){function n(e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=0),this._x=i,this._y=s,this.cb=e,this.scope=t}return n.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new n(e,t,this._x,this._y)},n.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(e){return e.set(this._x,this._y),e},n.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},n.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),mr=function(){function n(e,t,i,s,o,h){e===void 0&&(e=1),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=0),h===void 0&&(h=0),this.array=null,this.a=e,this.b=t,this.c=i,this.d=s,this.tx=o,this.ty=h}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(e,t,i,s,o,h){return this.a=e,this.b=t,this.c=i,this.d=s,this.tx=o,this.ty=h,this},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},n.prototype.apply=function(e,t){t=t||new nr;var i=e.x,s=e.y;return t.x=this.a*i+this.c*s+this.tx,t.y=this.b*i+this.d*s+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new nr;var i=1/(this.a*this.d+this.c*-this.b),s=e.x,o=e.y;return t.x=this.d*i*s+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*o+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),s=this.a,o=this.c,h=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=o*t-this.d*i,this.d=o*i+this.d*t,this.tx=h*t-this.ty*i,this.ty=h*i+this.ty*t,this},n.prototype.append=function(e){var t=this.a,i=this.b,s=this.c,o=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*o,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*o,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*o+this.ty,this},n.prototype.setTransform=function(e,t,i,s,o,h,u,b,x){return this.a=Math.cos(u+x)*o,this.b=Math.sin(u+x)*o,this.c=-Math.sin(u-b)*h,this.d=Math.cos(u-b)*h,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d),this},n.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.decompose=function(e){var t=this.a,i=this.b,s=this.c,o=this.d,h=e.pivot,u=-Math.atan2(-s,o),b=Math.atan2(i,t),x=Math.abs(u+b);return x<1e-5||Math.abs(wo-x)<1e-5?(e.rotation=b,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=u,e.skew.y=b),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(s*s+o*o),e.position.x=this.tx+(h.x*t+h.y*s),e.position.y=this.ty+(h.x*i+h.y*o),e},n.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,s=this.d,o=this.tx,h=e*s-t*i;return this.a=s/h,this.b=-t/h,this.c=-i/h,this.d=e/h,this.tx=(i*this.ty-s*o)/h,this.ty=-(e*this.ty-t*o)/h,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},n.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),gn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],vn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],bn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Sa=[],Xl=[],Js=Math.sign;(function(){for(var n=0;n<16;n++){var e=[];Sa.push(e);for(var t=0;t<16;t++)for(var i=Js(gn[n]*gn[t]+yn[n]*vn[t]),s=Js(vn[n]*gn[t]+bn[n]*vn[t]),o=Js(gn[n]*yn[t]+yn[n]*bn[t]),h=Js(vn[n]*yn[t]+bn[n]*bn[t]),u=0;u<16;u++)if(gn[u]===i&&vn[u]===s&&yn[u]===o&&bn[u]===h){e.push(u);break}}for(n=0;n<16;n++){var b=new mr;b.set(gn[n],vn[n],yn[n],bn[n],0,0),Xl.push(b)}})();var Jt,dr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return gn[n]},uY:function(n){return vn[n]},vX:function(n){return yn[n]},vY:function(n){return bn[n]},inv:function(n){return 8&n?15&n:7&-n},add:function(n,e){return Sa[n][e]},sub:function(n,e){return Sa[n][dr.inv(e)]},rotate180:function(n){return 4^n},isVertical:function(n){return(3&n)==2},byDirection:function(n,e){return 2*Math.abs(n)<=Math.abs(e)?e>=0?dr.S:dr.N:2*Math.abs(e)<=Math.abs(n)?n>0?dr.E:dr.W:e>0?n>0?dr.SE:dr.SW:n>0?dr.NE:dr.NW},matrixAppendRotationInv:function(n,e,t,i){t===void 0&&(t=0),i===void 0&&(i=0);var s=Xl[dr.inv(e)];s.tx=t,s.ty=i,n.append(s)}},ph=function(){function n(){this.worldTransform=new mr,this.localTransform=new mr,this.position=new Sn(this.onChange,this,0,0),this.scale=new Sn(this.onChange,this,1,1),this.pivot=new Sn(this.onChange,this,0,0),this.skew=new Sn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},n.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,s=this.worldTransform;s.a=t.a*i.a+t.b*i.c,s.b=t.a*i.b+t.b*i.d,s.c=t.c*i.a+t.d*i.c,s.d=t.c*i.b+t.d*i.d,s.tx=t.tx*i.a+t.ty*i.c+i.tx,s.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},n.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}(),Es=function(){return Es=Object.assign||function(n){for(var e,t=arguments,i=1,s=arguments.length;i<s;i++)for(var o in e=t[i])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},Es.apply(this,arguments)};(function(n){n.Application="application",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Loader="loader",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser"})(Jt||(Jt={}));var ji,du=function(n){if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");var e=typeof n.extension!="object"?{type:n.extension}:n.extension;n=Es(Es({},e),{ref:n})}if(typeof n!="object")throw new Error("Invalid extension type");return typeof(n=Es({},n)).type=="string"&&(n.type=[n.type]),n},Hi={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var n=arguments,e=this,t=[],i=0;i<arguments.length;i++)t[i]=n[i];return t.map(du).forEach(function(s){s.type.forEach(function(o){var h,u;return(u=(h=e._removeHandlers)[o])===null||u===void 0?void 0:u.call(h,s)})}),this},add:function(){for(var n=arguments,e=this,t=[],i=0;i<arguments.length;i++)t[i]=n[i];return t.map(du).forEach(function(s){s.type.forEach(function(o){var h=e._addHandlers,u=e._queue;h[o]?h[o](s):(u[o]=u[o]||[],u[o].push(s))})}),this},handle:function(n,e,t){var i=this._addHandlers=this._addHandlers||{},s=this._removeHandlers=this._removeHandlers||{};if(i[n]||s[n])throw new Error("Extension type "+n+" already has a handler");i[n]=e,s[n]=t;var o=this._queue;return o[n]&&(o[n].forEach(function(h){return e(h)}),delete o[n]),this},handleByMap:function(n,e){return this.handle(n,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(n,e){return this.handle(n,function(t){var i,s;e.includes(t.ref)||(e.push(t.ref),n===Jt.Loader&&((s=(i=t.ref).add)===null||s===void 0||s.call(i)))},function(t){var i=e.indexOf(t.ref);i!==-1&&e.splice(i,1)})}},Br=function(){function n(e){this.items=[],this._name=e,this._aliasCount=0}return n.prototype.emit=function(e,t,i,s,o,h,u,b){if(arguments.length>8)throw new Error("max arguments reached");var x=this.name,w=this.items;this._aliasCount++;for(var E=0,C=w.length;E<C;E++)w[E][x](e,t,i,s,o,h,u,b);return w===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},n.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(e){return this.items.indexOf(e)!==-1},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(Br.prototype,{dispatch:{value:Br.prototype.emit},run:{value:Br.prototype.emit}}),Ue.TARGET_FPMS=.06,function(n){n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY"}(ji||(ji={}));var Wo=function(){function n(e,t,i,s){t===void 0&&(t=null),i===void 0&&(i=0),s===void 0&&(s=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=s}return n.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},n.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},n}(),Dr=function(){function n(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Wo(null,null,1/0),this.deltaMS=1/Ue.TARGET_FPMS,this.elapsedMS=1/Ue.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return n.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(e,t,i){return i===void 0&&(i=ji.NORMAL),this._addListener(new Wo(e,t,i))},n.prototype.addOnce=function(e,t,i){return i===void 0&&(i=ji.NORMAL),this._addListener(new Wo(e,t,i,!0))},n.prototype._addListener=function(e){var t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this},n.prototype.remove=function(e,t){for(var i=this._head.next;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(e){var t;if(e===void 0&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ue.TARGET_FPMS;for(var s=this._head,o=s.next;o;)o=o.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Ue.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var e=n._shared=new n;e.autoStart=!0,e._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var e=n._system=new n;e.autoStart=!0,e._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),pc=function(){function n(){}return n.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,ji.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Dr.shared:new Dr,e.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},n.extension=Jt.Application,n}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ue.PREFER_ENV=Ci.any?Vi.WEBGL:Vi.WEBGL2,Ue.STRICT_TEXTURE_CACHE=!1;var Pa=[];function Vl(n,e){if(!n)return null;var t="";if(typeof n=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);i&&(t=i[1].toLowerCase())}for(var s=Pa.length-1;s>=0;--s){var o=Pa[s];if(o.test&&o.test(n,t))return new o(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ma=function(n,e){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Ma(n,e)};function sr(n,e){function t(){this.constructor=n}Ma(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ia=function(){return Ia=Object.assign||function(n){for(var e,t=arguments,i=1,s=arguments.length;i<s;i++)for(var o in e=t[i])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},Ia.apply(this,arguments)},Ds=function(){function n(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Br("setRealSize"),this.onUpdate=new Br("update"),this.onError=new Br("onError")}return n.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},n.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(e,t,i){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(e,t){return!1},n}(),Gs=function(n){function e(t,i){var s=this,o=i||{},h=o.width,u=o.height;if(!h||!u)throw new Error("BufferResource width or height invalid");return(s=n.call(this,h,u)||this).data=t,s}return sr(e,n),e.prototype.upload=function(t,i,s){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===xi.UNPACK);var h=i.realWidth,u=i.realHeight;return s.width===h&&s.height===u?o.texSubImage2D(i.target,0,0,0,h,u,i.format,s.type,this.data):(s.width=h,s.height=u,o.texImage2D(i.target,0,s.internalFormat,h,u,0,i.format,s.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Ds),_c={scaleMode:Di.NEAREST,format:Ce.RGBA,alphaMode:xi.NPM},Vt=function(n){function e(t,i){t===void 0&&(t=null),i===void 0&&(i=null);var s=n.call(this)||this,o=(i=i||{}).alphaMode,h=i.mipmap,u=i.anisotropicLevel,b=i.scaleMode,x=i.width,w=i.height,E=i.wrapMode,C=i.format,L=i.type,k=i.target,U=i.resolution,V=i.resourceOptions;return!t||t instanceof Ds||((t=Vl(t,V)).internal=!0),s.resolution=U||Ue.RESOLUTION,s.width=Math.round((x||0)*s.resolution)/s.resolution,s.height=Math.round((w||0)*s.resolution)/s.resolution,s._mipmap=h!==void 0?h:Ue.MIPMAP_TEXTURES,s.anisotropicLevel=u!==void 0?u:Ue.ANISOTROPIC_LEVEL,s._wrapMode=E||Ue.WRAP_MODE,s._scaleMode=b!==void 0?b:Ue.SCALE_MODE,s.format=C||Ce.RGBA,s.type=L||ct.UNSIGNED_BYTE,s.target=k||Pn.TEXTURE_2D,s.alphaMode=o!==void 0?o:xi.UNPACK,s.uid=Rn(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=x>0&&w>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(t),s}return sr(e,n),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,i){var s;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,s=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,s=!0),s&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,i,s){return s=s||this.resolution,this.setRealSize(t*s,i*s,s)},e.prototype.setRealSize=function(t,i,s){return this.resolution=s||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=hu(this.realWidth)&&hu(this.realHeight)},e.prototype.setResolution=function(t){var i=this.resolution;return i===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*i)/t,this.height=Math.round(this.height*i)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete un[this.cacheId],delete ki[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,s){s===void 0&&(s=Ue.STRICT_TEXTURE_CACHE);var o=typeof t=="string",h=null;if(o)h=t;else{if(!t._pixiId){var u=i&&i.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+Rn()}h=t._pixiId}var b=un[h];if(o&&s&&!b)throw new Error('The cacheId "'+h+'" does not exist in BaseTextureCache.');return b||((b=new e(t,i)).cacheId=h,e.addToCache(b,h)),b},e.fromBuffer=function(t,i,s,o){t=t||new Float32Array(i*s*4);var h=new Gs(t,{width:i,height:s}),u=t instanceof Float32Array?ct.FLOAT:ct.UNSIGNED_BYTE;return new e(h,Object.assign({},_c,o||{width:i,height:s,type:u}))},e.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),un[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),un[i]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var i=un[t];if(i){var s=i.textureCacheIds.indexOf(t);return s>-1&&i.textureCacheIds.splice(s,1),delete un[t],i}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete un[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(sn),jl=function(n){function e(t,i){var s=this,o=i||{},h=o.width,u=o.height;(s=n.call(this,h,u)||this).items=[],s.itemDirtyIds=[];for(var b=0;b<t;b++){var x=new Vt;s.items.push(x),s.itemDirtyIds.push(-2)}return s.length=t,s._load=null,s.baseTexture=null,s}return sr(e,n),e.prototype.initFromArray=function(t,i){for(var s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof Ds?this.addResourceAt(t[s],s):this.addResourceAt(Vl(t[s],i),s))},e.prototype.dispose=function(){for(var t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)},e.prototype.unbind=function(t){n.prototype.unbind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}).map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=t.items[0],o=s.realWidth,h=s.realHeight;return t.resize(o,h),Promise.resolve(t)}),this._load},e}(Ds),mc=function(n){function e(t,i){var s,o,h=this,u=i||{},b=u.width,x=u.height;return Array.isArray(t)?(s=t,o=t.length):o=t,h=n.call(this,o,{width:b,height:x})||this,s&&h.initFromArray(s,i),h}return sr(e,n),e.prototype.addBaseTextureAt=function(t,i){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,i),this},e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=Pn.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,i,s){var o=this,h=o.length,u=o.itemDirtyIds,b=o.items,x=t.gl;s.dirtyId<0&&x.texImage3D(x.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,h,0,i.format,s.type,null);for(var w=0;w<h;w++){var E=b[w];u[w]<E.dirtyId&&(u[w]=E.dirtyId,E.valid&&x.texSubImage3D(x.TEXTURE_2D_ARRAY,0,0,0,w,E.resource.width,E.resource.height,1,i.format,s.type,E.resource.source))}return!0},e}(jl),rn=function(n){function e(t){var i=this,s=t,o=s.naturalWidth||s.videoWidth||s.width,h=s.naturalHeight||s.videoHeight||s.height;return(i=n.call(this,o,h)||this).source=t,i.noSubImage=!1,i}return sr(e,n),e.crossOrigin=function(t,i,s){s===void 0&&i.indexOf("data:")!==0?t.crossOrigin=hc(i):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")},e.prototype.upload=function(t,i,s,o){var h=t.gl,u=i.realWidth,b=i.realHeight;if((o=o||this.source)instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===xi.UNPACK),this.noSubImage||i.target!==h.TEXTURE_2D||s.width!==u||s.height!==b?(s.width=u,s.height=b,h.texImage2D(i.target,0,s.internalFormat,i.format,s.type,o)):h.texSubImage2D(h.TEXTURE_2D,0,0,0,i.format,s.type,o),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,i=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(i,s),n.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Ds),gc=function(n){function e(t){return n.call(this,t)||this}return sr(e,n),e.test=function(t){var i=globalThis.OffscreenCanvas;return!!(i&&t instanceof i)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(rn),vc=function(n){function e(t,i){var s=this,o=i||{},h=o.width,u=o.height,b=o.autoLoad,x=o.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");s=n.call(this,6,{width:h,height:u})||this;for(var w=0;w<e.SIDES;w++)s.items[w].target=Pn.TEXTURE_CUBE_MAP_POSITIVE_X+w;return s.linkBaseTexture=x!==!1,t&&s.initFromArray(t,i),b!==!1&&s.load(),s}return sr(e,n),e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=Pn.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,i,s){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,i)}else t.target=Pn.TEXTURE_CUBE_MAP_POSITIVE_X+i,t.parentTextureArray=this.baseTexture,this.items[i]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[i]=t,this},e.prototype.upload=function(t,i,s){for(var o=this.itemDirtyIds,h=0;h<e.SIDES;h++){var u=this.items[h];(o[h]<u.dirtyId||s.dirtyId<i.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(t,u,s),o[h]=u.dirtyId):o[h]<-1&&(t.gl.texImage2D(u.target,0,s.internalFormat,i.realWidth,i.realHeight,0,i.format,s.type,null),o[h]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(jl),Hl=function(n){function e(t,i){var s=this;if(i=i||{},!(t instanceof HTMLImageElement)){var o=new Image;rn.crossOrigin(o,t,i.crossorigin),o.src=t,t=o}return s=n.call(this,t)||this,!t.complete&&s._width&&s._height&&(s._width=0,s._height=0),s.url=t.src,s._process=null,s.preserveBitmap=!1,s.createBitmap=(i.createBitmap!==void 0?i.createBitmap:Ue.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,s.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,s.bitmap=null,s._load=null,i.autoLoad!==!1&&s.load(),s}return sr(e,n),e.prototype.load=function(t){var i=this;return this._load||(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(s,o){var h=i.source;i.url=h.src;var u=function(){i.destroyed||(h.onload=null,h.onerror=null,i.resize(h.width,h.height),i._load=null,i.createBitmap?s(i.process()):s(i))};h.complete&&h.src?u():(h.onload=u,h.onerror=function(b){o(b),i.onError.emit(b)})})),this._load},e.prototype.process=function(){var t=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var s=globalThis.createImageBitmap,o=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:o?"cors":"no-cors"}).then(function(h){return h.blob()}).then(function(h){return s(h,0,0,i.width,i.height,{premultiplyAlpha:t.alphaMode===null||t.alphaMode===xi.UNPACK?"premultiply":"none"})}).then(function(h){return t.destroyed?Promise.reject():(t.bitmap=h,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,t,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,t,i,s,this.bitmap),!this.preserveBitmap){var o=!0,h=i._glTextures;for(var u in h){var b=h[u];if(b!==s&&b.dirtyId!==i.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e}(rn),yc=function(n){function e(t,i){var s=this;return i=i||{},(s=n.call(this,Ue.ADAPTER.createCanvas())||this)._width=0,s._height=0,s.svg=t,s.scale=i.scale||1,s._overrideWidth=i.width,s._overrideHeight=i.height,s._resolve=null,s._crossorigin=i.crossorigin,s._load=null,i.autoLoad!==!1&&s.load(),s}return sr(e,n),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,i=new Image;rn.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(s){t._resolve&&(i.onerror=null,t.onError.emit(s))},i.onload=function(){if(t._resolve){var s=i.width,o=i.height;if(!s||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var h=s*t.scale,u=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(h=t._overrideWidth||t._overrideHeight/o*s,u=t._overrideHeight||t._overrideWidth/s*o),h=Math.round(h),u=Math.round(u);var b=t.source;b.width=h,b.height=u,b._pixiId="canvas_"+Rn(),b.getContext("2d").drawImage(i,0,0,s,o,0,0,h,u),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),s={};return i&&(s[i[1]]=Math.round(parseFloat(i[3])),s[i[5]]=Math.round(parseFloat(i[7]))),s},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return i==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(rn),bc=function(n){function e(t,i){var s=this;if(i=i||{},!(t instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var h=t[0].src||t[0];rn.crossOrigin(o,h,i.crossorigin);for(var u=0;u<t.length;++u){var b=document.createElement("source"),x=t[u],w=x.src,E=x.mime,C=(w=w||t[u]).split("?").shift().toLowerCase(),L=C.slice(C.lastIndexOf(".")+1);E=E||e.MIME_TYPES[L]||"video/"+L,b.src=w,b.type=E,o.appendChild(b)}t=o}return(s=n.call(this,t)||this).noSubImage=!0,s._autoUpdate=!0,s._isConnectedToTicker=!1,s._updateFPS=i.updateFPS||0,s._msToNextUpdate=0,s.autoPlay=i.autoPlay!==!1,s._load=null,s._resolve=null,s._onCanPlay=s._onCanPlay.bind(s),s._onError=s._onError.bind(s),i.autoLoad!==!1&&s.load(),s}return sr(e,n),e.prototype.update=function(t){if(!this.destroyed){var i=Dr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(s){t.valid?s(t):(t._resolve=s,i.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Dr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Dr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(t.videoWidth,t.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Dr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),n.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Dr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Dr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(rn),xc=function(n){function e(t){return n.call(this,t)||this}return sr(e,n),e.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},e}(rn);Pa.push(Hl,xc,gc,bc,yc,Gs,vc,mc);var Ac=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return sr(e,n),e.prototype.upload=function(t,i,s){var o=t.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===xi.UNPACK);var h=i.realWidth,u=i.realHeight;return s.width===h&&s.height===u?o.texSubImage2D(i.target,0,0,0,h,u,i.format,s.type,this.data):(s.width=h,s.height=u,o.texImage2D(i.target,0,s.internalFormat,h,u,0,i.format,s.type,this.data)),!0},e}(Gs),Ra=function(){function n(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Br("disposeFramebuffer"),this.multisample=cr.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new Vt(null,{scaleMode:Di.NEAREST,resolution:1,mipmap:bi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Vt(new Ac(null,{width:this.width,height:this.height}),{scaleMode:Di.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:bi.OFF,format:Ce.DEPTH_COMPONENT,type:ct.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var s=this.colorTextures[i],o=s.resolution;s.setSize(e/o,t/o)}this.depthTexture&&(o=this.depthTexture.resolution,this.depthTexture.setSize(e/o,t/o))}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),Yl=function(n){function e(t){t===void 0&&(t={});var i=this;return typeof t=="number"&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:cr.NONE,(i=n.call(this,null,t)||this).mipmap=bi.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ra(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=t.multisample,i.maskStack=[],i.filterStack=[{}],i}return sr(e,n),e.prototype.resize=function(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Vt),zl=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(e,t,i){var s=t.width,o=t.height;if(i){var h=e.width/2/s,u=e.height/2/o,b=e.x/s+h,x=e.y/o+u;i=dr.add(i,dr.NW),this.x0=b+h*dr.uX(i),this.y0=x+u*dr.uY(i),i=dr.add(i,2),this.x1=b+h*dr.uX(i),this.y1=x+u*dr.uY(i),i=dr.add(i,2),this.x2=b+h*dr.uX(i),this.y2=x+u*dr.uY(i),i=dr.add(i,2),this.x3=b+h*dr.uX(i),this.y3=x+u*dr.uY(i)}else this.x0=e.x/s,this.y0=e.y/o,this.x1=(e.x+e.width)/s,this.y1=e.y/o,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/o,this.x3=e.x/s,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},n}(),pu=new zl;function Qs(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var Et=function(n){function e(t,i,s,o,h,u){var b=n.call(this)||this;if(b.noFrame=!1,i||(b.noFrame=!0,i=new Bt(0,0,1,1)),t instanceof e&&(t=t.baseTexture),b.baseTexture=t,b._frame=i,b.trim=o,b.valid=!1,b._uvs=pu,b.uvMatrix=null,b.orig=s||i,b._rotate=Number(h||0),h===!0)b._rotate=2;else if(b._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return b.defaultAnchor=u?new nr(u.x,u.y):new nr(0,0),b._updateID=0,b.textureCacheIds=[],t.valid?b.noFrame?t.valid&&b.onBaseTextureUpdated(t):b.frame=i:t.once("loaded",b.onBaseTextureUpdated,b),b.noFrame&&t.on("update",b.onBaseTextureUpdated,b),b}return sr(e,n),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&ki[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),s=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(s._frame=t),s},e.prototype.updateUvs=function(){this._uvs===pu&&(this._uvs=new zl),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,s){i===void 0&&(i={}),s===void 0&&(s=Ue.STRICT_TEXTURE_CACHE);var o=typeof t=="string",h=null;if(o)h=t;else if(t instanceof Vt){if(!t.cacheId){var u=i&&i.pixiIdPrefix||"pixiid";t.cacheId=u+"-"+Rn(),Vt.addToCache(t,t.cacheId)}h=t.cacheId}else t._pixiId||(u=i&&i.pixiIdPrefix||"pixiid",t._pixiId=u+"_"+Rn()),h=t._pixiId;var b=ki[h];if(o&&s&&!b)throw new Error('The cacheId "'+h+'" does not exist in TextureCache.');return b||t instanceof Vt?!b&&t instanceof Vt&&(b=new e(t),e.addToCache(b,h)):(i.resolution||(i.resolution=Eo(t)),(b=new e(new Vt(t,i))).baseTexture.cacheId=h,Vt.addToCache(b.baseTexture,h),e.addToCache(b,h)),b},e.fromURL=function(t,i){var s=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),o=e.from(t,Object.assign({resourceOptions:s},i),!1),h=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):h.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(t,i,s,o){return new e(Vt.fromBuffer(t,i,s,o))},e.fromLoader=function(t,i,s,o){var h=new Vt(t,Object.assign({scaleMode:Ue.SCALE_MODE,resolution:Eo(i)},o)),u=h.resource;u instanceof Hl&&(u.url=i);var b=new e(h);return s||(s=i),Vt.addToCache(b.baseTexture,s),e.addToCache(b,s),s!==i&&(Vt.addToCache(b.baseTexture,i),e.addToCache(b,i)),b.baseTexture.valid?Promise.resolve(b):new Promise(function(x){b.baseTexture.once("loaded",function(){return x(b)})})},e.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),ki[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),ki[i]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var i=ki[t];if(i){var s=i.textureCacheIds.indexOf(t);return s>-1&&i.textureCacheIds.splice(s,1),delete ki[t],i}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)ki[t.textureCacheIds[o]]===t&&delete ki[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var i=t.x,s=t.y,o=t.width,h=t.height,u=i+o>this.baseTexture.width,b=s+h>this.baseTexture.height;if(u||b){var x=u&&b?"and":"or",w="X: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.width,E="Y: "+s+" + "+h+" = "+(s+h)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+w+" "+x+" "+E)}this.valid=o&&h&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Vt),Qs(e._EMPTY),Qs(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=Ue.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(Vt.from(t)),Qs(e._WHITE),Qs(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(sn),Cn=function(n){function e(t,i){var s=n.call(this,t,i)||this;return s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}return sr(e,n),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,i,s){s===void 0&&(s=!0);var o=this.baseTexture.resolution,h=Math.round(t*o)/o,u=Math.round(i*o)/o;this.valid=h>0&&u>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=u,s&&this.baseTexture.resize(h,u),this.updateUvs()},e.prototype.setResolution=function(t){var i=this.baseTexture;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))},e.create=function(t){for(var i=arguments,s=[],o=1;o<arguments.length;o++)s[o-1]=i[o];return typeof t=="number"&&(yi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:s[0],scaleMode:s[1],resolution:s[2]}),new e(new Yl(t))},e}(Et),Tc=function(){function n(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(e,t,i){i===void 0&&(i=cr.NONE);var s=new Yl(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new Cn(s)},n.prototype.getOptimalTexture=function(e,t,i,s){var o;i===void 0&&(i=1),s===void 0&&(s=cr.NONE),e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(e=To(e)))<<16|65535&(t=To(t)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);var h=this.texturePool[o].pop();return h||(h=this.createTexture(e,t,s)),h.filterPoolKey=o,h.setResolution(i),h},n.prototype.getFilterTexture=function(e,t,i){var s=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||cr.NONE);return s.filterFrame=e.filterFrame,s},n.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},n.prototype.returnFilterTexture=function(e){this.returnTexture(e)},n.prototype.clear=function(e){if(e=e!==!1)for(var t in this.texturePool){var i=this.texturePool[t];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var i=this.texturePool[t];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},n.SCREEN_KEY=-1,n}(),_u=function(){function n(e,t,i,s,o,h,u){t===void 0&&(t=0),i===void 0&&(i=!1),s===void 0&&(s=ct.FLOAT),this.buffer=e,this.size=t,this.normalized=i,this.type=s,this.stride=o,this.start=h,this.instance=u}return n.prototype.destroy=function(){this.buffer=null},n.from=function(e,t,i,s,o){return new n(e,t,i,s,o)},n}(),Ec=0,Rr=function(){function n(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=Ec++,this.disposeRunner=new Br("disposeBuffer")}return n.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(n.prototype,"index",{get:function(){return this.type===Li.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Li.ELEMENT_ARRAY_BUFFER:Li.ARRAY_BUFFER},enumerable:!1,configurable:!0}),n.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new n(e)},n}(),wc={Float32Array,Uint32Array,Int32Array,Uint8Array},mu={5126:4,5123:2,5121:1},Sc=0,Pc={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Xs=function(){function n(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Sc++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Br("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(e,t,i,s,o,h,u,b){if(i===void 0&&(i=0),s===void 0&&(s=!1),b===void 0&&(b=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Rr||(t instanceof Array&&(t=new Float32Array(t)),t=new Rr(t));var x=e.split("|");if(x.length>1){for(var w=0;w<x.length;w++)this.addAttribute(x[w],t,i,s,o);return this}var E=this.buffers.indexOf(t);return E===-1&&(this.buffers.push(t),E=this.buffers.length-1),this.attributes[e]=new _u(E,i,s,o,h,u,b),this.instanced=this.instanced||b,this},n.prototype.getAttribute=function(e){return this.attributes[e]},n.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},n.prototype.addIndex=function(e){return e instanceof Rr||(e instanceof Array&&(e=new Uint16Array(e)),e=new Rr(e)),e.type=Li.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e,t=[],i=[],s=new Rr;for(e in this.attributes){var o=this.attributes[e],h=this.buffers[o.buffer];t.push(h.data),i.push(o.size*mu[o.type]/4),o.buffer=0}for(s.data=function(u,b){for(var x=0,w=0,E={},C=0;C<u.length;C++)w+=b[C],x+=u[C].length;var L=new ArrayBuffer(4*x),k=null,U=0;for(C=0;C<u.length;C++){var V=b[C],H=u[C],Q=au(H);E[Q]||(E[Q]=new wc[Q](L)),k=E[Q];for(var te=0;te<H.length;te++)k[(te/V|0)*w+U+te%V]=H[te];U+=V}return new Float32Array(L)}(t,i),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var e=new n,t=0;t<this.buffers.length;t++)e.buffers[t]=new Rr(this.buffers[t].data.slice(0));for(var t in this.attributes){var i=this.attributes[t];e.attributes[t]=new _u(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Li.ELEMENT_ARRAY_BUFFER),e},n.merge=function(e){for(var t,i=new n,s=[],o=[],h=[],u=0;u<e.length;u++){t=e[u];for(var b=0;b<t.buffers.length;b++)o[b]=o[b]||0,o[b]+=t.buffers[b].data.length,h[b]=0}for(u=0;u<t.buffers.length;u++)s[u]=new Pc[au(t.buffers[u].data)](o[u]),i.buffers[u]=new Rr(s[u]);for(u=0;u<e.length;u++)for(t=e[u],b=0;b<t.buffers.length;b++)s[b].set(t.buffers[b].data,h[b]),h[b]+=t.buffers[b].data.length;if(i.attributes=t.attributes,t.indexBuffer){i.indexBuffer=i.buffers[t.buffers.indexOf(t.indexBuffer)],i.indexBuffer.type=Li.ELEMENT_ARRAY_BUFFER;var x=0,w=0,E=0,C=0;for(u=0;u<t.buffers.length;u++)if(t.buffers[u]!==t.indexBuffer){C=u;break}for(var u in t.attributes){var L=t.attributes[u];(0|L.buffer)===C&&(w+=L.size*mu[L.type]/4)}for(u=0;u<e.length;u++){var k=e[u].indexBuffer.data;for(b=0;b<k.length;b++)i.indexBuffer.data[b+E]+=x;x+=e[u].buffers[C].data.length/w,E+=k.length}}return i},n}(),Mc=function(n){function e(){var t=n.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return sr(e,n),e}(Xs),Wl=function(n){function e(){var t=n.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Rr(t.vertices),t.uvBuffer=new Rr(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return sr(e,n),e.prototype.map=function(t,i){var s=0,o=0;return this.uvs[0]=s,this.uvs[1]=o,this.uvs[2]=s+i.width/t.width,this.uvs[3]=o,this.uvs[4]=s+i.width/t.width,this.uvs[5]=o+i.height/t.height,this.uvs[6]=s,this.uvs[7]=o+i.height/t.height,s=i.x,o=i.y,this.vertices[0]=s,this.vertices[1]=o,this.vertices[2]=s+i.width,this.vertices[3]=o,this.vertices[4]=s+i.width,this.vertices[5]=o+i.height,this.vertices[6]=s,this.vertices[7]=o+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Xs),Ic=0,Mn=function(){function n(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ic++,this.static=!!t,this.ubo=!!i,e instanceof Rr?(this.buffer=e,this.buffer.type=Li.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Rr(new Float32Array(1)),this.buffer.type=Li.UNIFORM_BUFFER,this.autoManage=!0))}return n.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},n.prototype.add=function(e,t,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new n(t,i)},n.from=function(e,t,i){return new n(e,t,i)},n.uboFrom=function(e,t){return new n(e,t==null||t,!0)},n}(),Rc=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=cr.NONE,this.sourceFrame=new Bt,this.destinationFrame=new Bt,this.bindingSourceFrame=new Bt,this.bindingDestinationFrame=new Bt,this.filters=[],this.transform=null}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),Ks=[new nr,new nr,new nr,new nr],qo=new mr,Cc=function(){function n(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Tc,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Mc,this.quadUv=new Wl,this.tempRect=new Bt,this.activeState={},this.globalUniforms=new Mn({outputFrame:new Bt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return n.prototype.push=function(e,t){for(var i,s,o=this.renderer,h=this.defaultFilterStack,u=this.statePool.pop()||new Rc,b=this.renderer.renderTexture,x=t[0].resolution,w=t[0].multisample,E=t[0].padding,C=t[0].autoFit,L=(i=t[0].legacy)===null||i===void 0||i,k=1;k<t.length;k++){var U=t[k];x=Math.min(x,U.resolution),w=Math.min(w,U.multisample),E=this.useMaxPadding?Math.max(E,U.padding):E+U.padding,C=C&&U.autoFit,L=L||(s=U.legacy)===null||s===void 0||s}h.length===1&&(this.defaultFilterStack[0].renderTexture=b.current),h.push(u),u.resolution=x,u.multisample=w,u.legacy=L,u.target=e,u.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),u.sourceFrame.pad(E);var V=this.tempRect.copyFrom(b.sourceFrame);o.projection.transform&&this.transformAABB(qo.copyFrom(o.projection.transform).invert(),V),C?(u.sourceFrame.fit(V),(u.sourceFrame.width<=0||u.sourceFrame.height<=0)&&(u.sourceFrame.width=0,u.sourceFrame.height=0)):u.sourceFrame.intersects(V)||(u.sourceFrame.width=0,u.sourceFrame.height=0),this.roundFrame(u.sourceFrame,b.current?b.current.resolution:o.resolution,b.sourceFrame,b.destinationFrame,o.projection.transform),u.renderTexture=this.getOptimalFilterTexture(u.sourceFrame.width,u.sourceFrame.height,x,w),u.filters=t,u.destinationFrame.width=u.renderTexture.width,u.destinationFrame.height=u.renderTexture.height;var H=this.tempRect;H.x=0,H.y=0,H.width=u.sourceFrame.width,H.height=u.sourceFrame.height,u.renderTexture.filterFrame=u.sourceFrame,u.bindingSourceFrame.copyFrom(b.sourceFrame),u.bindingDestinationFrame.copyFrom(b.destinationFrame),u.transform=o.projection.transform,o.projection.transform=null,b.bind(u.renderTexture,u.sourceFrame,H),o.framebuffer.clear(0,0,0,0)},n.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;var s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;var o=s.inputSize,h=s.inputPixel,u=s.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*t.resolution),h[1]=Math.round(o[1]*t.resolution),h[2]=1/h[0],h[3]=1/h[1],u[0]=.5*h[2],u[1]=.5*h[3],u[2]=t.sourceFrame.width*o[2]-.5*h[2],u[3]=t.sourceFrame.height*o[3]-.5*h[3],t.legacy){var b=s.filterArea;b[0]=t.destinationFrame.width,b[1]=t.destinationFrame.height,b[2]=t.sourceFrame.x,b[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var x=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,x.renderTexture,_i.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var w=t.renderTexture,E=this.getOptimalFilterTexture(w.width,w.height,t.resolution);E.filterFrame=w.filterFrame;var C=0;for(C=0;C<i.length-1;++C){C===1&&t.multisample>1&&((E=this.getOptimalFilterTexture(w.width,w.height,t.resolution)).filterFrame=w.filterFrame),i[C].apply(this,w,E,_i.CLEAR,t);var L=w;w=E,E=L}i[C].apply(this,w,x.renderTexture,_i.BLEND,t),C>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(w),this.returnFilterTexture(E)}t.clear(),this.statePool.push(t)},n.prototype.bindAndClear=function(e,t){t===void 0&&(t=_i.CLEAR);var i=this.renderer,s=i.renderTexture,o=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var h=this.tempRect;h.x=0,h.y=0,h.width=e.filterFrame.width,h.height=e.filterFrame.height,s.bind(e,e.filterFrame,h)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var u=1&o.stateId||this.forceClear;(t===_i.CLEAR||t===_i.BLIT&&u)&&this.renderer.framebuffer.clear(0,0,0,0)},n.prototype.applyFilter=function(e,t,i,s){var o=this.renderer;o.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(gi.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(gi.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(e,t){var i=this.activeState,s=i.sourceFrame,o=i.destinationFrame,h=t._texture.orig,u=e.set(o.width,0,0,o.height,s.x,s.y),b=t.worldTransform.copyTo(mr.TEMP_MATRIX);return b.invert(),u.prepend(b),u.scale(1/h.width,1/h.height),u.translate(t.anchor.x,t.anchor.y),u},n.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(e,t,i,s){return i===void 0&&(i=1),s===void 0&&(s=cr.NONE),this.texturePool.getOptimalTexture(e,t,i,s)},n.prototype.getFilterTexture=function(e,t,i){if(typeof e=="number"){var s=e;e=t,t=s}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||cr.NONE);return o.filterFrame=e.filterFrame,o},n.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n.prototype.transformAABB=function(e,t){var i=Ks[0],s=Ks[1],o=Ks[2],h=Ks[3];i.set(t.left,t.top),s.set(t.left,t.bottom),o.set(t.right,t.top),h.set(t.right,t.bottom),e.apply(i,i),e.apply(s,s),e.apply(o,o),e.apply(h,h);var u=Math.min(i.x,s.x,o.x,h.x),b=Math.min(i.y,s.y,o.y,h.y),x=Math.max(i.x,s.x,o.x,h.x),w=Math.max(i.y,s.y,o.y,h.y);t.x=u,t.y=b,t.width=x-u,t.height=w-b},n.prototype.roundFrame=function(e,t,i,s,o){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(o){var h=o.a,u=o.b,b=o.c,x=o.d;if((Math.abs(u)>1e-4||Math.abs(b)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(x)>1e-4))return}(o=o?qo.copyFrom(o):qo.identity()).translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(o,e),e.ceil(t),this.transformAABB(o.invert(),e)}},n}(),Lo=function(){function n(e){this.renderer=e}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(e){},n}(),Oc=function(){function n(e){this.renderer=e,this.emptyRenderer=new Lo(e),this.currentRenderer=this.emptyRenderer}return n.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(e,t){for(var i=this.renderer.texture.boundTextures,s=t-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)},n.prototype.boundArray=function(e,t,i,s){for(var o=e.elements,h=e.ids,u=e.count,b=0,x=0;x<u;x++){var w=o[x],E=w._batchLocation;if(E>=0&&E<s&&t[E]===w)h[x]=E;else for(;b<s;){var C=t[b];if(!C||C._batchEnabled!==i||C._batchLocation!==b){h[x]=b,w._batchLocation=b,t[b]=w;break}b++}}},n.prototype.destroy=function(){this.renderer=null},n}(),gu=0,Dc=function(){function n(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=gu++},n.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=gu++,this.renderer.runners.contextChange.emit(e)},n.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},n.prototype.createContext=function(e,t){var i;if(Ue.PREFER_ENV>=Vi.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},n.prototype.handleContextLost=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()},0)},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(e){var t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(),$c=function(n){this.framebuffer=n,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=cr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Lc=new Bt,Fc=function(){function n(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Ra(10,10),this.msaaSamples=null}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Bt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Ue.PREFER_ENV===Vi.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=function(s){return t.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},n.prototype.bind=function(e,t,i){i===void 0&&(i=0);var s=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=i),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var h=0;h<e.colorTextures.length;h++){var u=e.colorTextures[h];this.renderer.texture.unbind(u.parentTextureArray||u)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var b=t.width>>i,x=t.height>>i,w=b/t.width;this.setViewport(t.x*w,t.y*w,b,x)}else b=e.width>>i,x=e.height>>i,this.setViewport(0,0,b,x)}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(e,t,i,s){var o=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),s=Math.round(s),o.width===i&&o.height===s&&o.x===e&&o.y===t||(o.x=e,o.y=t,o.width=i,o.height=s,this.gl.viewport(e,t,i,s))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(e,t,i,s,o){o===void 0&&(o=bo.COLOR|bo.DEPTH);var h=this.gl;h.clearColor(e,t,i,s),h.clear(o)},n.prototype.initFramebuffer=function(e){var t=this.gl,i=new $c(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},n.prototype.resizeFramebuffer=function(e){var t=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.RGBA8,e.width,e.height)),i.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var s=e.colorTextures,o=s.length;t.drawBuffers||(o=Math.min(o,1));for(var h=0;h<o;h++){var u=s[h],b=u.parentTextureArray||u;this.renderer.texture.bind(b,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},n.prototype.updateFramebuffer=function(e,t){var i=this.gl,s=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,h=o.length;i.drawBuffers||(h=Math.min(h,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?(s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));for(var u=[],b=0;b<h;b++){var x=o[b],w=x.parentTextureArray||x;this.renderer.texture.bind(w,0),b===0&&s.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+b,x.target,w._glTextures[this.CONTEXT_UID].texture,t),u.push(i.COLOR_ATTACHMENT0+b))}if(u.length>1&&i.drawBuffers(u),e.depthTexture&&this.writeDepthTexture){var E=e.depthTexture;this.renderer.texture.bind(E,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,E._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null):(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil))},n.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},n.prototype.detectSamples=function(e){var t=this.msaaSamples,i=cr.NONE;if(e<=1||t===null)return i;for(var s=0;s<t.length;s++)if(t[s]<=e){i=t[s];break}return i===1&&(i=cr.NONE),i},n.prototype.blit=function(e,t,i){var s=this,o=s.current,h=s.renderer,u=s.gl,b=s.CONTEXT_UID;if(h.context.webGLVersion===2&&o){var x=o.glFramebuffers[b];if(x){if(!e){if(!x.msaaBuffer)return;var w=o.colorTextures[0];if(!w)return;x.blitFramebuffer||(x.blitFramebuffer=new Ra(o.width,o.height),x.blitFramebuffer.addColorTexture(0,w)),(e=x.blitFramebuffer).colorTextures[0]!==w&&(e.colorTextures[0]=w,e.dirtyId++,e.dirtyFormat++),e.width===o.width&&e.height===o.height||(e.width=o.width,e.height=o.height,e.dirtyId++,e.dirtySize++)}t||((t=Lc).width=o.width,t.height=o.height),i||(i=t);var E=t.width===i.width&&t.height===i.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,x.framebuffer),u.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,u.COLOR_BUFFER_BIT,E?u.NEAREST:u.LINEAR)}}},n.prototype.disposeFramebuffer=function(e,t){var i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},n.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)},n.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var i=e.width,s=e.height,o=this.gl,h=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h),t.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,t.multisample,o.DEPTH24_STENCIL8,i,s):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i,s),t.stencil=h,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,h)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Bt},n.prototype.destroy=function(){this.renderer=null},n}(),Zo={5126:4,5123:2,5121:1},kc=function(){function n(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;Ue.PREFER_ENV===Vi.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(o){return i.bindVertexArrayOES(o)},e.deleteVertexArray=function(o){return i.deleteVertexArrayOES(o)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(o,h){return s.vertexAttribDivisorANGLE(o,h)},e.drawElementsInstanced=function(o,h,u,b,x){return s.drawElementsInstancedANGLE(o,h,u,b,x)},e.drawArraysInstanced=function(o,h,u,b){return s.drawArraysInstancedANGLE(o,h,u,b)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},n.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var i=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},o=!0);var h=s[t.program.id]||this.initGeometryVao(e,t,o);this._activeGeometry=e,this._activeVao!==h&&(this._activeVao=h,this.hasVao?i.bindVertexArray(h):this.activateVao(e,t.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,i=0;i<e.buffers.length;i++){var s=e.buffers[i];t.update(s)}},n.prototype.checkCompatibility=function(e,t){var i=e.attributes,s=t.attributeData;for(var o in s)if(!i[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},n.prototype.getSignature=function(e,t){var i=e.attributes,s=t.attributeData,o=["g",e.id];for(var h in i)s[h]&&o.push(h,s[h].location);return o.join("-")},n.prototype.initGeometryVao=function(e,t,i){i===void 0&&(i=!0);var s=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,u=t.program;u.glPrograms[o]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,u);var b=this.getSignature(e,u),x=e.glVertexArrayObjects[this.CONTEXT_UID],w=x[b];if(w)return x[u.id]=w,w;var E=e.buffers,C=e.attributes,L={},k={};for(var U in E)L[U]=0,k[U]=0;for(var U in C)!C[U].size&&u.attributeData[U]?C[U].size=u.attributeData[U].size:C[U].size||console.warn("PIXI Geometry attribute '"+U+"' size cannot be determined (likely the bound shader does not have the attribute)"),L[C[U].buffer]+=C[U].size*Zo[C[U].type];for(var U in C){var V=C[U],H=V.size;V.stride===void 0&&(L[V.buffer]===H*Zo[V.type]?V.stride=0:V.stride=L[V.buffer]),V.start===void 0&&(V.start=k[V.buffer],k[V.buffer]+=H*Zo[V.type])}w=s.createVertexArray(),s.bindVertexArray(w);for(var Q=0;Q<E.length;Q++){var te=E[Q];h.bind(te),i&&te._glBuffers[o].refCount++}return this.activateVao(e,u),this._activeVao=w,x[u.id]=w,x[b]=w,w},n.prototype.disposeGeometry=function(e,t){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var s=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,h=e.buffers,u=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),s){if(u)for(var b=0;b<h.length;b++){var x=h[b]._glBuffers[this.CONTEXT_UID];x&&(x.refCount--,x.refCount!==0||t||u.dispose(h[b],t))}if(!t){for(var w in s)if(w[0]==="g"){var E=s[w];this._activeVao===E&&this.unbind(),o.deleteVertexArray(E)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)},n.prototype.activateVao=function(e,t){var i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,h=e.buffers,u=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);var b=null;for(var x in u){var w=u[x],E=h[w.buffer],C=E._glBuffers[s];if(t.attributeData[x]){b!==C&&(o.bind(E),b=C);var L=t.attributeData[x].location;if(i.enableVertexAttribArray(L),i.vertexAttribPointer(L,w.size,w.type||i.FLOAT,w.normalized,w.stride,w.start),w.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(L,1)}}}},n.prototype.draw=function(e,t,i,s){var o=this.gl,h=this._activeGeometry;if(h.indexBuffer){var u=h.indexBuffer.data.BYTES_PER_ELEMENT,b=u===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(e,t||h.indexBuffer.data.length,b,(i||0)*u,s||1):o.drawElements(e,t||h.indexBuffer.data.length,b,(i||0)*u):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(e,i,t||h.getSize(),s||1):o.drawArrays(e,i,t||h.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n.prototype.destroy=function(){this.renderer=null},n}(),Nc=function(){function n(e){e===void 0&&(e=null),this.type=Pr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ue.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(n.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Pr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},n.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function vu(n,e,t){var i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}function yu(n,e){var t=n.getShaderSource(e).split(`
`).map(function(x,w){return w+": "+x}),i=n.getShaderInfoLog(e),s=i.split(`
`),o={},h=s.map(function(x){return parseFloat(x.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(x){return!(!x||o[x])&&(o[x]=!0,!0)}),u=[""];h.forEach(function(x){t[x-1]="%c"+t[x-1]+"%c",u.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var b=t.join(`
`);u[0]=b,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,u),console.groupEnd()}function Jo(n){for(var e=new Array(n),t=0;t<e.length;t++)e[t]=!1;return e}function bu(n,e){switch(n){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Jo(2*e);case"bvec3":return Jo(3*e);case"bvec4":return Jo(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var eo,ql={},cs=ql;function Bc(){if(!eo){eo=ei.MEDIUM;var n=function(){if(cs===ql||cs&&cs.isContextLost()){var t=Ue.ADAPTER.createCanvas(),i=void 0;Ue.PREFER_ENV>=Vi.WEBGL2&&(i=t.getContext("webgl2",{})),i||((i=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),cs=i}return cs}();if(n&&n.getShaderPrecisionFormat){var e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);eo=e.precision?ei.HIGH:ei.MEDIUM}}return eo}function xu(n,e,t){if(n.substring(0,9)!=="precision"){var i=e;return e===ei.HIGH&&t!==ei.HIGH&&(i=ei.MEDIUM),"precision "+i+` float;
`+n}return t!==ei.HIGH&&n.substring(0,15)==="precision highp"?n.replace("precision highp","precision mediump"):n}var Uc={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Zl(n){return Uc[n]}var to=null,Au={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tu(n,e){if(!to){var t=Object.keys(Au);to={};for(var i=0;i<t.length;++i){var s=t[i];to[n[s]]=Au[s]}}return to[e]}var zn=[{test:function(n){return n.type==="float"&&n.size===1&&!n.isArray},code:function(n){return`
            if(uv["`+n+'"] !== ud["'+n+`"].value)
            {
                ud["`+n+'"].value = uv["'+n+`"]
                gl.uniform1f(ud["`+n+'"].location, uv["'+n+`"])
            }
            `}},{test:function(n,e){return!(n.type!=="sampler2D"&&n.type!=="samplerCube"&&n.type!=="sampler2DArray"||n.size!==1||n.isArray||e!=null&&e.castToBaseTexture===void 0)},code:function(n){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+n+`"], t);

            if(ud["`+n+`"].value !== t)
            {
                ud["`+n+`"].value = t;
                gl.uniform1i(ud["`+n+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(n,e){return n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0},code:function(n){return`
            gl.uniformMatrix3fv(ud["`+n+'"].location, false, uv["'+n+`"].toArray(true));
            `},codeUbo:function(n){return`
                var `+n+"_matrix = uv."+n+`.toArray(true);

                data[offset] = `+n+`_matrix[0];
                data[offset+1] = `+n+`_matrix[1];
                data[offset+2] = `+n+`_matrix[2];
        
                data[offset + 4] = `+n+`_matrix[3];
                data[offset + 5] = `+n+`_matrix[4];
                data[offset + 6] = `+n+`_matrix[5];
        
                data[offset + 8] = `+n+`_matrix[6];
                data[offset + 9] = `+n+`_matrix[7];
                data[offset + 10] = `+n+`_matrix[8];
            `}},{test:function(n,e){return n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+n+`"].location, v.x, v.y);
                }`},codeUbo:function(n){return`
                v = uv.`+n+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(n){return n.type==="vec2"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+n+`"].location, v[0], v[1]);
                }
            `}},{test:function(n,e){return n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+n+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(n){return`
                    v = uv.`+n+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(n){return n.type==="vec4"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+n+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Gc={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Xc={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},fs,Vc=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function jc(n){for(var e="",t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+="if(test == "+t+".0){}");return e}var Hc=0,ro={},Vs=function(){function n(e,t,i){i===void 0&&(i="pixi-shader"),this.id=Hc++,this.vertexSrc=e||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ro[i]?(ro[i]++,i+="-"+ro[i]):ro[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=xu(this.vertexSrc,Ue.PRECISION_VERTEX,ei.HIGH),this.fragmentSrc=xu(this.fragmentSrc,Ue.PRECISION_FRAGMENT,Bc())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(n,"defaultVertexSrc",{get:function(){return`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`},enumerable:!1,configurable:!0}),n.from=function(e,t,i){var s=e+t,o=cu[s];return o||(cu[s]=o=new n(e,t,i)),o},n}(),en=function(){function n(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Mn?t:new Mn(t):new Mn({}),this.disposeRunner=new Br("disposeShader")}return n.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var i in t.uniforms){var s=t.uniforms[i];if(s.group&&this.checkUniformExists(e,s))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(e,t,i){return new n(Vs.from(e,t),i)},n}(),Dn=function(){function n(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ft.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},n.for2d=function(){var e=new n;return e.depthTest=!1,e.blend=!0,e},n}(),on=function(n){function e(t,i,s){var o=this,h=Vs.from(t||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(o=n.call(this,h,s)||this).padding=0,o.resolution=Ue.FILTER_RESOLUTION,o.multisample=Ue.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Dn,o}return sr(e,n),e.prototype.apply=function(t,i,s,o,h){t.applyFilter(this,i,s,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`},enumerable:!1,configurable:!0}),e}(en),Eu=new mr,_h=function(){function n(e,t){this._texture=e,this.mapCoord=new mr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=t===void 0?.5:t,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var i=this.mapCoord,s=0;s<e.length;s+=2){var o=e[s],h=e[s+1];t[s]=o*i.a+h*i.c+i.tx,t[s+1]=o*i.b+h*i.d+i.ty}return t},n.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var s=t.orig,o=t.trim;o&&(Eu.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Eu));var h=t.baseTexture,u=this.uClampFrame,b=this.clampMargin/h.resolution,x=this.clampOffset;return u[0]=(t._frame.x+b+x)/h.width,u[1]=(t._frame.y+b+x)/h.height,u[2]=(t._frame.x+t._frame.width-b+x)/h.width,u[3]=(t._frame.y+t._frame.height-b+x)/h.height,this.uClampOffset[0]=x/h.realWidth,this.uClampOffset[1]=x/h.realHeight,this.isSimple=t._frame.width===h.width&&t._frame.height===h.height&&t.rotate===0,!0},n}(),Yc=function(n){function e(t,i,s){var o=this,h=null;return typeof t!="string"&&i===void 0&&s===void 0&&(h=t,t=void 0,i=void 0,s=void 0),(o=n.call(this,t||`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,i||`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,s)||this).maskSprite=h,o.maskMatrix=new mr,o}return sr(e,n),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,i,s,o){var h=this._maskSprite,u=h._texture;u.valid&&(u.uvMatrix||(u.uvMatrix=new _h(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,h).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=h.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,t.applyFilter(this,i,s,o))},e}(on),zc=function(){function n(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return n.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},n.prototype.push=function(e,t){var i=t;if(!i.isMaskData){var s=this.maskDataPool.pop()||new Nc;s.pooled=!0,s.maskObject=t,i=s}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(o),i._colorMask=o?o._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Pr.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Pr.SCISSOR:this.renderer.scissor.push(i);break;case Pr.STENCIL:this.renderer.stencil.push(i);break;case Pr.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Pr.COLOR:this.pushColorMask(i)}i.type===Pr.SPRITE&&this.maskStack.push(i)},n.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Pr.SCISSOR:this.renderer.scissor.pop(t);break;case Pr.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Pr.SPRITE:this.popSpriteMask(t);break;case Pr.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===Pr.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},n.prototype.detect=function(e){var t=e.maskObject;t?t.isSprite?e.type=Pr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Pr.SCISSOR:e.type=Pr.STENCIL:e.type=Pr.COLOR},n.prototype.pushSpriteMask=function(e){var t,i,s=e.maskObject,o=e._target,h=e._filters;h||(h=this.alphaMaskPool[this.alphaMaskIndex])||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new Yc]);var u,b,x=this.renderer,w=x.renderTexture;if(w.current){var E=w.current;u=e.resolution||E.resolution,b=(t=e.multisample)!==null&&t!==void 0?t:E.multisample}else u=e.resolution||x.resolution,b=(i=e.multisample)!==null&&i!==void 0?i:x.multisample;h[0].resolution=u,h[0].multisample=b,h[0].maskSprite=s;var C=o.filterArea;o.filterArea=s.getBounds(!0),x.filter.push(o,h),o.filterArea=C,e._filters||this.alphaMaskIndex++},n.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},n.prototype.pushColorMask=function(e){var t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))},n.prototype.popColorMask=function(e){var t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))},n.prototype.destroy=function(){this.renderer=null},n}(),Jl=function(){function n(e){this.renderer=e,this.maskStack=[],this.glConst=0}return n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(e){var t=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==i&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){this.renderer=null,this.maskStack=null},n}(),wu=new mr,Su=[],Wc=function(n){function e(t){var i=n.call(this,t)||this;return i.glConst=Ue.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return sr(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var i;if(!t._scissorRectLocal){var s=t._scissorRect,o=t.maskObject,h=this.renderer,u=h.renderTexture,b=o.getBounds(!0,(i=Su.pop())!==null&&i!==void 0?i:new Bt);this.roundFrameToPixels(b,u.current?u.current.resolution:h.resolution,u.sourceFrame,u.destinationFrame,h.projection.transform),s&&b.fit(s),t._scissorRectLocal=b}},e.isMatrixRotated=function(t){if(!t)return!1;var i=t.a,s=t.b,o=t.c,h=t.d;return(Math.abs(s)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(h)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var s=t._scissorRectLocal;return s.width>0&&s.height>0},e.prototype.roundFrameToPixels=function(t,i,s,o,h){e.isMatrixRotated(h)||((h=h?wu.copyFrom(h):wu.identity()).translate(-s.x,-s.y).scale(o.width/s.width,o.height/s.height).translate(o.x,o.y),this.renderer.filter.transformAABB(h,t),t.fit(o),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var i=this.renderer.gl;t._scissorRect||i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var i=this.renderer.gl;t&&Su.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,i=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?i.y:this.renderer.height-i.height-i.y,this.renderer.gl.scissor(i.x,t,i.width,i.height)},e}(Jl),qc=function(n){function e(t){var i=n.call(this,t)||this;return i.glConst=Ue.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return sr(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var i=t.maskObject,s=this.renderer.gl,o=t._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;var h=t._colorMask;h!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,o,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,h!==0&&(t._colorMask=h,s.colorMask(!!(1&h),!!(2&h),!!(4&h),!!(8&h))),this._useCurrent()},e.prototype.pop=function(t){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=s?s._colorMask:15;o!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,o!==0&&(s._colorMask=o,i.colorMask(!!(1&o),!!(2&o),!!(4&o),!!(8&o))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Jl),Zc=function(){function n(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new mr,this.transform=null}return n.prototype.update=function(e,t,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(e,t,i,s){var o=this.projectionMatrix,h=s?-1:1;o.identity(),o.a=1/t.width*2,o.d=h*(1/t.height*2),o.tx=-1-t.x*o.a,o.ty=-h-t.y*o.d},n.prototype.setTransform=function(e){},n.prototype.destroy=function(){this.renderer=null},n}(),ln=new Bt,ds=new Bt,Jc=function(){function n(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Bt,this.destinationFrame=new Bt,this.viewportFrame=new Bt}return n.prototype.bind=function(e,t,i){e===void 0&&(e=null);var s,o,h,u=this.renderer;this.current=e,e?(h=(s=e.baseTexture).resolution,t||(ln.width=e.frame.width,ln.height=e.frame.height,t=ln),i||(ds.x=e.frame.x,ds.y=e.frame.y,ds.width=t.width,ds.height=t.height,i=ds),o=s.framebuffer):(h=u.resolution,t||(ln.width=u.screen.width,ln.height=u.screen.height,t=ln),i||((i=ln).width=t.width,i.height=t.height));var b=this.viewportFrame;b.x=i.x*h,b.y=i.y*h,b.width=i.width*h,b.height=i.height*h,e||(b.y=u.view.height-(b.y+b.height)),b.ceil(),this.renderer.framebuffer.bind(o,b),this.renderer.projection.update(i,t,h,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)},n.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var i=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=i.width!==s.width||i.height!==s.height;if(o){var h=this.viewportFrame,u=h.x,b=h.y,x=h.width,w=h.height;u=Math.round(u),b=Math.round(b),x=Math.round(x),w=Math.round(w),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,b,x,w)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),o&&this.renderer.scissor.pop()},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n.prototype.destroy=function(){this.renderer=null},n}();function Qc(n,e,t,i,s){t.buffer.update(s)}var Kc={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Pu={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function ef(n,e){if(!n.autoManage)return{size:0,syncFunc:Qc};for(var t=function(te,ie){var ae=[];for(var ne in te)ie[ne]&&ae.push(ie[ne]);return ae.sort(function(le,oe){return le.index-oe.index}),ae}(n.uniforms,e),i=function(te){for(var ie=te.map(function(pe){return{data:pe,offset:0,dataLen:0,dirty:0}}),ae=0,ne=0,le=0,oe=0;oe<ie.length;oe++){var ye=ie[oe];if(ae=Pu[ye.data.type],ye.data.size>1&&(ae=Math.max(ae,16)*ye.data.size),ye.dataLen=ae,ne%ae!==0&&ne<16){var Xe=ne%ae%16;ne+=Xe,le+=Xe}ne+ae>16?(le=16*Math.ceil(le/16),ye.offset=le,le+=ae,ne=ae):(ye.offset=le,ne+=ae,le+=ae)}return{uboElements:ie,size:le=16*Math.ceil(le/16)}}(t),s=i.uboElements,o=i.size,h=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],u=0;u<s.length;u++){for(var b=s[u],x=n.uniforms[b.data.name],w=b.data.name,E=!1,C=0;C<zn.length;C++){var L=zn[C];if(L.codeUbo&&L.test(b.data,x)){h.push("offset = "+b.offset/4+";",zn[C].codeUbo(b.data.name,x)),E=!0;break}}if(!E)if(b.data.size>1){var k=Zl(b.data.type),U=Math.max(Pu[b.data.type]/16,1),V=k/U,H=(4-V%4)%4;h.push(`
                cv = ud.`+w+`.value;
                v = uv.`+w+`;
                offset = `+b.offset/4+`;

                t = 0;

                for(var i=0; i < `+b.data.size*U+`; i++)
                {
                    for(var j = 0; j < `+V+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+H+`;
                }

                `)}else{var Q=Kc[b.data.type];h.push(`
                cv = ud.`+w+`.value;
                v = uv.`+w+`;
                offset = `+b.offset/4+`;
                `+Q+`;
                `)}}return h.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",h.join(`
`))}}var tf=function(){function n(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},n}();function rf(n,e){var t=vu(n,n.VERTEX_SHADER,e.vertexSrc),i=vu(n,n.FRAGMENT_SHADER,e.fragmentSrc),s=n.createProgram();if(n.attachShader(s,t),n.attachShader(s,i),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||function(x,w,E,C){x.getProgramParameter(w,x.LINK_STATUS)||(x.getShaderParameter(E,x.COMPILE_STATUS)||yu(x,E),x.getShaderParameter(C,x.COMPILE_STATUS)||yu(x,C),console.error("PixiJS Error: Could not initialize shader."),x.getProgramInfoLog(w)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",x.getProgramInfoLog(w)))}(n,s,t,i),e.attributeData=function(x,w){for(var E={},C=w.getProgramParameter(x,w.ACTIVE_ATTRIBUTES),L=0;L<C;L++){var k=w.getActiveAttrib(x,L);if(k.name.indexOf("gl_")!==0){var U=Tu(w,k.type),V={type:U,name:k.name,size:Zl(U),location:w.getAttribLocation(x,k.name)};E[k.name]=V}}return E}(s,n),e.uniformData=function(x,w){for(var E={},C=w.getProgramParameter(x,w.ACTIVE_UNIFORMS),L=0;L<C;L++){var k=w.getActiveUniform(x,L),U=k.name.replace(/\[.*?\]$/,""),V=!!k.name.match(/\[.*?\]$/),H=Tu(w,k.type);E[U]={name:U,index:L,type:H,size:k.size,isArray:V,value:bu(H,k.size)}}return E}(s,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort(function(x,w){return x>w?1:-1});for(var h=0;h<o.length;h++)e.attributeData[o[h]].location=h,n.bindAttribLocation(s,h,o[h]);n.linkProgram(s)}n.deleteShader(t),n.deleteShader(i);var u={};for(var h in e.uniformData){var b=e.uniformData[h];u[h]={location:n.getUniformLocation(s,h),value:bu(b.type,b.size)}}return new tf(s,u)}var nf=0,io={textureCount:0,uboCount:0},sf=function(){function n(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=nf++}return n.prototype.systemCheck=function(){if(!function(){if(typeof fs=="boolean")return fs;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");fs=e({a:"b"},"a","b")===!0}catch{fs=!1}return fs}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(e){this.gl=e,this.reset()},n.prototype.bind=function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),t||(io.textureCount=0,io.uboCount=0,this.syncUniformGroup(e.uniformGroup,io)),s},n.prototype.setUniforms=function(e){var t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)},n.prototype.syncUniformGroup=function(e,t){var i=this.getGlProgram();e.static&&e.dirtyId===i.uniformDirtyGroups[e.id]||(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))},n.prototype.syncUniforms=function(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)},n.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(i,s){var o,h=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var u in i.uniforms){var b=s[u];if(b){for(var x=i.uniforms[u],w=!1,E=0;E<zn.length;E++)if(zn[E].test(b,x)){h.push(zn[E].code(u,x)),w=!0;break}if(!w){var C=(b.size!==1||b.isArray?Xc:Gc)[b.type].replace("location",'ud["'+u+'"].location');h.push(`
            cu = ud["`+u+`"];
            cv = cu.value;
            v = uv["`+u+`"];
            `+C+";")}}else!((o=i.uniforms[u])===null||o===void 0)&&o.group&&(i.uniforms[u].ubo?h.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+u+", '"+u+`');
                    `):h.push(`
                        renderer.shader.syncUniformGroup(uv.`+u+`, syncData);
                    `))}return new Function("ud","uv","renderer","syncData",h.join(`
`))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},n.prototype.syncUniformBufferGroup=function(e,t){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,io,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])},n.prototype.createSyncBufferGroup=function(e,t,i){var s=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var o=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var h=this.getSignature(e,this.shader.program.uniformData,"ubo"),u=this._uboCache[h];if(u||(u=this._uboCache[h]=ef(e,this.shader.program.uniformData)),e.autoManage){var b=new Float32Array(u.size/4);e.buffer.update(b)}return t.uniformGroups[e.id]=u.syncFunc,t.uniformGroups[e.id]},n.prototype.getSignature=function(e,t,i){var s=e.uniforms,o=[i+"-"];for(var h in s)o.push(h),t[h]&&o.push(t[h].type);return o.join("-")},n.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateProgram=function(e){var t=this.gl,i=e.program,s=rf(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},n.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},n}(),of=function(){function n(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ft.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Dn,this.defaultState.blend=!0}return n.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(t,i){return i===void 0&&(i=[]),i[ft.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.ADD]=[t.ONE,t.ONE],i[ft.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.NONE]=[0,0],i[ft.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],i[ft.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],i[ft.SRC_IN]=[t.DST_ALPHA,t.ZERO],i[ft.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],i[ft.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],i[ft.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],i[ft.DST_IN]=[t.ZERO,t.SRC_ALPHA],i[ft.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],i[ft.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],i[ft.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],i[ft.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],i}(e),this.set(this.defaultState),this.reset()},n.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,i=0;t;)1&t&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,e)},n.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},n.prototype.setBlend=function(e){this.updateCheck(n.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(e){this.updateCheck(n.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setDepthMask=function(e){this.gl.depthMask(e)},n.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},n.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},n.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(e,t){var i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):t||i===-1||this.checks.splice(i,1)},n.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},n.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},n.prototype.destroy=function(){this.gl=null},n}(),af=function(){function n(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ue.GC_MAX_IDLE,this.checkCountMax=Ue.GC_MAX_CHECK_COUNT,this.mode=Ue.GC_MODE}return n.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ao.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,i=!1,s=0;s<t.length;s++){var o=t[s];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),t[s]=null,i=!0)}if(i){var h=0;for(s=0;s<t.length;s++)t[s]!==null&&(t[h++]=t[s]);t.length=h}},n.prototype.unload=function(e){var t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},n.prototype.destroy=function(){this.renderer=null},n}(),Qo=function(n){this.texture=n,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ct.UNSIGNED_BYTE,this.internalFormat=Ce.RGBA,this.samplerType=0},hf=function(){function n(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Vt,this.hasIntegerTextures=!1}return n.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(o){var h,u,b,x,w,E,C,L,k,U,V,H,Q,te,ie,ae,ne,le,oe,ye,Xe,pe,_e;return"WebGL2RenderingContext"in globalThis&&o instanceof globalThis.WebGL2RenderingContext?((h={})[ct.UNSIGNED_BYTE]=((u={})[Ce.RGBA]=o.RGBA8,u[Ce.RGB]=o.RGB8,u[Ce.RG]=o.RG8,u[Ce.RED]=o.R8,u[Ce.RGBA_INTEGER]=o.RGBA8UI,u[Ce.RGB_INTEGER]=o.RGB8UI,u[Ce.RG_INTEGER]=o.RG8UI,u[Ce.RED_INTEGER]=o.R8UI,u[Ce.ALPHA]=o.ALPHA,u[Ce.LUMINANCE]=o.LUMINANCE,u[Ce.LUMINANCE_ALPHA]=o.LUMINANCE_ALPHA,u),h[ct.BYTE]=((b={})[Ce.RGBA]=o.RGBA8_SNORM,b[Ce.RGB]=o.RGB8_SNORM,b[Ce.RG]=o.RG8_SNORM,b[Ce.RED]=o.R8_SNORM,b[Ce.RGBA_INTEGER]=o.RGBA8I,b[Ce.RGB_INTEGER]=o.RGB8I,b[Ce.RG_INTEGER]=o.RG8I,b[Ce.RED_INTEGER]=o.R8I,b),h[ct.UNSIGNED_SHORT]=((x={})[Ce.RGBA_INTEGER]=o.RGBA16UI,x[Ce.RGB_INTEGER]=o.RGB16UI,x[Ce.RG_INTEGER]=o.RG16UI,x[Ce.RED_INTEGER]=o.R16UI,x[Ce.DEPTH_COMPONENT]=o.DEPTH_COMPONENT16,x),h[ct.SHORT]=((w={})[Ce.RGBA_INTEGER]=o.RGBA16I,w[Ce.RGB_INTEGER]=o.RGB16I,w[Ce.RG_INTEGER]=o.RG16I,w[Ce.RED_INTEGER]=o.R16I,w),h[ct.UNSIGNED_INT]=((E={})[Ce.RGBA_INTEGER]=o.RGBA32UI,E[Ce.RGB_INTEGER]=o.RGB32UI,E[Ce.RG_INTEGER]=o.RG32UI,E[Ce.RED_INTEGER]=o.R32UI,E[Ce.DEPTH_COMPONENT]=o.DEPTH_COMPONENT24,E),h[ct.INT]=((C={})[Ce.RGBA_INTEGER]=o.RGBA32I,C[Ce.RGB_INTEGER]=o.RGB32I,C[Ce.RG_INTEGER]=o.RG32I,C[Ce.RED_INTEGER]=o.R32I,C),h[ct.FLOAT]=((L={})[Ce.RGBA]=o.RGBA32F,L[Ce.RGB]=o.RGB32F,L[Ce.RG]=o.RG32F,L[Ce.RED]=o.R32F,L[Ce.DEPTH_COMPONENT]=o.DEPTH_COMPONENT32F,L),h[ct.HALF_FLOAT]=((k={})[Ce.RGBA]=o.RGBA16F,k[Ce.RGB]=o.RGB16F,k[Ce.RG]=o.RG16F,k[Ce.RED]=o.R16F,k),h[ct.UNSIGNED_SHORT_5_6_5]=((U={})[Ce.RGB]=o.RGB565,U),h[ct.UNSIGNED_SHORT_4_4_4_4]=((V={})[Ce.RGBA]=o.RGBA4,V),h[ct.UNSIGNED_SHORT_5_5_5_1]=((H={})[Ce.RGBA]=o.RGB5_A1,H),h[ct.UNSIGNED_INT_2_10_10_10_REV]=((Q={})[Ce.RGBA]=o.RGB10_A2,Q[Ce.RGBA_INTEGER]=o.RGB10_A2UI,Q),h[ct.UNSIGNED_INT_10F_11F_11F_REV]=((te={})[Ce.RGB]=o.R11F_G11F_B10F,te),h[ct.UNSIGNED_INT_5_9_9_9_REV]=((ie={})[Ce.RGB]=o.RGB9_E5,ie),h[ct.UNSIGNED_INT_24_8]=((ae={})[Ce.DEPTH_STENCIL]=o.DEPTH24_STENCIL8,ae),h[ct.FLOAT_32_UNSIGNED_INT_24_8_REV]=((ne={})[Ce.DEPTH_STENCIL]=o.DEPTH32F_STENCIL8,ne),_e=h):((le={})[ct.UNSIGNED_BYTE]=((oe={})[Ce.RGBA]=o.RGBA,oe[Ce.RGB]=o.RGB,oe[Ce.ALPHA]=o.ALPHA,oe[Ce.LUMINANCE]=o.LUMINANCE,oe[Ce.LUMINANCE_ALPHA]=o.LUMINANCE_ALPHA,oe),le[ct.UNSIGNED_SHORT_5_6_5]=((ye={})[Ce.RGB]=o.RGB,ye),le[ct.UNSIGNED_SHORT_4_4_4_4]=((Xe={})[Ce.RGBA]=o.RGBA,Xe),le[ct.UNSIGNED_SHORT_5_5_5_1]=((pe={})[Ce.RGBA]=o.RGBA,pe),_e=le),_e}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};var s=new Qo(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Qo(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},n.prototype.bind=function(e,t){t===void 0&&(t=0);var i=this.gl;if((e=e==null?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},n.prototype.unbind=function(e){var t=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)},n.prototype.ensureSamplerType=function(e){var t=this,i=t.boundTextures,s=t.hasIntegerTextures,o=t.CONTEXT_UID;if(s)for(var h=e-1;h>=0;--h){var u=i[h];u&&u._glTextures[o].samplerType!==xo.FLOAT&&this.renderer.texture.unbind(u)}},n.prototype.initTexture=function(e){var t=new Qo(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},n.prototype.initTextureType=function(e,t){var i,s;t.internalFormat=(s=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&s!==void 0?s:e.format,this.webGLVersion===2&&e.type===ct.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},n.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var i=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(i,e,t))t.samplerType!==xo.FLOAT&&(this.hasIntegerTextures=!0);else{var s=e.realWidth,o=e.realHeight,h=i.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,h.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},n.prototype.destroyTexture=function(e,t){var i=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var s=this.managedTextures.indexOf(e);s!==-1&&Yn(this.managedTextures,s,1)}},n.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==bi.POW2&&this.webGLVersion===2||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,this.webGLVersion===2||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=$i.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},n.prototype.setStyle=function(e,t){var i=this.gl;if(t.mipmap&&e.mipmap!==bi.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Di.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Di.LINEAR){var o=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Di.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Di.LINEAR?i.LINEAR:i.NEAREST)},n.prototype.destroy=function(){this.renderer=null},n}(),Ko=new mr,uf=function(n){function e(t,i){t===void 0&&(t=Is.UNKNOWN);var s=n.call(this)||this;return i=Object.assign({},Ue.RENDER_OPTIONS,i),s.options=i,s.type=t,s.screen=new Bt(0,0,i.width,i.height),s.view=i.view||Ue.ADAPTER.createCanvas(),s.resolution=i.resolution||Ue.RESOLUTION,s.useContextAlpha=i.useContextAlpha,s.autoDensity=!!i.autoDensity,s.preserveDrawingBuffer=i.preserveDrawingBuffer,s.clearBeforeRender=i.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=i.backgroundColor||s._backgroundColor,s.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(yi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=i.transparent,s.backgroundAlpha=i.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return sr(e,n),e.prototype.initPlugins=function(t){for(var i in t)this.plugins[i]=new t[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,i){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(i*this.resolution);var s=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=s,this.screen.height=o,this.autoDensity&&(this.view.style.width=s+"px",this.view.style.height=o+"px"),this.emit("resize",s,o)},e.prototype.generateTexture=function(t,i,s,o){i===void 0&&(i={}),typeof i=="number"&&(yi("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:s,region:o});var h=i.region,u=function(x,w){var E={};for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&w.indexOf(C)<0&&(E[C]=x[C]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var L=0;for(C=Object.getOwnPropertySymbols(x);L<C.length;L++)w.indexOf(C[L])<0&&Object.prototype.propertyIsEnumerable.call(x,C[L])&&(E[C[L]]=x[C[L]])}return E}(i,["region"]);(o=h||t.getLocalBounds(null,!0)).width===0&&(o.width=1),o.height===0&&(o.height=1);var b=Cn.create(Ia({width:o.width,height:o.height},u));return Ko.tx=-o.x,Ko.ty=-o.y,this.render(t,{renderTexture:b,clear:!1,transform:Ko,skipUpdateTransform:!!t.parent}),b},e.prototype.destroy=function(t){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var s=this;s.plugins=null,s.type=Is.UNKNOWN,s.view=null,s.screen=null,s._tempDisplayObjectParent=null,s.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=kl(t),Zn(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(sn),lf=function(n){this.buffer=n||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},cf=function(){function n(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return n.prototype.destroy=function(){this.renderer=null},n.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},n.prototype.bind=function(e){var t=this.gl,i=this.CONTEXT_UID,s=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)},n.prototype.bindBufferBase=function(e,t){var i=this.gl,s=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var o=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,o.buffer)}},n.prototype.bindBufferRange=function(e,t,i){var s=this.gl,o=this.CONTEXT_UID;i=i||0;var h=e._glBuffers[o]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,h.buffer,256*i,256)},n.prototype.update=function(e){var t=this.gl,i=this.CONTEXT_UID,s=e._glBuffers[i];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var o=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,o)}},n.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(t||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)},n.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,i=this.gl;return e._glBuffers[t]=new lf(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},n}(),Ql=function(n){function e(t){var i=n.call(this,Is.WEBGL,t)||this;return t=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Br("destroy"),contextChange:new Br("contextChange"),reset:new Br("reset"),update:new Br("update"),postrender:new Br("postrender"),prerender:new Br("prerender"),resize:new Br("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Mn({projectionMatrix:new mr},!0),i.addSystem(zc,"mask").addSystem(Dc,"context").addSystem(of,"state").addSystem(sf,"shader").addSystem(hf,"texture").addSystem(cf,"buffer").addSystem(kc,"geometry").addSystem(Fc,"framebuffer").addSystem(Wc,"scissor").addSystem(qc,"stencil").addSystem(Zc,"projection").addSystem(af,"textureGC").addSystem(Cc,"filter").addSystem(Jc,"renderTexture").addSystem(Oc,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,t.context?i.context.initFromContext(t.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:t.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,function(s){var o;if(!su){if(Ue.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var h=[`
 %c %c %c PixiJS `+ou+" -  "+s+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(o=globalThis.console).log.apply(o,h)}else globalThis.console&&globalThis.console.log("PixiJS "+ou+" - "+s+" - http://www.pixijs.com/");su=!0}}(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return sr(e,n),e.create=function(t){if(zo===void 0&&(zo=function(){var i={stencil:!0,failIfMajorPerformanceCaveat:Ue.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Ue.ADAPTER.getWebGLRenderingContext())return!1;var s=Ue.ADAPTER.createCanvas(),o=s.getContext("webgl",i)||s.getContext("experimental-webgl",i),h=!(!o||!o.getContextAttributes().stencil);if(o){var u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,h}catch{return!1}}()),zo)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,i=this.gl;if(this.context.webGLVersion===1){var s=i.getParameter(i.FRAMEBUFFER_BINDING);i.bindFramebuffer(i.FRAMEBUFFER,null),t=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.FRAMEBUFFER,s)}else s=i.getParameter(i.DRAW_FRAMEBUFFER_BINDING),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),t=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,s);t>=cr.HIGH?this.multisample=cr.HIGH:t>=cr.MEDIUM?this.multisample=cr.MEDIUM:t>=cr.LOW?this.multisample=cr.LOW:this.multisample=cr.NONE},e.prototype.addSystem=function(t,i){var s=new t(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');for(var o in this[i]=s,this.runners)this.runners[o].add(s);return this},e.prototype.render=function(t,i){var s,o,h,u;if(i&&(i instanceof Cn?(yi("6.0.0","Renderer#render arguments changed, use options instead."),s=i,o=arguments[2],h=arguments[3],u=arguments[4]):(s=i.renderTexture,o=i.clear,h=i.transform,u=i.skipUpdateTransform)),this.renderingToScreen=!s,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=h,!this.context.isLost){if(s||(this._lastObjectRendered=t),!u){var b=t.enableTempParent();t.updateTransform(),t.disableTempParent(b)}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,i,s,o){i===void 0&&(i={});var h=n.prototype.generateTexture.call(this,t,i,s,o);return this.framebuffer.blit(),h},e.prototype.resize=function(t,i){n.prototype.resize.call(this,t,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();n.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return yi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){yi("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Hi.add({name:t,type:Jt.RendererPlugin,ref:i})},e.__plugins={},e}(uf);Hi.handleByMap(Jt.RendererPlugin,Ql.__plugins);var Kl=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Ca=function(){this.texArray=null,this.blend=0,this.type=gi.TRIANGLES,this.start=0,this.size=0,this.data=null},Oa=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},n}(),Da=function(){function n(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(e){return this[e+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},n}(),ff=function(n){function e(t){var i=n.call(this,t)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Dn.for2d(),i.size=4*Ue.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),t.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return sr(e,n),e.prototype.contextChange=function(){var t=this.renderer.gl;Ue.PREFER_ENV===Vi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Ue.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(s,o){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var h=o.createShader(o.FRAGMENT_SHADER);;){var u=Vc.replace(/%forloop%/gi,jc(s));if(o.shaderSource(h,u),o.compileShader(h),o.getShaderParameter(h,o.COMPILE_STATUS))break;s=s/2|0}return s}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,s=this.size/4,o=Math.floor(s/this.MAX_TEXTURES)+1;t.length<s;)t.push(new Ca);for(;i.length<o;)i.push(new Oa);for(var h=0;h<this.MAX_TEXTURES;h++)this._tempBoundTextures[h]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,s=e._textureArrayPool,o=this.renderer.batch,h=this._tempBoundTextures,u=this.renderer.textureGC.count,b=++Vt._globalBatch,x=0,w=s[0],E=0;o.copyBoundTextures(h,i);for(var C=0;C<this._bufferSize;++C){var L=t[C];t[C]=null,L._batchEnabled!==b&&(w.count>=i&&(o.boundArray(w,h,b,i),this.buildDrawCalls(w,E,C),E=C,w=s[++x],++b),L._batchEnabled=b,L.touched=u,w.elements[w.count++]=L)}for(w.count>0&&(o.boundArray(w,h,b,i),this.buildDrawCalls(w,E,this._bufferSize),++x,++b),C=0;C<h.length;C++)h[C]=null;Vt._globalBatch=b},e.prototype.buildDrawCalls=function(t,i,s){var o=this,h=o._bufferedElements,u=o._attributeBuffer,b=o._indexBuffer,x=o.vertexSize,w=e._drawCallPool,E=this._dcIndex,C=this._aIndex,L=this._iIndex,k=w[E];k.start=this._iIndex,k.texArray=t;for(var U=i;U<s;++U){var V=h[U],H=V._texture.baseTexture,Q=Bl[H.alphaMode?1:0][V.blendMode];h[U]=null,i<U&&k.blend!==Q&&(k.size=L-k.start,i=U,(k=w[++E]).texArray=t,k.start=L),this.packInterleavedGeometry(V,u,b,C,L),C+=V.vertexData.length/2*x,L+=V.indices.length,k.blend=Q}i<s&&(k.size=L-k.start,++E),this._dcIndex=E,this._aIndex=C,this._iIndex=L},e.prototype.bindAndClearTexArray=function(t){for(var i=this.renderer.texture,s=0;s<t.count;s++)i.bind(t.elements[s],t.ids[s]),t.elements[s]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,i=t._packedGeometries,s=t._attributeBuffer,o=t._indexBuffer;Ue.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,s=i.gl,o=i.state,h=e._drawCallPool,u=null,b=0;b<t;b++){var x=h[b],w=x.texArray,E=x.type,C=x.size,L=x.start,k=x.blend;u!==w&&(u=w,this.bindAndClearTexArray(w)),this.state.blendMode=k,o.set(this.state),s.drawElements(E,C,s.UNSIGNED_SHORT,2*L)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ue.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var i=To(Math.ceil(t/8)),s=uu(i),o=8*i;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._aBuffers[o];return h||(this._aBuffers[o]=h=new Da(o*this.vertexSize*4)),h},e.prototype.getIndexBuffer=function(t){var i=To(Math.ceil(t/12)),s=uu(i),o=12*i;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._iBuffers[s];return h||(this._iBuffers[s]=h=new Uint16Array(o)),h},e.prototype.packInterleavedGeometry=function(t,i,s,o,h){for(var u=i.uint32View,b=i.float32View,x=o/this.vertexSize,w=t.uvs,E=t.indices,C=t.vertexData,L=t._texture.baseTexture._batchLocation,k=Math.min(t.worldAlpha,1),U=k<1&&t._texture.baseTexture.alphaMode?dh(t._tintRGB,k):t._tintRGB+(255*k<<24),V=0;V<C.length;V+=2)b[o++]=C[V],b[o++]=C[V+1],b[o++]=w[V],b[o++]=w[V+1],u[o++]=U,b[o++]=L;for(V=0;V<E.length;V++)s[h++]=x+E[V]},e._drawCallPool=[],e._textureArrayPool=[],e}(Lo),df=function(){function n(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),i=0;i<e;i++)t[i]=i;this.defaultGroupCache[e]=Mn.from({uSamplers:t},!0);var s=this.fragTemplate;s=(s=s.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Vs(this.vertexSrc,s)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new mr,default:this.defaultGroupCache[e]};return new en(this.programCache[e],o)},n.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+="if(vTextureId < "+i+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`},n}(),e0=function(n){function e(t){t===void 0&&(t=!1);var i=n.call(this)||this;return i._buffer=new Rr(null,t,!1),i._indexBuffer=new Rr(null,t,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ct.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ct.FLOAT).addAttribute("aColor",i._buffer,4,!0,ct.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ct.FLOAT).addIndex(i._indexBuffer),i}return sr(e,n),e}(Xs),Mu=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Iu=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,pf=function(){function n(){}return n.create=function(e){var t=Object.assign({vertex:Mu,fragment:Iu,geometryClass:e0,vertexSize:6},e),i=t.vertex,s=t.fragment,o=t.vertexSize,h=t.geometryClass;return function(u){function b(x){var w=u.call(this,x)||this;return w.shaderGenerator=new df(i,s),w.geometryClass=h,w.vertexSize=o,w}return sr(b,u),b}(ff)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return Mu},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return Iu},enumerable:!1,configurable:!0}),n}(),t0=pf.create();Object.assign(t0,{extension:{name:"batch",type:Jt.RendererPlugin}}),Ue.SORTABLE_CHILDREN=!1;var So=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Bt.EMPTY:((e=e||new Bt(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var i=e.a,s=e.b,o=e.c,h=e.d,u=e.tx,b=e.ty,x=i*t.x+o*t.y+u,w=s*t.x+h*t.y+b;this.minX=Math.min(this.minX,x),this.maxX=Math.max(this.maxX,x),this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)},n.prototype.addQuad=function(e){var t=this.minX,i=this.minY,s=this.maxX,o=this.maxY,h=e[0],u=e[1];t=h<t?h:t,i=u<i?u:i,s=h>s?h:s,o=u>o?u:o,t=(h=e[2])<t?h:t,i=(u=e[3])<i?u:i,s=h>s?h:s,o=u>o?u:o,t=(h=e[4])<t?h:t,i=(u=e[5])<i?u:i,s=h>s?h:s,o=u>o?u:o,t=(h=e[6])<t?h:t,i=(u=e[7])<i?u:i,s=h>s?h:s,o=u>o?u:o,this.minX=t,this.minY=i,this.maxX=s,this.maxY=o},n.prototype.addFrame=function(e,t,i,s,o){this.addFrameMatrix(e.worldTransform,t,i,s,o)},n.prototype.addFrameMatrix=function(e,t,i,s,o){var h=e.a,u=e.b,b=e.c,x=e.d,w=e.tx,E=e.ty,C=this.minX,L=this.minY,k=this.maxX,U=this.maxY,V=h*t+b*i+w,H=u*t+x*i+E;C=V<C?V:C,L=H<L?H:L,k=V>k?V:k,U=H>U?H:U,C=(V=h*s+b*i+w)<C?V:C,L=(H=u*s+x*i+E)<L?H:L,k=V>k?V:k,U=H>U?H:U,C=(V=h*t+b*o+w)<C?V:C,L=(H=u*t+x*o+E)<L?H:L,k=V>k?V:k,U=H>U?H:U,C=(V=h*s+b*o+w)<C?V:C,L=(H=u*s+x*o+E)<L?H:L,k=V>k?V:k,U=H>U?H:U,this.minX=C,this.minY=L,this.maxX=k,this.maxY=U},n.prototype.addVertexData=function(e,t,i){for(var s=this.minX,o=this.minY,h=this.maxX,u=this.maxY,b=t;b<i;b+=2){var x=e[b],w=e[b+1];s=x<s?x:s,o=w<o?w:o,h=x>h?x:h,u=w>u?w:u}this.minX=s,this.minY=o,this.maxX=h,this.maxY=u},n.prototype.addVertices=function(e,t,i,s){this.addVerticesMatrix(e.worldTransform,t,i,s)},n.prototype.addVerticesMatrix=function(e,t,i,s,o,h){o===void 0&&(o=0),h===void 0&&(h=o);for(var u=e.a,b=e.b,x=e.c,w=e.d,E=e.tx,C=e.ty,L=this.minX,k=this.minY,U=this.maxX,V=this.maxY,H=i;H<s;H+=2){var Q=t[H],te=t[H+1],ie=u*Q+x*te+E,ae=w*te+b*Q+C;L=Math.min(L,ie-o),U=Math.max(U,ie+o),k=Math.min(k,ae-h),V=Math.max(V,ae+h)}this.minX=L,this.minY=k,this.maxX=U,this.maxY=V},n.prototype.addBounds=function(e){var t=this.minX,i=this.minY,s=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>o?e.maxY:o},n.prototype.addBoundsMask=function(e,t){var i=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,h=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=o&&s<=h){var u=this.minX,b=this.minY,x=this.maxX,w=this.maxY;this.minX=i<u?i:u,this.minY=s<b?s:b,this.maxX=o>x?o:x,this.maxY=h>w?h:w}},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var i=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,h=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=o&&s<=h){var u=this.minX,b=this.minY,x=this.maxX,w=this.maxY;this.minX=i<u?i:u,this.minY=s<b?s:b,this.maxX=o>x?o:x,this.maxY=h>w?h:w}},n.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,i,s,o,h){e-=o,t-=h,i+=o,s+=h,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s},n}(),$a=function(n,e){return $a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},$a(n,e)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mh(n,e){function t(){this.constructor=n}$a(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yr=function(n){function e(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new ph,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new So,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return mh(e,n),e.mixin=function(t){for(var i=Object.keys(t),s=0;s<i.length;++s){var o=i[s];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Bt),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Bt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new So);var i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,h=this._boundsID;this._bounds=this._localBounds;var u=this.getBounds(!1,t);return this.parent=s,this.transform=i,this._bounds=o,this._bounds.updateID+=this._boundsID-h,u},e.prototype.toGlobal=function(t,i,s){return s===void 0&&(s=!1),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)},e.prototype.toLocal=function(t,i,s,o){return i&&(t=i.toGlobal(t,s,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,i,s,o,h,u,b,x,w){return t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=1),h===void 0&&(h=0),u===void 0&&(u=0),b===void 0&&(b=0),x===void 0&&(x=0),w===void 0&&(w=0),this.position.x=t,this.position.y=i,this.scale.x=s||1,this.scale.y=o||1,this.rotation=h,this.skew.x=u,this.skew.y=b,this.pivot.x=x,this.pivot.y=w,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new r0),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*uc},set:function(t){this.transform.rotation=t*lc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var i;this._mask&&(i=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1)),this._mask=t,this._mask&&(i=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(sn),r0=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return mh(e,n),e}(yr);function _f(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}yr.prototype.displayObjectUpdateTransform=yr.prototype.updateTransform;var Ai=function(n){function e(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=Ue.SORTABLE_CHILDREN,t.sortDirty=!1,t}return mh(e,n),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,i=[],s=0;s<arguments.length;s++)i[s]=t[s];if(i.length>1)for(var o=0;o<i.length;o++)this.addChild(i[o]);else{var h=i[0];h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.push(h),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",h,this,this.children.length-1),h.emit("added",this)}return i[0]},e.prototype.addChildAt=function(t,i){if(i<0||i>this.children.length)throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t},e.prototype.swapChildren=function(t,i){if(t!==i){var s=this.getChildIndex(t),o=this.getChildIndex(i);this.children[s]=i,this.children[o]=t,this.onChildrenChange(s<o?s:o)}},e.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var s=this.getChildIndex(t);Yn(this.children,s,1),this.children.splice(i,0,t),this.onChildrenChange(i)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,i=[],s=0;s<arguments.length;s++)i[s]=t[s];if(i.length>1)for(var o=0;o<i.length;o++)this.removeChild(i[o]);else{var h=i[0],u=this.children.indexOf(h);if(u===-1)return null;h.parent=null,h.transform._parentID=-1,Yn(this.children,u,1),this._boundsID++,this.onChildrenChange(u),h.emit("removed",this),this.emit("childRemoved",h,this,u)}return i[0]},e.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,Yn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i},e.prototype.removeChildren=function(t,i){t===void 0&&(t=0),i===void 0&&(i=this.children.length);var s,o=t,h=i-o;if(h>0&&h<=i){s=this.children.splice(o,h);for(var u=0;u<s.length;++u)s[u].parent=null,s[u].transform&&(s[u].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),u=0;u<s.length;++u)s[u].emit("removed",this),this.emit("childRemoved",s[u],this,u);return s}if(h===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,i=0,s=this.children.length;i<s;++i){var o=this.children[i];o._lastSortedIndex=i,t||o.zIndex===0||(t=!0)}t&&this.children.length>1&&this.children.sort(_f),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,i=this.children.length;t<i;++t){var s=this.children[t];s.visible&&s.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var i=this.children[t];if(i.visible&&i.renderable)if(i.calculateBounds(),i._mask){var s=i._mask.isMaskData?i._mask.maskObject:i._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(i._bounds,s._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,i){i===void 0&&(i=!1);var s=n.prototype.getLocalBounds.call(this,t);if(!i)for(var o=0,h=this.children.length;o<h;++o){var u=this.children[o];u.visible&&u.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var i=t.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var s,o;if(this.cullArea?(s=this.cullArea,o=this.worldTransform):this._render!==e.prototype._render&&(s=this.getBounds(!0)),s&&i.intersects(s,o))this._render(t);else if(this.cullArea)return;for(var h=0,u=this.children.length;h<u;++h){var b=this.children[h],x=b.cullable;b.cullable=x||!this.cullArea,b.render(t),b.cullable=x}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}},e.prototype.renderAdvanced=function(t){var i=this.filters,s=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}var h=i&&this._enabledFilters&&this._enabledFilters.length||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==Pr.NONE));if(h&&t.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),s&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),o=0;for(var u=this.children.length;o<u;++o)this.children[o].render(t)}h&&t.batch.flush(),s&&t.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof t=="boolean"?t:t&&t.children,s=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<s.length;++o)s[o].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;this.scale.x=i!==0?t/i:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;this.scale.y=i!==0?t/i:1,this._height=t},enumerable:!1,configurable:!0}),e}(yr);Ai.prototype.containerUpdateTransform=Ai.prototype.updateTransform;var cn=Math.pow,pr=(n,e,t)=>new Promise((i,s)=>{var o=b=>{try{u(t.next(b))}catch(x){s(x)}},h=b=>{try{u(t.throw(b))}catch(x){s(x)}},u=b=>b.done?i(b.value):Promise.resolve(b.value).then(o,h);u((t=t.apply(n,e)).next())}),ws,Ru,Ur,Kr;(Ru=ws||(ws={})).supportMoreMaskDivisions=!0,Ru.setOpacityFromMotion=!1,(Kr=Ur||(Ur={})).LOG_LEVEL_VERBOSE=0,Kr.LOG_LEVEL_WARNING=1,Kr.LOG_LEVEL_ERROR=2,Kr.LOG_LEVEL_NONE=999,Kr.logLevel=Kr.LOG_LEVEL_WARNING,Kr.sound=!0,Kr.motionSync=!0,Kr.motionFadingDuration=500,Kr.idleMotionFadingDuration=2e3,Kr.expressionFadingDuration=500,Kr.preserveExpressionOnMotion=!0,Kr.cubism4=ws;const tr={log(n,...e){Ur.logLevel<=Ur.LOG_LEVEL_VERBOSE&&console.log(`[${n}]`,...e)},warn(n,...e){Ur.logLevel<=Ur.LOG_LEVEL_WARNING&&console.warn(`[${n}]`,...e)},error(n,...e){Ur.logLevel<=Ur.LOG_LEVEL_ERROR&&console.error(`[${n}]`,...e)}};function Po(n,e,t){return n<e?e:n>t?t:n}function ps(n,e,t,i,s){const o=e[i];o!==null&&typeof o===n&&(t[s]=o)}function _s(n,e,t,i,s){const o=e[i];Array.isArray(o)&&(t[s]=o.filter(h=>h!==null&&typeof h===n))}function i0(n,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i))})})}class gh extends sn{constructor(e,t){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return pr(this,null,function*(){if(!this.definitions[e])return void tr.warn(this.tag,`Undefined expression at [${e}]`);if(this.expressions[e]===null)return void tr.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);if(this.expressions[e])return this.expressions[e];const t=yield this._loadExpression(e);return this.expressions[e]=t,t})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return pr(this,null,function*(){if(this.definitions.length){const e=[];for(let t=0;t<this.definitions.length;t++)this.expressions[t]!==null&&this.expressions[t]!==this.currentExpression&&t!==this.reserveExpressionIndex&&e.push(t);if(e.length){const t=Math.floor(Math.random()*e.length);return this.setExpression(t)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return pr(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const t=yield this.loadExpression(e);return!(!t||this.reserveExpressionIndex!==e)&&(this.reserveExpressionIndex=-1,this.currentExpression=t,this._setExpression(t),!0)})}update(e,t){return!this.isFinished()&&this.updateParameters(e,t)}destroy(){this.destroyed=!0,this.emit("destroy"),this.definitions=void 0,this.expressions=void 0}}const mf=40/7.5,gf=1/150;class vf{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,t,i=!1){this.targetX=Po(e,-1,1),this.targetY=Po(t,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const t=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(t)<.01&&Math.abs(i)<.01)return;const s=Math.sqrt(cn(t,2)+cn(i,2)),o=mf/(1e3/e);let h=o*(t/s)-this.vx,u=o*(i/s)-this.vy;const b=Math.sqrt(cn(h,2)+cn(u,2)),x=o*gf*e;b>x&&(h*=x/b,u*=x/b),this.vx+=h,this.vy+=u;const w=Math.sqrt(cn(this.vx,2)+cn(this.vy,2)),E=.5*(Math.sqrt(cn(x,2)+8*x*s)-x);w>E&&(this.vx*=E/w,this.vy*=E/w),this.x+=this.vx,this.y+=this.vy}}class Fo{constructor(e){this.json=e;let t=e.url;if(typeof t!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=t,this.name=function(i){let s=i.lastIndexOf("/");return s!=-1&&(i=i.slice(0,s)),s=i.lastIndexOf("/"),s!==-1&&(i=i.slice(s+1)),i}(this.url)}resolveURL(e){return Gi.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let t=0;t<this.textures.length;t++)this.textures[t]=e(this.textures[t],`textures[${t}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(t=>(e.push(t),t)),e}validateFiles(e){const t=(i,s)=>{const o=this.resolveURL(i);if(!e.includes(o)){if(s)throw new Error(`File "${i}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(i=>t(i,!0)),this.getDefinedFiles().filter(i=>t(i,!1))}}var La=(n=>(n[n.NONE=0]="NONE",n[n.IDLE=1]="IDLE",n[n.NORMAL=2]="NORMAL",n[n.FORCE=3]="FORCE",n))(La||{});class yf{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,t,i){if(i<=0)return tr.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&t===this.currentIndex)return tr.log(this.tag,"Motion is already playing.",this.dump(e,t)),!1;if(e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex)return tr.log(this.tag,"Motion is already reserved.",this.dump(e,t)),!1;if(i===1){if(this.currentPriority!==0)return tr.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,t)),!1;if(this.reservedIdleGroup!==void 0)return tr.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,t)),!1;this.setReservedIdle(e,t)}else{if(i<3){if(i<=this.currentPriority)return tr.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,t)),!1;if(i<=this.reservePriority)return tr.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,t)),!1}this.setReserved(e,t,i)}return!0}start(e,t,i,s){if(s===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return tr.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,i)),!1}else{if(t!==this.reservedGroup||i!==this.reservedIndex)return tr.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(t,i)),!1;this.setReserved(void 0,void 0,0)}return!!e&&(this.setCurrent(t,i,s),!0)}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,t,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=t}setReserved(e,t,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=t}setReservedIdle(e,t){this.reservedIdleGroup=e,this.reservedIdleIndex=t}isActive(e,t){return e===this.currentGroup&&t===this.currentIndex||e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!Ur.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,t){return this.debug?`
<Requested> group = "${e}", index = ${t}
`+["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"].map(i=>"["+i+"] "+this[i]).join(`
`):""}}class En{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(t=>t.volume=this._volume)}static add(e,t,i){const s=new Audio(e);return s.volume=this._volume,s.preload="auto",s.addEventListener("ended",()=>{this.dispose(s),t==null||t()}),s.addEventListener("error",o=>{this.dispose(s),tr.warn("SoundManager",`Error occurred on "${e}"`,o.error),i==null||i(o.error)}),this.audios.push(s),s}static play(e){return new Promise((t,i)=>{var s;(s=e.play())==null||s.catch(o=>{e.dispatchEvent(new ErrorEvent("error",{error:o})),i(o)}),e.readyState===e.HAVE_ENOUGH_DATA?t():e.addEventListener("canplaythrough",t)})}static dispose(e){e.pause(),e.removeAttribute("src"),function(t,i){const s=t.indexOf(i);s!==-1&&t.splice(s,1)}(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}En.audios=[],En._volume=.5;var n0=(n=>(n.ALL="ALL",n.IDLE="IDLE",n.NONE="NONE",n))(n0||{});class ko extends sn{constructor(e,t){super(),this.motionGroups={},this.state=new yf,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let t;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":t=Object.keys(this.definitions);break;default:t=[this.groups.idle]}for(const i of t)if(this.definitions[i])for(let s=0;s<this.definitions[i].length;s++)this.loadMotion(i,s).then()}loadMotion(e,t){return pr(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[t]))return void tr.warn(this.tag,`Undefined motion at "${e}"[${t}]`);if(this.motionGroups[e][t]===null)return void tr.warn(this.tag,`Cannot start motion at "${e}"[${t}] because it's already failed in loading.`);if(this.motionGroups[e][t])return this.motionGroups[e][t];const s=yield this._loadMotion(e,t);return this.destroyed?void 0:(this.motionGroups[e][t]=s??null,s)})}_loadMotion(e,t){throw new Error("Not implemented.")}startMotion(e,t){return pr(this,arguments,function*(i,s,o=La.NORMAL){var h;if(!this.state.reserve(i,s,o))return!1;const u=(h=this.definitions[i])==null?void 0:h[s];if(!u)return!1;let b;if(this.currentAudio&&En.dispose(this.currentAudio),Ur.sound){const w=this.getSoundFile(u);if(w)try{b=En.add(this.settings.resolveURL(w),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=b}catch(E){tr.warn(this.tag,"Failed to create audio",w,E)}}const x=yield this.loadMotion(i,s);if(b){const w=En.play(b).catch(E=>tr.warn(this.tag,"Failed to play audio",b.src,E));Ur.motionSync&&(yield w)}return this.state.start(x,i,s,o)?(tr.log(this.tag,"Start motion:",this.getMotionName(u)),this.emit("motionStart",i,s,b),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(x),!0):(b&&(En.dispose(b),this.currentAudio=void 0),!1)})}startRandomMotion(e,t){return pr(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const s=[];for(let o=0;o<i.length;o++)this.motionGroups[e][o]===null||this.state.isActive(e,o)||s.push(o);if(s.length){const o=Math.floor(Math.random()*s.length);return this.startMotion(e,s[o],t)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(En.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,t){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,La.IDLE)),this.updateParameters(e,t)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy(),this.definitions=void 0,this.motionGroups=void 0}}const bf={x:0,y:0,width:0,height:0};class s0 extends sn{constructor(){super(...arguments),this.focusController=new vf,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new mr,this.drawingMatrix=new mr,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,t=this.getSize();e.originalWidth=t[0],e.originalHeight=t[1];const i=Object.assign({width:2,height:2},this.getLayout());this.localTransform.scale(i.width/2,i.height/2),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const s=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,o=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*s,-this.height*o)}setupHitAreas(){const e=this.getHitAreaDefs().filter(t=>t.index>=0);for(const t of e)this.hitAreas[t.name]=t}hitTest(e,t){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,t))}isHit(e,t,i){if(!this.hitAreas[e])return!1;const s=this.hitAreas[e].index,o=this.getDrawableBounds(s,bf);return o.x<=t&&t<=o.x+o.width&&o.y<=i&&i<=o.y+o.height}getDrawableBounds(e,t){const i=this.getDrawableVertices(e);let s=i[0],o=i[0],h=i[1],u=i[1];for(let b=0;b<i.length;b+=2){const x=i[b],w=i[b+1];s=Math.min(x,s),o=Math.max(x,o),h=Math.min(w,h),u=Math.max(w,u)}return t!=null||(t={}),t.x=s,t.y=h,t.width=o-s,t.height=u-h,t}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,t){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}class Cu extends Error{constructor(e,t,i,s=!1){super(e),this.url=t,this.status=i,this.aborted=s}}const Xr=class{static createXHR(n,e,t,i,s){const o=new XMLHttpRequest;if(Xr.allXhrSet.add(o),n){let h=Xr.xhrMap.get(n);h?h.add(o):(h=new Set([o]),Xr.xhrMap.set(n,h)),n.listeners("destroy").includes(Xr.cancelXHRs)||n.once("destroy",Xr.cancelXHRs)}return o.open("GET",e),o.responseType=t,o.onload=()=>{o.status!==200&&o.status!==0||!o.response?o.onerror():i(o.response)},o.onerror=()=>{tr.warn("XHRLoader",`Failed to load resource as ${o.responseType} (Status ${o.status}): ${e}`),s(new Cu("Network error.",e,o.status))},o.onabort=()=>s(new Cu("Aborted.",e,o.status,!0)),o.onloadend=()=>{var h;Xr.allXhrSet.delete(o),n&&((h=Xr.xhrMap.get(n))==null||h.delete(o))},o}static cancelXHRs(){var n;(n=Xr.xhrMap.get(this))==null||n.forEach(e=>{e.abort(),Xr.allXhrSet.delete(e)}),Xr.xhrMap.delete(this)}static release(){Xr.allXhrSet.forEach(n=>n.abort()),Xr.allXhrSet.clear(),Xr.xhrMap=new WeakMap}};let go=Xr;function o0(n,e){let t=-1;return function i(s,o){if(o)return Promise.reject(o);if(s<=t)return Promise.reject(new Error("next() called multiple times"));t=s;const h=n[s];if(!h)return Promise.resolve();try{return Promise.resolve(h(e,i.bind(null,s+1)))}catch(u){return Promise.reject(u)}}(0)}go.xhrMap=new WeakMap,go.allXhrSet=new Set,go.loader=(n,e)=>new Promise((t,i)=>{Xr.createXHR(n.target,n.settings?n.settings.resolveURL(n.url):n.url,n.type,s=>{n.result=s,t()},i).send()});class nn{static load(e){return o0(this.middlewares,e).then(()=>e.result)}}nn.middlewares=[go.loader];const Ou="Live2DFactory",Du=(n,e)=>pr(void 0,null,function*(){if(typeof n.source=="string"){const t=yield nn.load({url:n.source,type:"json",target:n.live2dModel});t.url=n.source,n.source=t,n.live2dModel.emit("settingsJSONLoaded",t)}return e()}),$u=(n,e)=>pr(void 0,null,function*(){if(n.source instanceof Fo)return n.settings=n.source,e();if(typeof n.source=="object"){const t=lr.findRuntime(n.source);if(t){const i=t.createModelSettings(n.source);return n.settings=i,n.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),Lu=(n,e)=>{if(n.settings){const t=lr.findRuntime(n.settings);if(t)return t.ready().then(e)}return e()},Fu=(n,e)=>pr(void 0,null,function*(){yield e();const t=n.internalModel;if(t){const i=n.settings,s=lr.findRuntime(i);if(s){const o=[];i.pose&&o.push(nn.load({settings:i,url:i.pose,type:"json",target:t}).then(h=>{t.pose=s.createPose(t.coreModel,h),n.live2dModel.emit("poseLoaded",t.pose)}).catch(h=>{n.live2dModel.emit("poseLoadError",h),tr.warn(Ou,"Failed to load pose.",h)})),i.physics&&o.push(nn.load({settings:i,url:i.physics,type:"json",target:t}).then(h=>{t.physics=s.createPhysics(t.coreModel,h),n.live2dModel.emit("physicsLoaded",t.physics)}).catch(h=>{n.live2dModel.emit("physicsLoadError",h),tr.warn(Ou,"Failed to load physics.",h)})),o.length&&(yield Promise.all(o))}}}),ku=(n,e)=>pr(void 0,null,function*(){if(!n.settings)throw new TypeError("Missing settings.");{const t=n.live2dModel,i=n.settings.textures.map(s=>function(o,h={}){const u={resourceOptions:{crossorigin:h.crossOrigin}};if(Et.fromURL)return Et.fromURL(o,u).catch(w=>{if(w instanceof Error)throw w;const E=new Error("Texture loading error");throw E.event=w,E});u.resourceOptions.autoLoad=!1;const b=Et.from(o,u);if(b.baseTexture.valid)return Promise.resolve(b);const x=b.baseTexture.resource;return x._live2d_load!=null||(x._live2d_load=new Promise((w,E)=>{const C=L=>{x.source.removeEventListener("error",C);const k=new Error("Texture loading error");k.event=L,E(k)};x.source.addEventListener("error",C),x.load().then(()=>w(b)).catch(C)})),x._live2d_load}(n.settings.resolveURL(s),{crossOrigin:n.options.crossOrigin}));if(yield e(),!n.internalModel)throw new TypeError("Missing internal model.");t.internalModel=n.internalModel,t.emit("modelLoaded",n.internalModel),t.textures=yield Promise.all(i),t.emit("textureLoaded",t.textures)}}),Nu=(n,e)=>pr(void 0,null,function*(){const t=n.settings;if(t instanceof Fo){const i=lr.findRuntime(t);if(!i)throw new TypeError("Unknown model settings.");const s=yield nn.load({settings:t,url:t.moc,type:"arraybuffer",target:n.live2dModel});if(!i.isValidMoc(s))throw new Error("Invalid moc data");const o=i.createCoreModel(s);return n.internalModel=i.createInternalModel(o,t,n.options),e()}throw new TypeError("Missing settings.")}),Nr=class{static registerRuntime(n){Nr.runtimes.push(n),Nr.runtimes.sort((e,t)=>t.version-e.version)}static findRuntime(n){for(const e of Nr.runtimes)if(e.test(n))return e}static setupLive2DModel(n,e,t){return pr(this,null,function*(){const i=new Promise(h=>n.once("textureLoaded",h)),s=new Promise(h=>n.once("modelLoaded",h)),o=Promise.all([i,s]).then(()=>n.emit("ready"));yield o0(Nr.live2DModelMiddlewares,{live2dModel:n,source:e,options:t||{}}),yield o,n.emit("load")})}static loadMotion(n,e,t){var i;const s=o=>n.emit("motionLoadError",e,t,o);try{const o=(i=n.definitions[e])==null?void 0:i[t];if(!o)return Promise.resolve(void 0);n.listeners("destroy").includes(Nr.releaseTasks)||n.once("destroy",Nr.releaseTasks);let h=Nr.motionTasksMap.get(n);h||(h={},Nr.motionTasksMap.set(n,h));let u=h[e];u||(u=[],h[e]=u);const b=n.getMotionFile(o);return u[t]!=null||(u[t]=nn.load({url:b,settings:n.settings,type:n.motionDataType,target:n}).then(x=>{var w;const E=(w=Nr.motionTasksMap.get(n))==null?void 0:w[e];E&&delete E[t];const C=n.createMotion(x,e,o);return n.emit("motionLoaded",e,t,C),C}).catch(x=>{tr.warn(n.tag,`Failed to load motion: ${b}
`,x),s(x)})),u[t]}catch(o){tr.warn(n.tag,`Failed to load motion at "${e}"[${t}]
`,o),s(o)}return Promise.resolve(void 0)}static loadExpression(n,e){const t=i=>n.emit("expressionLoadError",e,i);try{const i=n.definitions[e];if(!i)return Promise.resolve(void 0);n.listeners("destroy").includes(Nr.releaseTasks)||n.once("destroy",Nr.releaseTasks);let s=Nr.expressionTasksMap.get(n);s||(s=[],Nr.expressionTasksMap.set(n,s));const o=n.getExpressionFile(i);return s[e]!=null||(s[e]=nn.load({url:o,settings:n.settings,type:"json",target:n}).then(h=>{const u=Nr.expressionTasksMap.get(n);u&&delete u[e];const b=n.createExpression(h,i);return n.emit("expressionLoaded",e,b),b}).catch(h=>{tr.warn(n.tag,`Failed to load expression: ${o}
`,h),t(h)})),s[e]}catch(i){tr.warn(n.tag,`Failed to load expression at [${e}]
`,i),t(i)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof ko?Nr.motionTasksMap.delete(this):Nr.expressionTasksMap.delete(this)}};let lr=Nr;lr.runtimes=[],lr.urlToJSON=Du,lr.jsonToSettings=$u,lr.waitUntilReady=Lu,lr.setupOptionals=Fu,lr.setupEssentials=ku,lr.createInternalModel=Nu,lr.live2DModelMiddlewares=[Du,$u,Lu,Fu,ku,Nu],lr.motionTasksMap=new WeakMap,lr.expressionTasksMap=new WeakMap,ko.prototype._loadMotion=function(n,e){return lr.loadMotion(this,n,e)},gh.prototype._loadExpression=function(n){return lr.loadExpression(this,n)};function Bu(n){this.tap(n.data.global.x,n.data.global.y)}function Uu(n){this.focus(n.data.global.x,n.data.global.y)}class xf extends ph{}const si=new nr,Af=new mr;let qi;class vh extends Ai{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new xf,this.anchor=new Sn(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,t){const i=new this(t);return lr.setupLive2DModel(i,e,t).then(()=>i)}static fromSync(e,t){const i=new this(t);return lr.setupLive2DModel(i,e,t).then(t==null?void 0:t.onLoad).catch(t==null?void 0:t.onError),i}static registerTicker(e){qi=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var t;qi||(qi=(t=window.PIXI)==null?void 0:t.Ticker),e?this._destroyed||(qi?(qi.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):tr.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(qi==null||qi.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const t=Object.assign({autoUpdate:!0,autoInteract:!0},e);t.autoInteract&&(this.interactive=!0),this.autoInteract=t.autoInteract,this.autoUpdate=t.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,t,i){return t===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,t,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,t,i=!1){si.x=e,si.y=t,this.toModelPosition(si,si,!0);let s=si.x/this.internalModel.originalWidth*2-1,o=si.y/this.internalModel.originalHeight*2-1,h=Math.atan2(o,s);this.internalModel.focusController.focus(Math.cos(h),-Math.sin(h),i)}tap(e,t){const i=this.hitTest(e,t);i.length&&(tr.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,t){return si.x=e,si.y=t,this.toModelPosition(si,si),this.internalModel.hitTest(si.x,si.y)}toModelPosition(e,t=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,t),this.internalModel.localTransform.applyInverse(t,t),t}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(qi.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let t=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),t=!0);for(let o=0;o<this.textures.length;o++){const h=this.textures[o];h.valid&&(!t&&h.baseTexture._glTextures[this.glContextID]||(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(h.baseTexture,0)),this.internalModel.bindTexture(o,h.baseTexture._glTextures[this.glContextID].texture),h.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const s=Af.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(s),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(t=>t.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}i0(vh,[class{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(n){n!==this._autoInteract&&(n?this.on("pointertap",Bu,this):this.off("pointertap",Bu,this),this._autoInteract=n)}registerInteraction(n){n!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&n&&(this.interactionManager=n,n.on("pointermove",Uu,this)))}unregisterInteraction(){var n;this.interactionManager&&((n=this.interactionManager)==null||n.off("pointermove",Uu,this),this.interactionManager=void 0)}}]);const Oi=class{static resolveURL(n,e){var t;const i=(t=Oi.filesMap[n])==null?void 0:t[e];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return i}static upload(n,e){return pr(this,null,function*(){const t={};for(const i of e.getDefinedFiles()){const s=decodeURI(Gi.resolve(e.url,i)),o=n.find(h=>h.webkitRelativePath===s);o&&(t[i]=URL.createObjectURL(o))}Oi.filesMap[e._objectURL]=t})}static createSettings(n){return pr(this,null,function*(){const e=n.find(h=>h.name.endsWith("model.json")||h.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const t=yield Oi.readText(e),i=JSON.parse(t);i.url=e.webkitRelativePath;const s=lr.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");const o=s.createModelSettings(i);return o._objectURL=URL.createObjectURL(e),o})}static readText(n){return pr(this,null,function*(){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsText(n,"utf8")})})}};let ea=Oi;ea.filesMap={},ea.factory=(n,e)=>pr(void 0,null,function*(){if(Array.isArray(n.source)&&n.source[0]instanceof File){const t=n.source;let i=t.settings;if(i){if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings')}else i=yield Oi.createSettings(t);i.validateFiles(t.map(s=>encodeURI(s.webkitRelativePath))),yield Oi.upload(t,i),i.resolveURL=function(s){return Oi.resolveURL(this._objectURL,s)},n.source=i,n.live2dModel.once("modelLoaded",s=>{s.once("destroy",function(){const o=this.settings._objectURL;if(URL.revokeObjectURL(o),Oi.filesMap[o])for(const h of Object.values(Oi.filesMap[o]))URL.revokeObjectURL(h);delete Oi.filesMap[o]})})}return e()}),lr.live2DModelMiddlewares.unshift(ea.factory);const zr=class{static unzip(n,e){return pr(this,null,function*(){const t=yield zr.getFilePaths(n),i=[];for(const o of e.getDefinedFiles()){const h=decodeURI(Gi.resolve(e.url,o));t.includes(h)&&i.push(h)}const s=yield zr.getFiles(n,i);for(let o=0;o<s.length;o++){const h=i[o],u=s[o];Object.defineProperty(u,"webkitRelativePath",{value:h})}return s})}static createSettings(n){return pr(this,null,function*(){const e=(yield zr.getFilePaths(n)).find(o=>o.endsWith("model.json")||o.endsWith("model3.json"));if(!e)throw new Error("Settings file not found");const t=yield zr.readText(n,e);if(!t)throw new Error("Empty settings file: "+e);const i=JSON.parse(t);i.url=e;const s=lr.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");return s.createModelSettings(i)})}static zipReader(n,e){return pr(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(n){return pr(this,null,function*(){throw new Error("Not implemented")})}static getFiles(n,e){return pr(this,null,function*(){throw new Error("Not implemented")})}static readText(n,e){return pr(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(n){}};let no=zr;if(no.ZIP_PROTOCOL="zip://",no.uid=0,no.factory=(n,e)=>pr(void 0,null,function*(){const t=n.source;let i,s,o;if(typeof t=="string"&&(t.endsWith(".zip")||t.startsWith(zr.ZIP_PROTOCOL))?(i=t.startsWith(zr.ZIP_PROTOCOL)?t.slice(zr.ZIP_PROTOCOL.length):t,s=yield nn.load({url:i,type:"blob",target:n.live2dModel})):Array.isArray(t)&&t.length===1&&t[0]instanceof File&&t[0].name.endsWith(".zip")&&(s=t[0],i=URL.createObjectURL(s),o=t.settings),s){if(!s.size)throw new Error("Empty zip file");const h=yield zr.zipReader(s,i);o||(o=yield zr.createSettings(h)),o._objectURL=zr.ZIP_PROTOCOL+zr.uid+"/"+o.url;const u=yield zr.unzip(h,o);u.settings=o,n.source=u,i.startsWith("blob:")&&n.live2dModel.once("modelLoaded",b=>{b.once("destroy",function(){URL.revokeObjectURL(i)})}),zr.releaseReader(h)}return e()}),lr.live2DModelMiddlewares.unshift(no.factory),!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const Tf=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(n,e){Tf.call(this,n,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Ef extends AMotion{constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:Ur.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:Ur.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(t=>{const i=t.calc||"add";if(i==="add"){const s=t.def||0;t.val-=s}else if(i==="mult"){const s=t.def||1;t.val/=s}this.params.push({calc:i,val:t.val,id:t.id})})}updateParamExe(e,t,i,s){this.params.forEach(o=>{e.setParamFloat(o.id,o.val*i)})}}class wf extends gh{constructor(e,t){var i;super(e,t),this.queueManager=new MotionQueueManager,this.definitions=(i=this.settings.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.name===e)}getExpressionFile(e){return e.file}createExpression(e,t){return new Ef(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}}class Sf extends ko{constructor(e,t){super(e,t),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new wf(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,t,i){const s=Live2DMotion.loadMotion(e),o=t===this.groups.idle?Ur.idleMotionFadingDuration:Ur.motionFadingDuration;return s.setFadeIn(i.fade_in>0?i.fade_in:o),s.setFadeOut(i.fade_out>0?i.fade_out:o),s}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,t){return e.onFinishHandler=t,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class Pf{constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=Po(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+(t=0,i=2e3,Math.random()*(i-t)+t));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}var t,i}}const fn=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Mf extends s0{constructor(e,t,i){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=t,this.motionManager=new Sf(t,i),this.eyeBlink=new Pf(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:o,value:h})=>this.coreModel.setParamFloat(o,h)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:o,value:h})=>this.coreModel.setPartsOpacity(o,h)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e!=null&&e.length&&(this.drawDataCount=e.length);let t=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:o=>t=o,get:()=>!this.disableCulling&&t});const i=this.coreModel.getModelContext().clipManager,s=i.setupClip;i.setupClip=(o,h)=>{s.call(i,o,h),h.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout)){let i=t;t==="center_x"?i="centerX":t==="center_y"&&(i="centerY"),e[i]=this.settings.layout[t]}return e}updateWebGLContext(e,t){const i=this.coreModel.drawParamWebGL;i.firstDraw=!0,i.setGL(e),i.glno=t;for(const h in i)i.hasOwnProperty(h)&&i[h]instanceof WebGLBuffer&&(i[h]=null);const s=this.coreModel.getModelContext().clipManager;s.curFrameNo=t;const o=e.getParameter(e.FRAMEBUFFER_BINDING);s.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,o)}bindTexture(e,t){this.coreModel.setTexture(e,t)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(t=>({id:t.id,name:t.name,index:this.coreModel.getDrawDataIndex(t.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),t=[];for(let i=0;i<this.drawDataCount;i++){const s=e.getDrawData(i);s&&t.push(s.getDrawDataID().id)}return t}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e))===-1)throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,t){var i,s,o,h;super.update(e,t);const u=this.coreModel;this.emit("beforeMotionUpdate");const b=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),u.saveParam(),(i=this.motionManager.expressionManager)==null||i.update(u,t),b||(s=this.eyeBlink)==null||s.update(e),this.updateFocus(),this.updateNaturalMovements(e,t),(o=this.physics)==null||o.update(t),(h=this.pose)==null||h.update(e),this.emit("beforeModelUpdate"),u.update(),u.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,30*this.focusController.x),this.coreModel.addToParamFloat(this.angleYParamIndex,30*this.focusController.y),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,10*this.focusController.x)}updateNaturalMovements(e,t){const i=t/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(i/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(i/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(i/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(i/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(i/3.2345))}draw(e){const t=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const i=this.drawingMatrix;fn[0]=i.a,fn[1]=i.b,fn[4]=i.c,fn[5]=i.d,fn[12]=i.tx,fn[13]=i.ty,this.coreModel.setMatrix(fn),this.coreModel.draw(),this.disableCulling=t}destroy(){super.destroy(),this.coreModel=void 0}}class Ss extends Fo{constructor(e){if(super(e),this.motions={},!Ss.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,_s("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var t;return!!e&&typeof e.model=="string"&&((t=e.textures)==null?void 0:t.length)>0&&e.textures.every(i=>typeof i=="string")}copy(e){ps("string",e,this,"name","name"),ps("string",e,this,"pose","pose"),ps("string",e,this,"physics","physics"),ps("object",e,this,"layout","layout"),ps("object",e,this,"motions","motions"),_s("object",e,this,"hit_areas","hitAreas"),_s("object",e,this,"expressions","expressions"),_s("object",e,this,"init_params","initParams"),_s("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[t,i]of Object.entries(this.motions))for(let s=0;s<i.length;s++)i[s].file=e(i[s].file,`motions.${t}[${s}].file`),i[s].sound!==void 0&&(i[s].sound=e(i[s].sound,`motions.${t}[${s}].sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].file=e(this.expressions[t].file,`expressions[${t}].file`)}}const If={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},Rf={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Cf{constructor(e,t){this.coreModel=e,this.physicsHairs=[],t.physics_hair&&(this.physicsHairs=t.physics_hair.map(i=>{const s=new PhysicsHair;return s.setup(i.setup.length,i.setup.regist,i.setup.mass),i.src.forEach(({id:o,ptype:h,scale:u,weight:b})=>{const x=If[h];x&&s.addSrcParam(x,o,u,b)}),i.targets.forEach(({id:o,ptype:h,scale:u,weight:b})=>{const x=Rf[h];x&&s.addTargetParam(x,o,u,b)}),s}))}update(e){this.physicsHairs.forEach(t=>t.update(this.coreModel,e))}}class Gu{constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class Of{constructor(e,t){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],t.parts_visible&&(this.partsGroups=t.parts_visible.map(({group:i})=>i.map(({id:s,link:o})=>{const h=new Gu(s);return o&&(h.link=o.map(u=>new Gu(u))),h})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(t=>{if(t.initIndex(this.coreModel),t.paramIndex>=0){const i=this.coreModel.getParamFloat(t.paramIndex)!==0;this.coreModel.setPartsOpacity(t.partsIndex,i?1:0),this.coreModel.setParamFloat(t.paramIndex,i?1:0),t.link.length>0&&t.link.forEach(s=>s.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,t){const i=this.coreModel,s=.5;let o=1,h=e.findIndex(({paramIndex:u,partsIndex:b})=>b>=0&&i.getParamFloat(u)!==0);if(h>=0){const u=i.getPartsOpacity(e[h].partsIndex);o=Po(u+t/this.opacityAnimDuration,0,1)}else h=0,o=1;e.forEach(({partsIndex:u},b)=>{if(u>=0)if(h==b)i.setPartsOpacity(u,o);else{let x,w=i.getPartsOpacity(u);x=o<s?-.5*o/s+1:(1-o)*s/.5,(1-x)*(1-o)>.15&&(x=1-.15/(1-o)),w>x&&(w=x),i.setPartsOpacity(u,w)}})}copyOpacity(e){const t=this.coreModel;e.forEach(({partsIndex:i,link:s})=>{if(i>=0&&s){const o=t.getPartsOpacity(i);s.forEach(({partsIndex:h})=>{h>=0&&t.setPartsOpacity(h,o)})}})}update(e){this.partsGroups.forEach(t=>{this.normalizePartsOpacityGroup(t,e),this.copyOpacity(t)})}}if(lr.registerRuntime({version:2,test:n=>n instanceof Ss||Ss.isValidJSON(n),ready:()=>Promise.resolve(),isValidMoc(n){if(n.byteLength<3)return!1;const e=new Int8Array(n,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings:n=>new Ss(n),createCoreModel(n){const e=Live2DModelWebGL.loadModel(n),t=Live2D.getError();if(t)throw t;return e},createInternalModel:(n,e,t)=>new Mf(n,e,t),createPose:(n,e)=>new Of(n,e),createPhysics:(n,e)=>new Cf(n,e)}),!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class wt{constructor(e,t){this.x=e||0,this.y=t||0}add(e){const t=new wt(0,0);return t.x=this.x+e.x,t.y=this.y+e.y,t}substract(e){const t=new wt(0,0);return t.x=this.x-e.x,t.y=this.y-e.y,t}multiply(e){const t=new wt(0,0);return t.x=this.x*e.x,t.y=this.y*e.y,t}multiplyByScaler(e){return this.multiply(new wt(e,e))}division(e){const t=new wt(0,0);return t.x=this.x/e.x,t.y=this.y/e.y,t}divisionByScalar(e){return this.division(new wt(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const vo=class{static range(n,e,t){return n<e?n=e:n>t&&(n=t),n}static sin(n){return Math.sin(n)}static cos(n){return Math.cos(n)}static abs(n){return Math.abs(n)}static sqrt(n){return Math.sqrt(n)}static cbrt(n){if(n===0)return n;let e=n;const t=e<0;let i;return t&&(e=-e),e===1/0?i=1/0:(i=Math.exp(Math.log(e)/3),i=(e/(i*i)+2*i)/3),t?-i:i}static getEasingSine(n){return n<0?0:n>1?1:.5-.5*this.cos(n*Math.PI)}static max(n,e){return n>e?n:e}static min(n,e){return n>e?e:n}static degreesToRadian(n){return n/180*Math.PI}static radianToDegrees(n){return 180*n/Math.PI}static directionToRadian(n,e){let t=Math.atan2(e.y,e.x)-Math.atan2(n.y,n.x);for(;t<-Math.PI;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;return t}static directionToDegrees(n,e){const t=this.directionToRadian(n,e);let i=this.radianToDegrees(t);return e.x-n.x>0&&(i=-i),i}static radianToDirection(n){const e=new wt;return e.x=this.sin(n),e.y=this.cos(n),e}static quadraticEquation(n,e,t){return this.abs(n)<vo.Epsilon?this.abs(e)<vo.Epsilon?-t:-t/e:-(e+this.sqrt(e*e-4*n*t))/(2*n)}static cardanoAlgorithmForBezier(n,e,t,i){if(this.sqrt(n)<vo.Epsilon)return this.range(this.quadraticEquation(e,t,i),0,1);const s=e/n,o=t/n,h=(3*o-s*s)/3,u=h/3,b=(2*s*s*s-9*s*o+27*(i/n))/27,x=b/2,w=x*x+u*u*u,E=.5,C=.51;if(w<0){const U=-h/3,V=U*U*U,H=this.sqrt(V),Q=-b/(2*H),te=this.range(Q,-1,1),ie=Math.acos(te),ae=2*this.cbrt(H),ne=ae*this.cos(ie/3)-s/3;if(this.abs(ne-E)<C)return this.range(ne,0,1);const le=ae*this.cos((ie+2*Math.PI)/3)-s/3;if(this.abs(le-E)<C)return this.range(le,0,1);const oe=ae*this.cos((ie+4*Math.PI)/3)-s/3;return this.range(oe,0,1)}if(w==0){let U;U=x<0?this.cbrt(-x):-this.cbrt(x);const V=2*U-s/3;if(this.abs(V-E)<C)return this.range(V,0,1);const H=-U-s/3;return this.range(H,0,1)}const L=this.sqrt(w),k=this.cbrt(L-x)-this.cbrt(L+x)-s/3;return this.range(k,0,1)}constructor(){}};let ir=vo;ir.Epsilon=1e-5;class hi{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,t,i){const s=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);for(let o=0;o<4;++o)for(let h=0;h<4;++h)for(let u=0;u<4;++u)s[h+4*o]+=e[u+4*o]*t[h+4*u];for(let o=0;o<16;++o)i[o]=s[o]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let t=0;t<16;++t)this._tr[t]=e[t]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,t){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);hi.multiply(i,this._tr,this._tr)}translate(e,t){this._tr[12]=e,this._tr[13]=t}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,t){const i=new Float32Array([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]);hi.multiply(i,this._tr,this._tr)}scale(e,t){this._tr[0]=e,this._tr[5]=t}multiplyByMatrix(e){hi.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new hi;for(let t=0;t<this._tr.length;t++)e._tr[t]=this._tr[t];return e}}class yh{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,t,i,s){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),this._modelColor.R=e,this._modelColor.G=t,this._modelColor.B=i,this._modelColor.A=s}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new bs,this._mvpMatrix4x4=new hi,this._mvpMatrix4x4.loadIdentity()}}var tn=(n=>(n[n.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",n[n.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",n[n.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",n))(tn||{});class bs{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let Fn,Si=!1,kn=!1;const Df=0,Xu=2;class Ps{static startUp(e){if(Si)return ms("CubismFramework.startUp() is already done."),Si;if(Live2DCubismCore._isStarted)return Si=!0,!0;if(Live2DCubismCore._isStarted=!0,Fn=e,Fn&&Live2DCubismCore.Logging.csmSetLogFunction(Fn.logFunction),Si=!0,Si){const t=Live2DCubismCore.Version.csmGetVersion(),i=(16711680&t)>>16,s=65535&t,o=t;ms("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&t)>>24)).slice(-2),("00"+i).slice(-2),("0000"+s).slice(-4),o)}return ms("CubismFramework.startUp() is complete."),Si}static cleanUp(){Si=!1,kn=!1,Fn=void 0}static initialize(){Si?kn?xs("CubismFramework.initialize() skipped, already initialized."):(kn=!0,ms("CubismFramework.initialize() is complete.")):xs("CubismFramework is not started.")}static dispose(){Si?kn?(yh.staticRelease(),kn=!1,ms("CubismFramework.dispose() is complete.")):xs("CubismFramework.dispose() skipped, not initialized."):xs("CubismFramework is not started.")}static isStarted(){return Si}static isInitialized(){return kn}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return Fn!=null?Fn.loggingLevel:$n.LogLevel_Off}constructor(){}}var $n=(n=>(n[n.LogLevel_Verbose=0]="LogLevel_Verbose",n[n.LogLevel_Debug=1]="LogLevel_Debug",n[n.LogLevel_Info=2]="LogLevel_Info",n[n.LogLevel_Warning=3]="LogLevel_Warning",n[n.LogLevel_Error=4]="LogLevel_Error",n[n.LogLevel_Off=5]="LogLevel_Off",n))($n||{});function Vu(n,...e){No.print($n.LogLevel_Debug,"[CSM][D]"+n+`
`,e)}function ms(n,...e){No.print($n.LogLevel_Info,"[CSM][I]"+n+`
`,e)}function xs(n,...e){No.print($n.LogLevel_Warning,"[CSM][W]"+n+`
`,e)}function Gn(n,...e){No.print($n.LogLevel_Error,"[CSM][E]"+n+`
`,e)}class No{static print(e,t,i){if(e<Ps.getLoggingLevel())return;const s=Ps.coreLogFunction;s&&s(t.replace(/{(\d+)}/g,(o,h)=>i[h]))}static dumpBytes(e,t,i){for(let s=0;s<i;s++)s%16==0&&s>0?this.print(e,`
`):s%8==0&&s>0&&this.print(e,"  "),this.print(e,"{0} ",[255&t[s]]);this.print(e,`
`)}constructor(){}}class a0{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,t,i){if(!t.isAvailable()||t.isFinished())return;if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);const o=this.getDuration();t.getEndTime()<0&&t.setEndTime(o<=0?-1:t.getStartTime()+o)}let s=this._weight;s=s*(this._fadeInSeconds==0?1:ir.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds))*(this._fadeOutSeconds==0||t.getEndTime()<0?1:ir.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds)),t.setState(i,s),this.doUpdateParameters(e,i,s,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,t){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}}class bh extends a0{constructor(){super(),this._parameters=[]}static create(e){const t=new bh,i=e.FadeInTime,s=e.FadeOutTime;t.setFadeInTime(i!==void 0?i:1),t.setFadeOutTime(s!==void 0?s:1);const o=e.Parameters||[];for(let h=0;h<o.length;++h){const u=o[h],b=u.Id,x=u.Value;let w;switch(u.Blend){case"Multiply":w=xn.ExpressionBlendType_Multiply;break;case"Overwrite":w=xn.ExpressionBlendType_Overwrite;break;default:w=xn.ExpressionBlendType_Add}const E={parameterId:b,blendType:w,value:x};t._parameters.push(E)}return t}doUpdateParameters(e,t,i,s){for(let o=0;o<this._parameters.length;++o){const h=this._parameters[o];switch(h.blendType){case xn.ExpressionBlendType_Add:e.addParameterValueById(h.parameterId,h.value,i);break;case xn.ExpressionBlendType_Multiply:e.multiplyParameterValueById(h.parameterId,h.value,i);break;case xn.ExpressionBlendType_Overwrite:e.setParameterValueById(h.parameterId,h.value,i)}}}}var xn=(n=>(n[n.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",n[n.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",n[n.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",n))(xn||{});class $f{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,t){const i=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,t){this._stateTimeSeconds=e,this._stateWeight=t}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class h0{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,t,i){if(e==null)return Lf;let s;for(let o=0;o<this._motions.length;++o)s=this._motions[o],s!=null&&s.setFadeOut(s._motion.getFadeOutTime());return s=new $f,s._autoDelete=t,s._motion=e,this._motions.push(s),s._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const t=this._motions[e];if(t==null){this._motions.splice(e,1);continue}if(t._motion!=null){if(!t.isFinished())return!1;e++}else t.release(),this._motions.splice(e,1)}return!0}isFinishedByHandle(e){for(let t=0;t<this._motions.length;t++){const i=this._motions[t];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const t=this._motions[e];t!=null&&t.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(t=>t!=null&&t._motionQueueEntryHandle==e)}setEventCallback(e,t=null){this._eventCallBack=e,this._eventCustomData=t}doUpdateMotion(e,t){let i=!1,s=0;for(;s<this._motions.length;){const o=this._motions[s];if(o==null){this._motions.splice(s,1);continue}const h=o._motion;if(h==null){o.release(),this._motions.splice(s,1);continue}h.updateParameters(e,o,t),i=!0;const u=h.getFiredEvent(o.getLastCheckEventSeconds()-o.getStartTime(),t-o.getStartTime());for(let b=0;b<u.length;++b)this._eventCallBack(this,u[b],this._eventCustomData);o.setLastCheckEventSeconds(t),o.isFinished()?(o.release(),this._motions.splice(s,1)):(o.isTriggeredFadeOut()&&o.startFadeOut(o.getFadeOutSeconds(),t),s++)}return i}}const Lf=-1;class Ff extends gh{constructor(e,t){var i;super(e,t),this.queueManager=new h0,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.Name===e)}getExpressionFile(e){return e.File}createExpression(e,t){return bh.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}}class u0{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:t.Ids}getLipSyncParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:t.Ids}}class Wn extends Fo{constructor(e){if(super(e),!Wn.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new u0(e))}static isValidJSON(e){var t;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((t=e.FileReferences.Textures)==null?void 0:t.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[t,i]of Object.entries(this.motions))for(let s=0;s<i.length;s++)i[s].File=e(i[s].File,`motions.${t}[${s}].File`),i[s].Sound!==void 0&&(i[s].Sound=e(i[s].Sound,`motions.${t}[${s}].Sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].File=e(this.expressions[t].File,`expressions[${t}].File`)}}i0(Wn,[u0]);var An=(n=>(n[n.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",n[n.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",n[n.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",n))(An||{}),Ii=(n=>(n[n.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",n[n.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",n[n.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",n[n.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",n))(Ii||{});class Ji{constructor(e=0,t=0){this.time=e,this.value=t}}class kf{constructor(){this.basePointIndex=0,this.segmentType=0}}class Nf{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class Bf{constructor(){this.fireTime=0,this.value=""}}class Uf{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class l0{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return xh.EvaluationOptionFlag_AreBeziersRistricted==e&&!!this._json.Meta.AreBeziersRestricted}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,t){return this._json.Curves[e].Segments[t]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var xh=(n=>(n[n.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",n))(xh||{});function ai(n,e,t){const i=new Ji;return i.time=n.time+(e.time-n.time)*t,i.value=n.value+(e.value-n.value)*t,i}function Gf(n,e){let t=(e-n[0].time)/(n[1].time-n[0].time);return t<0&&(t=0),n[0].value+(n[1].value-n[0].value)*t}function Xf(n,e){let t=(e-n[0].time)/(n[3].time-n[0].time);t<0&&(t=0);const i=ai(n[0],n[1],t),s=ai(n[1],n[2],t),o=ai(n[2],n[3],t),h=ai(i,s,t),u=ai(s,o,t);return ai(h,u,t).value}function Vf(n,e){const t=e,i=n[0].time,s=n[3].time,o=n[1].time,h=n[2].time,u=s-3*h+3*o-i,b=3*h-6*o+3*i,x=3*o-3*i,w=i-t,E=ir.cardanoAlgorithmForBezier(u,b,x,w),C=ai(n[0],n[1],E),L=ai(n[1],n[2],E),k=ai(n[2],n[3],E),U=ai(C,L,E),V=ai(L,k,E);return ai(U,V,E).value}function jf(n,e){return n[0].value}function Hf(n,e){return n[1].value}function ta(n,e,t){const i=n.curves[e];let s=-1;const o=i.baseSegmentIndex+i.segmentCount;let h=0;for(let b=i.baseSegmentIndex;b<o;++b)if(h=n.segments[b].basePointIndex+(n.segments[b].segmentType==Ii.CubismMotionSegmentType_Bezier?3:1),n.points[h].time>t){s=b;break}if(s==-1)return n.points[h].value;const u=n.segments[s];return u.evaluate(n.points.slice(u.basePointIndex),t)}class Ah extends a0{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,t){const i=new Ah;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=t,i}doUpdateParameters(e,t,i,s){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink="EyeBlink"),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync="LipSync");let o=t-s.getStartTime();o<0&&(o=0);let h=Number.MAX_VALUE,u=Number.MAX_VALUE;const b=64;let x=0,w=0;this._eyeBlinkParameterIds.length>b&&Vu("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>b&&Vu("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const E=this._fadeInSeconds<=0?1:ir.getEasingSine((t-s.getFadeInStartTime())/this._fadeInSeconds),C=this._fadeOutSeconds<=0||s.getEndTime()<0?1:ir.getEasingSine((s.getEndTime()-t)/this._fadeOutSeconds);let L,k,U,V=o;if(this._isLoop)for(;V>this._motionData.duration;)V-=this._motionData.duration;const H=this._motionData.curves;for(k=0;k<this._motionData.curveCount&&H[k].type==An.CubismMotionCurveTarget_Model;++k)L=ta(this._motionData,k,V),H[k].id==this._modelCurveIdEyeBlink?u=L:H[k].id==this._modelCurveIdLipSync&&(h=L);for(;k<this._motionData.curveCount&&H[k].type==An.CubismMotionCurveTarget_Parameter;++k){if(U=e.getParameterIndex(H[k].id),U==-1)continue;const Q=e.getParameterValueByIndex(U);if(L=ta(this._motionData,k,V),u!=Number.MAX_VALUE){for(let ie=0;ie<this._eyeBlinkParameterIds.length&&ie<b;++ie)if(this._eyeBlinkParameterIds[ie]==H[k].id){L*=u,w|=1<<ie;break}}if(h!=Number.MAX_VALUE){for(let ie=0;ie<this._lipSyncParameterIds.length&&ie<b;++ie)if(this._lipSyncParameterIds[ie]==H[k].id){L+=h,x|=1<<ie;break}}let te;if(H[k].fadeInTime<0&&H[k].fadeOutTime<0)te=Q+(L-Q)*i;else{let ie,ae;ie=H[k].fadeInTime<0?E:H[k].fadeInTime==0?1:ir.getEasingSine((t-s.getFadeInStartTime())/H[k].fadeInTime),ae=H[k].fadeOutTime<0?C:H[k].fadeOutTime==0||s.getEndTime()<0?1:ir.getEasingSine((s.getEndTime()-t)/H[k].fadeOutTime),te=Q+(L-Q)*(this._weight*ie*ae)}e.setParameterValueByIndex(U,te,1)}if(u!=Number.MAX_VALUE)for(let Q=0;Q<this._eyeBlinkParameterIds.length&&Q<b;++Q){const te=e.getParameterValueById(this._eyeBlinkParameterIds[Q]);if(w>>Q&1)continue;const ie=te+(u-te)*i;e.setParameterValueById(this._eyeBlinkParameterIds[Q],ie)}if(h!=Number.MAX_VALUE)for(let Q=0;Q<this._lipSyncParameterIds.length&&Q<b;++Q){const te=e.getParameterValueById(this._lipSyncParameterIds[Q]);if(x>>Q&1)continue;const ie=te+(h-te)*i;e.setParameterValueById(this._lipSyncParameterIds[Q],ie)}for(;k<this._motionData.curveCount&&H[k].type==An.CubismMotionCurveTarget_PartOpacity;++k)if(L=ta(this._motionData,k,V),ws.setOpacityFromMotion)e.setPartOpacityById(H[k].id,L);else{if(U=e.getParameterIndex(H[k].id),U==-1)continue;e.setParameterValueByIndex(U,L)}o>=this._motionData.duration&&(this._isLoop?(s.setStartTime(t),this._isLoopFadeIn&&s.setFadeInStartTime(t)):(this._onFinishedMotion&&this._onFinishedMotion(this),s.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,t){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id)return void(i[s].fadeInTime=t)}setParameterFadeOutTime(e,t){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id)return void(i[s].fadeOutTime=t)}getParameterFadeInTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeInTime;return-1}getParameterFadeOutTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeOutTime;return-1}setEffectIds(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}release(){this._motionData=void 0}parse(e){this._motionData=new Uf;let t=new l0(e);this._motionData.duration=t.getMotionDuration(),this._motionData.loop=t.isMotionLoop(),this._motionData.curveCount=t.getMotionCurveCount(),this._motionData.fps=t.getMotionFps(),this._motionData.eventCount=t.getEventCount();const i=t.getEvaluationOptionFlag(xh.EvaluationOptionFlag_AreBeziersRistricted),s=t.getMotionFadeInTime(),o=t.getMotionFadeOutTime();this._fadeInSeconds=s!==void 0?s<0?1:s:1,this._fadeOutSeconds=o!==void 0?o<0?1:o:1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new Nf),this._motionData.segments=Array.from({length:t.getMotionTotalSegmentCount()}).map(()=>new kf),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new Bf),this._motionData.points=[];let h=0,u=0;for(let b=0;b<this._motionData.curveCount;++b){const x=this._motionData.curves[b];switch(t.getMotionCurveTarget(b)){case"Model":x.type=An.CubismMotionCurveTarget_Model;break;case"Parameter":x.type=An.CubismMotionCurveTarget_Parameter;break;case"PartOpacity":x.type=An.CubismMotionCurveTarget_PartOpacity;break;default:xs('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}x.id=t.getMotionCurveId(b),x.baseSegmentIndex=u;const w=t.getMotionCurveFadeInTime(b),E=t.getMotionCurveFadeOutTime(b);x.fadeInTime=w!==void 0?w:-1,x.fadeOutTime=E!==void 0?E:-1;for(let C=0;C<t.getMotionCurveSegmentCount(b);){switch(C==0?(this._motionData.segments[u].basePointIndex=h,this._motionData.points[h]=new Ji(t.getMotionCurveSegment(b,C),t.getMotionCurveSegment(b,C+1)),h+=1,C+=2):this._motionData.segments[u].basePointIndex=h-1,t.getMotionCurveSegment(b,C)){case Ii.CubismMotionSegmentType_Linear:this._motionData.segments[u].segmentType=Ii.CubismMotionSegmentType_Linear,this._motionData.segments[u].evaluate=Gf,this._motionData.points[h]=new Ji(t.getMotionCurveSegment(b,C+1),t.getMotionCurveSegment(b,C+2)),h+=1,C+=3;break;case Ii.CubismMotionSegmentType_Bezier:this._motionData.segments[u].segmentType=Ii.CubismMotionSegmentType_Bezier,this._motionData.segments[u].evaluate=i?Xf:Vf,this._motionData.points[h]=new Ji(t.getMotionCurveSegment(b,C+1),t.getMotionCurveSegment(b,C+2)),this._motionData.points[h+1]=new Ji(t.getMotionCurveSegment(b,C+3),t.getMotionCurveSegment(b,C+4)),this._motionData.points[h+2]=new Ji(t.getMotionCurveSegment(b,C+5),t.getMotionCurveSegment(b,C+6)),h+=3,C+=7;break;case Ii.CubismMotionSegmentType_Stepped:this._motionData.segments[u].segmentType=Ii.CubismMotionSegmentType_Stepped,this._motionData.segments[u].evaluate=jf,this._motionData.points[h]=new Ji(t.getMotionCurveSegment(b,C+1),t.getMotionCurveSegment(b,C+2)),h+=1,C+=3;break;case Ii.CubismMotionSegmentType_InverseStepped:this._motionData.segments[u].segmentType=Ii.CubismMotionSegmentType_InverseStepped,this._motionData.segments[u].evaluate=Hf,this._motionData.points[h]=new Ji(t.getMotionCurveSegment(b,C+1),t.getMotionCurveSegment(b,C+2)),h+=1,C+=3}++x.segmentCount,++u}this._motionData.curves.push(x)}for(let b=0;b<t.getEventCount();++b)this._motionData.events[b].fireTime=t.getEventTime(b),this._motionData.events[b].value=t.getEventValue(b);t.release()}getFiredEvent(e,t){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=t&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}}class Yf extends ko{constructor(e,t){var i;super(e,t),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new h0,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new Ff(this.settings,e)),this.queueManager.setEventCallback((t,i,s)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,t){return e.setFinishedMotionHandler(t),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,t,i){const s=Ah.create(e),o=new l0(e),h=(t===this.groups.idle?Ur.idleMotionFadingDuration:Ur.motionFadingDuration)/1e3;return o.getMotionFadeInTime()===void 0&&s.setFadeInTime(i.FadeInTime>0?i.FadeInTime:h),o.getMotionFadeOutTime()===void 0&&s.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:h),s.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),s}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}class Th{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new Th}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,t){this._currentTime+=t;const i=2*this._currentTime*3.14159;for(let s=0;s<this._breathParameters.length;++s){const o=this._breathParameters[s];e.addParameterValueById(o.parameterId,o.offset+o.peak*Math.sin(i/o.cycle),o.weight)}}}class gs{constructor(e,t,i,s,o){this.parameterId=e??void 0,this.offset=t??0,this.peak=i??0,this.cycle=s??0,this.weight=o??0}}const Fa=class{static create(n){return new Fa(n)}setBlinkingInterval(n){this._blinkingIntervalSeconds=n}setBlinkingSetting(n,e,t){this._closingSeconds=n,this._closedSeconds=e,this._openingSeconds=t}setParameterIds(n){this._parameterIds=n}getParameterIds(){return this._parameterIds}updateParameters(n,e){let t;this._userTimeSeconds+=e;let i=0;switch(this._blinkingState){case oi.EyeState_Closing:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=oi.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),t=1-i;break;case oi.EyeState_Closed:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=oi.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),t=0;break;case oi.EyeState_Opening:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=oi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),t=i;break;case oi.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=oi.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),t=1;break;case oi.EyeState_First:default:this._blinkingState=oi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),t=1}Fa.CloseIfZero||(t=-t);for(let s=0;s<this._parameterIds.length;++s)n.setParameterValueById(this._parameterIds[s],t)}constructor(n){var e,t;this._blinkingState=oi.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],n!=null&&(this._parameterIds=(t=(e=n.getEyeBlinkParameters())==null?void 0:e.slice())!=null?t:this._parameterIds)}determinNextBlinkingTiming(){const n=Math.random();return this._userTimeSeconds+n*(2*this._blinkingIntervalSeconds-1)}};let c0=Fa;c0.CloseIfZero=!0;var oi=(n=>(n[n.EyeState_First=0]="EyeState_First",n[n.EyeState_Interval=1]="EyeState_Interval",n[n.EyeState_Closing=2]="EyeState_Closing",n[n.EyeState_Closed=3]="EyeState_Closed",n[n.EyeState_Opening=4]="EyeState_Opening",n))(oi||{});class ka{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.width=i,this.height=s}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,t){this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t}}let dn,As,Na;class ra{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const t=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Na),this._maskTexture=new zf(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,t){let i=Number.MAX_VALUE,s=Number.MAX_VALUE,o=Number.MIN_VALUE,h=Number.MIN_VALUE;const u=t._clippedDrawableIndexList.length;for(let b=0;b<u;b++){const x=t._clippedDrawableIndexList[b],w=e.getDrawableVertexCount(x),E=e.getDrawableVertices(x);let C=Number.MAX_VALUE,L=Number.MAX_VALUE,k=Number.MIN_VALUE,U=Number.MIN_VALUE;const V=w*Xu;for(let H=Df;H<V;H+=Xu){const Q=E[H],te=E[H+1];Q<C&&(C=Q),Q>k&&(k=Q),te<L&&(L=te),te>U&&(U=te)}if(C!=Number.MAX_VALUE)if(C<i&&(i=C),L<s&&(s=L),k>o&&(o=k),U>h&&(h=U),i==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;const H=o-i,Q=h-s;t._allClippedDrawRect.x=i,t._allClippedDrawRect.y=s,t._allClippedDrawRect.width=H,t._allClippedDrawRect.height=Q}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new ka,this._tmpMatrix=new hi,this._tmpMatrixForMask=new hi,this._tmpMatrixForDraw=new hi;let e=new bs;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new bs,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new bs,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new bs,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,t,i;const s=this;for(let o=0;o<this._clippingContextListForMask.length;o++)this._clippingContextListForMask[o]&&((e=this._clippingContextListForMask[o])==null||e.release());s._clippingContextListForMask=void 0,s._clippingContextListForDraw=void 0,this._maskTexture&&((t=this.gl)==null||t.deleteFramebuffer(this._maskTexture.texture),s._maskTexture=void 0),s._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,t,i,s){for(let o=0;o<t;o++){if(s[o]<=0){this._clippingContextListForDraw.push(null);continue}let h=this.findSameClip(i[o],s[o]);h==null&&(h=new Wf(this,i[o],s[o]),this._clippingContextListForMask.push(h)),h.addClippedDrawable(o),this._clippingContextListForDraw.push(h)}}setupClippingContext(e,t){this._currentFrameNo++;let i=0;for(let s=0;s<this._clippingContextListForMask.length;s++){const o=this._clippingContextListForMask[s];this.calcClippedDrawTotalBounds(e,o),o._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),t.getMvpMatrix(),t.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let s=0;s<this._clippingContextListForMask.length;s++){const o=this._clippingContextListForMask[s],h=o._allClippedDrawRect,u=o._layoutBounds,b=.05;this._tmpBoundsOnModel.setRect(h),this._tmpBoundsOnModel.expand(h.width*b,h.height*b);const x=u.width/this._tmpBoundsOnModel.width,w=u.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(x,w),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(u.x,u.y),this._tmpMatrix.scaleRelative(x,w),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const E=o._clippingIdCount;for(let C=0;C<E;C++){const L=o._clippingIdList[C];e.getDrawableDynamicFlagVertexPositionsDidChange(L)&&(t.setIsCulling(e.getDrawableCulling(L)!=0),t.setClippingContextBufferForMask(o),t.drawMesh(e.getDrawableTextureIndices(L),e.getDrawableVertexIndexCount(L),e.getDrawableVertexCount(L),e.getDrawableVertexIndices(L),e.getDrawableVertices(L),e.getDrawableVertexUvs(L),e.getDrawableOpacity(L),tn.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Na),t.setClippingContextBufferForMask(null),this.gl.viewport(As[0],As[1],As[2],As[3])}}findSameClip(e,t){for(let i=0;i<this._clippingContextListForMask.length;i++){const s=this._clippingContextListForMask[i],o=s._clippingIdCount;if(o!=t)continue;let h=0;for(let u=0;u<o;u++){const b=s._clippingIdList[u];for(let x=0;x<o;x++)if(e[x]==b){h++;break}}if(h==o)return s}return null}setupLayoutBounds(e){let t=e/4,i=e%4;t=~~t,i=~~i;let s=0;for(let o=0;o<4;o++){const h=t+(o<i?1:0);if(h!=0)if(h==1){const u=this._clippingContextListForMask[s++];u._layoutChannelNo=o,u._layoutBounds.x=0,u._layoutBounds.y=0,u._layoutBounds.width=1,u._layoutBounds.height=1}else if(h==2)for(let u=0;u<h;u++){let b=u%2;b=~~b;const x=this._clippingContextListForMask[s++];x._layoutChannelNo=o,x._layoutBounds.x=.5*b,x._layoutBounds.y=0,x._layoutBounds.width=.5,x._layoutBounds.height=1}else if(h<=4)for(let u=0;u<h;u++){let b=u%2,x=u/2;b=~~b,x=~~x;const w=this._clippingContextListForMask[s++];w._layoutChannelNo=o,w._layoutBounds.x=.5*b,w._layoutBounds.y=.5*x,w._layoutBounds.width=.5,w._layoutBounds.height=.5}else if(h<=9)for(let u=0;u<h;u++){let b=u%3,x=u/3;b=~~b,x=~~x;const w=this._clippingContextListForMask[s++];w._layoutChannelNo=o,w._layoutBounds.x=b/3,w._layoutBounds.y=x/3,w._layoutBounds.width=1/3,w._layoutBounds.height=1/3}else if(ws.supportMoreMaskDivisions&&h<=16)for(let u=0;u<h;u++){let b=u%4,x=u/4;b=~~b,x=~~x;const w=this._clippingContextListForMask[s++];w._layoutChannelNo=o,w._layoutBounds.x=b/4,w._layoutBounds.y=x/4,w._layoutBounds.width=1/4,w._layoutBounds.height=1/4}else Gn("not supported mask count : {0}",h)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class zf{constructor(e,t){this.frameNo=e,this.texture=t}}class Wf{constructor(e,t,i){this._isUsing=!1,this._owner=e,this._clippingIdList=t,this._clippingIdCount=i,this._allClippedDrawRect=new ka,this._layoutBounds=new ka,this._clippedDrawableIndexList=[],this._matrixForMask=new hi,this._matrixForDraw=new hi}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class qn{static getInstance(){return dn==null&&(dn=new qn),dn}static deleteInstance(){dn&&(dn.release(),dn=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,t,i,s,o,h,u,b,x,w,E,C,L){let k,U,V,H;E||Gn("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();const Q=e.getClippingContextBufferForMask();if(Q!=null){const te=this._shaderSets[Ts.ShaderNames_SetupMask];this.gl.useProgram(te.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(te.samplerTexture0Location,0),u.vertex==null&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(te.attributePositionLocation),this.gl.vertexAttribPointer(te.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),u.uv==null&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(te.attributeTexCoordLocation),this.gl.vertexAttribPointer(te.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const ie=Q._layoutChannelNo,ae=Q.getClippingManager().getChannelFlagAsColor(ie);this.gl.uniform4f(te.uniformChannelFlagLocation,ae.R,ae.G,ae.B,ae.A),this.gl.uniformMatrix4fv(te.uniformClipMatrixLocation,!1,Q._matrixForMask.getArray());const ne=Q._layoutBounds;this.gl.uniform4f(te.uniformBaseColorLocation,2*ne.x-1,2*ne.y-1,2*ne.getRight()-1,2*ne.getBottom()-1),k=this.gl.ZERO,U=this.gl.ONE_MINUS_SRC_COLOR,V=this.gl.ZERO,H=this.gl.ONE_MINUS_SRC_ALPHA}else{const te=e.getClippingContextBufferForDraw(),ie=te!=null?L?2:1:0;let ae;switch(x){case tn.CubismBlendMode_Normal:default:ae=this._shaderSets[Ts.ShaderNames_NormalPremultipliedAlpha+ie],k=this.gl.ONE,U=this.gl.ONE_MINUS_SRC_ALPHA,V=this.gl.ONE,H=this.gl.ONE_MINUS_SRC_ALPHA;break;case tn.CubismBlendMode_Additive:ae=this._shaderSets[Ts.ShaderNames_AddPremultipliedAlpha+ie],k=this.gl.ONE,U=this.gl.ONE,V=this.gl.ZERO,H=this.gl.ONE;break;case tn.CubismBlendMode_Multiplicative:ae=this._shaderSets[Ts.ShaderNames_MultPremultipliedAlpha+ie],k=this.gl.DST_COLOR,U=this.gl.ONE_MINUS_SRC_ALPHA,V=this.gl.ZERO,H=this.gl.ONE}if(this.gl.useProgram(ae.shaderProgram),u.vertex==null&&(u.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ae.attributePositionLocation),this.gl.vertexAttribPointer(ae.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),u.uv==null&&(u.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ae.attributeTexCoordLocation),this.gl.vertexAttribPointer(ae.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),te!=null){this.gl.activeTexture(this.gl.TEXTURE1);const ne=te.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,ne),this.gl.uniform1i(ae.samplerTexture1Location,1),this.gl.uniformMatrix4fv(ae.uniformClipMatrixLocation,!1,te._matrixForDraw.getArray());const le=te._layoutChannelNo,oe=te.getClippingManager().getChannelFlagAsColor(le);this.gl.uniform4f(ae.uniformChannelFlagLocation,oe.R,oe.G,oe.B,oe.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(ae.samplerTexture0Location,0),this.gl.uniformMatrix4fv(ae.uniformMatrixLocation,!1,C.getArray()),this.gl.uniform4f(ae.uniformBaseColorLocation,w.R,w.G,w.B,w.A)}u.index==null&&(u.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,u.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(k,U,V,H)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<10;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(qf,Zf),this._shaderSets[1].shaderProgram=this.loadShaderProgram(Jf,Qf),this._shaderSets[2].shaderProgram=this.loadShaderProgram(ju,Kf),this._shaderSets[3].shaderProgram=this.loadShaderProgram(ju,ed),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,t){let i=this.gl.createProgram(),s=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!s)return Gn("Vertex shader compile error!"),0;let o=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return o?(this.gl.attachShader(i,s),this.gl.attachShader(i,o),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(s),this.gl.deleteShader(o),i):(Gn("Failed to link program: {0}",i),this.gl.deleteShader(s),this.gl.deleteShader(o),i&&this.gl.deleteProgram(i),0)):(Gn("Vertex shader compile error!"),0)}compileShaderSource(e,t){const i=t,s=this.gl.createShader(e);return this.gl.shaderSource(s,i),this.gl.compileShader(s),!s&&Gn("Shader compile log: {0} ",this.gl.getShaderInfoLog(s)),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?s:(this.gl.deleteShader(s),null)}setGl(e){this.gl=e}}var Ts=(n=>(n[n.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",n[n.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",n[n.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",n[n.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",n[n.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",n[n.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",n[n.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",n[n.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",n[n.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",n[n.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",n))(Ts||{});const qf="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Zf="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Jf="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",ju="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Qf="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",Kf="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",ed="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class f0 extends yh{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new ra,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new ra,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let t=e.getDrawableCount()-1;t>=0;t--)this._sortedDrawableIndexList[t]=0;super.initialize(e)}bindTexture(e,t){this._textures[e]=t}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new ra,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,t,i;const s=this;this._clippingManager.release(),s._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(t=this.gl)==null||t.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,s._bufferData=void 0,s._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const s=t[i];this._sortedDrawableIndexList[s]=i}for(let i=0;i<e;++i){const s=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(s)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[s]:null),this.setIsCulling(this.getModel().getDrawableCulling(s)),this.drawMesh(this.getModel().getDrawableTextureIndices(s),this.getModel().getDrawableVertexIndexCount(s),this.getModel().getDrawableVertexCount(s),this.getModel().getDrawableVertexIndices(s),this.getModel().getDrawableVertices(s),this.getModel().getDrawableVertexUvs(s),this.getModel().getDrawableOpacity(s),this.getModel().getDrawableBlendMode(s),this.getModel().getDrawableInvertedMaskBit(s)))}}drawMesh(e,t,i,s,o,h,u,b,x){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const w=this.getModelColor();this.getClippingContextBufferForMask()==null&&(w.A*=u,this.isPremultipliedAlpha()&&(w.R*=w.A,w.G*=w.A,w.B*=w.A));let E=null;this._textures[e]!=null&&(E=this._textures[e]),qn.getInstance().setupShaderProgram(this,E,i,o,s,h,this._bufferData,u,b,w,this.isPremultipliedAlpha(),this.getMvpMatrix(),x),this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){qn.deleteInstance()}setRenderState(e,t){Na=e,As=t}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),qn.getInstance().setGl(e)}}yh.staticRelease=()=>{f0.doStaticRelease()};const Hu=new hi;class td extends s0{constructor(e,t,i){super(),this.lipSync=!0,this.breath=Th.create(),this.renderer=new f0,this.idParamAngleX="ParamAngleX",this.idParamAngleY="ParamAngleY",this.idParamAngleZ="ParamAngleZ",this.idParamEyeBallX="ParamEyeBallX",this.idParamEyeBallY="ParamEyeBallY",this.idParamBodyAngleX="ParamBodyAngleX",this.idParamBreath="ParamBreath",this.pixelsPerUnit=1,this.centeringTransform=new mr,this.coreModel=e,this.settings=t,this.motionManager=new Yf(t,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=c0.create(this.settings)),this.breath.setParameters([new gs(this.idParamAngleX,0,15,6.5345,.5),new gs(this.idParamAngleY,0,8,3.5345,.5),new gs(this.idParamAngleZ,0,10,5.5345,.5),new gs(this.idParamBodyAngleX,0,4,15.5345,.5),new gs(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout))e[t.charAt(0).toLowerCase()+t.slice(1)]=this.settings.layout[t];return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,t){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=t,this.renderer._clippingManager._maskTexture=void 0,qn.getInstance()._shaderSets=[]}bindTexture(e,t){this.renderer.bindTexture(e,t)}getHitAreaDefs(){var e,t;return(t=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?t:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e))===-1)throw new TypeError("Unable to find drawable ID: "+e);const t=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<t.length;i+=2)t[i]=t[i]*this.pixelsPerUnit+this.originalWidth/2,t[i+1]=-t[i+1]*this.pixelsPerUnit+this.originalHeight/2;return t}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,t){var i,s,o,h;super.update(e,t),e/=1e3,t/=1e3;const u=this.coreModel;this.emit("beforeMotionUpdate");const b=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),u.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(u,t),b||(s=this.eyeBlink)==null||s.updateParameters(u,e),this.updateFocus(),this.updateNaturalMovements(1e3*e,1e3*t),(o=this.physics)==null||o.evaluate(u,e),(h=this.pose)==null||h.updateParameters(u,e),this.emit("beforeModelUpdate"),u.update(),u.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,30*this.focusController.x),this.coreModel.addParameterValueById(this.idParamAngleY,30*this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,10*this.focusController.x)}updateNaturalMovements(e,t){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const t=this.drawingMatrix,i=Hu.getArray();i[0]=t.a,i[1]=t.b,i[4]=-t.c,i[5]=-t.d,i[12]=t.tx,i[13]=t.ty,this.renderer.setMvpMatrix(Hu),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let ia,Yu=20;class Eh{static create(e){const t=new Eh;typeof e.FadeInTime=="number"&&(t._fadeTimeSeconds=e.FadeInTime,t._fadeTimeSeconds<=0&&(t._fadeTimeSeconds=.5));const i=e.Groups,s=i.length;for(let o=0;o<s;++o){const h=i[o],u=h.length;let b=0;for(let x=0;x<u;++x){const w=h[x],E=new Mo;E.partId=w.Id;const C=w.Link;if(C){const L=C.length;for(let k=0;k<L;++k){const U=new Mo;U.partId=C[k],E.link.push(U)}}t._partGroups.push(E),++b}t._partGroupCounts.push(b)}return t}updateParameters(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);let i=0;for(let s=0;s<this._partGroupCounts.length;s++){const o=this._partGroupCounts[s];this.doFade(e,t,i,o),i+=o}this.copyPartOpacities(e)}reset(e){let t=0;for(let i=0;i<this._partGroupCounts.length;++i){const s=this._partGroupCounts[i];for(let o=t;o<t+s;++o){this._partGroups[o].initialize(e);const h=this._partGroups[o].partIndex,u=this._partGroups[o].parameterIndex;if(!(h<0)){e.setPartOpacityByIndex(h,o==t?1:0),e.setParameterValueByIndex(u,o==t?1:0);for(let b=0;b<this._partGroups[o].link.length;++b)this._partGroups[o].link[b].initialize(e)}}t+=s}}copyPartOpacities(e){for(let t=0;t<this._partGroups.length;++t){const i=this._partGroups[t];if(i.link.length==0)continue;const s=this._partGroups[t].partIndex,o=e.getPartOpacityByIndex(s);for(let h=0;h<i.link.length;++h){const u=i.link[h].partIndex;u<0||e.setPartOpacityByIndex(u,o)}}}doFade(e,t,i,s){let o=-1,h=1;const u=.5;for(let b=i;b<i+s;++b){const x=this._partGroups[b].partIndex,w=this._partGroups[b].parameterIndex;if(e.getParameterValueByIndex(w)>.001){if(o>=0)break;o=b,h=e.getPartOpacityByIndex(x),h+=t/this._fadeTimeSeconds,h>1&&(h=1)}}o<0&&(o=0,h=1);for(let b=i;b<i+s;++b){const x=this._partGroups[b].partIndex;if(o==b)e.setPartOpacityByIndex(x,h);else{let w,E=e.getPartOpacityByIndex(x);w=h<u?-.5*h/u+1:(1-h)*u/.5,(1-w)*(1-h)>.15&&(w=1-.15/(1-h)),E>w&&(E=w),e.setPartOpacityByIndex(x,E)}}}constructor(){this._fadeTimeSeconds=.5,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class Mo{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(t=>t.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Mo;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(t=>t.clone()),e}}class rd{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,t=this._savedParameters.length;for(let i=0;i<e;++i)i<t?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let t;const i=this._model.parts.count;for(t=0;t<i;++t)if(e==this._partIds[t])return t;return e in this._notExistPartId?this._notExistPartId[e]:(t=i+this._notExistPartId.length,this._notExistPartId[e]=t,this._notExistPartOpacities[t]=0,t)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,t){e in this._notExistPartOpacities?this._notExistPartOpacities[e]=t:(0<=e&&this.getPartCount(),this._partOpacities[e]=t)}setPartOpacityById(e,t){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,t)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(0<=e&&this.getPartCount(),this._partOpacities[e])}getPartOpacityById(e){const t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}getParameterIndex(e){let t;const i=this._model.parameters.count;for(t=0;t<i;++t)if(e==this._parameterIds[t])return t;return e in this._notExistParameterId?this._notExistParameterId[e]:(t=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=t,this._notExistParameterValues[t]=0,t)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(0<=e&&this.getParameterCount(),this._parameterValues[e])}getParameterValueById(e){const t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}setParameterValueByIndex(e,t,i=1){e in this._notExistParameterValues?this._notExistParameterValues[e]=i==1?t:this._notExistParameterValues[e]*(1-i)+t*i:(0<=e&&this.getParameterCount(),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?t:this._parameterValues[e]=this._parameterValues[e]*(1-i)+t*i)}setParameterValueById(e,t,i=1){const s=this.getParameterIndex(e);this.setParameterValueByIndex(s,t,i)}addParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*i)}addParameterValueById(e,t,i=1){const s=this.getParameterIndex(e);this.addParameterValueByIndex(s,t,i)}multiplyParameterValueById(e,t,i=1){const s=this.getParameterIndex(e);this.multiplyParameterValueByIndex(s,t,i)}multiplyParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const t=this._model.drawables.count;for(let i=0;i<t;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}getDrawableBlendMode(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?tn.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?tn.CubismBlendMode_Multiplicative:tn.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}getDrawableDynamicFlagVisibilityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}getDrawableDynamicFlagOpacityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}loadParameters(){let e=this._model.parameters.count;const t=this._savedParameters.length;e>t&&(e=t);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,t=this._model.parameters.count;for(let i=0;i<t;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,t=this._model.parts.count;for(let i=0;i<t;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,t=this._model.drawables.count;for(let i=0;i<t;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class wh{static create(e){const t=Live2DCubismCore.Moc.fromArrayBuffer(e);if(t)return new wh(t);throw new Error("Unknown error")}createModel(){let e;const t=Live2DCubismCore.Model.fromMoc(this._moc);if(t)return e=new rd(t),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}var Ba=(n=>(n[n.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",n))(Ba||{}),Tn=(n=>(n[n.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",n[n.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",n[n.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",n))(Tn||{});class nd{constructor(){this.initialPosition=new wt(0,0),this.position=new wt(0,0),this.lastPosition=new wt(0,0),this.lastGravity=new wt(0,0),this.force=new wt(0,0),this.velocity=new wt(0,0)}}class sd{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class od{constructor(){this.source={}}}class ad{constructor(){this.destination={},this.translationScale=new wt(0,0)}}class hd{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new wt(0,0),this.wind=new wt(0,0)}}class ud{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new wt(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new wt(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,t){return this._json.PhysicsSettings[e].Input[t].Weight}getInputReflect(e,t){return this._json.PhysicsSettings[e].Input[t].Reflect}getInputType(e,t){return this._json.PhysicsSettings[e].Input[t].Type}getInputSourceId(e,t){return this._json.PhysicsSettings[e].Input[t].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,t){return this._json.PhysicsSettings[e].Output[t].VertexIndex}getOutputAngleScale(e,t){return this._json.PhysicsSettings[e].Output[t].Scale}getOutputWeight(e,t){return this._json.PhysicsSettings[e].Output[t].Weight}getOutputDestinationId(e,t){return this._json.PhysicsSettings[e].Output[t].Destination.Id}getOutputType(e,t){return this._json.PhysicsSettings[e].Output[t].Type}getOutputReflect(e,t){return this._json.PhysicsSettings[e].Output[t].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,t){return this._json.PhysicsSettings[e].Vertices[t].Mobility}getParticleDelay(e,t){return this._json.PhysicsSettings[e].Vertices[t].Delay}getParticleAcceleration(e,t){return this._json.PhysicsSettings[e].Vertices[t].Acceleration}getParticleRadius(e,t){return this._json.PhysicsSettings[e].Vertices[t].Radius}getParticlePosition(e,t){const i=new wt(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[t].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[t].Position.Y,i}}const zu="Angle";class Sh{static create(e){const t=new Sh;return t.parse(e),t._physicsRig.gravity.y=0,t}evaluate(e,t){let i,s,o,h;const u=new wt;let b,x,w,E,C,L,k,U;C=e.getModel().parameters.values,L=e.getModel().parameters.maximumValues,k=e.getModel().parameters.minimumValues,U=e.getModel().parameters.defaultValues;for(let V=0;V<this._physicsRig.subRigCount;++V){i={angle:0},u.x=0,u.y=0,b=this._physicsRig.settings[V],x=this._physicsRig.inputs.slice(b.baseInputIndex),w=this._physicsRig.outputs.slice(b.baseOutputIndex),E=this._physicsRig.particles.slice(b.baseParticleIndex);for(let H=0;H<b.inputCount;++H)s=x[H].weight/100,x[H].sourceParameterIndex==-1&&(x[H].sourceParameterIndex=e.getParameterIndex(x[H].source.id)),x[H].getNormalizedParameterValue(u,i,C[x[H].sourceParameterIndex],k[x[H].sourceParameterIndex],L[x[H].sourceParameterIndex],U[x[H].sourceParameterIndex],b.normalizationPosition,b.normalizationAngle,x[H].reflect,s);o=ir.degreesToRadian(-i.angle),u.x=u.x*ir.cos(o)-u.y*ir.sin(o),u.y=u.x*ir.sin(o)+u.y*ir.cos(o),xd(E,b.particleCount,u,i.angle,this._options.wind,.001*b.normalizationPosition.maximum,t,5);for(let H=0;H<b.outputCount;++H){const Q=w[H].vertexIndex;if(Q<1||Q>=b.particleCount)break;w[H].destinationParameterIndex==-1&&(w[H].destinationParameterIndex=e.getParameterIndex(w[H].destination.id));const te=new wt;te.x=E[Q].position.x-E[Q-1].position.x,te.y=E[Q].position.y-E[Q-1].position.y,h=w[H].getValue(te,E,Q,w[H].reflect,this._options.gravity);const ie=w[H].destinationParameterIndex,ae=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(C.subarray(ie))):C.slice(ie);Ad(ae,k[ie],L[ie],h,w[H]);for(let ne=ie,le=0;ne<C.length;ne++,le++)C[ne]=ae[le]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new ld,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new hd;let t=new ud(e);this._physicsRig.gravity=t.getGravity(),this._physicsRig.wind=t.getWind(),this._physicsRig.subRigCount=t.getSubRigCount();let i=0,s=0,o=0;for(let h=0;h<this._physicsRig.subRigCount;++h){const u=new sd;u.normalizationPosition.minimum=t.getNormalizationPositionMinimumValue(h),u.normalizationPosition.maximum=t.getNormalizationPositionMaximumValue(h),u.normalizationPosition.defalut=t.getNormalizationPositionDefaultValue(h),u.normalizationAngle.minimum=t.getNormalizationAngleMinimumValue(h),u.normalizationAngle.maximum=t.getNormalizationAngleMaximumValue(h),u.normalizationAngle.defalut=t.getNormalizationAngleDefaultValue(h),u.inputCount=t.getInputCount(h),u.baseInputIndex=i,i+=u.inputCount;for(let b=0;b<u.inputCount;++b){const x=new od;switch(x.sourceParameterIndex=-1,x.weight=t.getInputWeight(h,b),x.reflect=t.getInputReflect(h,b),t.getInputType(h,b)){case"X":x.type=Tn.CubismPhysicsSource_X,x.getNormalizedParameterValue=cd;break;case"Y":x.type=Tn.CubismPhysicsSource_Y,x.getNormalizedParameterValue=fd;break;case zu:x.type=Tn.CubismPhysicsSource_Angle,x.getNormalizedParameterValue=dd}x.source.targetType=Ba.CubismPhysicsTargetType_Parameter,x.source.id=t.getInputSourceId(h,b),this._physicsRig.inputs.push(x)}u.outputCount=t.getOutputCount(h),u.baseOutputIndex=s,s+=u.outputCount;for(let b=0;b<u.outputCount;++b){const x=new ad;switch(x.destinationParameterIndex=-1,x.vertexIndex=t.getOutputVertexIndex(h,b),x.angleScale=t.getOutputAngleScale(h,b),x.weight=t.getOutputWeight(h,b),x.destination.targetType=Ba.CubismPhysicsTargetType_Parameter,x.destination.id=t.getOutputDestinationId(h,b),t.getOutputType(h,b)){case"X":x.type=Tn.CubismPhysicsSource_X,x.getValue=pd,x.getScale=vd;break;case"Y":x.type=Tn.CubismPhysicsSource_Y,x.getValue=_d,x.getScale=yd;break;case zu:x.type=Tn.CubismPhysicsSource_Angle,x.getValue=md,x.getScale=bd}x.reflect=t.getOutputReflect(h,b),this._physicsRig.outputs.push(x)}u.particleCount=t.getParticleCount(h),u.baseParticleIndex=o,o+=u.particleCount;for(let b=0;b<u.particleCount;++b){const x=new nd;x.mobility=t.getParticleMobility(h,b),x.delay=t.getParticleDelay(h,b),x.acceleration=t.getParticleAcceleration(h,b),x.radius=t.getParticleRadius(h,b),x.position=t.getParticlePosition(h,b),this._physicsRig.particles.push(x)}this._physicsRig.settings.push(u)}this.initialize(),t.release()}initialize(){let e,t,i;for(let s=0;s<this._physicsRig.subRigCount;++s){t=this._physicsRig.settings[s],e=this._physicsRig.particles.slice(t.baseParticleIndex),e[0].initialPosition=new wt(0,0),e[0].lastPosition=new wt(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new wt(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new wt(0,0),e[0].force=new wt(0,0);for(let o=1;o<t.particleCount;++o)i=new wt(0,0),i.y=e[o].radius,e[o].initialPosition=new wt(e[o-1].initialPosition.x+i.x,e[o-1].initialPosition.y+i.y),e[o].position=new wt(e[o].initialPosition.x,e[o].initialPosition.y),e[o].lastPosition=new wt(e[o].initialPosition.x,e[o].initialPosition.y),e[o].lastGravity=new wt(0,-1),e[o].lastGravity.y*=-1,e[o].velocity=new wt(0,0),e[o].force=new wt(0,0)}}}class ld{constructor(){this.gravity=new wt(0,0),this.wind=new wt(0,0)}}function cd(n,e,t,i,s,o,h,u,b,x){n.x+=Ph(t,i,s,o,h.minimum,h.maximum,h.defalut,b)*x}function fd(n,e,t,i,s,o,h,u,b,x){n.y+=Ph(t,i,s,o,h.minimum,h.maximum,h.defalut,b)*x}function dd(n,e,t,i,s,o,h,u,b,x){e.angle+=Ph(t,i,s,o,u.minimum,u.maximum,u.defalut,b)*x}function pd(n,e,t,i,s){let o=n.x;return i&&(o*=-1),o}function _d(n,e,t,i,s){let o=n.y;return i&&(o*=-1),o}function md(n,e,t,i,s){let o;return s=t>=2?e[t-1].position.substract(e[t-2].position):s.multiplyByScaler(-1),o=ir.directionToRadian(s,n),i&&(o*=-1),o}function gd(n,e){return Math.min(n,e)+function(t,i){return Math.abs(Math.max(t,i)-Math.min(t,i))}(n,e)/2}function vd(n,e){return n.x}function yd(n,e){return n.y}function bd(n,e){return e}function xd(n,e,t,i,s,o,h,u){let b,x,w,E,C=new wt(0,0),L=new wt(0,0),k=new wt(0,0),U=new wt(0,0);n[0].position=new wt(t.x,t.y),b=ir.degreesToRadian(i),E=ir.radianToDirection(b),E.normalize();for(let V=1;V<e;++V)n[V].force=E.multiplyByScaler(n[V].acceleration).add(s),n[V].lastPosition=new wt(n[V].position.x,n[V].position.y),x=n[V].delay*h*30,C=n[V].position.substract(n[V-1].position),w=ir.directionToRadian(n[V].lastGravity,E)/u,C.x=ir.cos(w)*C.x-C.y*ir.sin(w),C.y=ir.sin(w)*C.x+C.y*ir.cos(w),n[V].position=n[V-1].position.add(C),L=n[V].velocity.multiplyByScaler(x),k=n[V].force.multiplyByScaler(x).multiplyByScaler(x),n[V].position=n[V].position.add(L).add(k),U=n[V].position.substract(n[V-1].position),U.normalize(),n[V].position=n[V-1].position.add(U.multiplyByScaler(n[V].radius)),ir.abs(n[V].position.x)<o&&(n[V].position.x=0),x!=0&&(n[V].velocity=n[V].position.substract(n[V].lastPosition),n[V].velocity=n[V].velocity.divisionByScalar(x),n[V].velocity=n[V].velocity.multiplyByScaler(n[V].mobility)),n[V].force=new wt(0,0),n[V].lastGravity=new wt(E.x,E.y)}function Ad(n,e,t,i,s){let o,h,u;o=s.getScale(s.translationScale,s.angleScale),h=i*o,h<e?(h<s.valueBelowMinimum&&(s.valueBelowMinimum=h),h=e):h>t&&(h>s.valueExceededMaximum&&(s.valueExceededMaximum=h),h=t),u=s.weight/100,u>=1||(h=n[0]*(1-u)+h*u),n[0]=h}function Ph(n,e,t,i,s,o,h,u){let b=0;const x=ir.max(t,e);x<n&&(n=x);const w=ir.min(t,e);w>n&&(n=w);const E=ir.min(s,o),C=ir.max(s,o),L=h,k=gd(w,x),U=n-k;switch(Math.sign(U)){case 1:{const V=x-k;V!=0&&(b=U*((C-L)/V),b+=L);break}case-1:{const V=w-k;V!=0&&(b=U*((E-L)/V),b+=L);break}case 0:b=L}return u?b:-1*b}function Td(){var n;(n=this.__moc)==null||n.release()}function d0(n,e){this.name="AggregateError",this.errors=n,this.message=e||""}lr.registerRuntime({version:4,ready:function(){return Ps.isStarted()?Promise.resolve():(ia!=null||(ia=new Promise((n,e)=>{(function t(){try{i=Object.assign({logFunction:console.log,loggingLevel:$n.LogLevel_Verbose},i),Ps.startUp(i),Ps.initialize(),n()}catch(s){if(Yu--,Yu<0){const o=new Error("Failed to start up Cubism 4 framework.");return o.cause=s,void e(o)}tr.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(t,10)}var i})()})),ia)},test:n=>n instanceof Wn||Wn.isValidJSON(n),isValidMoc(n){if(n.byteLength<4)return!1;const e=new Int8Array(n,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings:n=>new Wn(n),createCoreModel(n){const e=wh.create(n);try{const t=e.createModel();return t.__moc=e,t}catch(t){try{e.release()}catch{}throw t}},createInternalModel(n,e,t){const i=new td(n,e,t),s=n;return s.__moc&&(i.__moc=s.__moc,delete s.__moc,i.once("destroy",Td)),i},createPhysics:(n,e)=>Sh.create(e),createPose:(n,e)=>Eh.create(e)}),d0.prototype=Error.prototype;var Ed=setTimeout;function Wu(n){return!!(n&&n.length!==void 0)}function wd(){}function fr(n){if(!(this instanceof fr))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],_0(n,this)}function p0(n,e){for(;n._state===3;)n=n._value;n._state!==0?(n._handled=!0,fr._immediateFn(function(){var t=n._state===1?e.onFulfilled:e.onRejected;if(t!==null){var i;try{i=t(n._value)}catch(s){return void $s(e.promise,s)}Ua(e.promise,i)}else(n._state===1?Ua:$s)(e.promise,n._value)})):n._deferreds.push(e)}function Ua(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var t=e.then;if(e instanceof fr)return n._state=3,n._value=e,void Ga(n);if(typeof t=="function")return void _0((i=t,s=e,function(){i.apply(s,arguments)}),n)}n._state=1,n._value=e,Ga(n)}catch(o){$s(n,o)}var i,s}function $s(n,e){n._state=2,n._value=e,Ga(n)}function Ga(n){n._state===2&&n._deferreds.length===0&&fr._immediateFn(function(){n._handled||fr._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)p0(n,n._deferreds[e]);n._deferreds=null}function Sd(n,e,t){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function _0(n,e){var t=!1;try{n(function(i){t||(t=!0,Ua(e,i))},function(i){t||(t=!0,$s(e,i))})}catch(i){if(t)return;t=!0,$s(e,i)}}fr.prototype.catch=function(n){return this.then(null,n)},fr.prototype.then=function(n,e){var t=new this.constructor(wd);return p0(this,new Sd(n,e,t)),t},fr.prototype.finally=function(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})},fr.all=function(n){return new fr(function(e,t){if(!Wu(n))return t(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(n);if(i.length===0)return e([]);var s=i.length;function o(u,b){try{if(b&&(typeof b=="object"||typeof b=="function")){var x=b.then;if(typeof x=="function")return void x.call(b,function(w){o(u,w)},t)}i[u]=b,--s===0&&e(i)}catch(w){t(w)}}for(var h=0;h<i.length;h++)o(h,i[h])})},fr.any=function(n){var e=this;return new e(function(t,i){if(!n||n.length===void 0)return i(new TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(n);if(s.length===0)return i();for(var o=[],h=0;h<s.length;h++)try{e.resolve(s[h]).then(t).catch(function(u){o.push(u),o.length===s.length&&i(new d0(o,"All promises were rejected"))})}catch(u){i(u)}})},fr.allSettled=function(n){return new this(function(e,t){if(!n||n.length===void 0)return t(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(i.length===0)return e([]);var s=i.length;function o(u,b){if(b&&(typeof b=="object"||typeof b=="function")){var x=b.then;if(typeof x=="function")return void x.call(b,function(w){o(u,w)},function(w){i[u]={status:"rejected",reason:w},--s===0&&e(i)})}i[u]={status:"fulfilled",value:b},--s===0&&e(i)}for(var h=0;h<i.length;h++)o(h,i[h])})},fr.resolve=function(n){return n&&typeof n=="object"&&n.constructor===fr?n:new fr(function(e){e(n)})},fr.reject=function(n){return new fr(function(e,t){t(n)})},fr.race=function(n){return new fr(function(e,t){if(!Wu(n))return t(new TypeError("Promise.race accepts an array"));for(var i=0,s=n.length;i<s;i++)fr.resolve(n[i]).then(e,t)})},fr._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){Ed(n,0)},fr._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qu=Object.getOwnPropertySymbols,Pd=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,Id=Do(function(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if(Object.getOwnPropertyNames(e).map(function(s){return e[s]}).join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(n,e){for(var t,i,s=function(b){if(b==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(b)}(n),o=1;o<arguments.length;o++){for(var h in t=Object(arguments[o]))Pd.call(t,h)&&(s[h]=t[h]);if(qu){i=qu(t);for(var u=0;u<i.length;u++)Md.call(t,i[u])&&(s[i[u]]=t[i[u]])}}return s});/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=fr),Object.assign||(Object.assign=Id);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!globalThis.performance||!globalThis.performance.now){var Rd=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-Rd}}for(var na=Date.now(),Zu=["ms","moz","webkit","o"],sa=0;sa<Zu.length&&!globalThis.requestAnimationFrame;++sa){var oa=Zu[sa];globalThis.requestAnimationFrame=globalThis[oa+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[oa+"CancelAnimationFrame"]||globalThis[oa+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(n){if(typeof n!="function")throw new TypeError(n+"is not a function");var e=Date.now(),t=16+na-e;return t<0&&(t=0),na=e,globalThis.self.setTimeout(function(){na=Date.now(),n(performance.now())},t)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(n){return clearTimeout(n)}),Math.sign||(Math.sign=function(n){return(n=Number(n))===0||isNaN(n)?n:n>0?1:-1}),Number.isInteger||(Number.isInteger=function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);yr.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var so=100,Cd=function(){function n(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ci.tablet||Ci.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=so+"px",t.style.height=so+"px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex="2",this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex="2",t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},n.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},n.prototype.update=function(){var e=performance.now();if(!(Ci.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),i=t.left,s=t.top,o=t.width,h=t.height,u=this.renderer,b=u.width,x=u.height,w=u.resolution,E=o/b*w,C=h/x*w,L=this.div;L.style.left=i+"px",L.style.top=s+"px",L.style.width=b+"px",L.style.height=x+"px";for(var k=0;k<this.children.length;k++){var U=this.children[k];if(U.renderId!==this.renderId)U._accessibleActive=!1,Yn(this.children,k,1),this.div.removeChild(U._accessibleDiv),this.pool.push(U._accessibleDiv),U._accessibleDiv=null,k--;else{L=U._accessibleDiv;var V=U.hitArea,H=U.worldTransform;U.hitArea?(L.style.left=(H.tx+V.x*H.a)*E+"px",L.style.top=(H.ty+V.y*H.d)*C+"px",L.style.width=V.width*H.a*E+"px",L.style.height=V.height*H.d*C+"px"):(V=U.getBounds(),this.capHitArea(V),L.style.left=V.x*E+"px",L.style.top=V.y*C+"px",L.style.width=V.width*E+"px",L.style.height=V.height*C+"px",L.title!==U.accessibleTitle&&U.accessibleTitle!==null&&(L.title=U.accessibleTitle),L.getAttribute("aria-label")!==U.accessibleHint&&U.accessibleHint!==null&&L.setAttribute("aria-label",U.accessibleHint)),U.accessibleTitle===L.title&&U.tabIndex===L.tabIndex||(L.title=U.accessibleTitle,L.tabIndex=U.tabIndex,this.debug&&this.updateDebugHTML(L))}}this.renderId++}},n.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,i=t.width,s=t.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>s&&(e.height=s-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=so+"px",t.style.height=so+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex="2",t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:e.accessibleHint&&e.accessibleHint!==null||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,i=e.target.displayObject,s=t.eventData;t.dispatchEvent(i,"click",s),t.dispatchEvent(i,"pointertap",s),t.dispatchEvent(i,"tap",s)},n.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,i=e.target.displayObject,s=t.eventData;t.dispatchEvent(i,"mouseover",s)},n.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,i=e.target.displayObject,s=t.eventData;t.dispatchEvent(i,"mouseout",s)},n.prototype._onKeyDown=function(e){e.keyCode===9&&this.activate()},n.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n.extension={name:"accessibility",type:[Jt.RendererPlugin,Jt.CanvasRendererPlugin]},n}(),Ju=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new nr,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},n.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}(),Xa=function(n,e){return Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Xa(n,e)},Od=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),aa=function(){function n(e){this._pointerId=e,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return(this._flags&n.FLAGS.OVER)!==0},set:function(e){this._doSet(n.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return(this._flags&n.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return(this._flags&n.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),Dd=function(){function n(){this._tempPoint=new nr}return n.prototype.recursiveFindHit=function(e,t,i,s,o){var h;if(!t||!t.visible)return!1;var u=e.data.global,b=!1,x=o=t.interactive||o,w=!0;if(t.hitArea)s&&(t.worldTransform.applyInverse(u,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?b=!0:(s=!1,w=!1)),x=!1;else if(t._mask&&s){var E=t._mask.isMaskData?t._mask.maskObject:t._mask;E&&!(!((h=E.containsPoint)===null||h===void 0)&&h.call(E,u))&&(s=!1)}if(w&&t.interactiveChildren&&t.children)for(var C=t.children,L=C.length-1;L>=0;L--){var k=C[L],U=this.recursiveFindHit(e,k,i,s,x);if(U){if(!k.parent)continue;x=!1,U&&(e.target&&(s=!1),b=!0)}}return o&&(s&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(u)&&(b=!0),t.interactive&&(b&&!e.target&&(e.target=t),i&&i(e,t,!!b))),b},n.prototype.findHit=function(e,t,i,s){this.recursiveFindHit(e,t,i,s,!1)},n}(),$d={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(n){n?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};yr.mixin($d);var oo={target:null,data:{global:null}},Ld=function(n){function e(t,i){var s=n.call(this)||this;return i=i||{},s.renderer=t,s.autoPreventDefault=i.autoPreventDefault===void 0||i.autoPreventDefault,s.interactionFrequency=i.interactionFrequency||10,s.mouse=new Ju,s.mouse.identifier=1,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[1]=s.mouse,s.interactionDataPool=[],s.eventData=new Od,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!("PointerEvent"in globalThis),s.supportsTouchEvents="ontouchstart"in globalThis,s.supportsPointerEvents=!!globalThis.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new Dd,s._tempDisplayObject=new r0,s._eventListenerOptions={capture:!0,passive:!1},s._useSystemTicker=i.useSystemTicker===void 0||i.useSystemTicker,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return function(t,i){function s(){this.constructor=t}Xa(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}(e,n),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,i){return oo.target=null,oo.data.global=t,i||(i=this.lastObjectRendered),this.processInteractive(oo,i,null,!0),oo.target},e.prototype.setTargetElement=function(t,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Dr.system.add(this.tickerUpdate,this,ji.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Dr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&i.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var s=this.cursorStyles[t];if(s)switch(typeof s){case"string":i&&(this.interactionDOMElement.style.cursor=s);break;case"function":s(t);break;case"object":i&&Object.assign(this.interactionDOMElement.style,s)}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,i,s){s.stopPropagationHint&&t!==s.stopsPropagatingAt||(s.currentTarget=t,s.type=i,t.emit(i,s),t[i]&&t[i](s))},e.prototype.delayDispatchEvent=function(t,i,s){this.delayedEvents.push({displayObject:t,eventString:i,eventData:s})},e.prototype.mapPositionToPoint=function(t,i,s){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var h=1/this.resolution;t.x=(i-o.left)*(this.interactionDOMElement.width/o.width)*h,t.y=(s-o.top)*(this.interactionDOMElement.height/o.height)*h},e.prototype.processInteractive=function(t,i,s,o){var h=this.search.findHit(t,i,s,o),u=this.delayedEvents;if(!u.length)return h;t.stopPropagationHint=!1;var b=u.length;this.delayedEvents=[];for(var x=0;x<b;x++){var w=u[x],E=w.displayObject,C=w.eventString,L=w.eventData;L.stopsPropagatingAt===E&&(L.stopPropagationHint=!0),this.dispatchEvent(E,C,L)}return h},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||t.pointerType!=="touch"){var i=this.normalizeToPointerData(t);this.autoPreventDefault&&i[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var s=i.length,o=0;o<s;o++){var h=i[o],u=this.getInteractionDataForPointerId(h),b=this.configureInteractionEventForDOMEvent(this.eventData,h,u);if(b.data.originalEvent=t,this.processInteractive(b,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",b),h.pointerType==="touch")this.emit("touchstart",b);else if(h.pointerType==="mouse"||h.pointerType==="pen"){var x=h.button===2;this.emit(x?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,i,s){var o=t.data,h=t.data.identifier;if(s){if(i.trackedPointers[h]||(i.trackedPointers[h]=new aa(h)),this.dispatchEvent(i,"pointerdown",t),o.pointerType==="touch")this.dispatchEvent(i,"touchstart",t);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var u=o.button===2;u?i.trackedPointers[h].rightDown=!0:i.trackedPointers[h].leftDown=!0,this.dispatchEvent(i,u?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,i,s){var o=this.normalizeToPointerData(t),h=o.length,u=t.target;t.composedPath&&t.composedPath().length>0&&(u=t.composedPath()[0]);for(var b=u!==this.interactionDOMElement?"outside":"",x=0;x<h;x++){var w=o[x],E=this.getInteractionDataForPointerId(w),C=this.configureInteractionEventForDOMEvent(this.eventData,w,E);if(C.data.originalEvent=t,this.processInteractive(C,this.lastObjectRendered,s,i||!b),this.emit(i?"pointercancel":"pointerup"+b,C),w.pointerType==="mouse"||w.pointerType==="pen"){var L=w.button===2;this.emit(L?"rightup"+b:"mouseup"+b,C)}else w.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+b,C),this.releaseInteractionDataForPointerId(w.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,i){var s=t.data,o=t.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.dispatchEvent(i,"pointercancel",t),s.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,i,s){var o=t.data,h=t.data.identifier,u=i.trackedPointers[h],b=o.pointerType==="touch",x=o.pointerType==="mouse"||o.pointerType==="pen",w=!1;if(x){var E=o.button===2,C=aa.FLAGS,L=E?C.RIGHT_DOWN:C.LEFT_DOWN,k=u!==void 0&&u.flags&L;s?(this.dispatchEvent(i,E?"rightup":"mouseup",t),k&&(this.dispatchEvent(i,E?"rightclick":"click",t),w=!0)):k&&this.dispatchEvent(i,E?"rightupoutside":"mouseupoutside",t),u&&(E?u.rightDown=!1:u.leftDown=!1)}s?(this.dispatchEvent(i,"pointerup",t),b&&this.dispatchEvent(i,"touchend",t),u&&(x&&!w||this.dispatchEvent(i,"pointertap",t),b&&(this.dispatchEvent(i,"tap",t),u.over=!1))):u&&(this.dispatchEvent(i,"pointerupoutside",t),b&&this.dispatchEvent(i,"touchendoutside",t)),u&&u.none&&delete i.trackedPointers[h]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||t.pointerType!=="touch"){var i=this.normalizeToPointerData(t);i[0].pointerType!=="mouse"&&i[0].pointerType!=="pen"||(this._didMove=!0,this.cursor=null);for(var s=i.length,o=0;o<s;o++){var h=i[o],u=this.getInteractionDataForPointerId(h),b=this.configureInteractionEventForDOMEvent(this.eventData,h,u);b.data.originalEvent=t,this.processInteractive(b,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",b),h.pointerType==="touch"&&this.emit("touchmove",b),h.pointerType!=="mouse"&&h.pointerType!=="pen"||this.emit("mousemove",b)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,i,s){var o=t.data,h=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen";u&&this.processPointerOverOut(t,i,s),this.moveWhenInside&&!s||(this.dispatchEvent(i,"pointermove",t),h&&this.dispatchEvent(i,"touchmove",t),u&&this.dispatchEvent(i,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||t.pointerType!=="touch"){var i=this.normalizeToPointerData(t)[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(t,i,s){var o=t.data,h=t.data.identifier,u=o.pointerType==="mouse"||o.pointerType==="pen",b=i.trackedPointers[h];s&&!b&&(b=i.trackedPointers[h]=new aa(h)),b!==void 0&&(s&&this.mouseOverRenderer?(b.over||(b.over=!0,this.delayDispatchEvent(i,"pointerover",t),u&&this.delayDispatchEvent(i,"mouseover",t)),u&&this.cursor===null&&(this.cursor=i.cursor)):b.over&&(b.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),u&&this.dispatchEvent(i,"mouseout",t),b.none&&delete i.trackedPointers[h]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||t.pointerType!=="touch"){var i=this.normalizeToPointerData(t)[0],s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),i.pointerType!=="mouse"&&i.pointerType!=="pen"||this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(t){var i,s=t.pointerId;return s===1||t.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[s]?i=this.activeInteractionData[s]:((i=this.interactionDataPool.pop()||new Ju).identifier=s,this.activeInteractionData[s]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var i=this.activeInteractionData[t];i&&(delete this.activeInteractionData[t],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(t,i,s){return t.data=s,this.mapPositionToPoint(s.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=s.global.x,i.globalY=s.global.y),s.originalEvent=i,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var s=0,o=t.changedTouches.length;s<o;s++){var h=t.changedTouches[s];h.button===void 0&&(h.button=t.touches.length?1:0),h.buttons===void 0&&(h.buttons=t.touches.length?1:0),h.isPrimary===void 0&&(h.isPrimary=t.touches.length===1&&t.type==="touchstart"),h.width===void 0&&(h.width=h.radiusX||1),h.height===void 0&&(h.height=h.radiusY||1),h.tiltX===void 0&&(h.tiltX=0),h.tiltY===void 0&&(h.tiltY=0),h.pointerType===void 0&&(h.pointerType="touch"),h.pointerId===void 0&&(h.pointerId=h.identifier||0),h.pressure===void 0&&(h.pressure=h.force||.5),h.twist===void 0&&(h.twist=0),h.tangentialPressure===void 0&&(h.tangentialPressure=0),h.layerX===void 0&&(h.layerX=h.offsetX=h.clientX),h.layerY===void 0&&(h.layerY=h.offsetY=h.clientY),h.isNormalized=!0,i.push(h)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))i.push(t);else{var u=t;u.isPrimary===void 0&&(u.isPrimary=!0),u.width===void 0&&(u.width=1),u.height===void 0&&(u.height=1),u.tiltX===void 0&&(u.tiltX=0),u.tiltY===void 0&&(u.tiltY=0),u.pointerType===void 0&&(u.pointerType="mouse"),u.pointerId===void 0&&(u.pointerId=1),u.pressure===void 0&&(u.pressure=.5),u.twist===void 0&&(u.twist=0),u.tangentialPressure===void 0&&(u.tangentialPressure=0),u.isNormalized=!0,i.push(u)}return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Jt.RendererPlugin,Jt.CanvasRendererPlugin]},e}(sn),Fd=new Bt,kd=function(){function n(e){this.renderer=e}return n.prototype.image=function(e,t,i){var s=new Image;return s.src=this.base64(e,t,i),s},n.prototype.base64=function(e,t,i){return this.canvas(e).toDataURL(t,i)},n.prototype.canvas=function(e,t){var i=this._rawPixels(e,t),s=i.pixels,o=i.width,h=i.height,u=i.flipY,b=new fu(o,h,1),x=b.context.getImageData(0,0,o,h);if(n.arrayPostDivide(s,x.data),b.context.putImageData(x,0,0),u){var w=new fu(b.width,b.height,1);w.context.scale(1,-1),w.context.drawImage(b.canvas,0,-h),b.destroy(),b=w}return b.canvas},n.prototype.pixels=function(e,t){var i=this._rawPixels(e,t).pixels;return n.arrayPostDivide(i,i),i},n.prototype._rawPixels=function(e,t){var i,s,o=this.renderer,h=!1,u=!1;if(e)if(e instanceof Cn)s=e;else{var b=o.context.webGLVersion>=2?o.multisample:cr.NONE;if(s=this.renderer.generateTexture(e,{multisample:b}),b!==cr.NONE){var x=Cn.create({width:s.width,height:s.height});o.framebuffer.bind(s.framebuffer),o.framebuffer.blit(x.framebuffer),o.framebuffer.bind(null),s.destroy(!0),s=x}u=!0}s?(i=s.baseTexture.resolution,t=t??s.frame,h=!1,o.renderTexture.bind(s)):(i=o.resolution,t||((t=Fd).width=o.width,t.height=o.height),h=!0,o.renderTexture.bind(null));var w=Math.round(t.width*i),E=Math.round(t.height*i),C=new Uint8Array(4*w*E),L=o.gl;return L.readPixels(Math.round(t.x*i),Math.round(t.y*i),w,E,L.RGBA,L.UNSIGNED_BYTE,C),u&&s.destroy(!0),{pixels:C,width:w,height:E,flipY:h}},n.prototype.destroy=function(){this.renderer=null},n.arrayPostDivide=function(e,t){for(var i=0;i<e.length;i+=4){var s=t[i+3]=e[i+3];s!==0?(t[i]=Math.round(Math.min(255*e[i]/s,255)),t[i+1]=Math.round(Math.min(255*e[i+1]/s,255)),t[i+2]=Math.round(Math.min(255*e[i+2]/s,255))):(t[i]=e[i],t[i+1]=e[i+1],t[i+2]=e[i+2])}},n.extension={name:"extract",type:Jt.RendererPlugin},n}(),ao=function(){function n(e,t,i){t===void 0&&(t=!1),this._fn=e,this._once=t,this._thisArg=i,this._next=this._prev=this._owner=null}return n.prototype.detach=function(){return this._owner!==null&&(this._owner.detach(this),!0)},n}();function Qu(n,e){return n._head?(n._tail._next=e,e._prev=n._tail,n._tail=e):(n._head=e,n._tail=e),e._owner=n,e}var ha,Bi=function(){function n(){this._head=this._tail=void 0}return n.prototype.handlers=function(e){e===void 0&&(e=!1);var t=this._head;if(e)return!!t;for(var i=[];t;)i.push(t),t=t._next;return i},n.prototype.has=function(e){if(!(e instanceof ao))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},n.prototype.dispatch=function(){for(var e=arguments,t=[],i=0;i<arguments.length;i++)t[i]=e[i];var s=this._head;if(!s)return!1;for(;s;)s._once&&this.detach(s),s._fn.apply(s._thisArg,t),s=s._next;return!0},n.prototype.add=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Qu(this,new ao(e,!1,t))},n.prototype.once=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Qu(this,new ao(e,!0,t))},n.prototype.detach=function(e){if(!(e instanceof ao))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},n.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},n}();function m0(n,e){e=e||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=t.parser[e.strictMode?"strict":"loose"].exec(n),s={},o=14;o--;)s[t.key[o]]=i[o]||"";return s[t.q.name]={},s[t.key[12]].replace(t.q.parser,function(h,u,b){u&&(s[t.q.name][u]=b)}),s}var ho=null;function Ku(){}function el(n,e,t){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(n[e]=t)}function ua(n){return n.toString().replace("object ","")}var vr=function(){function n(e,t,i){if(this._dequeue=Ku,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Ku,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Bi,this.onProgress=new Bi,this.onComplete=new Bi,this.onAfterMiddleware=new Bi}return n.setExtensionLoadType=function(e,t){el(n._loadTypeMap,e,t)},n.setExtensionXhrType=function(e,t){el(n._xhrTypeMap,e,t)},Object.defineProperty(n.prototype,"isDataUrl",{get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isComplete",{get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLoading",{get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),n.prototype.complete=function(){this._clearEvents(),this._finish()},n.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},n.prototype.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&typeof this.crossOrigin=="string"||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;case n.LOAD_TYPE.XHR:default:ha===void 0&&(ha=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),ha&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._hasFlag=function(e){return(this._flags&e)!==0},n.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},n.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},n.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&globalThis.Image!==void 0?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&globalThis.Audio!==void 0?this.data=new Audio:this.data=document.createElement(e),this.data!==null){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(t)?t[i]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},n.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=n.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},n.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},n.prototype._createSource=function(e,t,i){i||(i=e+"/"+this._getExtension(t));var s=document.createElement("source");return s.src=t,s.type=i,s},n.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},n.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},n.prototype._onTimeout=function(){this.abort("Load timed out.")},n.prototype._xhrOnError=function(){var e=this.xhr;this.abort(ua(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},n.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(ua(e)+" Request timed out.")},n.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(ua(e)+" Request was aborted by the user.")},n.prototype._xhrOnLoad=function(){var e=this.xhr,t="",i=e.status===void 0?200:e.status;if(e.responseType!==""&&e.responseType!=="text"&&e.responseType!==void 0||(t=e.responseText),i===0&&(t.length>0||e.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?i=200:i===1223&&(i=204),(i/100|0)===2){if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=n.TYPE.JSON}catch(h){return void this.abort("Error trying to parse loaded json: "+h)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t,this.data=o}this.type=n.TYPE.XML}catch(h){return void this.abort("Error trying to parse loaded xml: "+h)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},n.prototype._determineCrossOrigin=function(e,t){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,ho||(ho=document.createElement("a")),ho.href=e;var i=m0(ho.href,{strictMode:!0}),s=!i.port&&t.port===""||i.port===t.port,o=i.protocol?i.protocol+":":"";return i.host===t.hostname&&s&&o===t.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(e){e===void 0&&(e=this.url);var t="";if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var s=e.indexOf("?"),o=e.indexOf("#"),h=Math.min(s>-1?s:e.length,o>-1?o:e.length);t=(e=e.substring(0,h)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},n.prototype._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n}();function pn(){}function Nd(n){return function(){for(var e=arguments,t=[],i=0;i<arguments.length;i++)t[i]=e[i];if(n===null)throw new Error("Callback was already called.");var s=n;n=null,s.apply(this,t)}}(function(n){var e,t,i,s;(e=n.STATUS_FLAGS||(n.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(t=n.TYPE||(n.TYPE={}))[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT",(i=n.LOAD_TYPE||(n.LOAD_TYPE={}))[i.XHR=1]="XHR",i[i.IMAGE=2]="IMAGE",i[i.AUDIO=3]="AUDIO",i[i.VIDEO=4]="VIDEO",(s=n.XHR_RESPONSE_TYPE||(n.XHR_RESPONSE_TYPE={})).DEFAULT="text",s.BUFFER="arraybuffer",s.BLOB="blob",s.DOCUMENT="document",s.JSON="json",s.TEXT="text",n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,avif:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,avif:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER},n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(vr||(vr={}));var Bd=function(n,e){this.data=n,this.callback=e},la=function(){function n(e,t){var i=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=pn,this.unsaturated=pn,this.empty=pn,this.drain=pn,this.error=pn,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(s,o,h){if(h&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,s==null&&i.idle())setTimeout(function(){return i.drain()},1);else{var u=new Bd(s,typeof h=="function"?h:pn);o?i._tasks.unshift(u):i._tasks.push(u),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var s=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(s.data,Nd(i._next(s)))}},this._worker=e,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return n.prototype._next=function(e){var t=this;return function(){for(var i=arguments,s=[],o=0;o<arguments.length;o++)s[o]=i[o];t.workers-=1,e.callback.apply(e,s),s[0]!=null&&t.error(s[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},n.prototype.push=function(e,t){this._insert(e,!1,t)},n.prototype.kill=function(){this.workers=0,this.drain=pn,this.started=!1,this._tasks=[]},n.prototype.unshift=function(e,t){this._insert(e,!0,t)},n.prototype.length=function(){return this._tasks.length},n.prototype.running=function(){return this.workers},n.prototype.idle=function(){return this._tasks.length+this.workers===0},n.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},n.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},n.eachSeries=function(e,t,i,s){var o=0,h=e.length;(function u(b){b||o===h?i&&i(b):s?setTimeout(function(){t(e[o++],u)},1):t(e[o++],u)})()},n.queue=function(e,t){return new n(e,t)},n}(),Ud=/(#[\w-]+)?$/,Io=function(){function n(e,t){var i=this;e===void 0&&(e=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(b,x){return i._loadResource(b,x)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(b,x){return i._loadResource(b,x)},this._queue=la.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Bi,this.onError=new Bi,this.onLoad=new Bi,this.onStart=new Bi,this.onComplete=new Bi;for(var s=0;s<n._plugins.length;++s){var o=n._plugins[s],h=o.pre,u=o.use;h&&this.pre(h),u&&this.use(u)}this._protected=!1}return n.prototype._add=function(e,t,i,s){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new vr(e,t,i),typeof s=="function"&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var o=i.parentResource,h=[],u=0;u<o.children.length;++u)o.children[u].isComplete||h.push(o.children[u]);var b=o.progressChunk*(h.length+1)/(h.length+2);for(o.children.push(this.resources[e]),o.progressChunk=b,u=0;u<h.length;++u)h[u].progressChunk=b;this.resources[e].progressChunk=b}return this._queue.push(this.resources[e]),this},n.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},n.prototype.use=function(e){return this._afterMiddleware.push(e),this},n.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},n.prototype.load=function(e){if(yi("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(n.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),n.prototype._prepareUrl=function(e){var t,i=m0(e,{strictMode:!0});if(t=i.protocol||!i.path||e.indexOf("//")===0?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var s=Ud.exec(t)[0];(t=t.slice(0,t.length-s.length)).indexOf("?")!==-1?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=s}return t},n.prototype._loadResource=function(e,t){var i=this;e._dequeue=t,la.eachSeries(this._beforeMiddleware,function(s,o){s.call(i,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),la.eachSeries(this._afterMiddleware,function(i,s){i.call(t,e,s)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var e=n._shared;return e||((e=new n)._protected=!0,n._shared=e),e},enumerable:!1,configurable:!0}),n.registerPlugin=function(e){return yi("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Hi.add({type:Jt.Loader,ref:e}),n},n._plugins=[],n}();Hi.handleByList(Jt.Loader,Io._plugins),Io.prototype.add=function(n,e,t,i){if(Array.isArray(n)){for(var s=0;s<n.length;++s)this.add(n[s]);return this}if(typeof n=="object"&&(t=n,i=e||t.callback||t.onComplete,e=t.url,n=t.name||t.key||t.url),typeof e!="string"&&(i=t,t=e,e=n),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof t=="function"&&(i=t,t=null),this._add(n,e,t,i)};var Gd=function(){function n(){}return n.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Io.shared:new Io},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n.extension=Jt.Application,n}(),Xd=function(){function n(){}return n.add=function(){vr.setExtensionLoadType("svg",vr.LOAD_TYPE.XHR),vr.setExtensionXhrType("svg",vr.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){if(!e.data||e.type!==vr.TYPE.IMAGE&&e.extension!=="svg")t();else{var i=e.data,s=e.url,o=e.name,h=e.metadata;Et.fromLoader(i,s,o,h).then(function(u){e.texture=u,t()}).catch(t)}},n.extension=Jt.Loader,n}();function Vd(n,e){if(n.data){if(n.xhr&&n.xhrType===vr.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&typeof n.data!="string"){if(n.data.type.indexOf("image")===0){var t=globalThis.URL||globalThis.webkitURL,i=t.createObjectURL(n.data);return n.blob=n.data,n.data=new Image,n.data.src=i,n.type=vr.TYPE.IMAGE,void(n.data.onload=function(){t.revokeObjectURL(i),n.data.onload=null,e()})}}else{var s=n.xhr.getResponseHeader("content-type");if(s&&s.indexOf("image")===0)return n.data=new Image,n.data.src="data:"+s+";base64,"+function(o){for(var h="",u=0;u<o.length;){for(var b=[0,0,0],x=[0,0,0,0],w=0;w<b.length;++w)u<o.length?b[w]=255&o.charCodeAt(u++):b[w]=0;switch(x[0]=b[0]>>2,x[1]=(3&b[0])<<4|b[1]>>4,x[2]=(15&b[1])<<2|b[2]>>6,x[3]=63&b[2],u-(o.length-1)){case 2:x[3]=64,x[2]=64;break;case 1:x[3]=64}for(w=0;w<x.length;++w)h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(x[w])}return h}(n.xhr.responseText),n.type=vr.TYPE.IMAGE,void(n.data.onload=function(){n.data.onload=null,e()})}e()}else e()}var Zt,Rt,jd=function(){function n(){}return n.extension=Jt.Loader,n.use=Vd,n}();Hi.add(Xd,jd),function(n){n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(Rt||(Rt={}));var Ro=((Zt={})[Rt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Zt[Rt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Zt[Rt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Zt[Rt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Zt[Rt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Zt[Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Zt[Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Zt[Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Zt[Rt.COMPRESSED_R11_EAC]=.5,Zt[Rt.COMPRESSED_SIGNED_R11_EAC]=.5,Zt[Rt.COMPRESSED_RG11_EAC]=1,Zt[Rt.COMPRESSED_SIGNED_RG11_EAC]=1,Zt[Rt.COMPRESSED_RGB8_ETC2]=.5,Zt[Rt.COMPRESSED_RGBA8_ETC2_EAC]=1,Zt[Rt.COMPRESSED_SRGB8_ETC2]=.5,Zt[Rt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Zt[Rt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Zt[Rt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Zt[Rt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Zt[Rt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Zt[Rt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Zt[Rt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Zt[Rt.COMPRESSED_RGB_ETC1_WEBGL]=.5,Zt[Rt.COMPRESSED_RGB_ATC_WEBGL]=.5,Zt[Rt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Zt[Rt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Zt[Rt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Zt),Va=function(n,e){return Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Va(n,e)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function g0(n,e){function t(){this.constructor=n}Va(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Hd(n,e,t,i){return new(t||(t=Promise))(function(s,o){function h(x){try{b(i.next(x))}catch(w){o(w)}}function u(x){try{b(i.throw(x))}catch(w){o(w)}}function b(x){var w;x.done?s(x.value):(w=x.value,w instanceof t?w:new t(function(E){E(w)})).then(h,u)}b((i=i.apply(n,[])).next())})}function Yd(n,e){var t,i,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(b){return function(x){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;h;)try{if(t=1,i&&(s=2&w[0]?i.return:w[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,w[1])).done)return s;switch(i=0,s&&(w=[2&w[0],s.value]),w[0]){case 0:case 1:s=w;break;case 4:return h.label++,{value:w[1],done:!1};case 5:h.label++,i=w[1],w=[0];continue;case 7:w=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!((s=s.length>0&&s[s.length-1])||w[0]!==6&&w[0]!==2)){h=0;continue}if(w[0]===3&&(!s||w[1]>s[0]&&w[1]<s[3])){h.label=w[1];break}if(w[0]===6&&h.label<s[1]){h.label=s[1],s=w;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(w);break}s[2]&&h.ops.pop(),h.trys.pop();continue}w=e.call(n,h)}catch(E){w=[6,E],i=0}finally{t=s=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([b,x])}}}var uo,Pi,zd=function(n){function e(t,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var s,o,h=this;return typeof t=="string"?(s=t,o=new Uint8Array):(s=null,o=t),(h=n.call(this,o,i)||this).origin=s,h.buffer=o?new Da(o):null,h.origin&&i.autoLoad!==!1&&h.load(),o&&o.length&&(h.loaded=!0,h.onBlobLoaded(h.buffer.rawBinaryData)),h}return g0(e,n),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return Hd(this,0,Promise,function(){var t;return Yd(this,function(i){switch(i.label){case 0:return[4,fetch(this.origin)];case 1:return[4,i.sent().blob()];case 2:return[4,i.sent().arrayBuffer()];case 3:return t=i.sent(),this.data=new Uint32Array(t),this.buffer=new Da(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}})})},e}(Gs),ja=function(n){function e(t,i){var s=n.call(this,t,i)||this;return s.format=i.format,s.levels=i.levels||1,s._width=i.width,s._height=i.height,s._extension=e._formatToExtension(s.format),(i.levelBuffers||s.buffer)&&(s._levelBuffers=i.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return g0(e,n),e.prototype.upload=function(t,i,s){var o=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var h=0,u=this.levels;h<u;h++){var b=this._levelBuffers[h],x=b.levelID,w=b.levelWidth,E=b.levelHeight,C=b.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,x,this.format,w,E,0,C)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,i,s,o,h,u,b){for(var x=new Array(s),w=t.byteOffset,E=u,C=b,L=E+o-1&~(o-1),k=C+h-1&~(h-1),U=L*k*Ro[i],V=0;V<s;V++)x[V]={levelID:V,levelWidth:s>1?E:L,levelHeight:s>1?C:k,levelBuffer:new Uint8Array(t.buffer,w,U)},w+=U,U=(L=(E=E>>1||1)+o-1&~(o-1))*(k=(C=C>>1||1)+h-1&~(h-1))*Ro[i];return x},e}(zd),Wd=function(){function n(){}return n.use=function(e,t){var i=e.data;if(e.type===vr.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var s=i.textures,o=void 0,h=void 0,u=0,b=s.length;u<b;u++){var x=s[u],w=x.src,E=x.format;if(E||(h=w),n.textureFormats[E]){o=w;break}}if(!(o=o||h))return void t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var C={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},L=Gi.resolve(e.url.replace(this.baseUrl,""),o),k=i.cacheID;this.add(k,L,C,function(U){if(U.error)t(U.error);else{var V=U.texture,H=V===void 0?null:V,Q=U.textures,te=Q===void 0?{}:Q;Object.assign(e,{texture:H,textures:te}),t()}})}else t()},Object.defineProperty(n,"textureExtensions",{get:function(){if(!n._textureExtensions){var e=Ue.ADAPTER.createCanvas().getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var t={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};n._textureExtensions=t}return n._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(n,"textureFormats",{get:function(){if(!n._textureFormats){var e=n.textureExtensions;for(var t in n._textureFormats={},e){var i=e[t];i&&Object.assign(n._textureFormats,Object.getPrototypeOf(i))}}return n._textureFormats},enumerable:!1,configurable:!0}),n.extension=Jt.Loader,n}();function v0(n,e,t){var i={textures:{},texture:null};return e&&e.map(function(s){return new Et(new Vt(s,Object.assign({mipmap:bi.OFF,alphaMode:xi.NO_PREMULTIPLIED_ALPHA},t)))}).forEach(function(s,o){var h=s.baseTexture,u=n+"-"+(o+1);Vt.addToCache(h,u),Et.addToCache(s,u),o===0&&(Vt.addToCache(h,n),Et.addToCache(s,n),i.texture=s),i.textures[u]=s}),i}var pi,Ha,qd=124,Zd=3,Jd=4,Qd=7,Kd=19,e2=2,t2=0,r2=1,i2=2,n2=3;(function(n){n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(pi||(pi={})),function(n){n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Ha||(Ha={}));var _n,Zi,lo,s2=((uo={})[827611204]=Rt.COMPRESSED_RGBA_S3TC_DXT1_EXT,uo[861165636]=Rt.COMPRESSED_RGBA_S3TC_DXT3_EXT,uo[894720068]=Rt.COMPRESSED_RGBA_S3TC_DXT5_EXT,uo),o2=((Pi={})[pi.DXGI_FORMAT_BC1_TYPELESS]=Rt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pi[pi.DXGI_FORMAT_BC1_UNORM]=Rt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pi[pi.DXGI_FORMAT_BC2_TYPELESS]=Rt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pi[pi.DXGI_FORMAT_BC2_UNORM]=Rt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pi[pi.DXGI_FORMAT_BC3_TYPELESS]=Rt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pi[pi.DXGI_FORMAT_BC3_UNORM]=Rt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pi[pi.DXGI_FORMAT_BC1_UNORM_SRGB]=Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Pi[pi.DXGI_FORMAT_BC2_UNORM_SRGB]=Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Pi[pi.DXGI_FORMAT_BC3_UNORM_SRGB]=Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Pi),tl=[171,75,84,88,32,49,49,187,13,10,26,10],a2=12,h2=16,u2=24,l2=28,c2=36,f2=40,d2=44,p2=48,_2=52,m2=56,g2=60,rl=((_n={})[ct.UNSIGNED_BYTE]=1,_n[ct.UNSIGNED_SHORT]=2,_n[ct.INT]=4,_n[ct.UNSIGNED_INT]=4,_n[ct.FLOAT]=4,_n[ct.HALF_FLOAT]=8,_n),v2=((Zi={})[Ce.RGBA]=4,Zi[Ce.RGB]=3,Zi[Ce.RG]=2,Zi[Ce.RED]=1,Zi[Ce.LUMINANCE]=1,Zi[Ce.LUMINANCE_ALPHA]=2,Zi[Ce.ALPHA]=1,Zi),y2=((lo={})[ct.UNSIGNED_SHORT_4_4_4_4]=2,lo[ct.UNSIGNED_SHORT_5_5_5_1]=2,lo[ct.UNSIGNED_SHORT_5_6_5]=2,lo);function b2(n,e,t){t===void 0&&(t=!1);var i=new DataView(e);if(!function(Ke,Re){for(var me=0;me<tl.length;me++)if(Re.getUint8(me)!==tl[me])return console.error(Ke+" is not a valid *.ktx file!"),!1;return!0}(n,i))return null;var s=i.getUint32(a2,!0)===67305985,o=i.getUint32(h2,s),h=i.getUint32(u2,s),u=i.getUint32(l2,s),b=i.getUint32(c2,s),x=i.getUint32(f2,s)||1,w=i.getUint32(d2,s)||1,E=i.getUint32(p2,s)||1,C=i.getUint32(_2,s),L=i.getUint32(m2,s),k=i.getUint32(g2,s);if(x===0||w!==1)throw new Error("Only 2D textures are supported");if(C!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(E!==1)throw new Error("WebGL does not support array textures");var U,V=b+3&-4,H=x+3&-4,Q=new Array(E),te=b*x;if(o===0&&(te=V*H),(U=o!==0?rl[o]?rl[o]*v2[h]:y2[o]:Ro[u])===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var ie=t?function(Ke,Re,me){for(var tt=new Map,je=0;je<Re;){var ht=Ke.getUint32(64+je,me),Ee=64+je+4,Qt=3-(ht+3)%4;if(ht===0||ht>Re-je){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var ot=0;ot<ht&&Ke.getUint8(Ee+ot)!==0;ot++);if(ot===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var Mt=new TextDecoder().decode(new Uint8Array(Ke.buffer,Ee,ot)),gr=new DataView(Ke.buffer,Ee+ot+1,ht-ot-1);tt.set(Mt,gr),je+=4+ht+Qt}return tt}(i,k,s):null,ae=te*U,ne=b,le=x,oe=V,ye=H,Xe=64+k,pe=0;pe<L;pe++){for(var _e=i.getUint32(Xe,s),Be=Xe+4,Me=0;Me<E;Me++){var _t=Q[Me];_t||(_t=Q[Me]=new Array(L)),_t[pe]={levelID:pe,levelWidth:L>1||o!==0?ne:oe,levelHeight:L>1||o!==0?le:ye,levelBuffer:new Uint8Array(e,Be,ae)},Be+=ae}Xe=(Xe+=_e+4)%4!=0?Xe+4-Xe%4:Xe,ae=(oe=(ne=ne>>1||1)+4-1&-4)*(ye=(le=le>>1||1)+4-1&-4)*U}return o!==0?{uncompressed:Q.map(function(Ke){var Re=Ke[0].levelBuffer,me=!1;return o===ct.FLOAT?Re=new Float32Array(Ke[0].levelBuffer.buffer,Ke[0].levelBuffer.byteOffset,Ke[0].levelBuffer.byteLength/4):o===ct.UNSIGNED_INT?(me=!0,Re=new Uint32Array(Ke[0].levelBuffer.buffer,Ke[0].levelBuffer.byteOffset,Ke[0].levelBuffer.byteLength/4)):o===ct.INT&&(me=!0,Re=new Int32Array(Ke[0].levelBuffer.buffer,Ke[0].levelBuffer.byteOffset,Ke[0].levelBuffer.byteLength/4)),{resource:new Gs(Re,{width:Ke[0].levelWidth,height:Ke[0].levelHeight}),type:o,format:me?x2(h):h}}),kvData:ie}:{compressed:Q.map(function(Ke){return new ja(null,{format:u,width:b,height:x,levels:L,levelBuffers:Ke})}),kvData:ie}}function x2(n){switch(n){case Ce.RGBA:return Ce.RGBA_INTEGER;case Ce.RGB:return Ce.RGB_INTEGER;case Ce.RG:return Ce.RG_INTEGER;case Ce.RED:return Ce.RED_INTEGER;default:return n}}vr.setExtensionXhrType("dds",vr.XHR_RESPONSE_TYPE.BUFFER);var A2=function(){function n(){}return n.use=function(e,t){if(e.extension==="dds"&&e.data)try{Object.assign(e,v0(e.name||e.url,function(i){var s=new Uint32Array(i);if(s[0]!==542327876)throw new Error("Invalid DDS file magic word");var o=new Uint32Array(i,0,qd/Uint32Array.BYTES_PER_ELEMENT),h=o[Zd],u=o[Jd],b=o[Qd],x=new Uint32Array(i,Kd*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),w=x[1];if(4&w){var E=x[e2];if(E!==808540228){var C=s2[E],L=new Uint8Array(i,128);return[new ja(L,{format:C,width:u,height:h,levels:b})]}var k=new Uint32Array(s.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),U=k[t2],V=k[r2],H=k[i2],Q=k[n2],te=o2[U];if(te===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+U);if(H===4)throw new Error("DDSParser does not support cubemap textures");if(V===Ha.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var ie=new Array;if(Q===1)ie.push(new Uint8Array(i,148));else{for(var ae=Ro[te],ne=0,le=u,oe=h,ye=0;ye<b;ye++)ne+=Math.max(1,le+3&-4)*Math.max(1,oe+3&-4)*ae,le>>>=1,oe>>>=1;var Xe=148;for(ye=0;ye<Q;ye++)ie.push(new Uint8Array(i,Xe,ne)),Xe+=ne}return ie.map(function(pe){return new ja(pe,{format:te,width:u,height:h,levels:b})})}throw 64&w?new Error("DDSParser does not support uncompressed texture data."):512&w?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&w?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&w?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(e.data),e.metadata))}catch(i){return void t(i)}t()},n.extension=Jt.Loader,n}();vr.setExtensionXhrType("ktx",vr.XHR_RESPONSE_TYPE.BUFFER);var T2=function(){function n(){}return n.use=function(e,t){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,s=b2(i,e.data,this.loadKeyValueData),o=s.compressed,h=s.uncompressed,u=s.kvData;if(o){var b=v0(i,o,e.metadata);if(u&&b.textures)for(var x in b.textures)b.textures[x].baseTexture.ktxKeyValueData=u;Object.assign(e,b)}else if(h){var w={};h.forEach(function(E,C){var L=new Et(new Vt(E.resource,{mipmap:bi.OFF,alphaMode:xi.NO_PREMULTIPLIED_ALPHA,type:E.type,format:E.format})),k=i+"-"+(C+1);u&&(L.baseTexture.ktxKeyValueData=u),Vt.addToCache(L.baseTexture,k),Et.addToCache(L,k),C===0&&(w[i]=L,Vt.addToCache(L.baseTexture,i),Et.addToCache(L,i)),w[k]=L}),Object.assign(e,{textures:w})}}catch(E){return void t(E)}t()},n.extension=Jt.Loader,n.loadKeyValueData=!1,n}(),Ya=function(n,e){return Ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Ya(n,e)};/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function y0(n,e){function t(){this.constructor=n}Ya(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}(function(n){function e(t,i,s,o){t===void 0&&(t=1500),s===void 0&&(s=16384),o===void 0&&(o=!1);var h=n.call(this)||this;return s>16384&&(s=16384),h._properties=[!1,!0,!1,!1,!1],h._maxSize=t,h._batchSize=s,h._buffers=null,h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=ft.NORMAL,h.autoResize=o,h.roundPixels=!0,h.baseTexture=null,h.setProperties(i),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}y0(e,n),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Zn(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var i=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var i=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}})(Ai);var Ui,Ki,il=function(){function n(e,t,i){this.geometry=new Xs,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var o=e[s];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||ct.FLOAT,offset:o.offset},t[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Rr(function(b,x){x===void 0&&(x=null);var w=6*b;if((x=x||new Uint16Array(w)).length!==w)throw new Error("Out buffer length is incorrect, got "+x.length+" and expected "+w);for(var E=0,C=0;E<w;E+=6,C+=4)x[E+0]=C+0,x[E+1]=C+1,x[E+2]=C+2,x[E+3]=C+0,x[E+4]=C+2,x[E+5]=C+3;return x}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(u=this.dynamicProperties[i]).offset=t,t+=u.size,this.dynamicStride+=u.size;var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Rr(this.dynamicData,!1,!1);var o=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(u=this.staticProperties[i]).offset=o,o+=u.size,this.staticStride+=u.size;var h=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=new Rr(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var u=this.dynamicProperties[i];e.addAttribute(u.attributeName,this.dynamicBuffer,0,u.type===ct.UNSIGNED_BYTE,u.type,4*this.dynamicStride,4*u.offset)}for(i=0;i<this.staticProperties.length;++i)u=this.staticProperties[i],e.addAttribute(u.attributeName,this.staticBuffer,0,u.type===ct.UNSIGNED_BYTE,u.type,4*this.staticStride,4*u.offset)},n.prototype.uploadDynamic=function(e,t,i){for(var s=0;s<this.dynamicProperties.length;s++){var o=this.dynamicProperties[s];o.uploadFunction(e,t,i,o.type===ct.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(e,t,i){for(var s=0;s<this.staticProperties.length;s++){var o=this.staticProperties[s];o.uploadFunction(e,t,i,o.type===ct.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),E2=function(n){function e(t){var i=n.call(this,t)||this;return i.shader=null,i.properties=null,i.tempMatrix=new mr,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ct.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=en.from(`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,{}),i.state=Dn.for2d(),i}return y0(e,n),e.prototype.render=function(t){var i=t.children,s=t._maxSize,o=t._batchSize,h=this.renderer,u=i.length;if(u!==0){u>s&&!t.autoResize&&(u=s);var b=t._buffers;b||(b=t._buffers=this.generateBuffers(t));var x=i[0]._texture.baseTexture,w=x.alphaMode>0;this.state.blendMode=Ul(t.blendMode,w),h.state.set(this.state);var E,C,L,k,U=h.gl,V=t.worldTransform.copyTo(this.tempMatrix);V.prepend(h.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=V.toArray(!0),this.shader.uniforms.uColor=(E=t.tintRgb,C=t.worldAlpha,L=this.shader.uniforms.uColor,k=w,L=L||new Float32Array(4),k||k===void 0?(L[0]=E[0]*C,L[1]=E[1]*C,L[2]=E[2]*C):(L[0]=E[0],L[1]=E[1],L[2]=E[2]),L[3]=C,L),this.shader.uniforms.uSampler=x,this.renderer.shader.bind(this.shader);for(var H=!1,Q=0,te=0;Q<u;Q+=o,te+=1){var ie=u-Q;ie>o&&(ie=o),te>=b.length&&b.push(this._generateOneMoreBuffer(t));var ae=b[te];ae.uploadDynamic(i,Q,ie);var ne=t._bufferUpdateIDs[te]||0;(H=H||ae._updateID<ne)&&(ae._updateID=t._updateID,ae.uploadStatic(i,Q,ie)),h.geometry.bind(ae.geometry),U.drawElements(U.TRIANGLES,6*ie,U.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var i=[],s=t._maxSize,o=t._batchSize,h=t._properties,u=0;u<s;u+=o)i.push(new il(this.properties,h,o));return i},e.prototype._generateOneMoreBuffer=function(t){var i=t._batchSize,s=t._properties;return new il(this.properties,s,i)},e.prototype.uploadVertices=function(t,i,s,o,h,u){for(var b=0,x=0,w=0,E=0,C=0;C<s;++C){var L=t[i+C],k=L._texture,U=L.scale.x,V=L.scale.y,H=k.trim,Q=k.orig;H?(b=(x=H.x-L.anchor.x*Q.width)+H.width,w=(E=H.y-L.anchor.y*Q.height)+H.height):(b=Q.width*(1-L.anchor.x),x=Q.width*-L.anchor.x,w=Q.height*(1-L.anchor.y),E=Q.height*-L.anchor.y),o[u]=x*U,o[u+1]=E*V,o[u+h]=b*U,o[u+h+1]=E*V,o[u+2*h]=b*U,o[u+2*h+1]=w*V,o[u+3*h]=x*U,o[u+3*h+1]=w*V,u+=4*h}},e.prototype.uploadPosition=function(t,i,s,o,h,u){for(var b=0;b<s;b++){var x=t[i+b].position;o[u]=x.x,o[u+1]=x.y,o[u+h]=x.x,o[u+h+1]=x.y,o[u+2*h]=x.x,o[u+2*h+1]=x.y,o[u+3*h]=x.x,o[u+3*h+1]=x.y,u+=4*h}},e.prototype.uploadRotation=function(t,i,s,o,h,u){for(var b=0;b<s;b++){var x=t[i+b].rotation;o[u]=x,o[u+h]=x,o[u+2*h]=x,o[u+3*h]=x,u+=4*h}},e.prototype.uploadUvs=function(t,i,s,o,h,u){for(var b=0;b<s;++b){var x=t[i+b]._texture._uvs;x?(o[u]=x.x0,o[u+1]=x.y0,o[u+h]=x.x1,o[u+h+1]=x.y1,o[u+2*h]=x.x2,o[u+2*h+1]=x.y2,o[u+3*h]=x.x3,o[u+3*h+1]=x.y3,u+=4*h):(o[u]=0,o[u+1]=0,o[u+h]=0,o[u+h+1]=0,o[u+2*h]=0,o[u+2*h+1]=0,o[u+3*h]=0,o[u+3*h+1]=0,u+=4*h)}},e.prototype.uploadTint=function(t,i,s,o,h,u){for(var b=0;b<s;++b){var x=t[i+b],w=x._texture.baseTexture.alphaMode>0,E=x.alpha,C=E<1&&w?dh(x._tintRGB,E):x._tintRGB+(255*E<<24);o[u]=C,o[u+h]=C,o[u+2*h]=C,o[u+3*h]=C,u+=4*h}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Jt.RendererPlugin},e}(Lo);(function(n){n.MITER="miter",n.BEVEL="bevel",n.ROUND="round"})(Ui||(Ui={})),function(n){n.BUTT="butt",n.ROUND="round",n.SQUARE="square"}(Ki||(Ki={}));var Ls={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,e){if(e===void 0&&(e=20),!this.adaptive||!n||isNaN(n))return e;var t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},b0=function(){function n(){this.color=16777215,this.alpha=1,this.texture=Et.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Et.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}(),za=function(n,e){return za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},za(n,e)};function Mh(n,e){function t(){this.constructor=n}za(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function nl(n,e){var t,i;e===void 0&&(e=!1);var s=n.length;if(!(s<6)){for(var o=0,h=0,u=n[s-2],b=n[s-1];h<s;h+=2){var x=n[h],w=n[h+1];o+=(x-u)*(w+b),u=x,b=w}if(!e&&o>0||e&&o<=0){var E=s/2;for(h=E+E%2;h<s;h+=2){var C=s-h-2,L=s-h-1,k=h,U=h+1;t=[n[k],n[C]],n[C]=t[0],n[k]=t[1],i=[n[U],n[L]],n[L]=i[0],n[U]=i[1]}}}}var x0={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,e){var t=n.points,i=n.holes,s=e.points,o=e.indices;if(t.length>=6){nl(t,!1);for(var h=[],u=0;u<i.length;u++){var b=i[u];nl(b.points,!0),h.push(t.length/2),t=t.concat(b.points)}var x=Ol(t,h,2);if(!x)return;var w=s.length/2;for(u=0;u<x.length;u+=3)o.push(x[u]+w),o.push(x[u+1]+w),o.push(x[u+2]+w);for(u=0;u<t.length;u++)s.push(t[u])}}},Co={build:function(n){var e,t,i,s,o,h,u=n.points;if(n.type===$r.CIRC){var b=n.shape;e=b.x,t=b.y,o=h=b.radius,i=s=0}else if(n.type===$r.ELIP){var x=n.shape;e=x.x,t=x.y,o=x.width,h=x.height,i=s=0}else{var w=n.shape,E=w.width/2,C=w.height/2;e=w.x+E,t=w.y+C,i=E-(o=h=Math.max(0,Math.min(w.radius,Math.min(E,C)))),s=C-h}if(o>=0&&h>=0&&i>=0&&s>=0){var L=Math.ceil(2.3*Math.sqrt(o+h)),k=8*L+(i?4:0)+(s?4:0);if(u.length=k,k!==0){if(L===0)return u.length=8,u[0]=u[6]=e+i,u[1]=u[3]=t+s,u[2]=u[4]=e-i,void(u[5]=u[7]=t-s);var U=0,V=4*L+(i?2:0)+2,H=V,Q=k,te=e+(ye=i+o),ie=e-ye,ae=t+(Xe=s);if(u[U++]=te,u[U++]=ae,u[--V]=ae,u[--V]=ie,s){var ne=t-Xe;u[H++]=ie,u[H++]=ne,u[--Q]=ne,u[--Q]=te}for(var le=1;le<L;le++){var oe=Math.PI/2*(le/L);te=e+(ye=i+Math.cos(oe)*o),ie=e-ye,ae=t+(Xe=s+Math.sin(oe)*h),ne=t-Xe,u[U++]=te,u[U++]=ae,u[--V]=ae,u[--V]=ie,u[H++]=ie,u[H++]=ne,u[--Q]=ne,u[--Q]=te}var ye,Xe;te=e+(ye=i),ie=e-ye,ae=t+(Xe=s+h),ne=t-Xe,u[U++]=te,u[U++]=ae,u[--Q]=ne,u[--Q]=te,i&&(u[U++]=ie,u[U++]=ae,u[--Q]=ne,u[--Q]=ie)}}else u.length=0},triangulate:function(n,e){var t=n.points,i=e.points,s=e.indices;if(t.length!==0){var o,h,u=i.length/2,b=u;if(n.type!==$r.RREC){var x=n.shape;o=x.x,h=x.y}else{var w=n.shape;o=w.x+w.width/2,h=w.y+w.height/2}var E=n.matrix;i.push(n.matrix?E.a*o+E.c*h+E.tx:o,n.matrix?E.b*o+E.d*h+E.ty:h),u++,i.push(t[0],t[1]);for(var C=2;C<t.length;C+=2)i.push(t[C],t[C+1]),s.push(u++,b,u);s.push(b+1,b,u)}}};function Nn(n,e,t){return n+(e-n)*t}function co(n,e,t,i,s,o,h){h===void 0&&(h=[]);for(var u=h,b=0,x=0,w=0,E=0,C=0,L=0,k=0,U=0;k<=20;++k)b=Nn(n,t,U=k/20),x=Nn(e,i,U),w=Nn(t,s,U),E=Nn(i,o,U),C=Nn(b,w,U),L=Nn(x,E,U),k===0&&u[u.length-2]===C&&u[u.length-1]===L||u.push(C,L);return u}var w2={build:function(n){if(Fs.nextRoundedRectBehavior)Co.build(n);else{var e=n.shape,t=n.points,i=e.x,s=e.y,o=e.width,h=e.height,u=Math.max(0,Math.min(e.radius,Math.min(o,h)/2));t.length=0,u?(co(i,s+u,i,s,i+u,s,t),co(i+o-u,s,i+o,s,i+o,s+u,t),co(i+o,s+h-u,i+o,s+h,i+o-u,s+h,t),co(i+u,s+h,i,s+h,i,s+h-u,t)):t.push(i,s,i+o,s,i+o,s+h,i,s+h)}},triangulate:function(n,e){if(Fs.nextRoundedRectBehavior)Co.triangulate(n,e);else{for(var t=n.points,i=e.points,s=e.indices,o=i.length/2,h=Ol(t,null,2),u=0,b=h.length;u<b;u+=3)s.push(h[u]+o),s.push(h[u+1]+o),s.push(h[u+2]+o);for(u=0,b=t.length;u<b;u++)i.push(t[u],t[++u])}}};function sl(n,e,t,i,s,o,h,u){var b,x;h?(b=i,x=-t):(b=-i,x=t);var w=n-t*s+b,E=e-i*s+x,C=n+t*o+b,L=e+i*o+x;return u.push(w,E),u.push(C,L),2}function mn(n,e,t,i,s,o,h,u){var b=t-n,x=i-e,w=Math.atan2(b,x),E=Math.atan2(s-n,o-e);u&&w<E?w+=2*Math.PI:!u&&w>E&&(E+=2*Math.PI);var C=w,L=E-w,k=Math.abs(L),U=Math.sqrt(b*b+x*x),V=1+(15*k*Math.sqrt(U)/Math.PI|0),H=L/V;if(C+=H,u){h.push(n,e),h.push(t,i);for(var Q=1,te=C;Q<V;Q++,te+=H)h.push(n,e),h.push(n+Math.sin(te)*U,e+Math.cos(te)*U);h.push(n,e),h.push(s,o)}else{for(h.push(t,i),h.push(n,e),Q=1,te=C;Q<V;Q++,te+=H)h.push(n+Math.sin(te)*U,e+Math.cos(te)*U),h.push(n,e);h.push(s,o),h.push(n,e)}return 2*V}function ol(n,e){n.lineStyle.native?function(t,i){var s=0,o=t.shape,h=t.points||o.points,u=o.type!==$r.POLY||o.closeStroke;if(h.length!==0){var b=i.points,x=i.indices,w=h.length/2,E=b.length/2,C=E;for(b.push(h[0],h[1]),s=1;s<w;s++)b.push(h[2*s],h[2*s+1]),x.push(C,C+1),C++;u&&x.push(C,E)}}(n,e):function(t,i){var s=t.shape,o=t.points||s.points.slice(),h=i.closePointEps;if(o.length!==0){var u=t.lineStyle,b=new nr(o[0],o[1]),x=new nr(o[o.length-2],o[o.length-1]),w=s.type!==$r.POLY||s.closeStroke,E=Math.abs(b.x-x.x)<h&&Math.abs(b.y-x.y)<h;if(w){o=o.slice(),E&&(o.pop(),o.pop(),x.set(o[o.length-2],o[o.length-1]));var C=.5*(b.x+x.x),L=.5*(x.y+b.y);o.unshift(C,L),o.push(C,L)}var k=i.points,U=o.length/2,V=o.length,H=k.length/2,Q=u.width/2,te=Q*Q,ie=u.miterLimit*u.miterLimit,ae=o[0],ne=o[1],le=o[2],oe=o[3],ye=0,Xe=0,pe=-(ne-oe),_e=ae-le,Be=0,Me=0,_t=Math.sqrt(pe*pe+_e*_e);pe/=_t,_e/=_t,pe*=Q,_e*=Q;var Ke=u.alignment,Re=2*(1-Ke),me=2*Ke;w||(u.cap===Ki.ROUND?V+=mn(ae-pe*(Re-me)*.5,ne-_e*(Re-me)*.5,ae-pe*Re,ne-_e*Re,ae+pe*me,ne+_e*me,k,!0)+2:u.cap===Ki.SQUARE&&(V+=sl(ae,ne,pe,_e,Re,me,!0,k))),k.push(ae-pe*Re,ne-_e*Re),k.push(ae+pe*me,ne+_e*me);for(var tt=1;tt<U-1;++tt){ae=o[2*(tt-1)],ne=o[2*(tt-1)+1],le=o[2*tt],oe=o[2*tt+1],ye=o[2*(tt+1)],Xe=o[2*(tt+1)+1],pe=-(ne-oe),_e=ae-le,pe/=_t=Math.sqrt(pe*pe+_e*_e),_e/=_t,pe*=Q,_e*=Q,Be=-(oe-Xe),Me=le-ye,Be/=_t=Math.sqrt(Be*Be+Me*Me),Me/=_t,Be*=Q,Me*=Q;var je=le-ae,ht=ne-oe,Ee=le-ye,Qt=Xe-oe,ot=je*Ee+ht*Qt,Mt=ht*Ee-Qt*je,gr=Mt<0;if(Math.abs(Mt)<.001*Math.abs(ot))k.push(le-pe*Re,oe-_e*Re),k.push(le+pe*me,oe+_e*me),ot>=0&&(u.join===Ui.ROUND?V+=mn(le,oe,le-pe*Re,oe-_e*Re,le-Be*Re,oe-Me*Re,k,!1)+4:V+=2,k.push(le-Be*me,oe-Me*me),k.push(le+Be*Re,oe+Me*Re));else{var qe=(-pe+ae)*(-_e+oe)-(-pe+le)*(-_e+ne),Mr=(-Be+ye)*(-Me+oe)-(-Be+le)*(-Me+Xe),jt=(je*Mr-Ee*qe)/Mt,$t=(Qt*qe-ht*Mr)/Mt,hr=(jt-le)*(jt-le)+($t-oe)*($t-oe),yt=le+(jt-le)*Re,rt=oe+($t-oe)*Re,Ct=le-(jt-le)*me,St=oe-($t-oe)*me,Ze=gr?Re:me;hr<=Math.min(je*je+ht*ht,Ee*Ee+Qt*Qt)+Ze*Ze*te?u.join===Ui.BEVEL||hr/te>ie?(gr?(k.push(yt,rt),k.push(le+pe*me,oe+_e*me),k.push(yt,rt),k.push(le+Be*me,oe+Me*me)):(k.push(le-pe*Re,oe-_e*Re),k.push(Ct,St),k.push(le-Be*Re,oe-Me*Re),k.push(Ct,St)),V+=2):u.join===Ui.ROUND?gr?(k.push(yt,rt),k.push(le+pe*me,oe+_e*me),V+=mn(le,oe,le+pe*me,oe+_e*me,le+Be*me,oe+Me*me,k,!0)+4,k.push(yt,rt),k.push(le+Be*me,oe+Me*me)):(k.push(le-pe*Re,oe-_e*Re),k.push(Ct,St),V+=mn(le,oe,le-pe*Re,oe-_e*Re,le-Be*Re,oe-Me*Re,k,!1)+4,k.push(le-Be*Re,oe-Me*Re),k.push(Ct,St)):(k.push(yt,rt),k.push(Ct,St)):(k.push(le-pe*Re,oe-_e*Re),k.push(le+pe*me,oe+_e*me),u.join===Ui.ROUND?V+=gr?mn(le,oe,le+pe*me,oe+_e*me,le+Be*me,oe+Me*me,k,!0)+2:mn(le,oe,le-pe*Re,oe-_e*Re,le-Be*Re,oe-Me*Re,k,!1)+2:u.join===Ui.MITER&&hr/te<=ie&&(gr?(k.push(Ct,St),k.push(Ct,St)):(k.push(yt,rt),k.push(yt,rt)),V+=2),k.push(le-Be*Re,oe-Me*Re),k.push(le+Be*me,oe+Me*me),V+=2)}}ae=o[2*(U-2)],ne=o[2*(U-2)+1],le=o[2*(U-1)],pe=-(ne-(oe=o[2*(U-1)+1])),_e=ae-le,pe/=_t=Math.sqrt(pe*pe+_e*_e),_e/=_t,pe*=Q,_e*=Q,k.push(le-pe*Re,oe-_e*Re),k.push(le+pe*me,oe+_e*me),w||(u.cap===Ki.ROUND?V+=mn(le-pe*(Re-me)*.5,oe-_e*(Re-me)*.5,le-pe*Re,oe-_e*Re,le+pe*me,oe+_e*me,k,!1)+2:u.cap===Ki.SQUARE&&(V+=sl(le,oe,pe,_e,Re,me,!1,k)));var or=i.indices,br=Ls.epsilon*Ls.epsilon;for(tt=H;tt<V+H-2;++tt)ae=k[2*tt],ne=k[2*tt+1],le=k[2*(tt+1)],oe=k[2*(tt+1)+1],ye=k[2*(tt+2)],Xe=k[2*(tt+2)+1],Math.abs(ae*(oe-Xe)+le*(Xe-ne)+ye*(ne-oe))<br||or.push(tt,tt+1,tt+2)}}(n,e)}var Bn,al=function(){function n(){}return n.curveTo=function(e,t,i,s,o,h){var u=h[h.length-2],b=h[h.length-1]-t,x=u-e,w=s-t,E=i-e,C=Math.abs(b*E-x*w);if(C<1e-8||o===0)return h[h.length-2]===e&&h[h.length-1]===t||h.push(e,t),null;var L=b*b+x*x,k=w*w+E*E,U=b*w+x*E,V=o*Math.sqrt(L)/C,H=o*Math.sqrt(k)/C,Q=V*U/L,te=H*U/k,ie=V*E+H*x,ae=V*w+H*b,ne=x*(H+Q),le=b*(H+Q),oe=E*(V+te),ye=w*(V+te);return{cx:ie+e,cy:ae+t,radius:o,startAngle:Math.atan2(le-ae,ne-ie),endAngle:Math.atan2(ye-ae,oe-ie),anticlockwise:x*w>E*b}},n.arc=function(e,t,i,s,o,h,u,b,x){for(var w=u-h,E=Ls._segmentsCount(Math.abs(w)*o,40*Math.ceil(Math.abs(w)/wo)),C=w/(2*E),L=2*C,k=Math.cos(C),U=Math.sin(C),V=E-1,H=V%1/V,Q=0;Q<=V;++Q){var te=C+h+L*(Q+H*Q),ie=Math.cos(te),ae=-Math.sin(te);x.push((k*ie+U*ae)*o+i,(k*-ae+U*ie)*o+s)}},n}(),S2=function(){function n(){}return n.curveLength=function(e,t,i,s,o,h,u,b){for(var x=0,w=0,E=0,C=0,L=0,k=0,U=0,V=0,H=0,Q=0,te=0,ie=e,ae=t,ne=1;ne<=10;++ne)Q=ie-(V=(U=(k=(L=1-(w=ne/10))*L)*L)*e+3*k*w*i+3*L*(E=w*w)*o+(C=E*w)*u),te=ae-(H=U*t+3*k*w*s+3*L*E*h+C*b),ie=V,ae=H,x+=Math.sqrt(Q*Q+te*te);return x},n.curveTo=function(e,t,i,s,o,h,u){var b=u[u.length-2],x=u[u.length-1];u.length-=2;var w=Ls._segmentsCount(n.curveLength(b,x,e,t,i,s,o,h)),E=0,C=0,L=0,k=0,U=0;u.push(b,x);for(var V=1,H=0;V<=w;++V)L=(C=(E=1-(H=V/w))*E)*E,U=(k=H*H)*H,u.push(L*b+3*C*H*e+3*E*k*i+U*o,L*x+3*C*H*t+3*E*k*s+U*h)},n}(),P2=function(){function n(){}return n.curveLength=function(e,t,i,s,o,h){var u=e-2*i+o,b=t-2*s+h,x=2*i-2*e,w=2*s-2*t,E=4*(u*u+b*b),C=4*(u*x+b*w),L=x*x+w*w,k=2*Math.sqrt(E+C+L),U=Math.sqrt(E),V=2*E*U,H=2*Math.sqrt(L),Q=C/U;return(V*k+U*C*(k-H)+(4*L*E-C*C)*Math.log((2*U+Q+k)/(Q+H)))/(4*V)},n.curveTo=function(e,t,i,s,o){for(var h=o[o.length-2],u=o[o.length-1],b=Ls._segmentsCount(n.curveLength(h,u,e,t,i,s)),x=0,w=0,E=1;E<=b;++E){var C=E/b;x=h+(e-h)*C,w=u+(t-u)*C,o.push(x+(e+(i-e)*C-x)*C,w+(t+(s-t)*C-w)*C)}},n}(),M2=function(){function n(){this.reset()}return n.prototype.begin=function(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i},n.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),ca=((Bn={})[$r.POLY]=x0,Bn[$r.CIRC]=Co,Bn[$r.ELIP]=Co,Bn[$r.RECT]={build:function(n){var e=n.shape,t=e.x,i=e.y,s=e.width,o=e.height,h=n.points;h.length=0,h.push(t,i,t+s,i,t+s,i+o,t,i+o)},triangulate:function(n,e){var t=n.points,i=e.points,s=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},Bn[$r.RREC]=w2,Bn),hl=[],fo=[],ul=function(){function n(e,t,i,s){t===void 0&&(t=null),i===void 0&&(i=null),s===void 0&&(s=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=s,this.type=e.type}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),Un=new nr,I2=function(n){function e(){var t=n.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new So,t.boundsDirty=-1,t}return Mh(e,n),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),fo.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var i=this.batches[t];i.reset(),hl.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,i,s,o){i===void 0&&(i=null),s===void 0&&(s=null),o===void 0&&(o=null);var h=new ul(t,i,s,o);return this.graphicsData.push(h),this.dirty++,this},e.prototype.drawHole=function(t,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var s=new ul(t,null,null,i),o=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=o.lineStyle,o.holes.push(s),this.dirty++,this},e.prototype.destroy=function(){n.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var i=this.graphicsData,s=0;s<i.length;++s){var o=i[s];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,Un):Un.copyFrom(t),o.shape.contains(Un.x,Un.y))){var h=!1;if(o.holes){for(var u=0;u<o.holes.length;u++)if(o.holes[u].shape.contains(Un.x,Un.y)){h=!0;break}}if(!h)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,i=this.graphicsData,s=null,o=null;this.batches.length>0&&(o=(s=this.batches[this.batches.length-1]).style);for(var h=this.shapeIndex;h<i.length;h++){this.shapeIndex++;var u=i[h],b=u.fillStyle,x=u.lineStyle;ca[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(b.visible||x.visible)&&this.processHoles(u.holes);for(var w=0;w<2;w++){var E=w===0?b:x;if(E.visible){var C=E.texture.baseTexture,L=this.indices.length,k=this.points.length/2;C.wrapMode=$i.REPEAT,w===0?this.processFill(u):this.processLine(u);var U=this.points.length/2-k;U!==0&&(s&&!this._compareStyles(o,E)&&(s.end(L,k),s=null),s||((s=hl.pop()||new M2).begin(E,L,k),this.batches.push(s),o=E),this.addUvs(this.points,t,E.texture,k,U,E.matrix))}}}var V=this.indices.length,H=this.points.length/2;if(s&&s.end(V,H),this.batches.length!==0){var Q=H>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&Q===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=Q?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,i){return!(!t||!i)&&t.texture.baseTexture===i.texture.baseTexture&&t.color+t.alpha===i.color+i.alpha&&!!t.native==!!i.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,i=this.graphicsData.length;t<i;t++){var s=this.graphicsData[t],o=s.fillStyle,h=s.lineStyle;if(o&&!o.texture.baseTexture.valid||h&&!h.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,i=0,s=t.length;i<s;i++)for(var o=t[i],h=0;h<o.size;h++){var u=o.start+h;this.indicesUint16[u]=this.indicesUint16[u]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Vt._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),fo.push(this.drawCalls[i]);this.drawCalls.length=0;var s=this.colors,o=this.textureIds,h=fo.pop();h||((h=new Ca).texArray=new Oa),h.texArray.count=0,h.start=0,h.size=0,h.type=gi.TRIANGLES;var u=0,b=null,x=0,w=!1,E=gi.TRIANGLES,C=0;for(this.drawCalls.push(h),i=0;i<this.batches.length;i++){var L=this.batches[i],k=L.style,U=k.texture.baseTexture;w!==!!k.native&&(E=(w=!!k.native)?gi.LINES:gi.TRIANGLES,b=null,u=8,t++),b!==U&&(b=U,U._batchEnabled!==t&&(u===8&&(t++,u=0,h.size>0&&((h=fo.pop())||((h=new Ca).texArray=new Oa),this.drawCalls.push(h)),h.start=C,h.size=0,h.texArray.count=0,h.type=E),U.touched=1,U._batchEnabled=t,U._batchLocation=u,U.wrapMode=$i.REPEAT,h.texArray.elements[h.texArray.count++]=U,u++)),h.size+=L.size,C+=L.size,x=U._batchLocation,this.addColors(s,k.color,k.alpha,L.attribSize,L.attribStart),this.addTextureIds(o,x,L.attribSize,L.attribStart)}Vt._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,i=this.uvs,s=this.colors,o=this.textureIds,h=new ArrayBuffer(3*t.length*4),u=new Float32Array(h),b=new Uint32Array(h),x=0,w=0;w<t.length/2;w++)u[x++]=t[2*w],u[x++]=t[2*w+1],u[x++]=i[2*w],u[x++]=i[2*w+1],b[x++]=s[w],u[x++]=o[w];this._buffer.update(h),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?x0.triangulate(t,this):ca[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ol(t,this);for(var i=0;i<t.holes.length;i++)ol(t.holes[i],this)},e.prototype.processHoles=function(t){for(var i=0;i<t.length;i++){var s=t[i];ca[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,i){for(var s=0;s<t.length/2;s++){var o=t[2*s],h=t[2*s+1];t[2*s]=i.a*o+i.c*h+i.tx,t[2*s+1]=i.b*o+i.d*h+i.ty}},e.prototype.addColors=function(t,i,s,o,h){h===void 0&&(h=0);var u=dh((i>>16)+(65280&i)+((255&i)<<16),s);t.length=Math.max(t.length,h+o);for(var b=0;b<o;b++)t[h+b]=u},e.prototype.addTextureIds=function(t,i,s,o){o===void 0&&(o=0),t.length=Math.max(t.length,o+s);for(var h=0;h<s;h++)t[o+h]=i},e.prototype.addUvs=function(t,i,s,o,h,u){u===void 0&&(u=null);for(var b=0,x=i.length,w=s.frame;b<h;){var E=t[2*(o+b)],C=t[2*(o+b)+1];if(u){var L=u.a*E+u.c*C+u.tx;C=u.b*E+u.d*C+u.ty,E=L}b++,i.push(E/w.width,C/w.height)}var k=s.baseTexture;(w.width<k.width||w.height<k.height)&&this.adjustUvs(i,s,x,h)},e.prototype.adjustUvs=function(t,i,s,o){for(var h=i.baseTexture,u=1e-6,b=s+2*o,x=i.frame,w=x.width/h.width,E=x.height/h.height,C=x.x/x.width,L=x.y/x.height,k=Math.floor(t[s]+u),U=Math.floor(t[s+1]+u),V=s+2;V<b;V+=2)k=Math.min(k,Math.floor(t[V]+u)),U=Math.min(U,Math.floor(t[V+1]+u));for(C-=k,L-=U,V=s;V<b;V+=2)t[V]=(t[V]+C)*w,t[V+1]=(t[V+1]+L)*E},e.BATCHABLE_SIZE=100,e}(e0),R2=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Ki.BUTT,t.join=Ui.MITER,t.miterLimit=10,t}return Mh(e,n),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(b0),C2=new Float32Array(3),fa={},Fs=function(n){function e(t){t===void 0&&(t=null);var i=n.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new b0,i._lineStyle=new R2,i._matrix=null,i._holeMode=!1,i.state=Dn.for2d(),i._geometry=t||new I2,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=ft.NORMAL,i}return Mh(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,i,s,o,h){return t===void 0&&(t=null),i===void 0&&(i=0),s===void 0&&(s=1),o===void 0&&(o=.5),h===void 0&&(h=!1),typeof t=="number"&&(t={width:t,color:i,alpha:s,alignment:o,native:h}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Et.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ki.BUTT,join:Ui.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new mo,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[i-2],t[i-1]))}else this.currentPath=new mo,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,i){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(t,i){this.currentPath||this.moveTo(0,0);var s=this.currentPath.points,o=s[s.length-2],h=s[s.length-1];return o===t&&h===i||s.push(t,i),this},e.prototype._initCurve=function(t,i){t===void 0&&(t=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,i]):this.moveTo(t,i)},e.prototype.quadraticCurveTo=function(t,i,s,o){this._initCurve();var h=this.currentPath.points;return h.length===0&&this.moveTo(0,0),P2.curveTo(t,i,s,o,h),this},e.prototype.bezierCurveTo=function(t,i,s,o,h,u){return this._initCurve(),S2.curveTo(t,i,s,o,h,u,this.currentPath.points),this},e.prototype.arcTo=function(t,i,s,o,h){this._initCurve(t,i);var u=this.currentPath.points,b=al.curveTo(t,i,s,o,h,u);if(b){var x=b.cx,w=b.cy,E=b.radius,C=b.startAngle,L=b.endAngle,k=b.anticlockwise;this.arc(x,w,E,C,L,k)}return this},e.prototype.arc=function(t,i,s,o,h,u){if(u===void 0&&(u=!1),o===h)return this;if(!u&&h<=o?h+=wo:u&&o<=h&&(o+=wo),h-o===0)return this;var b=t+Math.cos(o)*s,x=i+Math.sin(o)*s,w=this._geometry.closePointEps,E=this.currentPath?this.currentPath.points:null;if(E){var C=Math.abs(E[E.length-2]-b),L=Math.abs(E[E.length-1]-x);C<w&&L<w||E.push(b,x)}else this.moveTo(b,x),E=this.currentPath.points;return al.arc(b,x,t,i,s,o,h,u,E),this},e.prototype.beginFill=function(t,i){return t===void 0&&(t=0),i===void 0&&(i=1),this.beginTextureFill({texture:Et.WHITE,color:t,alpha:i})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:Et.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,i,s,o){return this.drawShape(new Bt(t,i,s,o))},e.prototype.drawRoundedRect=function(t,i,s,o,h){return this.drawShape(new dc(t,i,s,o,h))},e.prototype.drawCircle=function(t,i,s){return this.drawShape(new cc(t,i,s))},e.prototype.drawEllipse=function(t,i,s,o){return this.drawShape(new fc(t,i,s,o))},e.prototype.drawPolygon=function(){for(var t,i=arguments,s=[],o=0;o<arguments.length;o++)s[o]=i[o];var h=!0,u=s[0];u.points?(h=u.closeStroke,t=u.points):t=Array.isArray(s[0])?s[0]:s;var b=new mo(t);return b.closeStroke=h,this.drawShape(b),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(t.length!==1||t[0].shape.type!==$r.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,i=this.blendMode,s=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(t.points);for(var o=0;o<s;o++){var h=t.batches[o],u=h.style.color,b=new Float32Array(this.vertexData.buffer,4*h.attribStart*2,2*h.attribSize),x=new Float32Array(t.uvsFloat32.buffer,4*h.attribStart*2,2*h.attribSize),w={vertexData:b,blendMode:i,indices:new Uint16Array(t.indicesUint16.buffer,2*h.start,h.size),uvs:x,_batchRGB:Zn(u),_tintRGB:u,_texture:h.style.texture,alpha:h.style.alpha,worldAlpha:1};this.batches[o]=w}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,s=this.batches.length;i<s;i++){var o=this.batches[i];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(t){var i=this._resolveDirectShader(t),s=this._geometry,o=this.tint,h=this.worldAlpha,u=i.uniforms,b=s.drawCalls;u.translationMatrix=this.transform.worldTransform,u.tint[0]=(o>>16&255)/255*h,u.tint[1]=(o>>8&255)/255*h,u.tint[2]=(255&o)/255*h,u.tint[3]=h,t.shader.bind(i),t.geometry.bind(s,i),t.state.set(this.state);for(var x=0,w=b.length;x<w;x++)this._renderDrawCallDirect(t,s.drawCalls[x])},e.prototype._renderDrawCallDirect=function(t,i){for(var s=i.texArray,o=i.type,h=i.size,u=i.start,b=s.count,x=0;x<b;x++)t.texture.bind(s.elements[x],x);t.geometry.draw(o,h,u)},e.prototype._resolveDirectShader=function(t){var i=this.shader,s=this.pluginName;if(!i){if(!fa[s]){for(var o=t.plugins[s].MAX_TEXTURES,h=new Int32Array(o),u=0;u<o;u++)h[u]=u;var b={tint:new Float32Array([1,1,1,1]),translationMatrix:new mr,default:Mn.from({uSamplers:h},!0)},x=t.plugins[s]._shader.program;fa[s]=new en(x,b)}i=fa[s]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var i=t.bounds,s=i.minX,o=i.minY,h=i.maxX,u=i.maxY;this._bounds.addFrame(this.transform,s,o,h,u)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Zn(this.tint,C2),i=0;i<this.batches.length;i++){var s=this.batches[i],o=s._batchRGB,h=(t[0]*o[0]*255<<16)+(t[1]*o[1]*255<<8)+(0|t[2]*o[2]*255);s._tintRGB=(h>>16)+(65280&h)+((255&h)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var i=this.transform.worldTransform,s=i.a,o=i.b,h=i.c,u=i.d,b=i.tx,x=i.ty,w=this._geometry.points,E=this.vertexData,C=0,L=0;L<w.length;L+=2){var k=w[L],U=w[L+1];E[C++]=s*k+h*U+b,E[C++]=u*U+o*k+x}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new nr,e}(Ai),Wa=function(n,e){return Wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Wa(n,e)},ks,vs=new nr,O2=new Uint16Array([0,1,2,0,2,3]),Ns=function(n){function e(t){var i=n.call(this)||this;return i._anchor=new Sn(i._onAnchorUpdate,i,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=ft.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=t||Et.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=O2,i.pluginName="batch",i.isSprite=!0,i._roundPixels=Ue.ROUND_PIXELS,i}return function(t,i){function s(){this.constructor=t}Wa(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}(e,n),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=jn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=jn(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var i=this.transform.worldTransform,s=i.a,o=i.b,h=i.c,u=i.d,b=i.tx,x=i.ty,w=this.vertexData,E=t.trim,C=t.orig,L=this._anchor,k=0,U=0,V=0,H=0;if(E?(k=(U=E.x-L._x*C.width)+E.width,V=(H=E.y-L._y*C.height)+E.height):(k=(U=-L._x*C.width)+C.width,V=(H=-L._y*C.height)+C.height),w[0]=s*U+h*H+b,w[1]=u*H+o*U+x,w[2]=s*k+h*H+b,w[3]=u*H+o*k+x,w[4]=s*k+h*V+b,w[5]=u*V+o*k+x,w[6]=s*U+h*V+b,w[7]=u*V+o*U+x,this._roundPixels)for(var Q=Ue.RESOLUTION,te=0;te<w.length;++te)w[te]=Math.round((w[te]*Q|0)/Q)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,i=this.vertexTrimmedData,s=t.orig,o=this._anchor,h=this.transform.worldTransform,u=h.a,b=h.b,x=h.c,w=h.d,E=h.tx,C=h.ty,L=-o._x*s.width,k=L+s.width,U=-o._y*s.height,V=U+s.height;i[0]=u*L+x*U+E,i[1]=w*U+b*L+C,i[2]=u*k+x*U+E,i[3]=w*U+b*k+C,i[4]=u*k+x*V+E,i[5]=w*V+b*k+C,i[6]=u*L+x*V+E,i[7]=w*V+b*L+C},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new So),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Bt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,vs);var i=this._texture.orig.width,s=this._texture.orig.height,o=-i*this.anchor.x,h=0;return vs.x>=o&&vs.x<o+i&&(h=-s*this.anchor.y,vs.y>=h&&vs.y<h+s)},e.prototype.destroy=function(t){if(n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t&&t.texture){var i=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof Et?t:Et.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var i=jn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var i=jn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Et.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Ai),qa=function(n,e){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},qa(n,e)};(function(n){n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(ks||(ks={}));var da={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ks.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},D2=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],On=function(){function n(e){this.styleID=0,this.reset(),_a(this,e,e)}return n.prototype.clone=function(){var e={};return _a(e,this,da),new n(e)},n.prototype.reset=function(){_a(this,da,da)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=pa(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=pa(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(t,i){if(!Array.isArray(t)||!Array.isArray(i)||t.length!==i.length)return!1;for(var s=0;s<t.length;++s)if(t[s]!==i[s])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=pa(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&D2.indexOf(s)<0&&(s='"'+s+'"'),t[i]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n}();function ll(n){return typeof n=="number"?kl(n):(typeof n=="string"&&n.indexOf("0x")===0&&(n=n.replace("0x","#")),n)}function pa(n){if(Array.isArray(n)){for(var e=0;e<n.length;++e)n[e]=ll(n[e]);return n}return ll(n)}function _a(n,e,t){for(var i in t)Array.isArray(e[i])?n[i]=e[i].slice():n[i]=e[i]}var po={willReadFrequently:!0},Ri=function(){function n(e,t,i,s,o,h,u,b,x){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=o,this.lineWidths=h,this.lineHeight=u,this.maxLineWidth=b,this.fontProperties=x}return n.measureText=function(e,t,i,s){s===void 0&&(s=n._canvas),i=i??t.wordWrap;var o=t.toFontString(),h=n.measureFont(o);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);var u=s.getContext("2d",po);u.font=o;for(var b=(i?n.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),x=new Array(b.length),w=0,E=0;E<b.length;E++){var C=u.measureText(b[E]).width+(b[E].length-1)*t.letterSpacing;x[E]=C,w=Math.max(w,C)}var L=w+t.strokeThickness;t.dropShadow&&(L+=t.dropShadowDistance);var k=t.lineHeight||h.fontSize+t.strokeThickness,U=Math.max(k,h.fontSize+t.strokeThickness)+(b.length-1)*(k+t.leading);return t.dropShadow&&(U+=t.dropShadowDistance),new n(e,t,L,U,b,x,k+t.leading,w,h)},n.wordWrap=function(e,t,i){i===void 0&&(i=n._canvas);for(var s=i.getContext("2d",po),o=0,h="",u="",b=Object.create(null),x=t.letterSpacing,w=t.whiteSpace,E=n.collapseSpaces(w),C=n.collapseNewlines(w),L=!E,k=t.wordWrapWidth+x,U=n.tokenize(e),V=0;V<U.length;V++){var H=U[V];if(n.isNewline(H)){if(!C){u+=n.addLine(h),L=!E,h="",o=0;continue}H=" "}if(E){var Q=n.isBreakingSpace(H),te=n.isBreakingSpace(h[h.length-1]);if(Q&&te)continue}var ie=n.getFromCache(H,x,b,s);if(ie>k)if(h!==""&&(u+=n.addLine(h),h="",o=0),n.canBreakWords(H,t.breakWords))for(var ae=n.wordWrapSplit(H),ne=0;ne<ae.length;ne++){for(var le=ae[ne],oe=1;ae[ne+oe];){var ye=ae[ne+oe],Xe=le[le.length-1];if(n.canBreakChars(Xe,ye,H,ne,t.breakWords))break;le+=ye,oe++}ne+=le.length-1;var pe=n.getFromCache(le,x,b,s);pe+o>k&&(u+=n.addLine(h),L=!1,h="",o=0),h+=le,o+=pe}else{h.length>0&&(u+=n.addLine(h),h="",o=0);var _e=V===U.length-1;u+=n.addLine(H,!_e),L=!1,h="",o=0}else ie+o>k&&(L=!1,u+=n.addLine(h),h="",o=0),(h.length>0||!n.isBreakingSpace(H)||L)&&(h+=H,o+=ie)}return u+=n.addLine(h,!1)},n.addLine=function(e,t){return t===void 0&&(t=!0),e=n.trimRight(e),e=t?e+`
`:e},n.getFromCache=function(e,t,i,s){var o=i[e];if(typeof o!="number"){var h=e.length*t;o=s.measureText(e).width+h,i[e]=o}return o},n.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},n.collapseNewlines=function(e){return e==="normal"},n.trimRight=function(e){if(typeof e!="string")return"";for(var t=e.length-1;t>=0;t--){var i=e[t];if(!n.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},n.isNewline=function(e){return typeof e=="string"&&n._newlines.indexOf(e.charCodeAt(0))>=0},n.isBreakingSpace=function(e,t){return typeof e=="string"&&n._breakingSpaces.indexOf(e.charCodeAt(0))>=0},n.tokenize=function(e){var t=[],i="";if(typeof e!="string")return t;for(var s=0;s<e.length;s++){var o=e[s],h=e[s+1];n.isBreakingSpace(o,h)||n.isNewline(o)?(i!==""&&(t.push(i),i=""),t.push(o)):i+=o}return i!==""&&t.push(i),t},n.canBreakWords=function(e,t){return t},n.canBreakChars=function(e,t,i,s,o){return!0},n.wordWrapSplit=function(e){return e.split("")},n.measureFont=function(e){if(n._fonts[e])return n._fonts[e];var t={ascent:0,descent:0,fontSize:0},i=n._canvas,s=n._context;s.font=e;var o=n.METRICS_STRING+n.BASELINE_SYMBOL,h=Math.ceil(s.measureText(o).width),u=Math.ceil(s.measureText(n.BASELINE_SYMBOL).width),b=Math.ceil(n.HEIGHT_MULTIPLIER*u);u=u*n.BASELINE_MULTIPLIER|0,i.width=h,i.height=b,s.fillStyle="#f00",s.fillRect(0,0,h,b),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,u);var x=s.getImageData(0,0,h,b).data,w=x.length,E=4*h,C=0,L=0,k=!1;for(C=0;C<u;++C){for(var U=0;U<E;U+=4)if(x[L+U]!==255){k=!0;break}if(k)break;L+=E}for(t.ascent=u-C,L=w-E,k=!1,C=b;C>u;--C){for(U=0;U<E;U+=4)if(x[L+U]!==255){k=!0;break}if(k)break;L-=E}return t.descent=C-u,t.fontSize=t.ascent+t.descent,n._fonts[e]=t,t},n.clearMetrics=function(e){e===void 0&&(e=""),e?delete n._fonts[e]:n._fonts={}},Object.defineProperty(n,"_canvas",{get:function(){if(!n.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),i=t.getContext("2d",po);if(i&&i.measureText)return n.__canvas=t,t;e=Ue.ADAPTER.createCanvas()}catch{e=Ue.ADAPTER.createCanvas()}e.width=e.height=10,n.__canvas=e}return n.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n,"_context",{get:function(){return n.__context||(n.__context=n._canvas.getContext("2d",po)),n.__context},enumerable:!1,configurable:!0}),n}();Ri._fonts={},Ri.METRICS_STRING="|q",Ri.BASELINE_SYMBOL="M",Ri.BASELINE_MULTIPLIER=1.4,Ri.HEIGHT_MULTIPLIER=2,Ri._newlines=[10,13],Ri._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var $2={texture:!0,children:!1,baseTexture:!0},Ih=function(n){function e(t,i,s){var o=this,h=!1;s||(s=Ue.ADAPTER.createCanvas(),h=!0),s.width=3,s.height=3;var u=Et.from(s);return u.orig=new Bt,u.trim=new Bt,(o=n.call(this,u)||this)._ownCanvas=h,o.canvas=s,o.context=s.getContext("2d",{willReadFrequently:!0}),o._resolution=Ue.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=i,o.localStyleID=-1,o}return function(t,i){function s(){this.constructor=t}qa(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}(e,n),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var s,o,h=this.context,u=Ri.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),b=u.width,x=u.height,w=u.lines,E=u.lineHeight,C=u.lineWidths,L=u.maxLineWidth,k=u.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,b)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,x)+2*i.padding)*this._resolution),h.scale(this._resolution,this._resolution),h.clearRect(0,0,this.canvas.width,this.canvas.height),h.font=this._font,h.lineWidth=i.strokeThickness,h.textBaseline=i.textBaseline,h.lineJoin=i.lineJoin,h.miterLimit=i.miterLimit;for(var U=i.dropShadow?2:1,V=0;V<U;++V){var H=i.dropShadow&&V===0,Q=H?Math.ceil(Math.max(1,x)+2*i.padding):0,te=Q*this._resolution;if(H){h.fillStyle="black",h.strokeStyle="black";var ie=i.dropShadowColor,ae=Zn(typeof ie=="number"?ie:Nl(ie)),ne=i.dropShadowBlur*this._resolution,le=i.dropShadowDistance*this._resolution;h.shadowColor="rgba("+255*ae[0]+","+255*ae[1]+","+255*ae[2]+","+i.dropShadowAlpha+")",h.shadowBlur=ne,h.shadowOffsetX=Math.cos(i.dropShadowAngle)*le,h.shadowOffsetY=Math.sin(i.dropShadowAngle)*le+te}else h.fillStyle=this._generateFillStyle(i,w,u),h.strokeStyle=i.stroke,h.shadowColor="black",h.shadowBlur=0,h.shadowOffsetX=0,h.shadowOffsetY=0;var oe=(E-k.fontSize)/2;(!e.nextLineHeightBehavior||E-k.fontSize<0)&&(oe=0);for(var ye=0;ye<w.length;ye++)s=i.strokeThickness/2,o=i.strokeThickness/2+ye*E+k.ascent+oe,i.align==="right"?s+=L-C[ye]:i.align==="center"&&(s+=(L-C[ye])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(w[ye],s+i.padding,o+i.padding-Q,!0),i.fill&&this.drawLetterSpacing(w[ye],s+i.padding,o+i.padding-Q)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,i,s,o){o===void 0&&(o=!1);var h=this._style.letterSpacing,u=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(h===0||u)return u&&(this.context.letterSpacing=h,this.context.textLetterSpacing=h),void(o?this.context.strokeText(t,i,s):this.context.fillText(t,i,s));for(var b=i,x=Array.from?Array.from(t):t.split(""),w=this.context.measureText(t).width,E=0,C=0;C<x.length;++C){var L=x[C];o?this.context.strokeText(L,b,s):this.context.fillText(L,b,s);for(var k="",U=C+1;U<x.length;++U)k+=x[U];b+=w-(E=this.context.measureText(k).width)+h,w=E}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var i=function(b){var x,w,E,C=b.width,L=b.height,k=b.getContext("2d",{willReadFrequently:!0}),U=k.getImageData(0,0,C,L).data,V=U.length,H={top:null,left:null,right:null,bottom:null},Q=null;for(x=0;x<V;x+=4)U[x+3]!==0&&(w=x/4%C,E=~~(x/4/C),H.top===null&&(H.top=E),(H.left===null||w<H.left)&&(H.left=w),(H.right===null||H.right<w)&&(H.right=w+1),(H.bottom===null||H.bottom<E)&&(H.bottom=E));return H.top!==null&&(C=H.right-H.left,L=H.bottom-H.top+1,Q=k.getImageData(H.left,H.top,C,L)),{height:L,width:C,data:Q}}(t);i.data&&(t.width=i.width,t.height=i.height,this.context.putImageData(i.data,0,0))}var s=this._texture,o=this._style,h=o.trim?0:o.padding,u=s.baseTexture;s.trim.width=s._frame.width=t.width/this._resolution,s.trim.height=s._frame.height=t.height/this._resolution,s.trim.x=-h,s.trim.y=-h,s.orig.width=s._frame.width-2*h,s.orig.height=s._frame.height-2*h,this._onTextureUpdate(),u.setRealSize(t.width,t.height,this._resolution),s.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),n.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,i){return this.updateText(!0),this._textureID===-1&&(t=!1),n.prototype.getBounds.call(this,t,i)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,i,s){var o,h=t.fill;if(!Array.isArray(h))return h;if(h.length===1)return h[0];var u=t.dropShadow?t.dropShadowDistance:0,b=t.padding||0,x=this.canvas.width/this._resolution-u-2*b,w=this.canvas.height/this._resolution-u-2*b,E=h.slice(),C=t.fillGradientStops.slice();if(!C.length)for(var L=E.length+1,k=1;k<L;++k)C.push(k/L);if(E.unshift(h[0]),C.unshift(0),E.push(h[h.length-1]),C.push(1),t.fillGradientType===ks.LINEAR_VERTICAL){o=this.context.createLinearGradient(x/2,b,x/2,w+b);var U=s.fontProperties.fontSize+t.strokeThickness;for(k=0;k<i.length;k++){var V=s.lineHeight*(k-1)+U,H=s.lineHeight*k,Q=H;k>0&&V>H&&(Q=(H+V)/2);var te=H+U,ie=s.lineHeight*(k+1),ae=te;k+1<i.length&&ie<te&&(ae=(te+ie)/2);for(var ne=(ae-Q)/w,le=0;le<E.length;le++){var oe=0;oe=typeof C[le]=="number"?C[le]:le/E.length;var ye=Math.min(1,Math.max(0,Q/w+oe*ne));ye=Number(ye.toFixed(5)),o.addColorStop(ye,E[le])}}}else{o=this.context.createLinearGradient(b,w/2,x+b,w/2);var Xe=E.length+1,pe=1;for(k=0;k<E.length;k++){var _e=void 0;_e=typeof C[k]=="number"?C[k]:pe/Xe,o.addColorStop(_e,E[k]),pe++}}return o},e.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},$2,t),n.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var i=jn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var i=jn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof On?t:new On(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Ns);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ue.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Za=function(n,e){return Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Za(n,e)},L2=function(){function n(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function F2(n,e){var t=!1;if(n&&n._textures&&n._textures.length){for(var i=0;i<n._textures.length;i++)if(n._textures[i]instanceof Et){var s=n._textures[i].baseTexture;e.indexOf(s)===-1&&(e.push(s),t=!0)}}return t}function k2(n,e){if(n.baseTexture instanceof Vt){var t=n.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function N2(n,e){if(n._texture&&n._texture instanceof Et){var t=n._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function B2(n,e){return e instanceof Ih&&(e.updateText(!0),!0)}function U2(n,e){if(e instanceof On){var t=e.toFontString();return Ri.measureFont(t),!0}return!1}function G2(n,e){if(n instanceof Ih){e.indexOf(n.style)===-1&&e.push(n.style),e.indexOf(n)===-1&&e.push(n);var t=n._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function X2(n,e){return n instanceof On&&(e.indexOf(n)===-1&&e.push(n),!0)}var V2=function(){function n(e){var t=this;this.limiter=new L2(Ue.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(G2),this.registerFindHook(X2),this.registerFindHook(F2),this.registerFindHook(k2),this.registerFindHook(N2),this.registerUploadHook(B2),this.registerUploadHook(U2)}return n.prototype.upload=function(e,t){var i=this;return typeof e=="function"&&(t=e,e=null),t&&yi("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(s){e&&i.add(e);var o=function(){t==null||t(),s()};i.queue.length?(i.completes.push(o),i.ticking||(i.ticking=!0,Dr.system.addOnce(i.tick,i,ji.UTILITY))):o()})},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Dr.system.addOnce(this.tick,this,ji.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);for(this.completes.length=0,i=0,s=o.length;i<s;i++)o[i]()}},n.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},n.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},n.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ai)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},n.prototype.destroy=function(){this.ticking&&Dr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function A0(n,e){return e instanceof Vt&&(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0)}function j2(n,e){if(!(e instanceof Fs))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var i=t.batches,s=0;s<i.length;s++){var o=i[s].style.texture;o&&A0(n,o.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function H2(n,e){return n instanceof Fs&&(e.push(n),!0)}var Y2=function(n){function e(t){var i=n.call(this,t)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(H2),i.registerUploadHook(A0),i.registerUploadHook(j2),i}return function(t,i){function s(){this.constructor=t}Za(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}(e,n),e.extension={name:"prepare",type:Jt.RendererPlugin},e}(V2),z2=function(){function n(e,t,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=e instanceof Et?e:null,this.baseTexture=e instanceof Vt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,i=Eo(e,null);return i===null&&(i=t!==void 0?parseFloat(t):1),i!==1&&this.baseTexture.setResolution(i),i},n.prototype.parse=function(e){var t=this;return e&&yi("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){t._callback=function(s){e==null||e(s),i(s)},t._batchIndex=0,t._frameKeys.length<=n.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},n.prototype._processFrames=function(e){for(var t=e,i=n.BATCH_SIZE;t-e<i&&t<this._frameKeys.length;){var s=this._frameKeys[t],o=this._frames[s],h=o.frame;if(h){var u=null,b=null,x=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,w=new Bt(0,0,Math.floor(x.w)/this.resolution,Math.floor(x.h)/this.resolution);u=o.rotated?new Bt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new Bt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(b=new Bt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[s]=new Et(this.baseTexture,u,w,b,o.rotated?2:0,o.anchor),Et.addToCache(this.textures[s],s)}t++}},n.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var i=0;i<e[t].length;i++){var s=e[t][i];this.animations[t].push(this.textures[s])}}},n.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},n.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*n.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},n.prototype.destroy=function(e){var t;for(var i in e===void 0&&(e=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},n.BATCH_SIZE=1e3,n}(),W2=function(){function n(){}return n.use=function(e,t){var i,s,o=this,h=e.name+"_image";if(e.data&&e.type===vr.TYPE.JSON&&e.data.frames&&!o.resources[h]){var u=(s=(i=e.data)===null||i===void 0?void 0:i.meta)===null||s===void 0?void 0:s.related_multi_packs;if(Array.isArray(u))for(var b=function(L){if(typeof L!="string")return"continue";var k=L.replace(".json",""),U=Gi.resolve(e.url.replace(o.baseUrl,""),L);if(o.resources[k]||Object.values(o.resources).some(function(H){return Gi.format(Gi.parse(H.url))===U}))return"continue";var V={crossOrigin:e.crossOrigin,loadType:vr.LOAD_TYPE.XHR,xhrType:vr.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(k,U,V)},x=0,w=u;x<w.length;x++)b(w[x]);var E={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},C=n.getResourcePath(e,o.baseUrl);o.add(h,C,E,function(L){if(L.error)t(L.error);else{var k=new z2(L.texture,e.data,e.url);k.parse().then(function(){e.spritesheet=k,e.textures=k.textures,t()})}})}else t()},n.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:Gi.resolve(e.url.replace(t,""),e.data.meta.image)},n.extension=Jt.Loader,n}(),Ja=function(n,e){return Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Ja(n,e)};/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function T0(n,e){function t(){this.constructor=n}Ja(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ys=new nr;(function(n){function e(t,i,s){i===void 0&&(i=100),s===void 0&&(s=100);var o=n.call(this,t)||this;return o.tileTransform=new ph,o._width=i,o._height=s,o.uvMatrix=o.texture.uvMatrix||new _h(t),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}T0(e,n),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var i=this._texture;i&&i.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,i=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,i,s,o)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Bt),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ys);var i=this._width,s=this._height,o=-i*this.anchor._x;if(ys.x>=o&&ys.x<o+i){var h=-s*this.anchor._y;if(ys.y>=h&&ys.y<h+s)return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof Et?t:Et.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})})(Ns);var cl=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,_o=new mr,q2=function(n){function e(t){var i=n.call(this,t)||this;return t.runners.contextChange.add(i),i.quad=new Wl,i.state=Dn.for2d(),i}return T0(e,n),e.prototype.contextChange=function(){var t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=en.from(cl,`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,i),this.shader=t.context.webGLVersion>1?en.from(`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,i):en.from(cl,`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,i)},e.prototype.render=function(t){var i=this.renderer,s=this.quad,o=s.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y);var h=t.uvRespectAnchor?t.anchor.x:0,u=t.uvRespectAnchor?t.anchor.y:0;(o=s.uvs)[0]=o[6]=-h,o[1]=o[3]=-u,o[2]=o[4]=1-h,o[5]=o[7]=1-u,s.invalidate();var b=t._texture,x=b.baseTexture,w=x.alphaMode>0,E=t.tileTransform.localTransform,C=t.uvMatrix,L=x.isPowerOfTwo&&b.frame.width===x.width&&b.frame.height===x.height;L&&(x._glTextures[i.CONTEXT_UID]?L=x.wrapMode!==$i.CLAMP:x.wrapMode===$i.CLAMP&&(x.wrapMode=$i.REPEAT));var k=L?this.simpleShader:this.shader,U=b.width,V=b.height,H=t._width,Q=t._height;_o.set(E.a*U/H,E.b*U/Q,E.c*V/H,E.d*V/Q,E.tx/H,E.ty/Q),_o.invert(),L?_o.prepend(C.mapCoord):(k.uniforms.uMapCoord=C.mapCoord.toArray(!0),k.uniforms.uClampFrame=C.uClampFrame,k.uniforms.uClampOffset=C.uClampOffset),k.uniforms.uTransform=_o.toArray(!0),k.uniforms.uColor=Gl(t.tint,t.worldAlpha,k.uniforms.uColor,w),k.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),k.uniforms.uSampler=b,i.shader.bind(k),i.geometry.bind(s),this.state.blendMode=Ul(t.blendMode,w),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Jt.RendererPlugin},e}(Lo),Qa=function(n,e){return Qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Qa(n,e)};function Rh(n,e){function t(){this.constructor=n}Qa(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Z2=function(){function n(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},n}(),ma=new nr,fl=new mo,Bs=function(n){function e(t,i,s,o){o===void 0&&(o=gi.TRIANGLES);var h=n.call(this)||this;return h.geometry=t,h.shader=i,h.state=s||Dn.for2d(),h.drawMode=o,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=Ue.ROUND_PIXELS,h.batchUvs=null,h}return Rh(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===gi.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),t.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(i),t.state.set(this.state),t.geometry.bind(this.geometry,i),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var i=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;var o=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[o]),t.plugins[o].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],i=t.data,s=t._updateID;if(s!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,h=o.a,u=o.b,b=o.c,x=o.d,w=o.tx,E=o.ty,C=this.vertexData,L=0;L<C.length/2;L++){var k=i[2*L],U=i[2*L+1];C[2*L]=h*k+b*U+w,C[2*L+1]=u*k+x*U+E}if(this._roundPixels){var V=Ue.RESOLUTION;for(L=0;L<C.length;++L)C[L]=Math.round((C[L]*V|0)/V)}this.vertexDirty=s}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Z2(t,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,ma);for(var i=this.geometry.getBuffer("aVertexPosition").data,s=fl.points,o=this.geometry.getIndex().data,h=o.length,u=this.drawMode===4?3:1,b=0;b+2<h;b+=u){var x=2*o[b],w=2*o[b+1],E=2*o[b+2];if(s[0]=i[x],s[1]=i[x+1],s[2]=i[w],s[3]=i[w+1],s[4]=i[E],s[5]=i[E+1],fl.contains(ma.x,ma.y))return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Ai),Us=function(n){function e(t,i){var s=this,o={uSampler:t,alpha:1,uTextureMatrix:mr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(o,i.uniforms),(s=n.call(this,i.program||Vs.from(`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`),o)||this)._colorDirty=!1,s.uvMatrix=new _h(t),s.batchable=i.program===void 0,s.pluginName=i.pluginName,s.tint=i.tint,s.alpha=i.alpha,s}return Rh(e,n),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Gl(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(en),Bo=function(n){function e(t,i,s){var o=n.call(this)||this,h=new Rr(t),u=new Rr(i,!0),b=new Rr(s,!0,!0);return o.addAttribute("aVertexPosition",h,2,!1,ct.FLOAT).addAttribute("aTextureCoord",u,2,!1,ct.FLOAT).addIndex(b),o._updateId=-1,o}return Rh(e,n),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Xs),Ka=function(n,e){return Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Ka(n,e)},Oo=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},J2=function(){function n(){}return n.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},n.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var s in t){var o=t[s].match(/^[a-z]+/gm)[0],h=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(var b in h){var x=h[b].split("="),w=x[0],E=x[1].replace(/"/gm,""),C=parseFloat(E),L=isNaN(C)?E:C;u[w]=L}i[o].push(u)}var k=new Oo;return i.info.forEach(function(U){return k.info.push({face:U.face,size:parseInt(U.size,10)})}),i.common.forEach(function(U){return k.common.push({lineHeight:parseInt(U.lineHeight,10)})}),i.page.forEach(function(U){return k.page.push({id:parseInt(U.id,10),file:U.file})}),i.char.forEach(function(U){return k.char.push({id:parseInt(U.id,10),page:parseInt(U.page,10),x:parseInt(U.x,10),y:parseInt(U.y,10),width:parseInt(U.width,10),height:parseInt(U.height,10),xoffset:parseInt(U.xoffset,10),yoffset:parseInt(U.yoffset,10),xadvance:parseInt(U.xadvance,10)})}),i.kerning.forEach(function(U){return k.kerning.push({first:parseInt(U.first,10),second:parseInt(U.second,10),amount:parseInt(U.amount,10)})}),i.distanceField.forEach(function(U){return k.distanceField.push({distanceRange:parseInt(U.distanceRange,10),fieldType:U.fieldType})}),k},n}(),eh=function(){function n(){}return n.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},n.parse=function(e){for(var t=new Oo,i=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),h=e.getElementsByTagName("char"),u=e.getElementsByTagName("kerning"),b=e.getElementsByTagName("distanceField"),x=0;x<i.length;x++)t.info.push({face:i[x].getAttribute("face"),size:parseInt(i[x].getAttribute("size"),10)});for(x=0;x<s.length;x++)t.common.push({lineHeight:parseInt(s[x].getAttribute("lineHeight"),10)});for(x=0;x<o.length;x++)t.page.push({id:parseInt(o[x].getAttribute("id"),10)||0,file:o[x].getAttribute("file")});for(x=0;x<h.length;x++){var w=h[x];t.char.push({id:parseInt(w.getAttribute("id"),10),page:parseInt(w.getAttribute("page"),10)||0,x:parseInt(w.getAttribute("x"),10),y:parseInt(w.getAttribute("y"),10),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10),xoffset:parseInt(w.getAttribute("xoffset"),10),yoffset:parseInt(w.getAttribute("yoffset"),10),xadvance:parseInt(w.getAttribute("xadvance"),10)})}for(x=0;x<u.length;x++)t.kerning.push({first:parseInt(u[x].getAttribute("first"),10),second:parseInt(u[x].getAttribute("second"),10),amount:parseInt(u[x].getAttribute("amount"),10)});for(x=0;x<b.length;x++)t.distanceField.push({fieldType:b[x].getAttribute("fieldType"),distanceRange:parseInt(b[x].getAttribute("distanceRange"),10)});return t},n}(),Q2=function(){function n(){}return n.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return eh.test(t)}return!1},n.parse=function(e){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return eh.parse(t)},n}(),ga=[J2,eh,Q2];function E0(n){for(var e=0;e<ga.length;e++)if(ga[e].test(n))return ga[e];return null}function K2(n,e,t,i,s,o,h){var u=t.text,b=t.fontProperties;e.translate(i,s),e.scale(o,o);var x=h.strokeThickness/2,w=-h.strokeThickness/2;if(e.font=h.toFontString(),e.lineWidth=h.strokeThickness,e.textBaseline=h.textBaseline,e.lineJoin=h.lineJoin,e.miterLimit=h.miterLimit,e.fillStyle=function(U,V,H,Q,te,ie){var ae,ne=H.fill;if(!Array.isArray(ne))return ne;if(ne.length===1)return ne[0];var le=H.dropShadow?H.dropShadowDistance:0,oe=H.padding||0,ye=U.width/Q-le-2*oe,Xe=U.height/Q-le-2*oe,pe=ne.slice(),_e=H.fillGradientStops.slice();if(!_e.length)for(var Be=pe.length+1,Me=1;Me<Be;++Me)_e.push(Me/Be);if(pe.unshift(ne[0]),_e.unshift(0),pe.push(ne[ne.length-1]),_e.push(1),H.fillGradientType===ks.LINEAR_VERTICAL){ae=V.createLinearGradient(ye/2,oe,ye/2,Xe+oe);var _t=0,Ke=(ie.fontProperties.fontSize+H.strokeThickness)/Xe;for(Me=0;Me<te.length;Me++)for(var Re=ie.lineHeight*Me,me=0;me<pe.length;me++){var tt=Re/Xe+(typeof _e[me]=="number"?_e[me]:me/pe.length)*Ke,je=Math.max(_t,tt);je=Math.min(je,1),ae.addColorStop(je,pe[me]),_t=je}}else{ae=V.createLinearGradient(oe,Xe/2,ye+oe,Xe/2);var ht=pe.length+1,Ee=1;for(Me=0;Me<pe.length;Me++){var Qt=void 0;Qt=typeof _e[Me]=="number"?_e[Me]:Ee/ht,ae.addColorStop(Qt,pe[Me]),Ee++}}return ae}(n,e,h,o,[u],t),e.strokeStyle=h.stroke,h.dropShadow){var E=h.dropShadowColor,C=Zn(typeof E=="number"?E:Nl(E)),L=h.dropShadowBlur*o,k=h.dropShadowDistance*o;e.shadowColor="rgba("+255*C[0]+","+255*C[1]+","+255*C[2]+","+h.dropShadowAlpha+")",e.shadowBlur=L,e.shadowOffsetX=Math.cos(h.dropShadowAngle)*k,e.shadowOffsetY=Math.sin(h.dropShadowAngle)*k}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;h.stroke&&h.strokeThickness&&e.strokeText(u,x,w+t.lineHeight-b.descent),h.fill&&e.fillText(u,x,w+t.lineHeight-b.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function w0(n){return Array.from?Array.from(n):n.split("")}function yo(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}var Qi=function(){function n(e,t,i){var s,o,h=e.info[0],u=e.common[0],b=e.page[0],x=e.distanceField[0],w=Eo(b.file),E={};this._ownsTextures=i,this.font=h.face,this.size=h.size,this.lineHeight=u.lineHeight/w,this.chars={},this.pageTextures=E;for(var C=0;C<e.page.length;C++){var L=e.page[C],k=L.id,U=L.file;E[k]=t instanceof Array?t[C]:t[U],x!=null&&x.fieldType&&x.fieldType!=="none"&&(E[k].baseTexture.alphaMode=xi.NO_PREMULTIPLIED_ALPHA,E[k].baseTexture.mipmap=bi.OFF)}for(C=0;C<e.char.length;C++){var V=e.char[C],H=(k=V.id,V.page),Q=e.char[C],te=Q.x,ie=Q.y,ae=Q.width,ne=Q.height,le=Q.xoffset,oe=Q.yoffset,ye=Q.xadvance;ie/=w,ae/=w,ne/=w,le/=w,oe/=w,ye/=w;var Xe=new Bt((te/=w)+E[H].frame.x/w,ie+E[H].frame.y/w,ae,ne);this.chars[k]={xOffset:le,yOffset:oe,xAdvance:ye,kerning:{},texture:new Et(E[H].baseTexture,Xe),page:H}}for(C=0;C<e.kerning.length;C++){var pe=e.kerning[C],_e=pe.first,Be=pe.second,Me=pe.amount;_e/=w,Be/=w,Me/=w,this.chars[Be]&&(this.chars[Be].kerning[_e]=Me)}this.distanceFieldRange=x==null?void 0:x.distanceRange,this.distanceFieldType=(o=(s=x==null?void 0:x.fieldType)===null||s===void 0?void 0:s.toLowerCase())!==null&&o!==void 0?o:"none"}return n.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},n.install=function(e,t,i){var s;if(e instanceof Oo)s=e;else{var o=E0(e);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(e)}t instanceof Et&&(t=[t]);var h=new n(s,t,i);return n.available[h.font]=h,h},n.uninstall=function(e){var t=n.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete n.available[e]},n.from=function(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},n.defaultOptions,i),o=s.chars,h=s.padding,u=s.resolution,b=s.textureWidth,x=s.textureHeight,w=function(je){typeof je=="string"&&(je=[je]);for(var ht=[],Ee=0,Qt=je.length;Ee<Qt;Ee++){var ot=je[Ee];if(Array.isArray(ot)){if(ot.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+ot.length+".");var Mt=ot[0].charCodeAt(0),gr=ot[1].charCodeAt(0);if(gr<Mt)throw new Error("[BitmapFont]: Invalid character range.");for(var qe=Mt,Mr=gr;qe<=Mr;qe++)ht.push(String.fromCharCode(qe))}else ht.push.apply(ht,w0(ot))}if(ht.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return ht}(o),E=t instanceof On?t:new On(t),C=b,L=new Oo;L.info[0]={face:E.fontFamily,size:E.fontSize},L.common[0]={lineHeight:E.fontSize};for(var k,U,V,H=0,Q=0,te=0,ie=[],ae=0;ae<w.length;ae++){k||((k=Ue.ADAPTER.createCanvas()).width=b,k.height=x,U=k.getContext("2d"),V=new Vt(k,{resolution:u}),ie.push(new Et(V)),L.page.push({id:ie.length-1,file:""}));var ne=w[ae],le=Ri.measureText(ne,E,!1,k),oe=le.width,ye=Math.ceil(le.height),Xe=Math.ceil((E.fontStyle==="italic"?2:1)*oe);if(Q>=x-ye*u){if(Q===0)throw new Error("[BitmapFont] textureHeight "+x+"px is too small (fontFamily: '"+E.fontFamily+"', fontSize: "+E.fontSize+"px, char: '"+ne+"')");--ae,k=null,U=null,V=null,Q=0,H=0,te=0}else if(te=Math.max(ye+le.fontProperties.descent,te),Xe*u+H>=C){if(H===0)throw new Error("[BitmapFont] textureWidth "+b+"px is too small (fontFamily: '"+E.fontFamily+"', fontSize: "+E.fontSize+"px, char: '"+ne+"')");--ae,Q+=te*u,Q=Math.ceil(Q),H=0,te=0}else{K2(k,U,le,H,Q,u,E);var pe=yo(le.text);L.char.push({id:pe,page:ie.length-1,x:H/u,y:Q/u,width:Xe,height:ye,xoffset:0,yoffset:0,xadvance:Math.ceil(oe-(E.dropShadow?E.dropShadowDistance:0)-(E.stroke?E.strokeThickness:0))}),H+=(Xe+2*h)*u,H=Math.ceil(H)}}if(!(i!=null&&i.skipKerning)){ae=0;for(var _e=w.length;ae<_e;ae++)for(var Be=w[ae],Me=0;Me<_e;Me++){var _t=w[Me],Ke=U.measureText(Be).width,Re=U.measureText(_t).width,me=U.measureText(Be+_t).width-(Ke+Re);me&&L.kerning.push({first:yo(Be),second:yo(_t),amount:me})}}var tt=new n(L,ie,!0);return n.available[e]!==void 0&&n.uninstall(e),n.available[e]=tt,tt},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),dl=[],pl=[],_l=[];(function(n){function e(t,i){i===void 0&&(i={});var s=n.call(this)||this;s._tint=16777215;var o=Object.assign({},e.styleDefaults,i),h=o.align,u=o.tint,b=o.maxWidth,x=o.letterSpacing,w=o.fontName,E=o.fontSize;if(!Qi.available[w])throw new Error('Missing BitmapFont "'+w+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=h,s._tint=u,s._font=void 0,s._fontName=w,s._fontSize=E,s.text=t,s._maxWidth=b,s._maxLineHeight=0,s._letterSpacing=x,s._anchor=new Sn(function(){s.dirty=!0},s,0,0),s._roundPixels=Ue.ROUND_PIXELS,s.dirty=!0,s._resolution=Ue.RESOLUTION,s._autoResolution=!0,s._textureCache={},s}(function(t,i){function s(){this.constructor=t}Ka(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n),e.prototype.updateText=function(){for(var t,i=Qi.available[this._fontName],s=this.fontSize,o=s/i.size,h=new nr,u=[],b=[],x=[],w=w0(this._text.replace(/(?:\r\n|\r)/g,`
`)||" "),E=this._maxWidth*i.size/s,C=i.distanceFieldType==="none"?dl:pl,L=null,k=0,U=0,V=0,H=-1,Q=0,te=0,ie=0,ae=0,ne=0;ne<w.length;ne++){var le=yo(qe=w[ne]);if(/(?:\s)/.test(qe)&&(H=ne,Q=k,ae++),qe!=="\r"&&qe!==`
`){var oe=i.chars[le];if(oe){L&&oe.kerning[L]&&(h.x+=oe.kerning[L]);var ye=_l.pop()||{texture:Et.EMPTY,line:0,charCode:0,prevSpaces:0,position:new nr};ye.texture=oe.texture,ye.line=V,ye.charCode=le,ye.position.x=h.x+oe.xOffset+this._letterSpacing/2,ye.position.y=h.y+oe.yOffset,ye.prevSpaces=ae,u.push(ye),k=ye.position.x+Math.max(oe.xAdvance-oe.xOffset,oe.texture.orig.width),h.x+=oe.xAdvance+this._letterSpacing,ie=Math.max(ie,oe.yOffset+oe.texture.height),L=le,H!==-1&&E>0&&h.x>E&&(Yn(u,1+H-++te,1+ne-H),ne=H,H=-1,b.push(Q),x.push(u.length>0?u[u.length-1].prevSpaces:0),U=Math.max(U,Q),V++,h.x=0,h.y+=i.lineHeight,L=null,ae=0)}}else b.push(k),x.push(-1),U=Math.max(U,k),++V,++te,h.x=0,h.y+=i.lineHeight,L=null,ae=0}var Xe=w[w.length-1];Xe!=="\r"&&Xe!==`
`&&(/(?:\s)/.test(Xe)&&(k=Q),b.push(k),U=Math.max(U,k),x.push(-1));var pe=[];for(ne=0;ne<=V;ne++){var _e=0;this._align==="right"?_e=U-b[ne]:this._align==="center"?_e=(U-b[ne])/2:this._align==="justify"&&(_e=x[ne]<0?0:(U-b[ne])/x[ne]),pe.push(_e)}var Be=u.length,Me={},_t=[],Ke=this._activePagesMeshData;for(C.push.apply(C,Ke),ne=0;ne<Be;ne++){var Re=(jt=u[ne].texture).baseTexture.uid;if(!Me[Re]){if(!(Ze=C.pop())){var me=new Bo,tt=void 0,je=void 0;i.distanceFieldType==="none"?(tt=new Us(Et.EMPTY),je=ft.NORMAL):(tt=new Us(Et.EMPTY,{program:Vs.from(`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`),uniforms:{uFWidth:0}}),je=ft.NORMAL_NPM);var ht=new Bs(me,tt);ht.blendMode=je,Ze={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ht,vertices:null,uvs:null,indices:null}}Ze.index=0,Ze.indexCount=0,Ze.vertexCount=0,Ze.uvsCount=0,Ze.total=0;var Ee=this._textureCache;Ee[Re]=Ee[Re]||new Et(jt.baseTexture),Ze.mesh.texture=Ee[Re],Ze.mesh.tint=this._tint,_t.push(Ze),Me[Re]=Ze}Me[Re].total++}for(ne=0;ne<Ke.length;ne++)_t.indexOf(Ke[ne])===-1&&this.removeChild(Ke[ne].mesh);for(ne=0;ne<_t.length;ne++)_t[ne].mesh.parent!==this&&this.addChild(_t[ne].mesh);for(var ne in this._activePagesMeshData=_t,Me){var Qt=(Ze=Me[ne]).total;if(!(((t=Ze.indices)===null||t===void 0?void 0:t.length)>6*Qt)||Ze.vertices.length<2*Bs.BATCHABLE_SIZE)Ze.vertices=new Float32Array(8*Qt),Ze.uvs=new Float32Array(8*Qt),Ze.indices=new Uint16Array(6*Qt);else for(var ot=Ze.total,Mt=Ze.vertices,gr=4*ot*2;gr<Mt.length;gr++)Mt[gr]=0;Ze.mesh.size=6*Qt}for(ne=0;ne<Be;ne++){var qe,Mr=(qe=u[ne]).position.x+pe[qe.line]*(this._align==="justify"?qe.prevSpaces:1);this._roundPixels&&(Mr=Math.round(Mr));var jt,$t=Mr*o,hr=qe.position.y*o,yt=Me[(jt=qe.texture).baseTexture.uid],rt=jt.frame,Ct=jt._uvs,St=yt.index++;yt.indices[6*St+0]=0+4*St,yt.indices[6*St+1]=1+4*St,yt.indices[6*St+2]=2+4*St,yt.indices[6*St+3]=0+4*St,yt.indices[6*St+4]=2+4*St,yt.indices[6*St+5]=3+4*St,yt.vertices[8*St+0]=$t,yt.vertices[8*St+1]=hr,yt.vertices[8*St+2]=$t+rt.width*o,yt.vertices[8*St+3]=hr,yt.vertices[8*St+4]=$t+rt.width*o,yt.vertices[8*St+5]=hr+rt.height*o,yt.vertices[8*St+6]=$t,yt.vertices[8*St+7]=hr+rt.height*o,yt.uvs[8*St+0]=Ct.x0,yt.uvs[8*St+1]=Ct.y0,yt.uvs[8*St+2]=Ct.x1,yt.uvs[8*St+3]=Ct.y1,yt.uvs[8*St+4]=Ct.x2,yt.uvs[8*St+5]=Ct.y2,yt.uvs[8*St+6]=Ct.x3,yt.uvs[8*St+7]=Ct.y3}for(var ne in this._textWidth=U*o,this._textHeight=(h.y+i.lineHeight)*o,Me){var Ze=Me[ne];if(this.anchor.x!==0||this.anchor.y!==0)for(var or=0,br=this._textWidth*this.anchor.x,qr=this._textHeight*this.anchor.y,Ht=0;Ht<Ze.total;Ht++)Ze.vertices[or++]-=br,Ze.vertices[or++]-=qr,Ze.vertices[or++]-=br,Ze.vertices[or++]-=qr,Ze.vertices[or++]-=br,Ze.vertices[or++]-=qr,Ze.vertices[or++]-=br,Ze.vertices[or++]-=qr;this._maxLineHeight=ie*o;var ui=Ze.mesh.geometry.getBuffer("aVertexPosition"),Kt=Ze.mesh.geometry.getBuffer("aTextureCoord"),ce=Ze.mesh.geometry.getIndex();ui.data=Ze.vertices,Kt.data=Ze.uvs,ce.data=Ze.indices,ui.update(),Kt.update(),ce.update()}for(ne=0;ne<u.length;ne++)_l.push(u[ne]);this._font=i,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var i=Qi.available[this._fontName],s=i.distanceFieldRange,o=i.distanceFieldType,h=i.size;if(o!=="none")for(var u=this.worldTransform,b=u.a,x=u.b,w=u.c,E=u.d,C=Math.sqrt(b*b+x*x),L=Math.sqrt(w*w+E*E),k=(Math.abs(C)+Math.abs(L))/2,U=this.fontSize/h,V=0,H=this._activePagesMeshData;V<H.length;V++)H[V].mesh.shader.uniforms.uFWidth=k*s*U*this._resolution;n.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=Qi.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Qi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return(t=this._fontSize)!==null&&t!==void 0?t:Qi.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var i=this._textureCache,s=Qi.available[this._fontName].distanceFieldType==="none"?dl:pl;s.push.apply(s,this._activePagesMeshData);for(var o=0,h=this._activePagesMeshData;o<h.length;o++){var u=h[o];this.removeChild(u.mesh)}for(var b in this._activePagesMeshData=[],s.filter(function(x){return i[x.mesh.texture.baseTexture.uid]}).forEach(function(x){x.mesh.texture=Et.EMPTY}),i)i[b].destroy(),delete i[b];this._font=null,this._textureCache=null,n.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}})(Ai);var ep=function(){function n(){}return n.add=function(){vr.setExtensionXhrType("fnt",vr.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){var i=E0(e.data);if(i)for(var s=n.getBaseUrl(this,e),o=i.parse(e.data),h={},u=function(U){h[U.metadata.pageFile]=U.texture,Object.keys(h).length===o.page.length&&(e.bitmapFont=Qi.install(o,h,!0),t())},b=0;b<o.page.length;++b){var x=o.page[b].file,w=s+x,E=!1;for(var C in this.resources){var L=this.resources[C];if(L.url===w){L.metadata.pageFile=x,L.texture?u(L):L.onAfterMiddleware.add(u),E=!0;break}}if(!E){var k={crossOrigin:e.crossOrigin,loadType:vr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:x},e.metadata.imageMetadata),parentResource:e};this.add(w,k,u)}}else t()},n.getBaseUrl=function(e,t){var i=t.isDataUrl?"":n.dirname(t.url);return t.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),(i=i.replace(e.baseUrl,""))&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},n.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":t===""?"/":t},n.extension=Jt.Loader,n}(),th=function(n,e){return th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},th(n,e)};/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){function e(t){t===void 0&&(t=1);var i=n.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,{uAlpha:1})||this;return i.alpha=t,i}(function(t,i){function s(){this.constructor=t}th(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})})(on);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rh=function(n,e){return rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},rh(n,e)};function S0(n,e){function t(){this.constructor=n}rh(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var tp={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},rp=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`),ml=function(n){function e(t,i,s,o,h){i===void 0&&(i=8),s===void 0&&(s=4),o===void 0&&(o=Ue.FILTER_RESOLUTION),h===void 0&&(h=5);var u=this,b=function(w,E){var C,L=Math.ceil(w/2),k=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`,U="";C=E?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var V=0;V<w;V++){var H=C.replace("%index%",V.toString());U+=H=H.replace("%sampleIndex%",V-(L-1)+".0"),U+=`
`}return(k=k.replace("%blur%",U)).replace("%size%",w.toString())}(h,t),x=function(w){for(var E,C=tp[w],L=C.length,k=rp,U="",V=0;V<w;V++){var H="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",V.toString());E=V,V>=L&&(E=w-V-1),U+=H=H.replace("%value%",C[E].toString()),U+=`
`}return(k=k.replace("%blur%",U)).replace("%size%",w.toString())}(h);return(u=n.call(this,b,x)||this).horizontal=t,u.resolution=o,u._quality=0,u.quality=s,u.blur=i,u}return S0(e,n),e.prototype.apply=function(t,i,s,o){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,s,o);else{var h=t.getFilterTexture(),u=t.renderer,b=i,x=h;this.state.blend=!1,t.applyFilter(this,b,x,_i.CLEAR);for(var w=1;w<this.passes-1;w++){t.bindAndClear(b,_i.BLIT),this.uniforms.uSampler=x;var E=x;x=b,b=E,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,x,s,o),t.returnFilterTexture(h)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(on);(function(n){function e(t,i,s,o){t===void 0&&(t=8),i===void 0&&(i=4),s===void 0&&(s=Ue.FILTER_RESOLUTION),o===void 0&&(o=5);var h=n.call(this)||this;return h.blurXFilter=new ml(!0,t,i,s,o),h.blurYFilter=new ml(!1,t,i,s,o),h.resolution=s,h.quality=i,h.blur=t,h.repeatEdgePixels=!1,h}S0(e,n),e.prototype.apply=function(t,i,s,o){var h=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(h&&u){var b=t.getFilterTexture();this.blurXFilter.apply(t,i,b,_i.CLEAR),this.blurYFilter.apply(t,b,s,o),t.returnFilterTexture(b)}else u?this.blurYFilter.apply(t,i,s,o):this.blurXFilter.apply(t,i,s,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})})(on);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ih=function(n,e){return ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},ih(n,e)},gl=function(n){function e(){var t=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=n.call(this,Kl,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,i)||this).alpha=1,t}return function(t,i){function s(){this.constructor=t}ih(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}(e,n),e.prototype._loadMatrix=function(t,i){i===void 0&&(i=!1);var s=t;i&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s},e.prototype._multiply=function(t,i,s){return t[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],t[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],t[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],t[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],t[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],t[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],t[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],t[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],t[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],t[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],t[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],t[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],t[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],t[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],t[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],t[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],t[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],t[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],t[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],t[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],t},e.prototype._colorMatrix=function(t){var i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(t,i){var s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.tint=function(t,i){var s=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.greyscale=function(t,i){var s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,i){t=(t||0)/180*Math.PI;var s=Math.cos(t),o=Math.sin(t),h=1/3,u=(0,Math.sqrt)(h),b=[s+(1-s)*h,h*(1-s)-u*o,h*(1-s)+u*o,0,0,h*(1-s)+u*o,s+h*(1-s),h*(1-s)-u*o,0,0,h*(1-s)-u*o,h*(1-s)+u*o,s+h*(1-s),0,0,0,0,0,1,0];this._loadMatrix(b,i)},e.prototype.contrast=function(t,i){var s=(t||0)+1,o=-.5*(s-1),h=[s,0,0,0,o,0,s,0,0,o,0,0,s,0,o,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.saturate=function(t,i){t===void 0&&(t=0);var s=2*t/3+1,o=-.5*(s-1),h=[s,o,o,0,0,o,s,o,0,0,o,o,s,0,0,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,i,s,o,h){var u=((s=s||16770432)>>16&255)/255,b=(s>>8&255)/255,x=(255&s)/255,w=((o=o||3375104)>>16&255)/255,E=(o>>8&255)/255,C=(255&o)/255,L=[.3,.59,.11,0,0,u,b,x,t=t||.2,0,w,E,C,i=i||.15,0,u-w,b-E,x-C,0,0];this._loadMatrix(L,h)},e.prototype.night=function(t,i){var s=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.predator=function(t,i){var s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(on);gl.prototype.grayscale=gl.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nh=function(n,e){return nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},nh(n,e)};(function(n){function e(t,i){var s=this,o=new mr;return t.renderable=!1,(s=n.call(this,`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,s.maskMatrix=o,i==null&&(i=20),s.scale=new nr(i,i),s}(function(t,i){function s(){this.constructor=t}nh(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n),e.prototype.apply=function(t,i,s,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var h=this.maskSprite.worldTransform,u=Math.sqrt(h.a*h.a+h.b*h.b),b=Math.sqrt(h.c*h.c+h.d*h.d);u!==0&&b!==0&&(this.uniforms.rotation[0]=h.a/u,this.uniforms.rotation[1]=h.b/u,this.uniforms.rotation[2]=h.c/b,this.uniforms.rotation[3]=h.d/b),t.applyFilter(this,i,s,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})})(on);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sh=function(n,e){return sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},sh(n,e)};(function(n){function e(){return n.call(this,`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`)||this}(function(t,i){function s(){this.constructor=t}sh(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n)})(on);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oh=function(n,e){return oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},oh(n,e)};(function(n){function e(t,i){t===void 0&&(t=.5),i===void 0&&(i=Math.random());var s=n.call(this,Kl,`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,{uNoise:0,uSeed:0})||this;return s.noise=t,s.seed=i,s}(function(t,i){function s(){this.constructor=t}oh(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})})(on);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vl=new mr;yr.prototype._cacheAsBitmap=!1,yr.prototype._cacheData=null,yr.prototype._cacheAsBitmapResolution=null,yr.prototype._cacheAsBitmapMultisample=cr.NONE;var ip=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(yr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){var e;this._cacheAsBitmap!==n&&(this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new ip),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),yr.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))},yr.prototype._initCachedDisplayObject=function(n){var e;if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,n.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;i.pad(s)}i.ceil(Ue.RESOLUTION);var o=n.renderTexture.current,h=n.renderTexture.sourceFrame.clone(),u=n.renderTexture.destinationFrame.clone(),b=n.projection.transform,x=Cn.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||n.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:n.multisample}),w="cacheAsBitmap_"+Rn();this._cacheData.textureCacheId=w,Vt.addToCache(x.baseTexture,w),Et.addToCache(x,w);var E=this.transform.localTransform.copyTo(vl).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:x,clear:!0,transform:E,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=b,n.renderTexture.bind(o,h,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var C=new Ns(x);C.transform.worldTransform=this.transform.worldTransform,C.anchor.x=-i.x/i.width,C.anchor.y=-i.y/i.height,C.alpha=t,C._bounds=this._bounds,this._cacheData.sprite=C,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=C.containsPoint.bind(C)}},yr.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))},yr.prototype._initCachedDisplayObjectCanvas=function(n){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),t=this.alpha;this.alpha=1;var i=n.context,s=n._projTransform;e.ceil(Ue.RESOLUTION);var o=Cn.create({width:e.width,height:e.height}),h="cacheAsBitmap_"+Rn();this._cacheData.textureCacheId=h,Vt.addToCache(o.baseTexture,h),Et.addToCache(o,h);var u=vl;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),n.context=i,n._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var b=new Ns(o);b.transform.worldTransform=this.transform.worldTransform,b.anchor.x=-e.x/e.width,b.anchor.y=-e.y/e.height,b.alpha=t,b._bounds=this._bounds,this._cacheData.sprite=b,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=b.containsPoint.bind(b)}},yr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},yr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},yr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Vt.removeFromCache(this._cacheData.textureCacheId),Et.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},yr.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)},yr.prototype.name=null,Ai.prototype.getChildByName=function(n,e){for(var t=0,i=this.children.length;t<i;t++)if(this.children[t].name===n)return this.children[t];if(e)for(t=0,i=this.children.length;t<i;t++){var s=this.children[t];if(s.getChildByName){var o=s.getChildByName(n,!0);if(o)return o}}return null},yr.prototype.getGlobalPosition=function(n,e){return n===void 0&&(n=new nr),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var np=function(){function n(){}return n.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var i,s;if(t.cancelResize(),t._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{var o=t._resizeTo;i=o.clientWidth,s=o.clientHeight}t.renderer.resize(i,s)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},n.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n.extension=Jt.Application,n}(),P0=function(){function n(e){var t=this;this.stage=new Ai,e=Object.assign({forceCanvas:!1},e),this.renderer=function(i){return Ql.create(i)}(e),n._plugins.forEach(function(i){i.init.call(t,e)})}return n.registerPlugin=function(e){yi("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Hi.add({type:Jt.Application,ref:e})},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(e,t){var i=this,s=n._plugins.slice(0);s.reverse(),s.forEach(function(o){o.destroy.call(i)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},n._plugins=[],n}();Hi.handleByList(Jt.Application,P0._plugins),Hi.add(np);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ah=function(n,e){return ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},ah(n,e)};function Jn(n,e){function t(){this.constructor=n}ah(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var sp=function(n){function e(t,i,s,o){t===void 0&&(t=100),i===void 0&&(i=100),s===void 0&&(s=10),o===void 0&&(o=10);var h=n.call(this)||this;return h.segWidth=s,h.segHeight=o,h.width=t,h.height=i,h.build(),h}return Jn(e,n),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,i=[],s=[],o=[],h=this.segWidth-1,u=this.segHeight-1,b=this.width/h,x=this.height/u,w=0;w<t;w++){var E=w%this.segWidth,C=w/this.segWidth|0;i.push(E*b,C*x),s.push(E/h,C/u)}var L=h*u;for(w=0;w<L;w++){var k=w%h,U=w/h|0,V=U*this.segWidth+k,H=U*this.segWidth+k+1,Q=(U+1)*this.segWidth+k,te=(U+1)*this.segWidth+k+1;o.push(V,H,Q,H,te,Q)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Bo),op=function(n){function e(t,i,s){t===void 0&&(t=200),s===void 0&&(s=0);var o=n.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return o.points=i,o._width=t,o.textureScale=s,o.build(),o}return Jn(e,n),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var i=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(t.length<1)){i.data.length/4!==t.length&&(i.data=new Float32Array(4*t.length),s.data=new Float32Array(4*t.length),o.data=new Uint16Array(6*(t.length-1)));var h=s.data,u=o.data;h[0]=0,h[1]=0,h[2]=0,h[3]=1;for(var b=0,x=t[0],w=this._width*this.textureScale,E=t.length,C=0;C<E;C++){var L=4*C;if(this.textureScale>0){var k=x.x-t[C].x,U=x.y-t[C].y,V=Math.sqrt(k*k+U*U);x=t[C],b+=V/w}else b=C/(E-1);h[L]=b,h[L+1]=0,h[L+2]=b,h[L+3]=1}var H=0;for(C=0;C<E-1;C++)L=2*C,u[H++]=L,u[H++]=L+1,u[H++]=L+2,u[H++]=L+2,u[H++]=L+1,u[H++]=L+3;s.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i,s=t[0],o=0,h=0,u=this.buffers[0].data,b=t.length,x=0;x<b;x++){var w=t[x],E=4*x;h=-((i=x<t.length-1?t[x+1]:w).x-s.x),o=i.y-s.y;var C=Math.sqrt(o*o+h*h),L=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=C,h/=C,o*=L,h*=L,u[E]=w.x+o,u[E+1]=w.y+h,u[E+2]=w.x-o,u[E+3]=w.y-h,s=w}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Bo);(function(n){function e(t,i,s){s===void 0&&(s=0);var o=this,h=new op(t.height,i,s),u=new Us(t);return s>0&&(t.baseTexture.wrapMode=$i.REPEAT),(o=n.call(this,h,u)||this).autoUpdate=!0,o}Jn(e,n),e.prototype._render=function(t){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),n.prototype._render.call(this,t)}})(Bs);var ap=function(n){function e(t,i,s){var o=this,h=new sp(t.width,t.height,i,s),u=new Us(Et.WHITE);return(o=n.call(this,h,u)||this).texture=t,o.autoResize=!0,o}return Jn(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,i=this.shader.texture,s=i.width,o=i.height;!this.autoResize||t.width===s&&t.height===o||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,t)},e}(Bs);(function(n){function e(t,i,s,o,h){t===void 0&&(t=Et.EMPTY);var u=this,b=new Bo(i,s,o);b.getBuffer("aVertexPosition").static=!1;var x=new Us(t);return(u=n.call(this,b,x,null,h)||this).autoUpdate=!0,u}Jn(e,n),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,t)}})(Bs);(function(n){function e(t,i,s,o,h){i===void 0&&(i=10),s===void 0&&(s=10),o===void 0&&(o=10),h===void 0&&(h=10);var u=n.call(this,Et.WHITE,4,4)||this;return u._origWidth=t.orig.width,u._origHeight=t.orig.height,u._width=u._origWidth,u._height=u._origHeight,u._leftWidth=i,u._rightWidth=o,u._topHeight=s,u._bottomHeight=h,u.texture=t,u}Jn(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,i=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,i=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t,s=this._topHeight+this._bottomHeight,o=this._height>s?1:this._height/s;return Math.min(i,o)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,i=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var s=1/this._origWidth,o=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=s*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-s*this._rightWidth,i[9]=i[11]=i[13]=i[15]=o*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}})(ap);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hh=function(n,e){return hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},hh(n,e)};function ar(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function Vr(n){return function e(t){return arguments.length===0||ar(t)?e:n.apply(this,arguments)}}function mi(n){return function e(t,i){switch(arguments.length){case 0:return e;case 1:return ar(t)?e:Vr(function(s){return n(t,s)});default:return ar(t)&&ar(i)?e:ar(t)?Vr(function(s){return n(s,i)}):ar(i)?Vr(function(s){return n(t,s)}):n(t,i)}}}function M0(n,e){switch(n){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,i){return e.apply(this,arguments)};case 3:return function(t,i,s){return e.apply(this,arguments)};case 4:return function(t,i,s,o){return e.apply(this,arguments)};case 5:return function(t,i,s,o,h){return e.apply(this,arguments)};case 6:return function(t,i,s,o,h,u){return e.apply(this,arguments)};case 7:return function(t,i,s,o,h,u,b){return e.apply(this,arguments)};case 8:return function(t,i,s,o,h,u,b,x){return e.apply(this,arguments)};case 9:return function(t,i,s,o,h,u,b,x,w){return e.apply(this,arguments)};case 10:return function(t,i,s,o,h,u,b,x,w,E){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function I0(n,e,t){return function(){for(var i=[],s=0,o=n,h=0,u=!1;h<e.length||s<arguments.length;){var b;h<e.length&&(!ar(e[h])||s>=arguments.length)?b=e[h]:(b=arguments[s],s+=1),i[h]=b,ar(b)?u=!0:o-=1,h+=1}return!u&&o<=0?t.apply(this,i):M0(Math.max(0,o),I0(n,i,t))}}function Ch(n){return function e(t,i,s){switch(arguments.length){case 0:return e;case 1:return ar(t)?e:mi(function(o,h){return n(t,o,h)});case 2:return ar(t)&&ar(i)?e:ar(t)?mi(function(o,h){return n(o,i,h)}):ar(i)?mi(function(o,h){return n(t,o,h)}):Vr(function(o){return n(t,i,o)});default:return ar(t)&&ar(i)&&ar(s)?e:ar(t)&&ar(i)?mi(function(o,h){return n(o,h,s)}):ar(t)&&ar(s)?mi(function(o,h){return n(o,i,h)}):ar(i)&&ar(s)?mi(function(o,h){return n(t,o,h)}):ar(t)?Vr(function(o){return n(o,i,s)}):ar(i)?Vr(function(o){return n(t,o,s)}):ar(s)?Vr(function(o){return n(t,i,o)}):n(t,i,s)}}}(function(n){function e(t,i){i===void 0&&(i=!0);var s=n.call(this,t[0]instanceof Et?t[0]:t[0].texture)||this;return s._textures=null,s._durations=null,s._autoUpdate=i,s._isConnectedToTicker=!1,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s._playing=!1,s._previousFrame=null,s.textures=t,s}(function(t,i){function s(){this.constructor=t}hh(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)})(e,n),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Dr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Dr.shared.add(this.update,this,ji.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var i=this.animationSpeed*t,s=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var h=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],s=0;s<t.length;++s)i.push(Et.from(t[s]));return new e(i)},e.fromImages=function(t){for(var i=[],s=0;s<t.length;++s)i.push(Et.from(t[s]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Et)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<t.length;i++)this._textures.push(t[i].texture),this._durations.push(t[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Dr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Dr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})})(Ns),Hi.add(Cd,kd,Ld,E2,Y2,t0,q2,ep,Wd,A2,T2,W2,pc,Gd);var Uo=Array.isArray||function(n){return n!=null&&n.length>=0&&Object.prototype.toString.call(n)==="[object Array]"};function hp(n,e,t){return function(){if(arguments.length===0)return t();var i=arguments[arguments.length-1];if(!Uo(i)){for(var s=0;s<n.length;){if(typeof i[n[s]]=="function")return i[n[s]].apply(i,Array.prototype.slice.call(arguments,0,-1));s+=1}if(function(o){return o!=null&&typeof o["@@transducer/step"]=="function"}(i))return e.apply(null,Array.prototype.slice.call(arguments,0,-1))(i)}return t.apply(this,arguments)}}var up=function(){return this.xf["@@transducer/init"]()};function yl(n){for(var e,t=[];!(e=n.next()).done;)t.push(e.value);return t}function bl(n,e,t){for(var i=0,s=t.length;i<s;){if(n(e,t[i]))return!0;i+=1}return!1}function vi(n,e){return Object.prototype.hasOwnProperty.call(e,n)}var Ms=typeof Object.is=="function"?Object.is:function(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e},xl=Object.prototype.toString,R0=function(){return xl.call(arguments)==="[object Arguments]"?function(n){return xl.call(n)==="[object Arguments]"}:function(n){return vi("callee",n)}}(),lp=!{toString:null}.propertyIsEnumerable("toString"),Al=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Tl=function(){return arguments.propertyIsEnumerable("length")}(),cp=function(n,e){for(var t=0;t<n.length;){if(n[t]===e)return!0;t+=1}return!1},El=Vr(typeof Object.keys!="function"||Tl?function(n){if(Object(n)!==n)return[];var e,t,i=[],s=Tl&&R0(n);for(e in n)!vi(e,n)||s&&e==="length"||(i[i.length]=e);if(lp)for(t=Al.length-1;t>=0;)vi(e=Al[t],n)&&!cp(i,e)&&(i[i.length]=e),t-=1;return i}:function(n){return Object(n)!==n?[]:Object.keys(n)}),uh=Vr(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)});function wl(n,e,t,i){var s=yl(n);function o(h,u){return Oh(h,u,t.slice(),i.slice())}return!bl(function(h,u){return!bl(o,u,h)},yl(e),s)}function Oh(n,e,t,i){if(Ms(n,e))return!0;var s,o,h=uh(n);if(h!==uh(e))return!1;if(typeof n["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof n["fantasy-land/equals"]=="function"&&n["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](n);if(typeof n.equals=="function"||typeof e.equals=="function")return typeof n.equals=="function"&&n.equals(e)&&typeof e.equals=="function"&&e.equals(n);switch(h){case"Arguments":case"Array":case"Object":if(typeof n.constructor=="function"&&(s=n.constructor,((o=String(s).match(/^function (\w*)/))==null?"":o[1])==="Promise"))return n===e;break;case"Boolean":case"Number":case"String":if(typeof n!=typeof e||!Ms(n.valueOf(),e.valueOf()))return!1;break;case"Date":if(!Ms(n.valueOf(),e.valueOf()))return!1;break;case"Error":return n.name===e.name&&n.message===e.message;case"RegExp":if(n.source!==e.source||n.global!==e.global||n.ignoreCase!==e.ignoreCase||n.multiline!==e.multiline||n.sticky!==e.sticky||n.unicode!==e.unicode)return!1}for(var u=t.length-1;u>=0;){if(t[u]===n)return i[u]===e;u-=1}switch(h){case"Map":return n.size===e.size&&wl(n.entries(),e.entries(),t.concat([n]),i.concat([e]));case"Set":return n.size===e.size&&wl(n.values(),e.values(),t.concat([n]),i.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var b=El(n);if(b.length!==El(e).length)return!1;var x=t.concat([n]),w=i.concat([e]);for(u=b.length-1;u>=0;){var E=b[u];if(!vi(E,e)||!Oh(e[E],n[E],x,w))return!1;u-=1}return!0}var fp=mi(function(n,e){return Oh(n,e,[],[])});function lh(n){return Object.prototype.toString.call(n)==="[object Object]"}function C0(n){return Object.prototype.toString.call(n)==="[object String]"}var dp=Vr(function(n){return!!Uo(n)||!!n&&typeof n=="object"&&!C0(n)&&(n.length===0||n.length>0&&n.hasOwnProperty(0)&&n.hasOwnProperty(n.length-1))}),Sl=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function pp(n,e,t){return function(i,s,o){if(dp(o))return n(i,s,o);if(o==null)return s;if(typeof o["fantasy-land/reduce"]=="function")return e(i,s,o,"fantasy-land/reduce");if(o[Sl]!=null)return t(i,s,o[Sl]());if(typeof o.next=="function")return t(i,s,o);if(typeof o.reduce=="function")return e(i,s,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function _p(n,e,t){for(var i=0,s=t.length;i<s;){if((e=n["@@transducer/step"](e,t[i]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i+=1}return n["@@transducer/result"](e)}var mp=mi(function(n,e){return M0(n.length,function(){return n.apply(e,arguments)})});function gp(n,e,t){for(var i=t.next();!i.done;){if((e=n["@@transducer/step"](e,i.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i=t.next()}return n["@@transducer/result"](e)}function vp(n,e,t,i){return n["@@transducer/result"](t[i](mp(n["@@transducer/step"],n),e))}var yp=pp(_p,vp,gp),bp=function(){function n(e){this.f=e}return n.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},n.prototype["@@transducer/result"]=function(e){return e},n.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},n}(),xp=Vr(function(n){return n==null});function O0(n,e,t){if(t||(t=new Ap),function(o){var h=typeof o;return o==null||h!="object"&&h!="function"}(n))return n;var i,s=function(o){var h=t.get(n);if(h)return h;for(var u in t.set(n,o),n)Object.prototype.hasOwnProperty.call(n,u)&&(o[u]=n[u]);return o};switch(uh(n)){case"Object":return s(Object.create(Object.getPrototypeOf(n)));case"Array":return s([]);case"Date":return new Date(n.valueOf());case"RegExp":return i=n,new RegExp(i.source,i.flags?i.flags:(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.sticky?"y":"")+(i.unicode?"u":"")+(i.dotAll?"s":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return n.slice();default:return n}}var Ap=function(){function n(){this.map={},this.length=0}return n.prototype.set=function(e,t){const i=this.hash(e);let s=this.map[i];s||(this.map[i]=s=[]),s.push([e,t]),this.length+=1},n.prototype.hash=function(e){let t=[];for(var i in e)t.push(Object.prototype.toString.call(e[i]));return t.join()},n.prototype.get=function(e){if(this.length<=180){for(const s in this.map){const o=this.map[s];for(let h=0;h<o.length;h+=1){const u=o[h];if(u[0]===e)return u[1]}}return}const t=this.hash(e),i=this.map[t];if(i)for(let s=0;s<i.length;s+=1){const o=i[s];if(o[0]===e)return o[1]}},n}();function Tp(n,e){return function(){var t=arguments.length;if(t===0)return e();var i=arguments[t-1];return Uo(i)||typeof i[n]!="function"?e.apply(this,arguments):i[n].apply(i,Array.prototype.slice.call(arguments,0,t-1))}}var Ep=function(){function n(e,t,i,s){this.valueFn=e,this.valueAcc=t,this.keyFn=i,this.xf=s,this.inputs={}}return n.prototype["@@transducer/init"]=up,n.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(vi(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},n.prototype["@@transducer/step"]=function(e,t){var i=this.keyFn(t);return this.inputs[i]=this.inputs[i]||[i,O0(this.valueAcc)],this.inputs[i][1]=this.valueFn(this.inputs[i][1],t),e},n}();function wp(n,e,t){return function(i){return new Ep(n,e,t,i)}}var Sp=I0(4,[],hp([],wp,function(n,e,t,i){var s,o=(s=function(h,u){var b=t(u),x=n(vi(b,h)?h[b]:O0(e),u);return x&&x["@@transducer/reduced"]?function(w){return w&&w["@@transducer/reduced"]?w:{"@@transducer/value":w,"@@transducer/reduced":!0}}(h):(h[b]=x,h)},new bp(s));return yp(o,{},i)})),Pp=mi(function(n,e){return e==null||e!=e?n:e}),Mp=Vr(function(n){return n!=null&&typeof n["fantasy-land/empty"]=="function"?n["fantasy-land/empty"]():n!=null&&n.constructor!=null&&typeof n.constructor["fantasy-land/empty"]=="function"?n.constructor["fantasy-land/empty"]():n!=null&&typeof n.empty=="function"?n.empty():n!=null&&n.constructor!=null&&typeof n.constructor.empty=="function"?n.constructor.empty():Uo(n)?[]:C0(n)?"":lh(n)?{}:R0(n)?function(){return arguments}():function(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}(n)?n.constructor.from(""):void 0}),Ip=mi(Tp("groupBy",Sp(function(n,e){return n.push(e),n},[]))),D0=function(n,e){switch(arguments.length){case 0:return D0;case 1:return function t(i){return arguments.length===0?t:Ms(n,i)};default:return Ms(n,e)}},Rp=typeof Object.assign=="function"?Object.assign:function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),t=1,i=arguments.length;t<i;){var s=arguments[t];if(s!=null)for(var o in s)vi(o,s)&&(e[o]=s[o]);t+=1}return e},va=mi(function(n,e){return e instanceof n||e!=null&&(e.constructor===n||n.name==="Object"&&typeof e=="object")}),Cp=Vr(function(n){return n!=null&&fp(n,Mp(n))}),Op=Vr(function(n){return Rp.apply(null,[{}].concat(n))}),Dp=Ch(function(n,e,t){var i,s={};for(i in t=t||{},e=e||{})vi(i,e)&&(s[i]=vi(i,t)?n(i,e[i],t[i]):e[i]);for(i in t)vi(i,t)&&!vi(i,s)&&(s[i]=t[i]);return s}),$p=Ch(function n(e,t,i){return Dp(function(s,o,h){return lh(o)&&lh(h)?n(e,o,h):e(s,o,h)},t,i)}),Lp=Ch(function(n,e,t){return $p(function(i,s,o){return n(s,o)},e,t)});class Ge{static mixin(e,...t){for(const i of t)for(const s of Object.getOwnPropertyNames(i.prototype))e.prototype.hasOwnProperty(s)||Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(i.prototype,s));return e}static mixinProperty(e,...t){if(!e)return e;for(const i of t)if(i)for(const s of Object.keys(i))e[s]=i[s];return e}static isNotValid(e){return xp(e)||D0(e,NaN)||Cp(e)}static isValid(e){return!Ge.isNotValid(e)}static random(e=0,t=1,i=null){e>t&&(t=e);const s=Math.random()*(t-e)+e;return i==="floor"?Math.floor(s):i==="ceil"?Math.ceil(s):s}static groupBy(e,t){return Ip(e)(t)}static is(e,t){return va(e,t)}static mergeAll(...e){return Op(e)}static mergeDeepWith(...e){let t={};for(const s of e)t=Lp(i,t,s);return t;function i(s,o){return va(Array,s)&&va(Array,o)?s.concat(o):o}}static T(){return!0}static F(){return!1}static clamp(e,t,i){return e>t&&(t=e),i<e?e:i>t?t:i}static defaultTo(e,t){return Pp(e,t)}static sayHello(){const e=[`
`,"%c%c  wl-live2d v1.0.4 -  !!  %c",`%c

`],t=["background: linear-gradient(to right, #ff00cc, #ffcc00);padding: 8px 30px;font-size: 1em;","background: linear-gradient(to right, #ff4fa9, #ffa233) text, linear-gradient(to right, #ffcc00, #6fff66, #00ffcc) border-box;color: transparent;padding: 8px 30px;font-size: 1em;","background: linear-gradient(to right, #00ffcc, #ff00cc);padding: 8px 30px;font-size: 1em;",""];console.log(e.join(""),...t)}}class Ot{}Ot.init=Symbol("init"),Ot.destroy=Symbol("destroy"),Ot.modelStart=Symbol("model-start"),Ot.modelLoaded=Symbol("model-loaded"),Ot.modelError=Symbol("model-error"),Ot.fadeStart=Symbol("fade-start"),Ot.fadeEnd=Symbol("fade-end"),Ot.fadeCancel=Symbol("fade-cancel"),Ot.motionStart=Symbol("motion-start"),Ot.motionFinish=Symbol("motion-finish");class Dh{constructor(e){if(Ge.isNotValid(e))throw Error("live2d is not valid");this._live2d=e,this._live2d.event.once(Ot.init,this.init,this),this._live2d.event.once(Ot.destroy,this.destroy,this)}get live2d(){return this._live2d}get options(){return this._live2d.data}get app(){return this._live2d.app}get event(){return this._live2d.event}get ref(){return this._live2d.ref}init(){}destroy(){this.event.removeListener(Ot.init,this.destroy,this),this.event.removeListener(Ot.destroy,this.destroy,this)}}var Pl=Math.pow;const Fp=new Bt;class kp extends Fs{constructor(){super(),this.initialized=!1,this.texts=[],this.strokeWidth=4,this.normalColor=14883354,this.activeColor=2017330,this.interactive=!0,this.on("added",this.init).on("pointermove",this.onPointerMove)}init(){const e=this.parent.internalModel,t=new On({fontSize:24,fill:"#ffffff",stroke:"#000000",strokeThickness:4});this.texts=Object.keys(e.hitAreas).map(i=>{const s=new Ih(i,t);return s.visible=!1,this.addChild(s),s})}onPointerMove(e){const t=this.parent.hitTest(e.data.global.x,e.data.global.y);this.texts.forEach(i=>{i.visible=t.includes(i.text)})}_render(e){const t=this.parent.internalModel,i=1/Math.sqrt(Pl(this.transform.worldTransform.a,2)+Pl(this.transform.worldTransform.b,2));this.texts.forEach(s=>{this.lineStyle({width:this.strokeWidth*i,color:s.visible?this.activeColor:this.normalColor});const o=t.getDrawableBounds(t.hitAreas[s.text].index,Fp),h=t.localTransform;o.x=o.x*h.a+h.tx,o.y=o.y*h.d+h.ty,o.width=o.width*h.a,o.height=o.height*h.d,this.drawRect(o.x,o.y,o.width,o.height),s.x=o.x+this.strokeWidth*i,s.y=o.y+this.strokeWidth*i,s.scale.set(i)}),super._render(e),this.clear()}}class Xi{constructor(e=null){Ge.mixinProperty(this,e),this.condition=(e==null?void 0:e.condition)??Ge.T,this.text=(e==null?void 0:e.text)??"",this.priority=(e==null?void 0:e.priority)??Xi.priority,this.type=(e==null?void 0:e.type)??null}}Xi.priority=2;class Ml{constructor(e=null){Ge.mixinProperty(this,e),this.path=(e==null?void 0:e.path)??"",this.volume=(e==null?void 0:e.volume)??.5,this.scale=(e==null?void 0:e.scale)??1,this.rotate=(e==null?void 0:e.rotate)??0,this.position=(e==null?void 0:e.position)??{x:0,y:0},this.backgroundColor=(e==null?void 0:e.backgroundColor)??"transparent",this.width=(e==null?void 0:e.width)??null,this.height=(e==null?void 0:e.height)??null,this.motionPreload=(e==null?void 0:e.motionPreload)??n0.NONE}}class Np{constructor(e=null){Ge.mixinProperty(this,e),this.sayHello=(e==null?void 0:e.sayHello)??!0,this.transitionTime=(e==null?void 0:e.transitionTime)??500,this.models=(e==null?void 0:e.models)??[],this.tips=(e==null?void 0:e.tips)??null,this.menus=(e==null?void 0:e.menus)??["home","switchModule","switchTexture","capture","info","quit"],this.selector=(e==null?void 0:e.selector)??"",this.fixed=(e==null?void 0:e.fixed)??!0,this.plugins=(e==null?void 0:e.plugins)??[],this.drag=(e==null?void 0:e.drag)??!0,this.homePath=(e==null?void 0:e.homePath)??"",this.hitFrame=(e==null?void 0:e.hitFrame)??!1,this.dockedRight=(e==null?void 0:e.dockedRight)??!0}}class Bp{constructor(e=null){this.parent=(e==null?void 0:e.parent)??document.body,this.wrapper=(e==null?void 0:e.wrapper)??document.createElement("div"),this.canvas=(e==null?void 0:e.canvas)??document.createElement("canvas"),this.tips=(e==null?void 0:e.tips)??document.createElement("div"),this.menus=(e==null?void 0:e.menus)??document.createElement("div"),this.other=(e==null?void 0:e.other)??document.createElement("div")}}class Up{constructor(e=null){Ge.mixinProperty(this,e),this.minWidth=(e==null?void 0:e.minWidth)??230,this.minHeight=(e==null?void 0:e.minHeight)??100,this.offsetX=(e==null?void 0:e.offsetX)??0,this.offsetY=(e==null?void 0:e.offsetY)??0,this.duration=(e==null?void 0:e.duration)??3e3,this.interval=(e==null?void 0:e.interval)??5e3,this.message=(e==null?void 0:e.message)??[],this.drag=(e==null?void 0:e.drag)??!0,this.talk=(e==null?void 0:e.talk)??!0,this.talkInterval=(e==null?void 0:e.talkInterval)??3e4,this.talkApis=(e==null?void 0:e.talkApis)??[],this.motionMessage=(e==null?void 0:e.motionMessage)??!0}}class Gp extends Dh{constructor(){super(...arguments),this._hitAreaFrames=null,this._modelId=0,this._textureId=0,this._model=null,this._currentMotion=null}get data(){return this._data}get modelId(){return this._modelId}set modelId(e){this._modelId=Ge.clamp(0,this._data.length-1,e),localStorage.setItem("model-id",`${this._modelId}`)}get textureId(){return this._textureId}set textureId(e){this._textureId=Ge.clamp(0,this.textureMaxIndex,e),localStorage.setItem("texture-id",`${this._textureId}`)}get textureMaxIndex(){let e=this.modelData;return Ge.is(Array,e)?e.length-1:0}get model(){return this._model}get modelData(){return this._data[this.modelId]}get currentMotion(){return this._currentMotion}get backgroundColor(){let e=this.modelData;return Ge.is(Array,e)&&(e=e[this.textureId]),(e==null?void 0:e.backgroundColor)??"transparent"}}class Xp extends Gp{constructor(e,t=[]){super(e);const i=s=>Ge.is(Array,s)?s.map(i):new Ml(s);this._data=Ge.is(Array,t)?t.map(i):[],this.modelId=Ge.defaultTo(0,parseInt(localStorage.getItem("model-id")??"")),this.textureId=Ge.defaultTo(0,parseInt(localStorage.getItem("texture-id")??""))}init(){this.loadModel(this.modelId,this.textureId).catch(Ge.F)}destroy(){var e;super.destroy(),(e=this._model)==null||e.destroy(),this._model=null,this._currentMotion=null}async loadModel(e,t=0){var b,x;const i=this.app.stage,s=this.event;let o=this.data[e];if(o=Ge.is(Array,o)?o[t]:o,Ge.isNotValid(o))return void s.emit(Ot.modelError,new Error(""));s.emit(Ot.modelStart);let h=o.path;Ge.isNotValid(h)&&(h="https://fastly.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/shizuku/shizuku.model.json");const u=await window.ILive2DModel.from(h,{motionPreload:o.motionPreload,crossOrigin:"anonymous"}).catch(w=>w);if(Ge.is(Error,u))return s.emit(Ot.modelError,u),s.emit(Ot.modelLoaded,null),void await this.live2d.tips.notify(u.message);this._model=u,i.removeChildren(0,i.children.length),this.modelId=e,this.textureId=t,u.x=((b=o.position)==null?void 0:b.x)??0,u.y=((x=o.position)==null?void 0:x.y)??0,u.scale.set(.15*(o.scale??1)),u.rotation=o.rotate??0,o.width&&(u.width=o.width),o.height&&(u.height=o.height),this._bindMotion(u),i.addChild(u),s.emit(Ot.modelLoaded,u)}async switchModel(e,t=0){const i=this.live2d.stage;await i.fadeOut(i.canvas),await this.loadModel(e,t),await i.fadeIn(i.canvas)}async nextModel(){const e=this._data.length-1;e<=0?await this.live2d.tips.notify(""):await this.switchModel(this.modelId>=e?0:this.modelId+1,0)}async nextTexture(){const e=this.textureMaxIndex;e<=0?await this.live2d.tips.notify(""):await this.switchModel(this.modelId,this.textureId>=e?0:this.textureId+1)}async resetModel(){await this.loadModel(this.modelId,this.textureId)}showHitAreaFrames(){this._model!=null&&(this._hitAreaFrames==null&&(this._hitAreaFrames=new kp),this._hitAreaFrames.visible=!0,this.model.addChild(this._hitAreaFrames))}hiddenHitAreaFrames(){var e;this._hitAreaFrames!=null&&(this._hitAreaFrames.visible=!1,(e=this.model)==null||e.removeChild(this._hitAreaFrames))}onModelHit(e,t,i=!1){var s,o;i?(s=this.model)==null||s.once("hit",e,t):(o=this.model)==null||o.on("hit",e,t)}_bindMotion(e){e.on("hit",async i=>{i.find(s=>/head/i.test(s))&&await e.expression()});const t=e.internalModel.motionManager;return t.on("motionStart",(i,s,o)=>{let h=this.modelData;o&&Ge.is(Ml,h)&&(o.volume=h.volume??.5),this._currentMotion=i,this.event.emit(Ot.motionStart,i,s,o)}),t.on("motionFinish",()=>{this._currentMotion=null,this.event.emit(Ot.motionFinish)}),this}}var $0={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}function s(b,x,w){this.fn=b,this.context=x,this.once=w||!1}function o(b,x,w,E,C){if(typeof w!="function")throw new TypeError("The listener must be a function");var L=new s(w,E||b,C),k=t?t+x:x;return b._events[k]?b._events[k].fn?b._events[k]=[b._events[k],L]:b._events[k].push(L):(b._events[k]=L,b._eventsCount++),b}function h(b,x){--b._eventsCount===0?b._events=new i:delete b._events[x]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1)),u.prototype.eventNames=function(){var b,x,w=[];if(this._eventsCount===0)return w;for(x in b=this._events)e.call(b,x)&&w.push(t?x.slice(1):x);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(b)):w},u.prototype.listeners=function(b){var x=t?t+b:b,w=this._events[x];if(!w)return[];if(w.fn)return[w.fn];for(var E=0,C=w.length,L=new Array(C);E<C;E++)L[E]=w[E].fn;return L},u.prototype.listenerCount=function(b){var x=t?t+b:b,w=this._events[x];return w?w.fn?1:w.length:0},u.prototype.emit=function(b,x,w,E,C,L){var k=t?t+b:b;if(!this._events[k])return!1;var U,V,H=this._events[k],Q=arguments.length;if(H.fn){switch(H.once&&this.removeListener(b,H.fn,void 0,!0),Q){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,w),!0;case 4:return H.fn.call(H.context,x,w,E),!0;case 5:return H.fn.call(H.context,x,w,E,C),!0;case 6:return H.fn.call(H.context,x,w,E,C,L),!0}for(V=1,U=new Array(Q-1);V<Q;V++)U[V-1]=arguments[V];H.fn.apply(H.context,U)}else{var te,ie=H.length;for(V=0;V<ie;V++)switch(H[V].once&&this.removeListener(b,H[V].fn,void 0,!0),Q){case 1:H[V].fn.call(H[V].context);break;case 2:H[V].fn.call(H[V].context,x);break;case 3:H[V].fn.call(H[V].context,x,w);break;case 4:H[V].fn.call(H[V].context,x,w,E);break;default:if(!U)for(te=1,U=new Array(Q-1);te<Q;te++)U[te-1]=arguments[te];H[V].fn.apply(H[V].context,U)}}return!0},u.prototype.on=function(b,x,w){return o(this,b,x,w,!1)},u.prototype.once=function(b,x,w){return o(this,b,x,w,!0)},u.prototype.removeListener=function(b,x,w,E){var C=t?t+b:b;if(!this._events[C])return this;if(!x)return h(this,C),this;var L=this._events[C];if(L.fn)L.fn!==x||E&&!L.once||w&&L.context!==w||h(this,C);else{for(var k=0,U=[],V=L.length;k<V;k++)(L[k].fn!==x||E&&!L[k].once||w&&L[k].context!==w)&&U.push(L[k]);U.length?this._events[C]=U.length===1?U[0]:U:h(this,C)}return this},u.prototype.removeAllListeners=function(b){var x;return b?(x=t?t+b:b,this._events[x]&&h(this,x)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u})($0);var Vp=Do($0.exports),jp={models:[{path:"https://fastly.jsdelivr.net/gh/Eikanya/Live2d-model/%E5%B4%A9%E5%9D%8F%E5%AD%A6%E5%9B%AD2/yiselin/model.json",scale:.7},{path:"https://fastly.jsdelivr.net/gh/Eikanya/Live2d-model/%E5%B0%91%E5%A5%B3%E5%89%8D%E7%BA%BF%20girls%20Frontline/live2dold/old/kp31/normal/model.json",scale:.5}],tips:{message:[{text:""},{text:""},{text:""},{text:""},{text:""},{text:"~"},{text:""},{text:""},{text:""},{type:"seasons",date:"01/01",text:"<span></span>{year}"},{type:"seasons",date:"02/14",text:"<span></span>{year}"},{type:"seasons",date:"03/08",text:"<span></span>"},{type:"seasons",date:"03/12",text:"<span></span>"},{type:"seasons",date:"04/01",text:"<span></span>"},{type:"seasons",date:"05/01",text:"<span></span>"},{type:"seasons",date:"06/01",text:"<span></span>"},{type:"seasons",date:"09/03",text:"<span></span>"},{type:"seasons",date:"09/10",text:"<span></span>"},{type:"seasons",date:"10/01",text:"<span></span>"},{type:"seasons",date:"11/05-11/12",text:"<span></span>"},{type:"seasons",date:"12/20-12/31",text:"<span></span>"},{type:"hour",hour:"6-7",text:""},{type:"hour",hour:"8-11",text:""},{type:"hour",hour:"12-13",text:""},{type:"hour",hour:"14-17",text:["","~"]},{type:"hour",hour:"18-19",text:["","~"]},{type:"hour",hour:"20-21",text:""},{type:"hour",hour:"22-23",text:["",""]},{type:"hour",hour:"0-4",text:""},{type:"hour",hour:"0-5",text:""},{type:"event",event:"console",text:""},{type:"event",event:"copy",text:["~","~~"]},{type:"event",event:"visibilitychange",text:""}]},selector:""};class Wr{constructor(){this.name="",this.priority=0,this._live2d=null}get live2d(){return this._live2d}static setContext(e,t){e._live2d=t}install(){}uninstall(){}}class Hp extends Wr{constructor(){super(...arguments),this.name="capture",this.priority=24,this._button=null,this._func=void 0}install(){this.live2d.data.menus.includes(this.name)&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._button.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M220.6 121.2L271.1 96 448 96v96H333.2c-21.9-15.1-48.5-24-77.2-24s-55.2 8.9-77.2 24H64V128H192c9.9 0 19.7-2.3 28.6-6.8zM0 128V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H271.1c-9.9 0-19.7 2.3-28.6 6.8L192 64H160V48c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16l0 16C28.7 64 0 92.7 0 128zM344 304c0 48.6-39.4 88-88 88s-88-39.4-88-88s39.4-88 88-88s88 39.4 88 88z"></path></svg>
    `,this._func=this.downloadImage.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var e;(e=this._button)==null||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),this._button=null}async downloadImage(){const{app:e}=this.live2d,t=e.renderer.plugins.extract.image(e.stage).getAttribute("src");await fetch(t).then(i=>i.blob()).then(i=>{var o;const s=document.createElement("a");s.download=(o=t.split("/").pop())==null?void 0:o.slice(0,40),s.href=URL.createObjectURL(i),document.body.appendChild(s),s.click(),document.body.removeChild(s)})}}class L0 extends Wr{constructor(){super(...arguments),this.name="drag",this._screen={width:0,height:0},this._isLeft=!0,this._element=null,this._event=null}install(){this.live2d.data.drag&&(this._element=this.getDragElement(),this._startFun=this._start.bind(this),this._runFun=this._run.bind(this),this._endFun=this._end.bind(this),this._element.addEventListener("mousedown",this._startFun,{passive:!0}),this._element.addEventListener("touchstart",this._startFun,{passive:!0}))}uninstall(){var e,t;(e=this._element)==null||e.removeEventListener("mousedown",this._startFun),(t=this._element)==null||t.removeEventListener("touchstart",this._startFun),this._element=null}getDragElement(){return this.live2d.stage.wrapper}getWidthHeight(){return{width:Math.min(window.screen.width,window.visualViewport.width,window.innerWidth),height:Math.min(window.screen.height,window.visualViewport.height,window.innerHeight)}}_run(e){var k,U,V;const t=this._element.getBoundingClientRect(),i=((k=e.targetTouches)==null?void 0:k[0])??e,s=((V=(U=this._event)==null?void 0:U.targetTouches)==null?void 0:V[0])??this._event,o=i.screenX-s.screenX,h=i.screenY-s.screenY,u=this._screen.width-t.width,b=this._screen.height-t.height;this._event=e;const{classList:x,style:w}=this._element,E=Ge.clamp(0,u,t.left+o),C=Ge.clamp(0,b,b-t.top-h),L=E<=.5*u;L!==this._isLeft&&((this._isLeft=L)?x.remove("live2d-right"):x.add("live2d-right")),w.left=`${E}px`,w.bottom=`${C}px`}_end(){const e=this._element;e.removeEventListener("mousemove",this._runFun),e.removeEventListener("mouseup",this._endFun),e.removeEventListener("mouseout",this._endFun),e.removeEventListener("touchmove",this._runFun),e.removeEventListener("touchend",this._endFun),e.removeEventListener("touchcancel",this._endFun),e.classList.remove("live2d-drag")}_start(e){this._event=e,this._screen=this.getWidthHeight();const t=this._element;t.classList.add("live2d-drag"),t.addEventListener("mousemove",this._runFun,{passive:!0}),t.addEventListener("mouseup",this._endFun,{passive:!0}),t.addEventListener("mouseout",this._endFun,{passive:!0}),t.addEventListener("touchmove",this._runFun,{passive:!0}),t.addEventListener("touchend",this._endFun,{passive:!0}),t.addEventListener("touchcancel",this._endFun,{passive:!0})}}class Yp extends L0{constructor(){super(...arguments),this.name="tipsDrag"}install(){super.install(),this._element&&this._element.classList.add("live2d-cursor-default")}uninstall(){var e;(e=this._element)==null||e.classList.remove("live2d-cursor-default"),super.uninstall()}getDragElement(){return this.live2d.stage.tips}_start(e){e.stopPropagation(),super._start(e)}_run(e){var x,w,E;e.stopPropagation();const t=((x=e.targetTouches)==null?void 0:x[0])??e,i=((E=(w=this._event)==null?void 0:w.targetTouches)==null?void 0:E[0])??this._event,s=t.screenX-i.screenX,o=t.screenY-i.screenY,h=this._element.offsetTop+o,u=this._element.offsetLeft+s;this._event=e;const b=this._element.style;b.top=`${h}px`,b.left=`${u}px`}}class zp extends Wr{constructor(){super(...arguments),this.name="home",this.priority=48,this._back=null,this._func=void 0}install(){this.live2d.data.menus.includes(this.name)&&(this._back=document.createElement("div"),this._back.className="live2d-menu-item live2d-flex-center",this._back.title="",this._back.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M 25 1.0507812 C 24.7825 1.0507812 24.565859 1.1197656 24.380859 1.2597656 L 1.3808594 19.210938 C 0.95085938 19.550938 0.8709375 20.179141 1.2109375 20.619141 C 1.5509375 21.049141 2.1791406 21.129062 2.6191406 20.789062 L 4 19.710938 L 4 46 C 4 46.55 4.45 47 5 47 L 19 47 L 19 29 L 31 29 L 31 47 L 45 47 C 45.55 47 46 46.55 46 46 L 46 19.710938 L 47.380859 20.789062 C 47.570859 20.929063 47.78 21 48 21 C 48.3 21 48.589063 20.869141 48.789062 20.619141 C 49.129063 20.179141 49.049141 19.550938 48.619141 19.210938 L 25.619141 1.2597656 C 25.434141 1.1197656 25.2175 1.0507812 25 1.0507812 z M 35 5 L 35 6.0507812 L 41 10.730469 L 41 5 L 35 5 z"></path></svg>
    `,this._func=this.backToHome.bind(this),this._back.addEventListener("click",this._func),this.live2d.stage.addMenu(this._back,this.priority))}uninstall(){var e;(e=this._back)==null||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._back),this._back=null}backToHome(){let e=this.live2d.data.homePath;/https?:\/\//.test(e)||(e.startsWith("/")&&(e="/"+e),e=window.location.origin+e),window.location.assign(e)}}class Wp extends Wr{constructor(){super(...arguments),this.name="info",this.priority=16,this._button=null}install(){this.live2d.data.menus.includes(this.name)&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._button.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"></path></svg>
    `,this._button.addEventListener("click",this.openDocs),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var e;(e=this._button)==null||e.removeEventListener("click",this.openDocs),this.live2d.stage.removeMenu(this._button),this._button=null}openDocs(){window.open("https://live2d.doc.nianian.cn/")}}class $h extends Wr{constructor(){super(...arguments),this.name="nullMessage",this.priority=2,this._type=null,this._messages=[]}install(){this._messages=this.live2d.tips.messages,this._messages=this._messages.filter(this.isType.bind(this));for(const e of this._messages)e.condition=this.condition.bind(e),e.priority===Xi.priority&&(e.priority=this.priority)}uninstall(){for(const e of this._messages)this.setDefault(e)}isType(e){return this._type===(e.type??null)&&e.condition===Ge.T}condition(){return!0}setDefault(e){e.condition=Ge.T,e.priority===this.priority&&(e.priority=Xi.priority)}}class Lh extends $h{constructor(){super(...arguments),this.name="eventMessage",this.priority=18,this._type="event",this._event=null}install(){super.install(),this.addListener()}uninstall(){super.uninstall(),this.removeListener()}isType(e){return super.isType(e)&&this._event===(e.event??null)}condition(){return!1}setDefault(e){super.setDefault(e),e.condition=Ge.F}addListener(){}removeListener(){}async notify(){let e=this._messages;if(e.length<=0)return;let t,i=e[Ge.random(0,e.length,"floor")];t=Ge.is(Array,i.text)?i.text[Ge.random(0,i.text.length,"floor")]:i.text,await this.live2d.tips.notify(t)}}class qp extends Lh{constructor(){super(...arguments),this.name="consoleEventMessage",this._open=!1,this._event="console",this._func=void 0}addListener(){var e;this._func=this.notify.bind(this),window.addEventListener("resize",this._func),(e=this._func)==null||e.call(this,null)}removeListener(){window.removeEventListener("resize",this._func)}async notify(){const e=this.isOpen();!this._open&&e&&await super.notify(),this._open=e}isOpen(){return window.outerWidth-window.innerWidth>30||window.outerHeight-window.innerHeight>140}}class Zp extends Lh{constructor(){super(...arguments),this.name="copyEventMessage",this._event="copy",this._func=void 0}addListener(){this._func=this.notify.bind(this),window.addEventListener("copy",this._func)}removeListener(){window.removeEventListener("copy",this._func)}}class Jp extends Lh{constructor(){super(...arguments),this.name="visibilityEventMessage",this._event="visibilitychange",this._show=!0,this._prop=null}addListener(){let e=!0;const t=this.live2d.stage.wrapper.classList,i=Object.getOwnPropertyDescriptor(t.__proto__,"add");this._prop=i;const s=this,o={configurable:i==null?void 0:i.configurable,enumerable:i==null?void 0:i.enumerable,writable:!0,value:function(...h){i==null||i.value.bind(t)(...h);const u=/live2d-opacity-1/.test(t.value);e?e=!u:(!s._show&&u&&s.notify().catch(Ge.F),s._show=u)}};Object.defineProperty(t,"add",o)}removeListener(){const e=this.live2d.stage.wrapper.classList;Object.defineProperty(e,"add",this._prop)}}class Qp extends $h{constructor(){super(...arguments),this.name="hourMessage",this._type="hour",this.priority=8}condition(){this.once===!0&&(this.condition=Ge.F);const e=this.hour+"-",t=new Date().getHours();let[i,s]=e.split("-",2).map(o=>parseInt(o));return!Ge.isNotValid(i)&&(Ge.isNotValid(s)?i===t:i<=t&&t<=s)}}class Kp extends Wr{constructor(){super(...arguments),this.name="motionMessage",this.priority=22}install(){this.live2d.tips.data.motionMessage&&this.live2d.event.on(Ot.motionStart,this.motion,this)}uninstall(){this.live2d.event.off(Ot.motionStart,this.motion,this)}async motion(e,t,i){var E,C,L;if(/idle/.test(e))return;const{tips:s,model:o}=this.live2d,h=o.model.internalModel.settings.json,u=(h==null?void 0:h.motions)||((E=h==null?void 0:h.FileReferences)==null?void 0:E.Motions),b=(L=(C=u==null?void 0:u[e])==null?void 0:C[t])==null?void 0:L.text;if(Ge.isNotValid(b))return;const x=s.duration,w=Ge.isValid(i)?1e3*i.duration:x;s.data.duration=Math.max(w,x),await s.notify(b).finally(()=>s.data.duration=x)}}class e_ extends $h{constructor(){super(...arguments),this.name="seasonsMessage",this.priority=16,this._type="seasons"}condition(){this.once===!0&&(this.condition=Ge.F);const e=new Date(this.date+""),t=e.getDate(),i=e.getMonth()+1;if(Ge.isNotValid(t)||Ge.isNotValid(i))return!1;const s=new Date;return t===s.getDate()&&i===s.getMonth()+1}}class t_ extends Wr{constructor(){super(...arguments),this.name="sentenceMessage",this.priority=20,this._type="talk",this._message=null,this._handler=null,this._talkApis=[]}install(){const{talk:e,talkInterval:t,talkApis:i}=this.live2d.tips.data;e&&(this._message=new Xi,this._message.condition=Ge.F,this._message.priority=2*this.priority,this._message.type=this._type,this._talkApis=[{url:"https://v1.hitokoto.cn/",handle:async s=>(await s.json()).hitokoto},{url:"https://api.nnxv.cn/api/yiyan.php",handle:async s=>(await s.json()).content},{url:"https://tenapi.cn/v2/yiyan",handle:async s=>(await s.json()).msg}],i&&i.length<=0&&i.push(...this._talkApis),this._handler=setInterval(this.getTalkValue.bind(this),t??3e4))}uninstall(){const{talkApis:e}=this.live2d.tips.data;this._handler&&clearInterval(this._handler),this._handler=null,this._message&&this.live2d.tips.removeMessage(this._message),this._message=null;for(const t of this._talkApis){let i=(e==null?void 0:e.indexOf(t))??-1;i>=0&&(e==null||e.splice(i,1))}}condition(e){return this.condition=Ge.F,e.removeMessage(this),!0}async getTalkValue(){const{talkApis:e}=this.live2d.tips.data;try{for(const t of e??[])try{const i=await fetch(t.url,t.init);if(!i.ok)continue;return this._message.text=await t.handle(i),this._message.condition=this.condition.bind(this._message,this.live2d.tips),void this.live2d.tips.addMessage(this._message)}catch{}}catch{}}}class r_ extends Wr{constructor(){super(...arguments),this.name="quit",this.priority=0,this._quit=null,this._show=null,this._hiddenFun=void 0,this._showFun=void 0}install(){this.live2d.data.menus.includes(this.name)&&(this._quit=document.createElement("div"),this._quit.className="live2d-menu-item live2d-flex-center",this._quit.title="",this._quit.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg>
    `,this._show=document.createElement("div"),this._show.className="live2d-fixed live2d-toggle live2d-transition-all live2d-opacity-0 live2d-hidden",this._show.innerHTML="",this._hiddenFun=this.hiddenLive2d.bind(this),this._showFun=this.showLive2d.bind(this),this._quit.addEventListener("click",this._hiddenFun),this._show.addEventListener("click",this._showFun),this.live2d.stage.addMenu(this._quit,this.priority),document.body.appendChild(this._show))}uninstall(){var e,t,i;(e=this._quit)==null||e.removeEventListener("click",this._hiddenFun),(t=this._show)==null||t.removeEventListener("click",this._showFun),this.live2d.stage.removeMenu(this._quit),(i=this._show)==null||i.remove(),this._quit=null,this._show=null}hiddenLive2d(){this.isRight()&&!this._show.classList.contains("live2d-right")&&this._show.classList.add("live2d-right"),this.live2d.stage.fadeOut(null).catch(Ge.F),this.live2d.stage.fadeIn(this._show).catch(Ge.F)}showLive2d(){const{stage:e,model:t}=this.live2d;e.wrapper.classList.remove("live2d-hidden"),t.resetModel().then(()=>{e.fadeIn(e.wrapper).catch(Ge.F),e.fadeOut(this._show).catch(Ge.F)})}isRight(){return this.live2d.stage.isRight()}}class F0 extends Wr{constructor(){super(...arguments),this.name="switch",this._button=null,this._loading=null,this._func=void 0}install(){this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._loading=document.createElement("div"),this._loading.className="live2d-fixed live2d-toggle live2d-transition-all live2d-opacity-0 live2d-hidden",this._loading.innerHTML="",this._func=this.startSwitch.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority)}uninstall(){var e;(e=this._button)==null||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),this._button=null,this._loading=null}async startSwitch(){if(!this.showLoading())return await this.switch();const e=this.live2d.stage;e.isRight()?this._loading.classList.add("live2d-right"):this._loading.classList.remove("live2d-right"),e.other.appendChild(this._loading),await Promise.all([this.switch(),e.fadeIn(this._loading)]),await e.fadeOut(this._loading),e.other.removeChild(this._loading)}showLoading(){return!0}async switch(){}}class i_ extends F0{constructor(){super(...arguments),this.name="switchModule",this.priority=40}install(){this.live2d.data.menus.includes(this.name)&&(super.install(),this._button.title="",this._button.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M320 64c0-35.3-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64s64-28.7 64-64zm-96 96c-35.3 0-64 28.7-64 64v48c0 17.7 14.3 32 32 32h1.8l11.1 99.5c1.8 16.2 15.5 28.5 31.8 28.5h38.7c16.3 0 30-12.3 31.8-28.5L318.2 304H320c17.7 0 32-14.3 32-32V224c0-35.3-28.7-64-64-64H224zM132.3 394.2c13-2.4 21.7-14.9 19.3-27.9s-14.9-21.7-27.9-19.3c-32.4 5.9-60.9 14.2-82 24.8c-10.5 5.3-20.3 11.7-27.8 19.6C6.4 399.5 0 410.5 0 424c0 21.4 15.5 36.1 29.1 45c14.7 9.6 34.3 17.3 56.4 23.4C130.2 504.7 190.4 512 256 512s125.8-7.3 170.4-19.6c22.1-6.1 41.8-13.8 56.4-23.4c13.7-8.9 29.1-23.6 29.1-45c0-13.5-6.4-24.5-14-32.6c-7.5-7.9-17.3-14.3-27.8-19.6c-21-10.6-49.5-18.9-82-24.8c-13-2.4-25.5 6.3-27.9 19.3s6.3 25.5 19.3 27.9c30.2 5.5 53.7 12.8 69 20.5c3.2 1.6 5.8 3.1 7.9 4.5c3.6 2.4 3.6 7.2 0 9.6c-8.8 5.7-23.1 11.8-43 17.3C374.3 457 318.5 464 256 464s-118.3-7-157.7-17.9c-19.9-5.5-34.2-11.6-43-17.3c-3.6-2.4-3.6-7.2 0-9.6c2.1-1.4 4.8-2.9 7.9-4.5c15.3-7.7 38.8-14.9 69-20.5z"></path></svg>
    `)}async switch(){await this.live2d.model.nextModel()}showLoading(){return this.live2d.model.data.length>1}}class n_ extends F0{constructor(){super(...arguments),this.name="switchTexture",this.priority=32}install(){this.live2d.data.menus.includes(this.name)&&(super.install(),this._button.title="",this._button.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM256 272c39.8 0 72-32.2 72-72s-32.2-72-72-72s-72 32.2-72 72s32.2 72 72 72z"></path></svg>
    `)}async switch(){await this.live2d.model.nextTexture()}showLoading(){return this.live2d.model.textureMaxIndex>1}}const s_={FHomePlugin:zp,FDragPlugin:L0,FInfoPlugin:Wp,FQuitPlugin:r_,FCapturePlugin:Hp,FTipsDragPlugin:Yp,FTestFramePlugin:class extends Wr{constructor(){super(...arguments),this.name="hitFrames",this.priority=8,this._button=null,this._icons={open:"",close:""},this._func=void 0}install(){this.live2d.data.hitFrame&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._icons.open='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z"></path><path d="M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176z m0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',this._icons.close='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path d="M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"/><path d="M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"/></svg>',this._button.innerHTML=this._icons.close,this._func=this.clickTestFrame.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var n,e;(n=this._button)==null||n.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),(e=this._button)==null||e.remove(),this._button=null}clickTestFrame(){if(this._button==null)return;let n=//.test(this._button.title);this._button.title=n?"":"",this._button.innerHTML=n?this._icons.open:this._icons.close,n?this.live2d.model.showHitAreaFrames():this.live2d.model.hiddenHitAreaFrames()}},FSwitchModulePlugin:i_,FSwitchTexturePlugin:n_,FHourMessagePlugin:Qp,FMotionMessagePlugin:Kp,FSeasonsMessagePlugin:e_,FTalkMessagePlugin:t_,FCopyMessagePlugin:Zp,FConsoleMessagePlugin:qp,FVisibilityMessagePlugin:Jp};var wn;(function(n){n.fadeIn="fadeIn",n.fadeOut="fadeOut"})(wn||(wn={}));class o_ extends Dh{constructor(e,t=null,i=null){super(e),this._menuFunc=null,i=Ge.mergeAll(i??{},{parent:this.getParentFromSelector(t)}),this._data=new Bp(i),this._menuItems=[],this.event.on(Ot.modelLoaded,this._onModelLoad,this),this.event.off(Ot.init,this.init,this),this.init()}get menuItems(){return this._menuItems}get wrapper(){return this._data.wrapper}get canvas(){return this._data.canvas}get tips(){return this._data.tips}get menus(){return this._data.menus}get other(){return this._data.other}get parent(){return this._data.parent}init(){this.wrapper.appendChild(this.canvas),this.wrapper.appendChild(this.menus),this.wrapper.appendChild(this.tips),this.wrapper.appendChild(this.other),this.parent.appendChild(this.wrapper);const{fixed:e,transitionTime:t,dockedRight:i}=this.options;let s=[e?"live2d-fixed":"live2d-relative",i?"right":""];this.wrapper.classList.add(...s,"live2d-wrapper","live2d-transition-all","live2d-opacity-0"),this.canvas.classList.add("live2d-canvas","live2d-transition-all","live2d-opacity-1"),this.tips.classList.add("live2d-tips","live2d-shake","live2d-transition-all","live2d-opacity-0"),this.menus.classList.add("live2d-menus","live2d-transition-all","live2d-opacity-0"),this.other.classList.add("live2d-other","live2d-transition-all","live2d-opacity-1"),this.canvas.style.setProperty("--live2d-duration",`${t}ms`),this._menuFunc=this._showAndHiddenMenus.bind(this),this.wrapper.addEventListener("mouseover",this._menuFunc),this.wrapper.addEventListener("mouseleave",this._menuFunc),document.addEventListener("touchstart",this._menuFunc)}destroy(){super.destroy(),this.event.removeListener(Ot.modelLoaded,this._onModelLoad,this);const e=this.menuItems.splice(0,this.menuItems.length);for(const t of e)t.element.remove();this.wrapper.removeEventListener("mouseover",this._menuFunc),this.wrapper.removeEventListener("mouseleave",this._menuFunc),document.removeEventListener("touchstart",this._menuFunc),this.wrapper.remove(),this._menuFunc=null,this._data=null}async fadeIn(e=null){await this._fade(e,wn.fadeIn,wn.fadeOut).catch(Ge.F)}async fadeOut(e=null){await this._fade(e,wn.fadeOut,wn.fadeIn).catch(Ge.F)}addMenu(e,t=2){return Ge.is(HTMLElement,e)&&(this.menuItems.push({element:e,priority:t}),this.menuItems.sort((i,s)=>s.priority-i.priority),this.menus.innerHTML="",this.menus.append(...this.menuItems.map(i=>i.element))),this}removeMenu(e){const t=this.menuItems.findIndex(i=>e===i.element);return t>=0&&(this.menuItems.splice(t,1),e.remove()),this}getParentFromSelector(e=null){if(e==null)return document.body;try{let t;try{t=document.querySelector(e)}catch{t=document.evaluate(e,document).iterateNext()}return t??document.body}catch{return document.body}}getTransitionDuration(e){if(!e)return 0;let t=getComputedStyle(e).getPropertyValue("transition-duration");return Ge.defaultTo(0,parseFloat(t))*(/ms/.test(t)?1:1e3)}isRight(){const e=this.wrapper,t=(Math.min(window.screen.width,window.visualViewport.width,window.innerWidth)-e.clientWidth)/2;return e.offsetLeft>t}_onModelLoad(e){this.wrapper.classList.remove("live2d-transition-all"),this.canvas.classList.remove("live2d-transition-all"),this.canvas.style.width=this.wrapper.style.width=`${(e==null?void 0:e.width)??260}px`,this.canvas.style.height=this.wrapper.style.height=`${(e==null?void 0:e.height)??260}px`,this.wrapper.style.backgroundColor=this.live2d.model.backgroundColor,this.isRight()?this.wrapper.classList.add("live2d-right"):this.wrapper.classList.remove("live2d-right"),this.app.resize(),this.wrapper.classList.add("live2d-transition-all"),this.canvas.classList.add("live2d-transition-all"),this.fadeIn().finally(()=>{})}_showAndHiddenMenus(e){let t=e.type==="touchstart"&&this.wrapper.contains(e.touches[0].target);e.type==="mouseover"||t?this.fadeIn(this.menus).catch(Ge.F):this.fadeOut(this.menus).catch(Ge.F)}async _fade(e,t,i){var b,x,w;const s={},o=e??(e=this.wrapper);(b=o[i])==null||b.call(o),(x=o[t])==null||x.call(o),o[t]=(E=!1)=>{var C;for(const L in s)(C=s[L])==null||C.call(s);o[t]=null,this.event.emit(E?Ot.fadeEnd:Ot.fadeCancel,e)},this.event.emit(Ot.fadeStart,e);let h=this.getTransitionDuration(e);async function u(E,C){await new Promise((L,k)=>{const U=setTimeout(()=>{s[C]=null,L()},E);s[C]=()=>{clearTimeout(U),k()}})}!e.classList.contains("live2d-transition-all")&&e.classList.add("live2d-transition-all"),t==wn.fadeIn?(e.classList.remove("live2d-hidden"),await u(20,"wait"),e.classList.remove("live2d-opacity-0"),e.classList.add("live2d-opacity-1"),await u(h-20,"cancel")):(e.classList.remove("live2d-opacity-1"),e.classList.add("live2d-opacity-0"),await u(h,"cancel"),e.classList.add("live2d-hidden")),(w=o[t])==null||w.call(o,!0)}}class a_ extends Dh{get data(){return this._data}get messages(){return this._messages}get text(){return this._text}get stop(){return this._stop}get duration(){return this.data.duration}set duration(e){this.data.duration=e??3e3}get interval(){return this.data.interval}set interval(e){this.data.interval=e??5e3}}class h_ extends a_{constructor(e,t=null){var b;super(e),this._data=Ge.mergeAll(new Up,t??{}),this._messages=((b=this._data.message)==null?void 0:b.map(x=>new Xi(x)))??[],this._stop=!1,this._text="",this._showId=void 0,this._hiddenId=void 0;const i=this.live2d.stage.tips,{minWidth:s,minHeight:o,offsetX:h,offsetY:u}=this.data;i.style.minWidth=`${s}px`,i.style.minHeight=`${o}px`,i.style.setProperty("--tips-offset-x",`${h}px`),i.style.setProperty("--tips-offset-y",`${u}px`)}init(){this._hiddenId=setTimeout(this.startFade.bind(this),this.interval)}destroy(){super.destroy(),this.stopFade(),this._messages=[]}async fadeIn(e=!1){if(this.stop||e&&this._showId!=null&&this._showId>0)return;if(this._clearTime(),this.messages.length<=0||(this._text=this.getRandomMessage()).trim().length<=0)return void(this._showId=setTimeout(()=>{this._showId=void 0,this.fadeIn().catch(Ge.F)},this.interval));let t=this.live2d.stage.tips;t.innerHTML=this._text,await this.live2d.stage.fadeIn(t),this._showId=setTimeout(()=>{this._showId=void 0,this.fadeOut().catch(Ge.F)},this.duration)}async fadeOut(e=!1){e&&this._hiddenId!=null&&this._hiddenId>0||(this._clearTime(),await this.live2d.stage.fadeOut(this.live2d.stage.tips),this._hiddenId=setTimeout(()=>{this._hiddenId=void 0,this.fadeIn().catch(Ge.F)},this.interval))}startFade(){this._stop=!1,this.fadeIn().catch(Ge.F)}stopFade(){this.fadeOut().catch(Ge.F),this._stop=!0}async notify(e){const t=new Xi;t.text=this._text=e,t.priority=99999,this.addMessage(t),await this.fadeIn().catch(Ge.F).finally(()=>this.removeMessage(t))}addMessage(...e){return this.messages.push(...e.filter(t=>Ge.is(Xi,t))),this}removeMessage(...e){for(const t of e){const i=this.messages.indexOf(t);i>=0&&this.messages.splice(i,1)}return this}getRandomMessage(){const e=this.messages.filter(u=>u.condition==null||u.condition()),t=Ge.groupBy(u=>u.priority.toString(),e),i=Object.keys(t).map(u=>parseInt(u)).sort().map(u=>Array.from((b=>{let x=t[b.toString()].length;return{length:Math.ceil(x/5)+Math.max(b,0)}})(u),()=>u)).flat();if(i.length<=0)return this.text;const s=i[Ge.random(0,i.length,"floor")],o=t[s],h=o[Ge.random(0,o.length,"floor")];return Ge.is(Array,h.text)?h.text[Ge.random(0,h.text.length,"floor")]:h.text}_clearTime(){clearInterval(this._showId),clearInterval(this._hiddenId),this._showId=void 0,this._hiddenId=void 0}}class u_{get app(){return this._app}get data(){return this._data}get event(){return this._event}get plugins(){return this._plugins}get stage(){return this._stage}get model(){return this._model}get tips(){return this._tips}get ref(){return this._ref}}class l_ extends u_{onModelStart(e,t,i=!1){this._onAddEvent(Ot.modelStart,e,t,i)}onModelLoaded(e,t,i=!1){this._onAddEvent(Ot.modelLoaded,e,t,i)}onModelError(e,t,i=!1){this._onAddEvent(Ot.modelError,e,t,i)}onFadeStart(e,t,i=!1){this._onAddEvent(Ot.fadeStart,e,t,i)}onFadeEnd(e,t,i=!1){this._onAddEvent(Ot.fadeEnd,e,t,i)}onFadeCancel(e,t,i=!1){this._onAddEvent(Ot.fadeCancel,e,t,i)}onMotionStart(e,t,i=!1){this._onAddEvent(Ot.motionStart,e,t,i)}onMotionFinish(e,t,i=!1){this._onAddEvent(Ot.motionFinish,e,t,i)}_onAddEvent(e,t,i,s=!1){s?this.event.once(e,t,i):this.event.on(e,t,i)}}class Fh extends l_{constructor(e){var t;super(),this._data=e=new Np(e),this._event=new Vp,this._ref={},this._stage=new o_(this,e.selector),this._model=new Xp(this,e.models),this._tips=new h_(this,e.tips),this._plugins=((t=e.plugins)==null?void 0:t.filter(i=>Ge.is(Wr,i)))??[],this._app=new P0({view:this._stage.canvas,backgroundAlpha:0,backgroundColor:0,resolution:2,autoStart:!0,autoDensity:!0,resizeTo:this._stage.wrapper}),this.init()}static create(e=null){return new Fh(Ge.mergeAll(jp,e))}installPlugin(...e){const t=this.plugins.reduce((s,o)=>(s[o.name]=o.name,s),{});e=e.filter(s=>Ge.is(Wr,s)&&!t[s.name]).sort(i),this.plugins.push(...e),this.plugins.sort(i);for(const s of e)Wr.setContext(s,this),s.install();function i(s,o){return o.priority-s.priority}}uninstallPlugin(...e){for(const t of e){const i=this.plugins.indexOf(t);i<0||(t.uninstall(),Wr.setContext(t,null),this.plugins.splice(i,1))}}init(){let e=this.plugins.splice(0,this.plugins.length);e.push(...Object.values(s_).map(t=>new t)),this.installPlugin(...e),this._data.sayHello&&Ge.sayHello(),this._event.emit(Ot.init)}destroy(){const e=this.plugins;this.uninstallPlugin(...e),e.splice(0,e.length),this.app.renderer.destroy(!0),this.event.emit(Ot.destroy)}}(function(n,e){e===void 0&&(e={});var t=e.insertAt;if(typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}})(":root{--tips-bg:#58b0fc;--tips-color:#fff;--tips-shadow:#999;--tips-border-color:#fff;--tips-offset-x:0px;--tips-offset-y:0px;--tips-translate:translate(-50%,-100%);--tips-translate-to:translate(-50%,-105%);--menu-item:pink;--menu-item-hover:#43b1ee;--live2d-duration:500ms;--live2d-anim-duration:1000ms;--live2d-tips-duration:calc(var(--live2d-duration)*2);--toggle-bg:#fa0;--toggle-pos-start:-35px;--toggle-pos-end:-20px;--tips-anim-shake:live2d-shake}.live2d-hidden{display:none}.live2d-fixed{position:fixed}.live2d-relative{position:relative}.live2d-opacity-1{opacity:1;visibility:visible}.live2d-opacity-0{opacity:0;visibility:hidden}.live2d-cursor-default{cursor:default}.live2d-cursor-pointer{cursor:pointer}.live2d-transition-all{transition-duration:var(--live2d-duration);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.live2d-flex-center{align-items:center;display:flex;justify-content:center}.live2d-drag{transition-duration:var(--live2d-duration),0ms;transition-property:all,inset}.live2d-shake{--anim:var(--tips-anim-shake);animation-duration:var(--live2d-anim-duration);animation-fill-mode:none;animation-iteration-count:infinite;animation-name:var(--anim)}.live2d-wrapper{bottom:0;height:auto;left:0;width:-moz-min-content;width:min-content;z-index:5000}.live2d-wrapper.right{left:auto;right:0}.live2d-canvas{position:relative}.live2d-tips{--live2d-duration:var(--live2d-tips-duration);align-items:center;background-color:var(--tips-bg);border:2px solid var(--tips-border-color);border-radius:10px;color:var(--tips-color);display:flex;filter:drop-shadow(0 0 5px var(--tips-shadow));justify-content:center;left:calc(50% + var(--tips-offset-x));overflow:hidden;padding:.625em;top:calc(var(--tips-offset-y));transform:var(--tips-translate)}.live2d-menus,.live2d-tips{position:absolute;text-align:center;z-index:6000}.live2d-menus{right:0;top:10%}.live2d-menu-item{color:var(--menu-item);cursor:pointer;height:30px;width:25px}.live2d-menu-item:hover{color:var(--menu-item-hover)}.live2d-menu-item svg{fill:currentColor;height:25px}.live2d-toggle{background-color:var(--toggle-bg);border-radius:5px;bottom:66px;color:var(--tips-color);cursor:pointer;left:0;padding:5px;transform:translateX(var(--toggle-pos-start));width:60px;writing-mode:vertical-rl;z-index:4000}.live2d-toggle:hover{transform:translateX(var(--toggle-pos-end))}.live2d-toggle.live2d-right{left:auto;right:0;--toggle-pos-start:35px;--toggle-pos-end:20px;writing-mode:vertical-lr}.live2d-right .live2d-menus{left:0;right:auto}@keyframes live2d-shake{0%,to{transform:var(--tips-translate-to) scale(.99)}50%{transform:var(--tips-translate) scale(1)}}"),vh.registerTicker(Dr);const c_=Fh.create;window.wlLive2d=c_,window.ILive2DModel=vh;export{Np as DLive2dOptions,Xi as DMessage,Ml as DModel,Bp as DStage,Up as DTips,Wr as FBasePlugin,F0 as FBaseSwitchPlugin,Hp as FCapturePlugin,qp as FConsoleMessagePlugin,Zp as FCopyMessagePlugin,L0 as FDragPlugin,Lh as FEventMessagePlugin,zp as FHomePlugin,Qp as FHourMessagePlugin,Wp as FInfoPlugin,Kp as FMotionMessagePlugin,$h as FNullMessagePlugin,r_ as FQuitPlugin,e_ as FSeasonsMessagePlugin,i_ as FSwitchModulePlugin,n_ as FSwitchTexturePlugin,t_ as FTalkMessagePlugin,Yp as FTipsDragPlugin,Jp as FVisibilityMessagePlugin,c_ as default,s_ as plugins,c_ as wlLive2d};
